(function(){"use strict";var win=typeof self>"u"?window:self,root=globalThis.Mugine=globalThis.Mugine||{},mod={};const namespace=mod.namespace=function(e,t){var r=root;t==null&&(t={}),e=e.split(".");var a=r,n=e.length;return e.forEach(function(o,s){a[o]==null&&(n-1===s?a[o]=t:a[o]={}),a=a[o]}),t},exportName=mod.exportName=function(e,t){var r=t.length,a,n,o;for(o=0;o<r;o+=2)a=t[o],n=t[o+1],e[a]=n};var hasProp={}.hasOwnProperty;const extend=mod.extend=function(e,t){for(var r in t)hasProp.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=e.__super__=t.prototype,e};var readOnlyFun=function(){throw new ReferenceError};mod.definePropertyReadOnly=function(e,t){var r=t.length,a={},n,o,s;for(s=0;s<r;s+=2)n=t[s],o=t[s+1],a[n]={get:o,set:readOnlyFun,configurable:!0};Object.defineProperties(e,a)};const definePropertyGetSet=mod.definePropertyGetSet=function(e,t){var r=t.length,a={},n,o,s,_;for(_=0;_<r;_+=3)n=t[_],o=t[_+1],s=t[_+2],a[n]={get:o,set:s,configurable:!0};Object.defineProperties(e,a)};mod.debounce=function(e,t,r){var a;return function(){var n=this,o=arguments,s=function(){a=null,r||e.apply(n,o)},_=r&&!a;clearTimeout(a),a=setTimeout(s,t),_&&e.apply(n,o)}},mod.getWndSize=function(){var e=document.documentElement,t=e&&e.clientHeight===0;function r(){var o=document,s=o.createElement("div");s.style.height="2500px",o.body.insertBefore(s,o.body.firstChild);var _=o.documentElement.clientHeight>2400;return o.body.removeChild(s),_}var a=window.top===window;if(typeof document.clientWidth=="number")return{width:document.clientWidth,height:document.clientHeight};if(a&&(t||r())){var n=document.body;return{width:n.clientWidth,height:n.clientHeight}}else return{width:e.clientWidth,height:e.clientHeight}};var jsonpQuene={};const _jsonp=mod._jsonp=function(e,t,r){if(jsonpQuene[e])return jsonpQuene[e].push(r);jsonpQuene[e]=[r];var a=function(s,_){jsonpQuene[e].forEach(function(l){l(s,_)})},n=document.createElement("script");n.src=e,window[t]=function(s){a(null,s),o()},n.onload=function(){n.parentNode&&(a(!0),o())},n.onerror=function(){a(!0),o()};var o=function(){n.parentNode.removeChild(n),delete jsonpQuene[e]};document.body.appendChild(n)};win.MugineRequire=mod.require=function(e){var t=root;return e.split("/").forEach(function(r){if(t=t[r],!t)return console.error("module not found: "+e)}),t},namespace("Utils.Module",mod),exportName(mod,["require",mod.require,"namespace",mod.namespace,"extend",mod.extend,"definePropertyReadOnly",mod.definePropertyReadOnly,"definePropertyGetSet",mod.definePropertyGetSet]);var ActionEvent=function(){};ActionEvent.APPEAR="appear",ActionEvent.CLICK="click",ActionEvent.MOUSEOVER="mouseover",ActionEvent.MOUSEOUT="mouseout",ActionEvent.CHANGE="change",ActionEvent.OTHER="other",ActionEvent.DRAG="drag",ActionEvent.DRAGEND="dragend",ActionEvent.DROP="drop",ActionEvent.DRAGOUT="dragout",ActionEvent.PRESETEND="preset_end",ActionEvent.LIKED="liked",ActionEvent.UNLIKED="unliked",ActionEvent.VIDEOSTART="video_start",ActionEvent.VIDEOPAUSE="video_pause",ActionEvent.VIDEOEND="video_end",ActionEvent.VIDEOAT="video_at",ActionEvent.WIPERFINISH="wiper_finish",ActionEvent.CANVASFINISH="canvas_save_finish",ActionEvent.CONNECTORCONNECTED="connector_connected",ActionEvent.CONNECTORDISCONNECTED="connector_disconnected",ActionEvent.TOUCHSTART="touch_start",ActionEvent.TOUCHEND="touch_end",ActionEvent.SLIDERIGHT="slide_right",ActionEvent.SLIDERIGHTUP="slide_right_up",ActionEvent.SLIDEUP="slide_up",ActionEvent.SLIDELEFTUP="slide_left_up",ActionEvent.SLIDELEFT="slide_left",ActionEvent.SLIDELEFTDOWN="slide_left_down",ActionEvent.SLIDEDOWN="slide_down",ActionEvent.SLIDERIGHTDOWN="slide_right_down",ActionEvent.AUDIOSTART="audio_start",ActionEvent.AUDIOPAUSE="audio_pause",ActionEvent.AUDIOSTOP="audio_stop",ActionEvent.AUDIOAT="audio_at",ActionEvent.ENTERFRAME="appear",ActionEvent.CUSTOMEVENT="custom_event",ActionEvent.BEHAVIOR_SUCCESS="behavior_success",ActionEvent.SCRIPT="script",mod.namespace("Action.ActionEvent",ActionEvent);var userAgent=typeof navigator<"u"?navigator.userAgent:"",Browser$1={realUA:userAgent||"",simulateMobile:!1};if(Browser$1._globalObject=typeof self>"u"?window:self,URLSearchParams&&typeof location<"u"){var usp=new URLSearchParams(location.search);usp.get("force_mobile")&&(Object.defineProperty(navigator,"userAgent",{get:function(){return"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Mobile Safari/537.36"}}),Browser$1.simulateMobile=!0,window.addEventListener("message",function(e){e.data&&e.data.type&&e.data.type==="devicerotation"&&(window.orientation=e.data.orientation)}))}function detect(e){var t=this.os={},r=this.browser={},a=e.match(/DailyNewspaper\/[\d.]+\s?\(\s?(.+)\s?;\s?(.+)\s?;\s?(.+)\s?\)/);if(a&&a.length>=3)if(a[1]==="Android")e="Mozilla/5.0 (Linux; Android "+a[2]+"; "+a[3]+" Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Mobile Safari/537.36";else{var n=a[2].replace(/iOS\s+/,"").replace(/\./g,"_");e="Mozilla/5.0 ("+a[1]+"; CPU "+a[1]+" OS "+n+" like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/"+n.split("_")[0]+".0 Mobile/15A356 Safari/604.1"}var o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=e.match(/(Android);?[\s\/]+([\d.]+)?/),_=!!e.match(/\(Macintosh\; Intel /),l=e.match(/(iPad).*OS\s([\d_]+)/),c=e.match(/(iPod)(.*OS\s([\d_]+))?/),d=!l&&e.match(/(iPhone\sOS)\s([\d_]+)/),f=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=e.match(/Windows Phone ([\d.]+)/),p=f&&e.match(/TouchPad/),v=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),m=e.match(/(BlackBerry).*Version\/([\d.]+)/),T=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),E=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),w=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),x=!g&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),C=x||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if((r.webkit=!!o)&&(r.version=o[1]),s&&(t.android=!0,t.version=s[2]),d&&!c&&(t.ios=t.iphone=!0,t.version=d[2].replace(/_/g,"."),t.iphoneX=screen.availHeight==812&&screen.availWidth==375),d||l){var M=!1;window.addEventListener("pageshow",function(){M&&window.location.reload()}),window.addEventListener("pagehide",function(){M=!0})}(d||l)&&Browser$1._globalObject._mrmcp.type=="article"&&document.addEventListener("visibilitychange",function(){document.hidden||setTimeout(function(){window.location.reload()},2e3)}),l&&(t.ios=t.ipad=!0,t.version=l[2].replace(/_/g,".")),c&&(t.ios=t.ipod=!0,t.version=c[3]?c[3].replace(/_/g,"."):null),u&&(t.wp=!0,t.version=u[1]),f&&(t.webos=!0,t.version=f[2]),p&&(t.touchpad=!0),_&&(t.osx=!0),m&&(t.blackberry=!0,t.version=m[2]),T&&(t.bb10=!0,t.version=T[2]),y&&(t.rimtabletos=!0,t.version=y[2]),E&&(r.playbook=!0),v&&(t.kindle=!0,t.version=v[1]),h&&(r.silk=!0,r.version=h[1]),!h&&t.android&&e.match(/Kindle Fire/)&&(r.silk=!0),g&&(r.chrome=!0,r.version=g[1]),b&&(r.firefox=!0,r.version=b[1]),w&&(r.ie=!0,r.version=w[1]),C&&(_||t.ios)&&(r.safari=!0,_&&(r.version=C[1])),x&&(r.webview=!0),t.tablet=!!(l||E||s&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||w&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&(s||d||f||m||T||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||c||b&&e.match(/Mobile/)||w&&e.match(/Touch/)))}typeof navigator<"u"?detect.call(Browser$1,navigator.userAgent):(Browser$1.os={phone:!0},Browser$1.browser={});var mobile=Browser$1.os.phone||Browser$1.os.tablet;typeof window<"u"&&window.PointerEvent&&navigator.maxTouchPoints>0&&!mobile?(Browser$1.InputStart="pointerdown",Browser$1.InputMove="pointermove",Browser$1.InputEnd="pointerup"):mobile&&!Browser$1.simulateMobile?(Browser$1.InputStart="touchstart",Browser$1.InputMove="touchmove",Browser$1.InputEnd="touchend"):(Browser$1.InputStart="mousedown",Browser$1.InputMove="mousemove",Browser$1.InputEnd="mouseup"),Browser$1.Click="click",Browser$1.enable3DRendering=void 0,Browser$1.isTestEnvir=typeof navigator<"u"&&navigator.userAgent.indexOf("Casperjs")!==-1,Browser$1.prefix=function(){var e=typeof document>"u"?["-webkit-"]:window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||["",""])[1],r="WebKit|Moz|MS".match(new RegExp("("+t+")","i"))[1],a={dom:r,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)};return mod.exportName(a,["css",a.css]),a}();var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",MsTransition:"MSTransitionEnd",transition:"transitionend"};Browser$1.TransitionEnd=transEndEventNames[Browser$1.prefix.js+"Transition"];var testTransitionEnd=function(e){var t=document.createElement("div");document.body.appendChild(t),t.style.cssText+="position:absolute; left:0px; top: -100px;"+Browser$1.prefix.css+"transition:left 20ms;",setTimeout(function(){t.addEventListener(Browser$1.TransitionEnd,function(){e(!0),t.parentNode.removeChild(t)}),setTimeout(function(){t.style.left="10px"})})};if(Browser$1._isSupportWoff=function(){return null},Browser$1.makeTest=function(){testTransitionEnd(function(e){Browser$1.haveTransitionEnd=e})},Browser$1._isServer=typeof window>"u",Browser$1.devicePixelRatio=Math.min(3,Browser$1._globalObject.devicePixelRatio||1),Browser$1._isWeChat=function(){return typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1},Browser$1._weChat=Browser$1._isWeChat(),Browser$1._getWechatJSBridge=function(e){if(!Browser$1._isServer){var t=Browser$1._globalObject;if(t.top===t)t.WeixinJSBridge&&t.WeixinJSBridge._hasInit!==!1?e(t.WeixinJSBridge):document.addEventListener("WeixinJSBridgeReady",function(){e(t.WeixinJSBridge)},!1);else try{t.top.WeixinJSBridge&&t.top.WeixinJSBridge._hasInit!==!1?e(t.top.WeixinJSBridge):document.addEventListener("WeixinJSBridgeReady",function(){e(t.top.WeixinJSBridge)},!1)}catch{t.location.href.indexOf("m_dbg=1")>0&&Mugeda.log("由于跨域，WeixinJSBridge加载失败！")}}},Browser$1._isPreview=function(){return(location.pathname==="/client/preview_css3.html"||location.pathname==="/client/content_preview.html")&&/mugeda.com$/.test(location.host)},Browser$1._getRedirectUrl=function(e){return Browser$1._getWeixinServerHost()+"/server/redirect.php?url="+encodeURIComponent(e)},Browser$1._getWeixinServerHost=function(){var e="//weika.mugeda.com";return Browser$1._globalObject._mrmcp&&Browser$1._globalObject._mrmcp.data_server&&(e=Browser$1._globalObject._mrmcp.data_server),e.indexOf("//")===0&&(typeof location>"u"?e="https:"+e:e=location.protocol+e),e},Browser$1._supportWebP=!1,typeof Image<"u"){var webP="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",img=new Image;img.src=webP,img.onload=function(){Browser$1._supportWebP=img.width>0&&img.height>0}}Browser$1._webPImage=img,Browser$1._needFixScreenCTM=null,Browser$1._checkNeedFixScreenCTM=function(){if(Browser$1._needFixScreenCTM===null){var e=document.createElement("div");e.style.transform="scale(2)",e.innerHTML="<svg></svg>";var t=e.querySelector("svg");document.body.appendChild(e);var r;try{r=t.getScreenCTM()}catch{r=null}document.body.removeChild(e),r&&r.a!==2?Browser$1._needFixScreenCTM=!0:Browser$1._needFixScreenCTM=!1}return Browser$1._needFixScreenCTM};var passiveSupported=!1;try{var options=Object.defineProperty({},"passive",{get:function(){passiveSupported=!0}});window.addEventListener("test",null,options)}catch(e){}Browser$1._passiveSupported=passiveSupported,mod.exportName(Browser$1,["prefix",Browser$1.prefix,"getWechatJSBridge",Browser$1._getWechatJSBridge,"getWeixinServerHost",Browser$1._getWeixinServerHost,"isPC",!Browser$1.os.phone&&!Browser$1.os.tablet,"isPhone",!!Browser$1.os.phone,"isTablet",!!Browser$1.os.tablet,"isIOS",!!Browser$1.os.ios,"isAndroid",!!Browser$1.os.android,"isIPhone",!!Browser$1.os.iphone,"isIPad",!!Browser$1.os.ipad,"isMac",!!Browser$1.os.osx,"isChrome",!!Browser$1.browser.chrome,"isFirefox",!!Browser$1.browser.firefox,"isSafari",!!Browser$1.browser.safari,"isWeChat",Browser$1._isWeChat,"globalObject",Browser$1._globalObject]),mod.namespace("Utils.Browser",Browser$1);var AniObjectTypeEnum=(e=>(e[e.SHAPE_LINE=2001]="SHAPE_LINE",e[e.SHAPE_CURVE=2002]="SHAPE_CURVE",e[e.SHAPE_RECTANGLE=2003]="SHAPE_RECTANGLE",e[e.SHAPE_ELLIPSE=2004]="SHAPE_ELLIPSE",e[e.SHAPE_PICTURE=2005]="SHAPE_PICTURE",e[e.SHAPE_POLYGON=2006]="SHAPE_POLYGON",e[e.SHAPE_SELECT=2007]="SHAPE_SELECT",e[e.SHAPE_SCALE=2008]="SHAPE_SCALE",e[e.SHAPE_ROUNDED=2009]="SHAPE_ROUNDED",e[e.SHAPE_TEXT=2010]="SHAPE_TEXT",e[e.SHAPE_BSHAPE=2011]="SHAPE_BSHAPE",e[e.SHAPE_PROPERTY=2012]="SHAPE_PROPERTY",e[e.SHAPE_NODE=2013]="SHAPE_NODE",e[e.SHAPE_GROUP=2014]="SHAPE_GROUP",e[e.SHAPE_SPLINE=2015]="SHAPE_SPLINE",e[e.SHAPE_ZOOM=2016]="SHAPE_ZOOM",e[e.SHAPE_CAMERA=2017]="SHAPE_CAMERA",e[e.SHAPE_PATH=2018]="SHAPE_PATH",e[e.SHAPE_PENCIL=2019]="SHAPE_PENCIL",e[e.SHAPE_AUDIO=2020]="SHAPE_AUDIO",e[e.SHAPE_CLIP=2021]="SHAPE_CLIP",e[e.SHAPE_VIDEO=2022]="SHAPE_VIDEO",e[e.SHAPE_SPRITE=2023]="SHAPE_SPRITE",e[e.SHAPE_FORM=2024]="SHAPE_FORM",e[e.SHAPE_IMVIDEO=2025]="SHAPE_IMVIDEO",e[e.SHAPE_TIMER=2026]="SHAPE_TIMER",e[e.SHAPE_RANDOM=2027]="SHAPE_RANDOM",e[e.SHAPE_VARIABLE=2028]="SHAPE_VARIABLE",e[e.SHAPE_GYRO=2029]="SHAPE_GYRO",e[e.SHAPE_SLIDE=2030]="SHAPE_SLIDE",e[e.SHAPE_INPUTTEXT=2031]="SHAPE_INPUTTEXT",e[e.SHAPE_COMPONENT=2032]="SHAPE_COMPONENT",e[e.SHAPE_IFRAME=2033]="SHAPE_IFRAME",e[e.SHAPE_CANVAS=2034]="SHAPE_CANVAS",e[e.SHAPE_WIPER=2035]="SHAPE_WIPER",e[e.SHAPE_LIKE=2036]="SHAPE_LIKE",e[e.SHAPE_CHART=2037]="SHAPE_CHART",e[e.SHAPE_CHECKBOX=2038]="SHAPE_CHECKBOX",e[e.SHAPE_FORMSELECT=2039]="SHAPE_FORMSELECT",e[e.SHAPE_RICHTEXT=2040]="SHAPE_RICHTEXT",e[e.SHAPE_RADIOBOX=2041]="SHAPE_RADIOBOX",e[e.SHAPE_AVATAR=2042]="SHAPE_AVATAR",e[e.SHAPE_NICKNAME=2043]="SHAPE_NICKNAME",e[e.SHAPE_CHOOSEIMAGE=2044]="SHAPE_CHOOSEIMAGE",e[e.SHAPE_RECORDAUDIO=2045]="SHAPE_RECORDAUDIO",e[e.SHAPE_VR=2046]="SHAPE_VR",e[e.SHAPE_VOTE=2047]="SHAPE_VOTE",e[e.SHAPE_CONNECTOR=2048]="SHAPE_CONNECTOR",e[e.SHAPE_LOTTERY=2049]="SHAPE_LOTTERY",e[e.SHAPE_DRAGGER=2050]="SHAPE_DRAGGER",e[e.SHAPE_LOCALDATA=2051]="SHAPE_LOCALDATA",e[e.SHAPE_COUNTER=2070]="SHAPE_COUNTER",e[e.SHAPE_RANKING=2071]="SHAPE_RANKING",e[e.SHAPE_REFERENCE=2052]="SHAPE_REFERENCE",e[e.SHAPE_CHECKOUT=2053]="SHAPE_CHECKOUT",e[e.SHAPE_DYNAMICQUESTION=2054]="SHAPE_DYNAMICQUESTION",e[e.SHAPE_DATABASE=2072]="SHAPE_DATABASE",e[e.SHAPE_METABASE=2073]="SHAPE_METABASE",e[e.SHAPE_ACTION=2074]="SHAPE_ACTION",e[e.SHAPE_LIVE=2075]="SHAPE_LIVE",e[e.SHAPE_WEAPP=2076]="SHAPE_WEAPP",e[e.SHAPE_MAP=2077]="SHAPE_MAP",e[e.SHAPE_TIKU_RADIO=2078]="SHAPE_TIKU_RADIO",e[e.SHAPE_TIKU_CHECKBOX=2079]="SHAPE_TIKU_CHECKBOX",e[e.SHAPE_TIKU_SCORE=2080]="SHAPE_TIKU_SCORE",e[e.SHAPE_TIKU_GAP=2081]="SHAPE_TIKU_GAP",e[e.SHAPE_TIKU_AUDIO=2055]="SHAPE_TIKU_AUDIO",e[e.SHAPE_TIKU_CUSTOM=2056]="SHAPE_TIKU_CUSTOM",e[e.SHAPE_TIKU_HAN=2057]="SHAPE_TIKU_HAN",e[e.SHAPE_DRAG=2082]="SHAPE_DRAG",e[e.SHAPE_VOTE_COMPONENT=2083]="SHAPE_VOTE_COMPONENT",e[e.SHAPE_TIKU_JUDGMENT=2084]="SHAPE_TIKU_JUDGMENT",e[e.SHAPE_DATABASE_TABLE=2086]="SHAPE_DATABASE_TABLE",e[e.SHAPE_COMPLEX_TIMER=2085]="SHAPE_COMPLEX_TIMER",e))(AniObjectTypeEnum||{});const shapeTypes=[2001,2002,2003,2004,2006,2009],textLikeTypes=[2010,2040],Lang=globalThis.Lang||{},getAllLayers=e=>{const t=e.pages||[];return(e.layers||[]).concat(t.flatMap(r=>r.layers||[]))},getAllSymbols=e=>e.symbols||[],flatGroup=e=>{let t=[];return(e.items||[]).forEach(r=>{r.type===AniObjectTypeEnum.SHAPE_GROUP?t=t.concat(flatGroup(r)):t.push(r)}),t.push(e),t};function getAllObjects(e){const t=getAllSymbols(e).flatMap(n=>n.layers||[]).flatMap(n=>(n.units||[]).flatMap(o=>o.objects||[])).flatMap(n=>n.type===2014?flatGroup(n):[n]),r=getAllLayers(e).flatMap(n=>(n.units||[]).flatMap(o=>o.objects||[])).flatMap(n=>n.type===2014?flatGroup(n):[n]);return t.concat(r)}const _safeParseBehaviorArray=e=>{try{return JSON.parse(e)}catch{return[]}},getAllBehaviors=e=>getAllObjects(e).filter(a=>a.param.action==="behavior").flatMap(a=>_safeParseBehaviorArray(a.param.behavior)),logicTypeEnum={CHECK_ELEMENT:1,EXPRESSION:2,EXPECTED:3,ENV:4,UNEXPECTED:5};Lang.TL_Line,Lang.TL_Curve,Lang.TL_Rectangle,Lang.TL_Ellipse,Lang.Image,Lang.TL_Polygon,Lang.TL_Select,Lang.TL_Scale,Lang.TL_Rounded,Lang.TL_Text,Lang.TL_Node,Lang.TL_Zoom,Lang.TL_Pencil,Lang.Audio,Lang.TL_Video,Lang[""],Lang.P_form,Lang.TL_Timer,Lang.TL_Complex_Timer,Lang.TL_Random,Lang.TL_Gyro,Lang.TL_Slide,Lang.IT_Input,Lang.IT_IFrame,Lang.TL_Draw,Lang.IT_Wiper,Lang.IT_Like,Lang.TL_Chart,Lang.TL_RichText,Lang.IT_Radio,Lang.IT_Checkbox,Lang.IT_List,Lang.Wechat_Avatar,Lang.Wechat_Nickname,Lang.Wechat_Chooseimage,Lang.Wechat_Recordaudio,Lang.TL_VR,Lang.IT_Vote,Lang.TL_Connector,Lang.bh_lottery,Lang.TL_Dragger,Lang.TL_LocalData,Lang.counter,Lang.ranking,Lang.TL_Aux,Lang.checkout,Lang.database,Lang.P_metabase,Lang.IT_Live,Lang.Wechat_Weapp,Lang.IT_Map,Lang.default_18,Lang.default_19,Lang.default_20,Lang.default_35,Lang.default_36,Lang.IT_Vote_Component,Lang.default_25;const Action=function(e){var t=this;t._event=e,t._behavior=null,t._displayObject=null,t._stage=null,t._logicRefernceAObject=null,t._callback=null,t._actionOnFinish=null,t._liveDisplayObject=null,t._options={}};Action._checkLogic=function(e,t,r){return e=="gt"&&parseFloat(t)>parseFloat(r)||e=="ge"&&parseFloat(t)>=parseFloat(r)||e=="lt"&&parseFloat(t)<parseFloat(r)||e=="le"&&parseFloat(t)<=parseFloat(r)||e=="eq"&&t==r||e=="ne"&&t!=r};var proto$2o=Action.prototype;proto$2o.logicPositive=function(){var that=this,replaceMacros=function(e){var t=that._stage;if(t){var r=t._displayObject._renderManager;e=r._replaceMacros(e)}return e};that._behavior=that._behavior||{};var logic=that._behavior.logic||that._behavior.param&&that._behavior.param._logic||{},logicOk=!1;if(logic.check==logicTypeEnum.CHECK_ELEMENT){logic.element;var property=logic.property,condition=logic.condition,reference=logic.reference;reference=replaceMacros(reference),reference=reference;var object=that._logicRefernceAObject;if(!object&&that._behavior&&that._behavior.param&&that._behavior.param&&that._behavior.param._logic&&that._behavior.param._logic.element){var stageDisplayObject=that._stage._displayObject,RenderManager=stageDisplayObject._renderManager;object=RenderManager.getReferenceElement(that._behavior.param._logic.element,!0)}if(object){var value=object[property];property=="rotate"?value=value*180/Math.PI:property=="alpha"&&(value=value*100),logicOk=Action._checkLogic(condition,value,reference)}}else if(logic.check==logicTypeEnum.EXPRESSION){var expression=logic.expression;try{expression=replaceMacros(expression);var func=new Function("return "+expression+";");logicOk=!!func()}catch{}}else if(logic.check==logicTypeEnum.EXPECTED&&that._liveDisplayObject){var param=that._displayObject._aniData.param,expectedObjects=param.expectedObjects||[],objectName=that._liveDisplayObject._name;expectedObjects.indexOf(objectName)>=0&&(logicOk=!0)}else if(logic.check==logicTypeEnum.UNEXPECTED&&that._liveDisplayObject){var param=that._displayObject._aniData.param,dragObjects=param.dragObjects||[],expectedObjects=param.expectedObjects||[],unExpectedObjects=dragObjects.filter(function(a){return expectedObjects.indexOf(a)===-1}),objectName=that._liveDisplayObject._name;unExpectedObjects.indexOf(objectName)>=0&&(logicOk=!0)}else if(logic.check==logicTypeEnum.ENV){const envExp=logic.envExp;if(envExp)try{logicOk=eval(envExp)}catch(e){console.warn(e),logicOk=!1}else logicOk=!0}else logicOk=!0;return logicOk},proto$2o._setOptions=function(e){e=e||{};for(var t in e)this._options[t]=e[t]},proto$2o.doAction=function(){var e=this;if(e.logicPositive()){var t=Browser$1._globalObject.MugedaBehavior;if(e._event===ActionEvent.CLICK)var r="click";else e._event===ActionEvent.APPEAR&&(r="appear");if(t){if(!e._behavior.object){var a=e._displayObject,n=a._getStage(),o=n._renderManager,s=o._mugeda;e._behavior.object=s._displayObjectHash[a._id]}return t.processAction(e._behavior,r,!0,e._callback)}}},mod.namespace("Action.Action",Action);var ActionAudioControl=function(e,t){ActionAudioControl.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._audioTarget=null};mod.extend(ActionAudioControl,Action);var proto$2n=ActionAudioControl.prototype;proto$2n.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip;var t=e._audioTarget;if(t&&t._audioObject&&t._audioObject._audio){var r=t._audioObject._audio,a=e._behavior.param,n=a.jump_position;a.control_mode=="play"?r.play():a.control_mode=="pause"?r.readyState>0&&r.pause():a.control_mode=="stop"?r.readyState>0&&(r.pause(),r.currentTime=0):a.control_mode=="jump_and_play"?(r.readyState==0&&r.play(),setTimeout(function(){r.pause(),r.currentTime=n,r.play()},500)):a.control_mode=="jump_and_pause"&&(r.readyState==0&&r.play(),setTimeout(function(){r.pause(),r.currentTime=n},500));var o=parseFloat(a.control_volume);isNaN(o)||(r.volume=.01*o);var s=parseFloat(a.control_position);isNaN(s)||(r.currentTime=s)}ActionAudioControl.__super__.doAction.apply(e,arguments)}};var ActionAudio=function(e,t){ActionAudio.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudio,Action);var proto$2m=ActionAudio.prototype;proto$2m.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip,r=e._displayObject;if(t._objectFrames[r._id]){var a=t._objectFrames[r._id]._min,n=t._currentFrame;e._behavior.restart=a==n}ActionAudio.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionAudio",ActionAudio);var ActionAudioPause=function(e,t){ActionAudioPause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudioPause,Action);var proto$2l=ActionAudioPause.prototype;proto$2l.doAction=function(){this.logicPositive()&&Mugeda.stopAudioAll&&Mugeda.stopAudioAll()},mod.namespace("Action.ActionAudioPause",ActionAudioPause);var ActionAudioResume=function(e,t){ActionAudioResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudioResume,Action);var proto$2k=ActionAudioResume.prototype;proto$2k.doAction=function(){this.logicPositive()&&Mugeda.playAudioAll&&Mugeda.playAudioAll()},mod.namespace("Action.ActionAudioResume",ActionAudioResume);var ActionAudioStop=function(e,t){ActionAudioStop.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionAudioStop,Action);var proto$2j=ActionAudioStop.prototype;proto$2j.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip,r=e._displayObject;t._objectFrames[r._id]&&(e._behavior.unit={frameStart:t._objectFrames[r._id]._min}),ActionAudioStop.__super__.doAction.apply(e,arguments)}};var ActionCallPhone=function(e,t){ActionCallPhone.__super__.constructor.apply(this,arguments);var r=this;r.counterType=e,r.behaviorData=t};mod.extend(ActionCallPhone,Action);var proto$2i=ActionCallPhone.prototype;proto$2i.doAction=function(){var e=this,t=e.behaviorData,r=t.phone_number,a=e._stage._displayObject,n=a._renderManager;if(r){var o;if((o=/\{\{(.*)\}\}/.exec(r))!=null){var s=n.getReferenceElement(o[1],!0);if(s){var _=s._getText();_&&window.open("tel:"+_,"_self")}}else window.open("tel:"+r,"_self")}};var ActionCanvasDraw=function(e,t){ActionCanvasDraw.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._canvasTarget={}};mod.extend(ActionCanvasDraw,Action);var proto$2h=ActionCanvasDraw.prototype;proto$2h.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip,e._canvasTarget&&e._canvasTarget._aniData.guid;var t=e._behavior.param||{},r=t.canvas_control;if(e._canvasTarget){var a=e._canvasTarget._drawObject;a?r=="clear"?a.clear():r=="save"&&a.save():console.warn("行为出错：指定的绘图板不存在")}else console.warn("行为出错：指定的绘图板不存在");ActionCanvasDraw.__super__.doAction.apply(e,arguments)}};var ActionCounter$1=function(e,t){ActionCounter$1.__super__.constructor.apply(this,arguments);var r=this;r.counterType=e,r.behaviorData=t};mod.extend(ActionCounter$1,Action);var proto$2g=ActionCounter$1.prototype;proto$2g.doAction=function(){var e=this,t=e.behaviorData,r=t.canvas_name,a=t.pen_color,n=t.pen_width,o=e._stage._displayObject,s=o._renderManager;s.getReferenceElement(r,!0);var _=e._canvasTarget;console.log(a),a&&a.indexOf(" 0)")==-1&&_._drawObject.setColor(a),n&&_._drawObject.setWidth(n)};var ActionChangePicture=function(e,t){ActionChangePicture.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetAObject=[],r._sourceAObject=null};mod.extend(ActionChangePicture,Action);var proto$2f=ActionChangePicture.prototype;proto$2f.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip;var t=e._targetAObject,r=e._sourceAObject;if(t&&r){var a=r._displayObject,n=r.src;if(!n&&a._aniData.type==2034){var o=r.dom.querySelector("canvas");o?n=o.toDataURL("image/png"):r.addEventListener("rendered",function(f){e.doAction()})}if(n)for(var s=0;s<t.length;s++){!t[s]._eventHandler._defaultSrc&&!t[s]._eventHandler.src?t[s]._eventHandler._defaultSrc="no":!t[s]._eventHandler._defaultSrc&&t[s]._eventHandler.src&&(t[s]._eventHandler._defaultSrc=t[s]._eventHandler.src),t[s]._eventHandler._defaultSrc===void 0&&n==t[s]._eventHandler.src&&(t[s]._eventHandler.src=n+"?random="+Math.random()),t[s]._eventHandler.src=n;var _=e._behavior||{},l=_.param||{},c=parseInt(l.keep_value||0);if(c)if(n.indexOf("data:image/")>-1)Mugeda.messageBox("图片转发时保持不支持舞台截图或base64编码格式。");else{var d=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};d.addCustomMugedaParameters(encodeURIComponent("m_"+t[s]._aniData.guid),encodeURIComponent(n))}}}ActionChangePicture.__super__.doAction.apply(e,arguments)}};var ActionCheckout=function(e,t){ActionCheckout.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._serviceId=null};mod.extend(ActionCheckout,Action);var proto$2e=ActionCheckout.prototype;proto$2e.doAction=function(e){return new Promise((t,r)=>{var a=this,n=a._stage._displayObject,o=n._renderManager,s=a._options.onFinish,_=a._options.onFailure;if(!a.logicPositive()){s&&s.doAction.apply(s),t();return}var l=a._behavior,c=l.param||{},d=o.getReferenceElement(c.result_target,!0),f=o.getReferenceElement(c.checkout_target,!0);if(o.getReferenceElement(c.nickname_target,!0),o.getReferenceElement(c.avatar_target,!0),!f){s&&s.doAction.apply(s),t();return}var u=f._getData().param.serviceId,p=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};p.checkout&&p.checkout({serviceId:u},function(v){if(v.status==0){var h=a._stage._displayObject._renderManager._mugeda;a._behavior.mugeda=h,a._behavior.type="submitForm",a._behavior.extraData={serviceId:u,operate:"sign_in",checkoutName:c.checkout_target},a._behavior.param.submit_object={nickname:c.nickname_target,avatar:c.avatar_target},a._callback=function(m){a._behavior.type="submitCheckout",m=m||{},m.status==0?(d&&(d.text="签到成功"),s&&s.doAction.apply(s),t(m)):m.status!==void 0&&(d&&(d.text="签到失败"),_&&_.doAction.apply(_),r(m))},ActionCheckout.__super__.doAction.apply(a,arguments)}else v.status==4?(d&&(d.text=v.desc),_&&_.doAction.apply(_)):(d&&(d.text="签到失败"),_&&_.doAction.apply(_))}),ActionCheckout.__super__.doAction.apply(a,arguments)})};var ActionChooseImage=function(e,t,r){ActionChooseImage.__super__.constructor.apply(this,arguments),r=r||{};var a=this;a._movieClip=t,a._targetAObject=null,a._type=r._type||ActionChooseImage.Type.Image,a._source=r._source||ActionChooseImage.Source.Choose,a._keepValue=r._keepValue===void 0?1:parseInt(r._keepValue)};mod.extend(ActionChooseImage,Action),ActionChooseImage.Type={Image:"image",Text:"text"},ActionChooseImage.Source={Choose:"choose",Value:"value"};var proto$2d=ActionChooseImage.prototype;proto$2d.doAction=function(){var e=this;if(e.logicPositive()){var t=e._behavior,r=t.param||{},a=r.target_name,n=r.cropping_mode;a=!a||a=="undefined"?null:a,e._movieClip;var o=e._targetAObject;if(o){o instanceof Array||(o=[o]);var s=o.length>1,_=o[0].width,l=o[0].height,c=o[0]._displayObject._guid;if(e._source==ActionChooseImage.Source.Choose&&_&&l)var d=function(f){chooseWxImage(f,{width:_,height:l,refId:c,croppingMode:n,guid:c})};else d=e._source;d&&d(function(f){if(f!=null)for(var u in o){var p=o[u],v=p._displayObject;if(e._type==ActionChooseImage.Type.Image){if(p.src=f,p.src)p.src=f;else{var h=v._aniData.param,m=v._aniData.curve||{},T=m.points||[];if(T.length){var y=h.fillInfo||{};y.fillImage=f;var E=new Image;E.src=f,E.displayObject=v,E.onload=function(){this.displayObject._updatedFillImage=this,this.displayObject._dispatchEvent(this.displayObject._changedEvent)}}}var g=e._options.onFinish;g&&g.doAction.apply(g)}else e._type==ActionChooseImage.Type.Text&&(p.text=f);if(s)var b=v._guid;else if(a)b=a;else{var w=p._currentScene;w._id=="_main"?b=v._guid:b=p._currentScene._id+"_"+v._guid}if(e._keepValue){var x=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};x.addCustomMugedaParameters(encodeURIComponent("m_"+b),encodeURIComponent(f))}}}),ActionChooseImage.__super__.doAction.apply(e,arguments)}}};var chooseWxImage=function(e,t){var r=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};r.chooseImage({wx:Browser$1._globalObject.wx,destWidth:t.width,refId:t.refId,guid:t.guid,destHeight:t.height,croppingMode:t.croppingMode,success:function(a){var n=a.url;e(n)},error:function(a){alert(`在获取图片时出错，请稍后重试。

错误信息：`+a.desc)}})},Color=function(e,t,r,a){e=e*1||0,t=t*1||0,r=r*1||0,a=a==null||isNaN(a)?1:a*1;var n=this;n._r=e,n._g=t,n._b=r,n._a=a,mod.definePropertyGetSet(n,["r",n._getR,n._setR,"g",n._getG,n._setG,"b",n._getB,n._setB,"a",n._getA,n._setA]),mod.definePropertyReadOnly(n,["cssText",n._getCssText])},proto$2c=Color.prototype;proto$2c._compareTo=function(e){var t=this;return t._a===e._a&&t._r===e._r&&t._g===e._g&&t._b===e._b},proto$2c.clone=function(){var e=this;return new Color(e._r,e._g,e._b,e._a)},proto$2c._getR=function(){return this._r},proto$2c._setR=function(e){this._r=e},proto$2c._getG=function(){return this._g},proto$2c._setG=function(e){this._g=e},proto$2c._getB=function(){return this._b},proto$2c._setB=function(e){this._b=e},proto$2c._getA=function(){return this._a},proto$2c._setA=function(e){this._a=e},proto$2c._getAlpha=function(){return this._a<.001?0:this._a},proto$2c._getCssText=function(){var e=this,t=Math.abs(e._r)<.001?0:e._r,r=Math.abs(e._g)<.001?0:e._g,a=Math.abs(e._b)<.001?0:e._b,n=Math.abs(e._a)<.001?0:e._a;return"rgba("+t+","+r+","+a+","+n+")"},Color._tween=function(e,t,r){return new Color(Math.round(Math.min(255,Math.max(0,(1-r)*(e._r-t._r)+t._r))),Math.round(Math.min(255,Math.max(0,(1-r)*(e._g-t._g)+t._g))),Math.round(Math.min(255,Math.max(0,(1-r)*(e._b-t._b)+t._b))),Math.min(255,Math.max(0,(1-r)*(e._a-t._a)+t._a)))},Color.parse=function(e){var t,r,a,n,o;return e=e.replace(/\s+/g,""),o=e.match(/rgb\(([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+)\)/),o?(t=o[1],r=o[2],a=o[3],n=1,new Color(t,r,a,n)):(o=e.match(/rgba\(([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+),\s*([-+]?[0-9]*\.?[0-9]+)\)/),o?(t=o[1],r=o[2],a=o[3],n=o[4],new Color(t,r,a,n)):(o=e.match(/^#(.)(.)(.)$/),o?(t=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),a=parseInt(o[3]+o[3],16),n=1,new Color(t,r,a,n)):(o=e.match(/#(..)(..)(..)/),o?(t=parseInt(o[1],16),r=parseInt(o[2],16),a=parseInt(o[3],16),n=1,new Color(t,r,a,n)):null)))},mod.namespace("Geom.Color",Color),mod.exportName(Color,["param",Color.parse]);var ActionClipboard=function(e){ActionClipboard.__super__.constructor.apply(this,arguments);var t=this;t._event=e};mod.extend(ActionClipboard,Action);var proto$2b=ActionClipboard.prototype;proto$2b.doAction=function(){var e=this;if(e.logicPositive()){ActionClipboard.__super__.doAction.apply(e,arguments);var t=e._behavior.param,r=t.element_name,a=e._stage._displayObject._renderManager,n=a.getReferenceElement(r,!0),o=t.element_property;if(!n){console.error(r+"没有找到");return}var s=n[o];o==="alpha"?s=s*100:o==="rotate"?s=Math.round(100*s/Math.PI*180)/100:o==="progress"&&(s=Math.round(100*s)/100);var _=document.createElement("textarea");_.value=s,_.style.opacity=0,document.body.appendChild(_),_.select(),document.execCommand("copy"),_.remove()}},mod.namespace("Action.ActionClipboard",ActionClipboard);var ActionComplexTimer=function(e,t){ActionComplexTimer.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetDisplayObject=[]};mod.extend(ActionComplexTimer,Action);var proto$2a=ActionComplexTimer.prototype;proto$2a.doAction=function(){var e=this;if(e.logicPositive()){var t=e._targetDisplayObject,r=e._behavior.param,a=r.timer_status;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]?(a==="start"&&(t[n]._unLockTime=!0),t[n]._timerStatus=a):console.warn("行为出错：指定的定时器不存在");else console.warn("行为出错：指定的定时器不存在");ActionComplexTimer.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionComplexTimer",ActionComplexTimer);var ActionCounter=function(e,t){ActionCounter.__super__.constructor.apply(this,arguments);var r=this;r.counterType=e,r.behaviorData=t};mod.extend(ActionCounter,Action);var proto$29=ActionCounter.prototype;proto$29.doAction=function(){var e=this,t=e.behaviorData,r=t.counter_target,a=t.counter_display,n=e._stage._displayObject,o=n._renderManager,s=o.getReferenceElement(a,!0);if(e.counterType=="getCounter"){var _=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/counter/get";if(!e.logicPositive())return;if(!r){Mugeda.messageBox("获取计数失败"),console.warn("[行为 - 获取计数] 尚未绑定计数器组件");return}window.ajaxHelper({url:_+"?response_type=jsonp&serviceId="+r,type:"jsonp",mode:"postMessage",success:function(c){c.status===0?s&&s._setText(c.total):Mugeda.messageBox("服务器错误,错误码:"+c.status)}})}else if(e.counterType=="setCounter"){var e=this,l=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/counter/update",_=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/counter/get";if(!e.logicPositive())return;if(!r){Mugeda.messageBox("增加计数失败"),console.warn("[行为 - 增加计数] 尚未绑定计数器组件");return}window.ajaxHelper({url:l+"?response_type=jsonp&serviceId="+r,type:"jsonp",mode:"postMessage",success:function(f){f.status===0?s&&s._setText(f.total):Mugeda.messageBox("服务器错误,错误码:"+f.status)}})}};var ActionDatabase=function(e,t){ActionDatabase.__super__.constructor.apply(this,arguments);var r=this;r.dbOperation=e,r.behaviorData=t,r.dbConfig=null,r.getDbConfig()};mod.extend(ActionDatabase,Action);var proto$28=ActionDatabase.prototype;proto$28.getDbConfig=function(){var e=this,t=e.behaviorData,r=t.database_target,a=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};a.getDbConfigData&&a.getDbConfigData(r,function(n){e.dbConfig=n})},proto$28.doAction=function(){var e=this,t=e.behaviorData,r=t.database_target,a=t.database_mode,n=t.database_key,o=t.database_value,s=e._stage._displayObject;s._renderManager;var _=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};e.dbOperation=="getData"?_.getDbData&&_.getDbData(r,function(l){if(l.status==0){var c=e._options.onFinish;if(c&&c.doAction.apply(c),e._targetAObject){var d=l.dataList||[],f=d[0]||{},u=f[n];e._targetAObject.text=u||"NULL"}}else{var p=e._options.onFailure;p&&p.doAction.apply(p)}}):e.dbOperation=="setData"&&_.setDbData&&_.setDbData({serviceId:r,mode:a,key:n,value:o},function(l){if(l.status==0){var c=e._options.onFinish;c&&c.doAction.apply(c)}else{var d=e._options.onFailure;d&&d.doAction.apply(d)}})};var Point=function(e,t){e=e||0,t=t||0;var r=this;r._x=e,r._y=t,mod.definePropertyGetSet(r,["x",r._getX,r._setX,"y",r._getY,r._setY]),mod.definePropertyReadOnly(r,["length",r._getLength])},proto$27=Point.prototype;proto$27._getX=function(){return this._x},proto$27._setX=function(e){this._x=e},proto$27._getY=function(){return this._y},proto$27._setY=function(e){this._y=e},proto$27._getLength=function(){var e=this;return Math.sqrt(e._x*e._x+e._y*e._y)},proto$27.add=function(e){var t=this;return new Point(t._x+e._x,t._y+e._y)},proto$27.clone=function(){var e=this;return new Point(e._x,e._y)},proto$27.copyFrom=function(e){var t=this;t._x=e._x,t._y=e._y},Point.distance=function(e,t){return Math.sqrt((e._x-t._x)*(e._x-t._x)+(e._y-t._y)*(e._y-t._y))},Point.angle=function(e,t){return Math.atan2(t._y-e._y,t._x-e._x)},proto$27.equals=function(e){var t=this;return t._x===e._x&&t._y===e._y},Point.interpolate=function(e,t,r){return new Point(r*(e._x-t._x)+t._x,r*(e._y-t._y)+t._y)},proto$27.normalize=function(e){e=e??1;var t=this;t._x=t._x/t.length*e,t._y=t._y/t.length*e},proto$27.offset=function(e,t){var r=this;r._x+=e,r._y+=t},Point.polar=function(e,t){return new Point(Math.cos(t)*e,Math.sin(t)*e)},proto$27.setTo=function(e,t){this._x=e,this._y=t},proto$27.subtract=function(e){var t=this;return new Point(t._x-e._x,t._y-e._y)},proto$27.toString=function(){var e=this;return"(x="+e._x+", y="+e._y+")"},mod.exportName(proto$27,["add",proto$27.add,"clone",proto$27.clone,"copyFrom",proto$27.copyFrom,"contains",proto$27.contains,"distance",proto$27.distance,"equals",proto$27.equals,"normalize",proto$27.normalize,"offset",proto$27.offset,"setTo",proto$27.setTo,"subtract",proto$27.subtract]),mod.exportName(Point,["distance",Point.distance,"interpolate",Point.interpolate,"polar",Point.polar]),mod.namespace("Geom.Point",Point);var Matrix=function(e,t,r,a,n,o,s){e=e??1,t=t||0,r=r||0,a=a??1,n=n||0,o=o||0;var _=this;_._a=e,_._b=t,_._c=r,_._d=a,_._tx=n,_._ty=o,_._ox=0,_._oy=0,s&&(_._rawSita=s.sita||0,_._rotateCenterX=s.rotateCenterX||0,_._rotateCenterY=s.rotateCenterY||0,_._rawLeft=s.left||0,_._rawTop=s.top||0,_._rawScaleX=s.rawScaleX||1,_._rawScaleY=s.rawScaleY||1),_._rawRotate3dX=null,_._rawRotate3dY=null,_._pers=null},proto$26=Matrix.prototype;proto$26._parseParam=function(e){var t=this,r=e.width,a=e.height,n=r/2,o=a/2;t._rawWidth=e.rawWidth===void 0?r:e.rawWidth,t._rawHeight=e.rawHeight===void 0?a:e.rawHeight,t._rawSita=e.rotate,t._rotateCenterX=isNaN(e.rotateCenterX)?n:e.rotateCenterX,t._rotateCenterY=isNaN(e.rotateCenterY)?o:e.rotateCenterY,t._rawLeft=e.left,t._rawTop=e.top,t._rawDock=e.dock||"none",t._rawScaleX=r/t._rawWidth,t._rawScaleY=a/t._rawHeight,t._rawRotate3dX=e.rotateX||0,t._rawRotate3dY=e.rotateY||0,t._pers=e.pers||25,t._H=Math.max.apply(Math,Matrix._getScaledBox(r,a,t._rawSita))},proto$26._reset=function(){var e=this;e._a=1,e._b=0,e._c=0,e._d=1,e._tx=0,e._ty=0,e._create3DMatrix(!0),e._is3d=!1},proto$26._calMatrixFormRaw=function(){if(this._rawSita!=null){var e=this,t=e._rawSita,r=e._rotateCenterX,a=e._rotateCenterY,n=e._rawLeft,o=e._rawTop,s=e._rawScaleX,_=e._rawScaleY,l=e._rawRotate3dX,c=e._rawRotate3dY,d=e._pers;e._scale(s,_),e._translate(-r,-a),e._rotate(t),e._translate(r,a),e._translate(n,o),(l||c)&&(e._create3DMatrix(),e._translate3D(-n,-o),e._translate3D(-r,-a),e._rotateZ3D(-t),e._rotateY3D(c),e._rotateX3D(l),e._perspective(e._H,d),e._rotateZ3D(t),e._translate3D(r,a),e._translate3D(n,o)),e._translate(-e._ox,-e._oy)}},proto$26._getScaleX=function(){var e=this;if(e._rawScaleX!=null)return e._rawScaleX;var t=e._a,r=e._b;return Math.sqrt(t*t+r*r)},proto$26._getScaleY=function(){var e=this;if(e._rawScaleY!=null)return e._rawScaleY;var t=e._c,r=e._d;return Math.sqrt(t*t+r*r)},proto$26._setScaleX=function(e){var t=this;t._rawScaleX!=null&&(t._rawScaleX=e),t._scale(1/t._getScaleX()*e,1)},proto$26._setScaleY=function(e){var t=this;t._rawScaleY!=null&&(t._rawScaleY=e),t._scale(1,1/t._getScaleY()*e)},proto$26._getRotation=function(){var e=this;if(e._rawSita!==void 0)return e._rawSita;var t=e._a,r=e._b;return Math.atan2(r,t)},proto$26._setRotation=function(e){var t=this;t._rotate(-t._getRotation()+e)},proto$26._create3DMatrix=function(e){var t=this;t._is3d=!0,(e||t._e==null)&&(t._e=0),(e||t._f==null)&&(t._f=0),(e||t._g==null)&&(t._g=0),(e||t._h==null)&&(t._h=0),(e||t._i==null)&&(t._i=1),(e||t._tz==null)&&(t._tz=0),(e||t._m==null)&&(t._m=0),(e||t._n==null)&&(t._n=0),(e||t._o==null)&&(t._o=0),(e||t._p==null)&&(t._p=1)},proto$26._translate=proto$26._translate3D=function(e,t,r){var a=this;a._is3d?(r=r||0,a._tx+=e*a._p,a._ty+=t*a._p,a._tz+=r*a._p,a._a+=e*a._m,a._c+=e*a._n,a._e+=e*a._o,a._b+=t*a._m,a._d+=t*a._n,a._f+=t*a._o,a._g+=r*a._m,a._h+=r*a._n,a._i+=r*a._o):(a._tx+=e,a._ty+=t)},proto$26._scale=function(e,t){var r=this;r._a*=e,r._b*=t,r._c*=e,r._d*=t,r._tx*=e,r._ty*=t},proto$26._scale3d=function(e,t,r){var a=this;a._a*=e,a._b*=t,a._g*=r,a._c*=e,a._d*=t,a._h*=r,a._e*=e,a._f*=t,a._i*=r,a._tx*=e,a._ty*=t,a._tz*=r},proto$26._rotate=proto$26._rotateZ3D=function(e){var t=this;if(e==0)a=0,r=1;else var r=Math.cos(e),a=Math.sin(e);var n=t._a,o=t._b,s=t._c,_=t._d,l=t._tx,c=t._ty;if(t._a=n*r-o*a,t._b=n*a+o*r,t._c=s*r-_*a,t._d=s*a+_*r,t._tx=l*r-c*a,t._ty=l*a+c*r,t._is3d){var d=t._e,f=t._f;t._e=d*r-f*a,t._f=d*a+f*r}};var det3=function(e,t,r,a,n,o,s,_,l){return e*n*l+a*_*r+s*t*o-s*n*r-e*_*o-a*t*l};proto$26._inverse=function(){var e=this,t=e._a,r=e._b,a=e._c,n=e._d,o=e._tx,s=e._ty;if(e._is3d){var _=e._e,l=e._f,c=e._g,d=e._h,f=e._i,u=e._m,p=e._n,v=e._o,h=e._p,m=e._tz,T=det3(n,d,p,l,f,v,s,m,h),y=-det3(a,d,p,_,f,v,o,m,h),E=det3(a,n,p,_,l,v,o,s,h),g=-det3(a,n,d,_,l,f,o,s,m),b=-det3(r,c,u,l,f,v,s,m,h),w=det3(t,c,u,_,f,v,o,m,h),x=-det3(t,r,u,_,l,v,o,s,h),C=det3(t,r,c,_,l,f,o,s,m),M=det3(r,c,u,n,d,p,s,m,h),A=-det3(t,c,u,a,d,p,o,m,h),O=det3(t,r,u,a,n,p,o,s,h),S=-det3(t,r,c,a,n,d,o,s,m),L=-det3(r,c,u,n,d,p,l,f,v),D=det3(t,c,u,a,d,p,_,f,v),$=-det3(t,r,u,a,n,p,_,l,v),R=det3(t,r,c,a,n,d,_,l,f),I=t*T+a*b+_*M+o*L,P=new Matrix(T/I,b/I,y/I,w/I,g/I,C/I);return P._e=E/I,P._f=x/I,P._g=M/I,P._h=A/I,P._i=O/I,P._m=L/I,P._n=D/I,P._o=$/I,P._tz=S/I,P._p=R/I,P}else return I=t*n-a*r,T=n/I,y=-r/I,b=-a/I,w=t/I,L=(a*s-n*o)/I,D=(-t*s+r*o)/I,new Matrix(T,y,b,w,L,D)},Matrix._multiplication=function(e,t){if(e._is3d||t._is3d){e._is3d||e._create3DMatrix(),t._is3d||t._create3DMatrix();var r=new Matrix(e._a*t._a+e._c*t._b+e._e*t._g+e._tx*t._m,e._b*t._a+e._d*t._b+e._f*t._g+e._ty*t._m,e._a*t._c+e._c*t._d+e._e*t._h+e._tx*t._n,e._b*t._c+e._d*t._d+e._f*t._h+e._ty*t._n,e._a*t._tx+e._c*t._ty+e._e*t._tz+e._tx*t._p,e._b*t._tx+e._d*t._ty+e._f*t._tz+e._ty*t._p);return r.e=e._a*t._e+e._c*t._f+e._e*t._i+e._tx*t._o,r.f=e._b*t._e+e._d*t._f+e._f*t._i+e._ty*t._o,r.g=e._g*t._a+e._h*t._b+e._i*t._g+e._tz*t._m,r.h=e._g*t._c+e._h*t._d+e._i*t._h+e._tz*t._n,r.i=e._g*t._e+e._h*t._f+e._i*t._i+e._tz*t._o,r.tz=e._g*t._tx+e._h*t._ty+e._i*t._tz+e._tz*t._p,r.m=e._m*t._a+e._n*t._b+e._o*t._g+e._p*t._m,r.n=e._m*t._c+e._n*t._d+e._o*t._h+e._p*t._n,r.o=e._m*t._e+e._n*t._f+e._o*t._i+e._p*t._o,r.p=e._m*t._tx+e._n*t._ty+e._o*t._tz+e._p*t._p,r}else return new Matrix(e._a*t._a+e._c*t._b,e._b*t._a+e._d*t._b,e._a*t._c+e._c*t._d,e._b*t._c+e._d*t._d,e._a*t._tx+e._c*t._ty+e._tx,e._b*t._tx+e._d*t._ty+e._ty)},proto$26._skew=function(e,t){var r=this,a=r._a,n=r._b,o=r._c,s=r._d,_=r._tx,l=r._ty,c=Math.tan(e),d=Math.tan(t);if(r._a=a+n*c,r._b=a*d+n,r._c=o+s*c,r._d=o*d+s,r._tx=_+l*c,r._ty=_*d+l,r._is3d){var f=r._e,u=r._f;r._e=f+u*c,r._f=f*d+u}},proto$26._transform=function(e,t){if(e instanceof Point)var r=e._x,a=e._y;else r=e,a=t;var n=this,o=n._a,s=n._b,_=n._c,l=n._d,c=n._tx,d=n._ty,f=o*r+_*a+c,u=s*r+l*a+d;if(n._is3d)var p=n._m*r+n._n*a+n._p;else p=1;return t&&e instanceof Point?(e._x=f/p,e._y=u/p,e):new Point(f/p,u/p)},proto$26._rotateY3D=function(e){var t=this,r=t._a,a=t._g,n=t._c,o=t._h,s=t._e,_=t._i,l=t._tx,c=t._tz,d=Math.cos(e),f=Math.sin(e);t._a=r*d-a*f,t._g=-r*f+a*d,t._c=n*d+o*f,t._h=-n*f+o*d,t._e=s*d-_*f,t._i=-s*f+_*d,t._tx=l*d+c*f,t._tz=-l*f+c*d},proto$26._rotateX3D=function(e){var t=this,r=t._b,a=t._g,n=t._d,o=t._h,s=t._f,_=t._i,l=t._ty,c=t._tz,d=Math.cos(-e),f=Math.sin(-e);t._b=r*d-a*f,t._g=r*f+a*d,t._d=n*d-o*f,t._h=n*f+o*d,t._f=s*d-_*f,t._i=s*f+_*d,t._ty=l*d-c*f,t._tz=l*f+c*d},proto$26._perspective=function(e,t,r){r||(t=(3+72*(t||25)*.01)*Math.PI/180);var a=e/2/Math.tan(t/2),n=this;n._m=-n._g/a,n._n=-n._h/a,n._o=-n._i/a,n._p=-n._tz/a+n._p},proto$26._toCssText=function(e,t){var r=this;if(e)r._is3d;else{if(r._is3d&&(r._e!=0||r._f!=0||r._g!=0||r._h!=0||r._tz!=0||r._m!=0||r._n!=0||r._o!=0||r._i!=1||r._p!=1))return"matrix3d("+r._a.toFixed(6)+","+r._b.toFixed(6)+","+r._g.toFixed(6)+","+r._m.toFixed(6)+","+r._c.toFixed(6)+","+r._d.toFixed(6)+","+r._h.toFixed(6)+","+r._n.toFixed(6)+","+r._e.toFixed(6)+","+r._f.toFixed(6)+","+r._i.toFixed(6)+","+r._o.toFixed(6)+","+r._tx.toFixed(6)+","+r._ty.toFixed(6)+","+r._tz.toFixed(6)+","+r._p.toFixed(6)+")";var a=parseFloat(r._tx||0),n=parseFloat(r._ty||0);return a=t?Math.round(a):a,n=t?Math.round(n):n,"matrix("+r._a.toFixed(6)+","+r._b.toFixed(6)+","+r._c.toFixed(6)+","+r._d.toFixed(6)+","+(Math.abs(a)<.01?0:a.toFixed(6))+","+(Math.abs(n)<.01?0:n.toFixed(6))+")"}},proto$26._clone=function(){var e=this,t=new Matrix(e._a,e._b,e._c,e._d,e._tx,e._ty);return t._ox=e._ox,t._oy=e._oy,Object.keys(e).forEach(function(r){t[r]=e[r]}),t},proto$26._compare=function(e){var t=this;return!(e instanceof Matrix)||e._rawLeft!==void 0&&t._rawLeft===void 0?!1:t._is3d||e._is3d?(t._is3d||(t=t._clone(),t._create3DMatrix()),e._is3d||(e=e._clone(),e._create3DMatrix()),t._a===e._a&&t._b===e._b&&t._c===e._c&&t._d===e._d&&t._e===e._e&&t._f===e._f&&t._g===e._g&&t._h===e._h&&t._i===e._i&&t._ox===e._ox&&t._oy===e._oy&&t._tx===e._tx&&t._ty===e._ty&&t._tz===e._tz&&t._m===e._m&&t._n===e._n&&t._o===e._o&&t._p===e._p):t._a===e._a&&t._b===e._b&&t._c===e._c&&t._d===e._d&&t._ox===e._ox&&t._oy===e._oy&&t._tx===e._tx&&t._ty===e._ty&&t._tz===e._tz},proto$26._setRawRotate3dX=function(e){this._rawRotate3dX=e},proto$26._setRawRotate3dY=function(e){this._rawRotate3dY=e},proto$26._setRawPers=function(e){this._pers=e},proto$26._setRawSita=function(e){this._rawSita=e},proto$26._setRawRotateCenterX=function(e){this._rotateCenterX=e},proto$26._setRawRotateCenterY=function(e){this._rotateCenterY=e},proto$26._setRawLeft=function(e){this._rawLeft=e},proto$26._setRawTop=function(e){this._rawTop=e},Matrix._getScaledBox=function(e,t,r){var a=new Point(e,0),n=new Point(0,t),o=new Point(e,t),s=new Point(0,0),_=new Matrix;_._rotate(r),a=_._transform(a,!0),n=_._transform(n,!0),o=_._transform(o,!0);var l=Math.min(a._x,n._x,o._x,s._x),c=Math.max(a._x,n._x,o._x,s._x),d=Math.min(a._y,n._y,o._y,s._y),f=Math.max(a._y,n._y,o._y,s._y);return[c-l,f-d]},Matrix._tween=function(e,t,r,a,n){if(t._rawSita==null||r._rawSita==null)e._a=n*(t._a-r._a)+r._a,e._b=n*(t._b-r._b)+r._b,e._c=n*(t._c-r._c)+r._c,e._d=n*(t._d-r._d)+r._d,e._tx=n*(t._tx-r._tx)+r._tx,e._ty=n*(t._ty-r._ty)+r._ty;else{e._rawWidth=(1-a._width(n))*(t._rawWidth-r._rawWidth)+r._rawWidth,e._rawHeight=(1-a._height(n))*(t._rawHeight-r._rawHeight)+r._rawHeight;var o=t._rawWidth*t._rawScaleX,s=r._rawWidth*r._rawScaleX,_=t._rawHeight*t._rawScaleY,l=r._rawHeight*r._rawScaleY,c=(1-a._width(n))*(o-s)+s,d=(1-a._height(n))*(_-l)+l;e._rawScaleX=c/e._rawWidth,e._rawScaleY=d/e._rawHeight,e._rawSita=(1-a._rotation(n))*(t._rawSita-r._rawSita)+r._rawSita,e._rotateCenterX=(1-a._rotation(n))*(t._rotateCenterX-r._rotateCenterX)+r._rotateCenterX,e._rotateCenterY=(1-a._rotation(n))*(t._rotateCenterY-r._rotateCenterY)+r._rotateCenterY,e._rawLeft=(1-a._left(n))*(t._rawLeft-r._rawLeft)+r._rawLeft,e._rawTop=(1-a._top(n))*(t._rawTop-r._rawTop)+r._rawTop,e._rawRotate3dX=(1-a._rotation(n))*(t._rawRotate3dX-r._rawRotate3dX)+r._rawRotate3dX,e._rawRotate3dY=(1-a._rotation(n))*(t._rawRotate3dY-r._rawRotate3dY)+r._rawRotate3dY,e._pers=(1-a._rotation(n))*(t._pers-r._pers)+r._pers,e._H=Math.max.apply(Math,Matrix._getScaledBox(c,d,e._rawSita))}return e},mod.namespace("Geom.Matrix",Matrix),mod.exportName(proto$26,["scale",proto$26._scale,"translate",proto$26._translate,"rotate",proto$26._rotate,"create3DMatrix",proto$26._create3DMatrix,"translate3D",proto$26._translate3D,"rotateZ3D",proto$26._rotateZ3D,"rotateY3D",proto$26._rotateY3D,"rotateX3D",proto$26._rotateX3D,"perspective",proto$26._perspective,"setRawRotate3dX",proto$26._setRawRotate3dX,"setRawRotate3dY",proto$26._setRawRotate3dY,"setRawPers",proto$26._setRawPers,"setRawSite",proto$26._setRawSita,"setRawRotateCenterX",proto$26._setRawRotateCenterX,"setRawRotateCenterY",proto$26._setRawRotateCenterY,"setRawLeft",proto$26._setRawLeft,"setRawTop",proto$26._setRawTop,"transform",proto$26._transform,"toCssText",proto$26._toCssText,"getScaleX",proto$26._getScaleX,"getScaleY",proto$26._getScaleY,"parseParam",proto$26._parseParam,"calMatrixFormRaw",proto$26._calMatrixFormRaw,"inverse",proto$26._inverse,"getRotation",proto$26._getRotation]),mod.exportName(Matrix,["multiplication",Matrix._multiplication]),mod.namespace("Geom.Matrix",Matrix);var eventPool=[],MuEvents=function(e,t,r){var a=this;eventPool.length||(a.canceled=!1,a.stopped=0,a._type=e,a._bubbles=t===!0,a._cancelable=r===!0,a._currentTarget=null,a._eventPhase=null,a._target=null,mod.definePropertyReadOnly(a,["type",function(){return a._type},"bubbles",function(){return a._bubbles},"cancelable",function(){return a._cancelable},"currentTarget",function(){return a._currentTarget},"eventPhase",function(){return a._eventPhase},"target",function(){return a._target}]))},_proto_$1=MuEvents.prototype;_proto_$1.clone=function(){},_proto_$1.formatToString=function(){},_proto_$1.isDefaultPrevented=function(){return this.canceled},_proto_$1._preventDefault=function(){this.cancelable&&(this.canceled=!0)},_proto_$1.stopImmediatePropagation=function(){this.stopped=2},_proto_$1.stopPropagation=function(){this.stopped===0&&(this.stopped=1)},_proto_$1.toString=function(){},mod.namespace("Events.Event",MuEvents),mod.exportName(_proto_$1,["clone",_proto_$1.clone,"formatToString",_proto_$1.formatToString,"isDefaultPrevented",_proto_$1.isDefaultPrevented,"preventDefault",_proto_$1._preventDefault,"stopImmediatePropagation",_proto_$1.stopImmediatePropagation,"stopPropagation",_proto_$1.stopPropagation,"toString",_proto_$1.toString]);var InputEvent=function(e,t){var r=this;InputEvent.__super__.constructor.apply(r,arguments),r._originEvent=t,r._originPreventDefault=t.preventDefault,r._originStopImmediatePropagation=t.stopImmediatePropagation,r._originStopPropagation=t.stopPropagation,r._stage=null,mod.definePropertyReadOnly(r,["inputX",proto$25._getInputX,"inputY",proto$25._getInputY,"systemEvent",proto$25._getSystemEvent])};mod.extend(InputEvent,MuEvents);var proto$25=InputEvent.prototype;InputEvent.CaptureDisplayObject=null,proto$25._getInputX=function(){return getRealPos.bind(this)()._x},proto$25._getInputY=function(){return getRealPos.bind(this)()._y},proto$25._setCapture=function(e){InputEvent.CaptureDisplayObject=e},proto$25._releaseCapture=function(){InputEvent.CaptureDisplayObject=null},proto$25._preventDefault=function(){var e=this;InputEvent.__super__._preventDefault.apply(e,arguments),e._originPreventDefault.call(e._originEvent)},proto$25.stopImmediatePropagation=function(){var e=this;InputEvent.__super__.stopImmediatePropagation.apply(e,arguments),e._originStopImmediatePropagation.call(e._originEvent)},proto$25.stopPropagation=function(){var e=this;InputEvent.__super__.stopPropagation.apply(e,arguments),e._originStopPropagation.call(e._originEvent)};var getRealPos=proto$25._getRealPos=function(){var e=this,t=e._originEvent,r=e._stage;return InputEvent._getRealPos(r,t)};InputEvent._getRealPos=function(e,t){if(t.changedTouches)var r=t.changedTouches[0],a=r.clientX,n=r.clientY;else a=t.clientX,n=t.clientY;return InputEvent._systemPositionToStagePosition(e,a,n)},InputEvent._systemPositionToStagePosition=function(e,t,r){var a=new Matrix(null,null,null,null,-e._fullScreenRect._left,-e._fullScreenRect._top);return a=Matrix._multiplication(e._transform._matrix,a),a._inverse()._transform(new Point(t,r))},proto$25._getSystemEvent=function(){return this._originEvent},mod.namespace("Events.InputEvent",InputEvent);var MAX_LEN=10,Inertia=function(e,t){var r=this;r._currentIdx=-1,r._startPoint=null,r._times=[],r._points=[],r._damping=e!==void 0?e:.001,t&&(r._damping*=t),r._speed=null,r._time=null},proto$24=Inertia.prototype;proto$24.start=function(e){var t=this;t._startPoint=e,t.add(e)},proto$24._clear=function(){var e=this;e._speed!=null?(e._speed._x=0,e._speed._y=0):(this._times=[],this._points=[])},proto$24.add=function(e,t){var r=this;t=t||new Date*1,r._times.length>=MAX_LEN&&(r._times.shift(),r._points.shift()),r._times.push(t),r._points.push(e)},proto$24._startIterate=function(){for(var e=this,t=new Date*1,r=[],a=[],n=0;n<e._times.length;n++){var o=e._times[n];o>t-200&&(r.push(o),a.push(e._points[n]))}if(r.length<2)e._speed=new Point(0,0),e._time=new Date*1,e._startPoint=null;else{var s=new Point(0,0),_=r[r.length-1]-r[0];s._x=(a[a.length-1]._x-a[0]._x)/_,s._y=(a[a.length-1]._y-a[0]._y)/_,e._speed=s,e._time=new Date*1}e._points=null,e._times=null,e._startPoint=null},proto$24._iterate=function(){var e=this,t=new Date*1,r=e._time,a=t-r,n=e._speed;if(!n)return n=new Point(0,0),n;var o=Math.sqrt(n._x*n._x+n._y*n._y),s=e._damping/o*n._x,_=e._damping/o*n._y,l=n._x!==0?n._x-.5*s*a:0,c=n._y!==0?n._y-.5*_*a:0;if(n._x>0&&l<0||n._x<0&&l>0||n._x===0){var d=n._x/s;l=0}else d=a;if(n._y>0&&c<0||n._y<0&&c>0||n._y===0){var f=n._y/_;c=0}else f=a;var u=n._x*d-.5*s*d*d,p=n._y*f-.5*_*f*f,v=new Point(u,p);return e._time=t,e._speed._x=l,e._speed._y=c,v},proto$24._getMovingOffset=function(){var e=this;return new Point(e._points[this._points.length-1]._x-e._points[this._points.length-2]._x,e._points[this._points.length-1]._y-e._points[this._points.length-2]._y)};var ActionDrag=function(e,t,r,a){ActionDrag.__super__.constructor.apply(this,arguments);var n=this;n._displayObject=e,n._dragType=t,n._dragReset=r,n._dragInfo=void 0,n._inertia=a*1};mod.extend(ActionDrag,Action);var proto$23=ActionDrag.prototype;proto$23.doAction=function(){var e=this;e.logicPositive()},proto$23._bindDragEvent=function(){var e=this,t=e._displayObject,r=e._dragType,a=e._dragReset,n={start:{x:void 0,y:void 0},end:{x:void 0,y:void 0},dragCaptured:void 0,initX:void 0,initY:void 0,initRect:void 0,initSita:void 0,initPos:void 0,rotateCenterX:void 0,rotateCenterY:void 0,deltaAngle:void 0,currentInertia:void 0},o=function(c){if(c._originEvent.button!==void 0&&c._originEvent.button!==0){n.dragCaptured&&l(c);return}n.dragCaptured=!0,t._dragCaptured=!0,n.initX=t._getX(),n.initY=t._getY(),n.initRect=t._getRect();var d=t._getStagePosition();if(n.initSita=e._dragInfo?e._dragInfo.initSita:t._transform._matrix._rawSita,n.initPos=e._dragInfo?e._dragInfo.initPos:d,n.rotateCenterX=t._transform._matrix._rotateCenterX+t._transform._matrix._rawLeft,n.rotateCenterY=t._transform._matrix._rotateCenterY+t._transform._matrix._rawTop,n.start.x=c._getInputX(),n.start.y=c._getInputY(),n.deltaAngle=0,document.addEventListener(Browser$1.InputMove,s,{passive:!1}),document.addEventListener(Browser$1.InputEnd,l,{passive:!1,capture:!0,once:!0}),e._inertia){var f=new Inertia(void 0,(r==4?.01:1)*3/(e._inertia/100));t._haveSelfFunction=null,n.currentInertia=f,r==4?f.start(new Point(0,0)):f.start(c._getRealPos())}e._dragInfo=n};t._addEventListener(Browser$1.InputStart,o,!1,100);var s=function(c){if(n.dragCaptured){var d=new InputEvent(c.type,c);d._stage=t._getStage();var f=c.target;Browser$1.os.ios&&f&&f.nodeName.toLowerCase()=="video"||(d._preventDefault(),console.debug("preventDefault")),n.end.x=d._getInputX(),n.end.y=d._getInputY();var u=n.end.x-n.start.x,p=n.end.y-n.start.y,v=0,h=r;if((h==1||h==3||h==4)&&Math.abs(u)>v||(h==2||h==3||h==4)&&Math.abs(p)>v){var m=new MuEvents("switchcannel",!1);d._stage._dispatchEvent(m),n.dragCaptured=2}n.dragCaptured===2&&_(u,p,d)}},_=function(c,d,f,u){var p=r,v=n.initX+c,h=n.initY+d,m=t._getX(),T=t._getY();t._setX(v),t._setY(h);var y=t._getRect(),E=t._getStage(),g=E._fullScreenRect.clone();g._left<0&&(g._setRight(g._getRight()-g._left),g._setLeft(0)),g._top<0&&(g._setBottom(g._getBottom()-g._top),g._setTop(0));var b=E._stageWidth,w=E._stageHeight,x=0,C=0;if(y.left<g.left&&y.right<g.left+b?x=Math.min(g.left-y.left,g.left+b-y.right):y.right>g.left+b&&y.left>g.left&&(x=Math.max(g.left-y.left,g.left+b-y.right)),y.top<g.top&&y.bottom<g.top+w?C=Math.min(g.top-y.top,g.top+w-y.bottom):y.bottom>g.top+w&&y.top>g.top&&(C=Math.max(g.top-y.top,g.top+w-y.bottom)),t._setX(m),t._setY(T),(x!=0||C!=0)&&(v+=x,h+=C),p<4&&p>0){if(f&&e._inertia&&n.currentInertia.add(f._getRealPos()),p==3){t._setX(v),t._setY(h);var M=e._checkDrop(n,v,h);v=M[0],h=M[1]}(p==1||p==3)&&t._setX(v),(p==2||p==3)&&t._setY(h)}else if(p==4){var E=t._getStage(),A=E._renderManager,O=A._mugeda,S=O._displayObjectHash[t._id],L=S._getRotate();if(u)R=L+u-n.initSita;else var D=Math.atan2(n.start.y-n.rotateCenterY,n.start.x-n.rotateCenterX),$=Math.atan2(n.end.y-n.rotateCenterY,n.end.x-n.rotateCenterX),R=$-D;for(var I=Math.PI;R-n.deltaAngle>I;)R-=Math.PI*2;for(;R-n.deltaAngle<-I;)R+=Math.PI*2;n.deltaAngle=R,R=n.initSita+n.deltaAngle;var P=Math.floor(L/2/Math.PI),N=L-P*2*Math.PI,B=R-Math.floor(R/2/Math.PI)*2*Math.PI;N>Math.PI?Math.abs(B-N)>Math.abs(B+Math.PI*2-N)?R=(P+1)*2*Math.PI+B:R=P*2*Math.PI+B:N>Math.PI&&(Math.abs(B-N)>Math.abs(B-Math.PI*2-N)?R=(P-1)*2*Math.PI+B:R=P*2*Math.PI+B),S._setRotate(R),f&&e._inertia&&n.currentInertia.add(new Point(R-n.initSita,0))}Mugeda.DataStats&&Mugeda.DataStats.entry({event:"dragMove"})},l=function(c){if(!(c.type=="mouseup"&&c.button!=0)){if(n.dragCaptured===2){var d=function(){if(e._handleDragEnd(n),a)if(r==4){var f=t._getStage(),u=f._renderManager,p=u._mugeda,v=p._displayObjectHash[t._id];v._setRotate(n.initSita)}else(r==1||r==3)&&t._setX(n.initPos.left),(r==2||r==3)&&t._setY(n.initPos.top),c.stopImmediatePropagation();e._dragInfo=void 0};e._inertia?(t._haveSelfFunction=function(){var f=n.currentInertia,u=f._iterate();r==4?_(null,null,null,u._x):(n.inertiaStartX+=u._x,n.inertiaStartY+=u._y,_(n.inertiaStartX-n.start.x,n.inertiaStartY-n.start.y)),f._speed._x===0&&f._speed._y===0&&(t._haveSelfFunction=null,n.currentInertia=void 0,d())},n.currentInertia._startIterate(),n.inertiaStartX=n.end.x,n.inertiaStartY=n.end.y):d()}n.dragCaptured&&(n.dragCaptured=!1,t._dragCaptured=!1,document.removeEventListener(Browser$1.InputMove,s),document.removeEventListener(Browser$1.InputEnd,l,!0))}}},proto$23._handleDragEnd=function(e){var t=this,r=t._displayObject,a=r,n=function(B,j,V){var Q=32,F=(B.left+B.right)/2,W=(B.top+B.bottom)/2,G=F-j,Z=W-V,X=Math.max(Q,(B.right-B.left)/2),U=Math.max(Q,(B.bottom-B.top)/2),z=Math.abs(G)<X&&Math.abs(Z)<U;return z},o=function(B){var j=[],V=[];for(var Q in B)B[Q].dropIn?V.push(B[Q]):j.push(B[Q]);return j.concat(V)};r._onDragged();var s=r._getStage(),_=s._renderManager,l={},c={},d=null,f=[];_._dropObjectList&&Array.isArray(_._dropObjectList)&&_._dropObjectList.length>1&&(_._dropObjectList=o(_._dropObjectList));for(var u in _._dropObjectList)if(_._dropObjectList.hasOwnProperty(u)){var p=_._dropObjectList[u],v=p.action||null,h=p.container;if(v&&(v._behavior.logic||v._behavior.param&&v._behavior.param._logic),!!h._getRealVisible()){h.lastDropped=null;var m=p.target;if(h){var T=r._getRect(),y=h._getRect(),E=e.initRect||{};if(v){var g=v._behavior.param.element_name,b="{{dragend}}";if(g&&g.indexOf(b)>=0&&g.length>b.length&&a._name){g=g.replace("{{dragend}}",a._name);var _=a._getStage()._renderManager;v._liveDisplayObject=_.getReferenceElement(g)}else v._liveDisplayObject=a}if(!m||m!=r){var M=T.left+a._getWidth()/2,A=T.top+a._getHeight()/2,w=h._dropTestWithUpdate?h._dropTestWithUpdate(a,M,A):{},x=l[h._id];x||(l[h._id]=w);var C=w.canDrop===void 0?n(y,M,A):w.canDrop;C&&(d=h,d.lastDropped=a);var M=E.left+a._getWidth()/2,A=E.top+a._getHeight()/2,O=h._dropTest?h._dropTest(a,M,A):{},S=c[h._id];S||(c[h._id]=O),h._activeDrop=!1;var L=p.dropIn,D=O.canDrop===void 0?!n(y,M,A):!O.canDrop,$=L&&C&&D,R=!L&&!C&&!D,I=$||R;v&&I&&!m&&f.push(v)}if(m==r){var P=a._getRect(),M=P.left+m._getWidth()/2,A=P.top+m._getHeight()/2,w=h._dropTest?h._dropTest(m,M,A):{},x=l[h._id];x||(l[h._id]=w);var C=w.canDrop===void 0?n(y,M,A):w.canDrop;M=E.left+m._getWidth()/2,A=E.top+m._getHeight()/2,w=h._dropTest?h._dropTest(m,M,A):{};var D=w.canDrop===void 0?!n(y,M,A):!w.canDrop,L=p.dropIn,$=L&&C&&D,R=!L&&!C&&!D,I=L!==void 0&&($||R);I&&(v&&f.push(v),d=h,d.lastDropped=$?m:null)}}}}for(var N in l)if(l.hasOwnProperty(N)){var x=l[N],h=x.container;h&&h._onDropped&&!x.canDrop&&h._onDropped(a,d,!1)}return d&&d._onDropped&&d._onDropped(a,d,!0),f.sort(function(B,j){var V={dragout:0,drop:1};return V[B._event]-V[j._event]}),f.forEach(function(B){B.doAction()}),Mugeda.DataStats&&Mugeda.DataStats.entry({event:"dragEnd"}),d},proto$23._checkDrop=function(e,t,r){var a=this,n=a._displayObject,o=n._getStage()._renderManager;for(var s in o._dropObjectList)if(o._dropObjectList.hasOwnProperty(s)){var _=o._dropObjectList[s],l=_.container;if(l._getRealVisible()){var c=new Point(n._getRawWidth()/2,n._getRawHeight()/2),d=n._getTotalMatrix()._transform(c),f=l&&l._dropTest?l._dropTest(n,d._x,d._y):{};if(f.canDrop){if(a._inertia&&(f.x!==void 0||f.y!==void 0)&&e.currentInertia&&e.currentInertia._clear(),f.x!=null)var u=t+(f.x-d._x);if(f.y!=null)var p=r+(f.y-d._y)}}}return u?[u,p]:[t,r]};var ActionDragFree=function(e,t,r,a){ActionDragFree.__super__.constructor.apply(this,arguments);var n=this;n._funDownBind=n._funDown.bind(n),n._funMoveBind=n._funMove.bind(n),n._funEndBind=n._funEnd.bind(n),n._displayObject=e,n._dragType=t,n._dragReset=r,n._dragInfo=void 0,n._inertiaRate=a*1};ActionDragFree.TYPE_NoDrag=0,ActionDragFree.TYPE_Horizontal_Drag=1,ActionDragFree.TYPE_Vertical_Drag=2,ActionDragFree.TYPE_Free_Drag=3,ActionDragFree.TYPE_Rotation_Drag=4,ActionDragFree.TYPE_Free_Drag_Rotate_Scale=5,mod.extend(ActionDragFree,Action);var proto$22=ActionDragFree.prototype;proto$22.doAction=function(){var e=this;e.logicPositive()},proto$22._bindDragEvent=function(){var e=this,t=e._displayObject;e._stage=t._getStage(),t._addEventListener(Browser$1.InputStart,e._funDownBind,!1,100)},proto$22._funDown=function(e){var t=this,r=t._getTouches(e),a=t._toStagePos(r);t._startPoints=a,a.length===1&&a.push(a[0]),a.length>1&&(t._startDragDistance=Point.distance(a[0],a[1]),t._startDragRotate=Point.angle(a[0],a[1]),t._startTransform=t._displayObject._transform._clone(),t._initRect=t._displayObject._getRect(),t._lastPoints=a),document.addEventListener(Browser$1.InputMove,t._funMoveBind,{passive:!1}),document.addEventListener(Browser$1.InputEnd,t._funEndBind,{passive:!1})},proto$22._funMove=function(e){var t=this;if(t._startTransform){var r=new MuEvents("switchcannel",!1);t._stage._dispatchEvent(r),t._updatePos(e),e.preventDefault()}},proto$22._funEnd=function(e){var t=this;if(t._startTransform){var r=t._getTouches(e);if(t._updatePos(e,r),e.changedTouches===void 0||r.length===0){var a=t._displayObject;ActionDrag.prototype._handleDragEnd.call(t,{initRect:t._initRect}),t._dragReset&&a._setTransform(t._startTransform),t._startDragDistance=void 0,t._startDragRotate=void 0,t._startTransform=void 0,document.removeEventListener(Browser$1.InputMove,t._funMoveBind,{passive:!1}),document.removeEventListener(Browser$1.InputEnd,t._funEndBind,{passive:!1})}e.stopImmediatePropagation()}},proto$22._updatePos=function(e,t){var r=this;t=t||r._getTouches(e);var a=r._toStagePos(t);if(a.length===1){var n=a[0].identifier,o=r._lastPoints;if(n===o[0].identifier){var s=o[1].subtract(o[0]).add(a[0]);s.identifier=o[1].identifier,a.push(s)}else s=o[0].subtract(o[1]).add(a[0]),s.identifier=o[0].identifier,a.unshift(s)}if(a.length>1){var _=Point.distance(a[0],a[1]);if(r._startDragDistance===0)var l=1,c=0;else{l=_/r._startDragDistance;var d=Point.angle(a[0],a[1]);c=d-r._startDragRotate,r._lastPoints=a}r._dragType%100-r._dragType%10===0&&(c=0),r._dragType%1e3-r._dragType%100===0&&(l=1);var f=r._dragType%10,u=a[0]._x-l*Math.cos(c)*r._startPoints[0]._x+l*Math.sin(c)*r._startPoints[0]._y,p=a[0]._y-l*Math.sin(c)*r._startPoints[0]._x-l*Math.cos(c)*r._startPoints[0]._y,v=r._startTransform._clone(),h=v._matrix;if([0,1,2].indexOf(f)!==-1){var m=new Point(h._rotateCenterX,h._rotateCenterY);h._transform(m,!0)}if(h._scale(l,l),h._rawScaleX!=null&&(h._rawScaleX*=l,h._rawScaleY*=l),h._rotate(c),h._rawSita!=null&&(h._rawSita+=c),h._translate(u,p),[0,1,2].indexOf(f)!==-1){var T=new Point(h._rotateCenterX,h._rotateCenterY);h._transform(T,!0);var y=T.subtract(m);f===0?h._translate(-y._x,-y._y):f===1?h._translate(0,-y._y):f===2&&h._translate(-y._x,0)}if(h._rawLeft!=null){var E=new Matrix;E._scale(l,l),E._translate(-h._rotateCenterX,-h._rotateCenterY),E._rotate(c),E._translate(h._rotateCenterX,h._rotateCenterY),h._rawLeft=h._tx-E._tx,h._rawTop=h._ty-E._ty}r._displayObject._setTransform(v);var g=r._displayObject._getX(),b=r._displayObject._getY(),w=ActionDrag.prototype._checkDrop.call(r,{},g,b);w[0]!==g&&r._displayObject._setX(w[0]),w[1]!==b&&r._displayObject._setY(w[1])}},proto$22._getTouches=function(e){e=e._originEvent||e;var t=e.touches||[{identifier:99,clientX:e.clientX,clientY:e.clientY}];return Array.prototype.slice.call(t,0,2)},proto$22._toStagePos=function(e){var t=this;return e.map(function(r){var a=InputEvent._getRealPos(t._stage,r);return a.identifier=r.identifier,a})};var ActionElement=function(e,t){ActionElement.__super__.constructor.apply(this,arguments);var r=this;r._event=e,r._behavior=null,r._targetAObject=null,r._reset=t};mod.extend(ActionElement,Action);var proto$21=ActionElement.prototype;proto$21.doAction=function(){var e=this;if(e.logicPositive()){ActionElement.__super__.doAction.apply(e,arguments);var t=e._stage,r=function(T){if(t){var y=t._displayObject._renderManager;T=y._replaceMacros(T)}return T.toString()},a=function(T){var y=T;if(!y&&e._liveDisplayObject){var E=e._stage._displayObject._renderManager._mugeda;y=E._displayObjectHash[e._liveDisplayObject._id],e._liveDisplayObject=null}if(y&&s){var g=s.element_property,b=s.element_type,w=s.element_value.toString(),x=w.split(";");x.length>1&&(x[x.length-1]==""&&x.pop(),w=x[Math.floor(Math.random()*x.length)]);try{w=r(w),(w===""||w.match(/^[A-Za-z0-9]+$/))&&(w="'"+w+"'");var C=new Function("return "+w+";");w=C()}catch{}if(g=="background"){if(w){if(w.replace(/\s+/g,"")===y[g])return;y[g]=w}}else if(g=="border"&&w){if(w.replace(/\s+/g,"")===y[g])return;y[g]=w}if(g!="animation"){y._changedHash=y._changedHash||{};var M=y._changedHash[g]||0,A=8;if(M<A){if(y._changedHash[g]=M+1,b=="overwrite"){var O=g=="text"?w:parseFloat(w),S=y[g];g=="rotate"?O=O*Math.PI/180:g=="alpha"&&(O=O*.01),(g=="text"||Math.abs(S-O)>1e-5)&&(y[g]=O)}else if(b=="delta"&&Math.abs(w)>1e-5){parseFloat(y[g]);var O=g=="text"?w:parseFloat(w);g=="rotate"?O=O*Math.PI/180:g=="alpha"&&(O=O*.01),y[g]=parseFloat(y[g])+parseFloat(O)}if(g=="text"&&parseInt(s.keep_value||0)){var L=e._stage._displayObject,D=L._renderManager,$=D.getReferenceElement(s.element_name,!0),R=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};R.addCustomMugedaParameters(encodeURIComponent("m_"+y.data.guid),encodeURIComponent($.text))}delete y._changedHash[g]}else console.warn("行为链对id为"+y._displayObject._id+"的元素的属性（"+g+"）设置超出了允许的次数。请检查内容逻辑中是否有循环设置属性的问题。")}}},n=function(T,y){var E={stopFlag:!1};y(T,E);for(var g=T._children,b=g.length,w=0;w<b;w++){var x=g[w];n(x,y)}},o=function(T){var y=[];if(["{{all}}","{{alldragged}}","{{visible}}","{{dragged}}"].indexOf(T)>=0)n(t,function(g){var b=g._displayObject._aniData||{},w=b.param||{};if((T!="{{dragged}}"&&T!="{{alldragged}}"||w.drag>0)&&(T=="{{all}}"||T=="{{alldragged}}"||g._displayObject._getRealVisible())){var x=(b.type||"").toString();x.match(/\d+/)&&y.push(l._displayObjectHash[g._displayObject._id])}});else{var E=l._scene.getObjectByName(T);E&&y.push(E)}return y},s=e._behavior.param;if(e._reset){if(s){var _=e._stage._displayObject._renderManager,l=_._mugeda,c=s.element_name,d=s.element_range,f=s.element_property;d==="all"&&(f="all");var u=[];if(c&&c.indexOf("more|-|")>-1){var p=o("{{all}}"),v=s.element_name.split("more|-|")[1];if(v){v.indexOf("_")>-1&&(v=v.split("_")[1]);for(var h=0;h<p.length;h++)p[h].name&&p[h].name.substring(0,v.length)==v&&u.push(p[h])}}else c.indexOf("{{")>-1&&c.indexOf("}}")>-1?u=o(c):u.push(e._targetAObject);u.forEach(function(T){var y=T._displayObject;y._reset(f)})}}else{var _=e._stage._displayObject._renderManager,l=_._mugeda;if(s.element_name&&s.element_name.indexOf("more|-|")>-1){var p=o("{{all}}"),v=s.element_name.split("more|-|")[1];if(v){v.indexOf("_")>-1&&(v=v.split("_")[1]);for(var h=0;h<p.length;h++)p[h].name&&p[h].name.substring(0,v.length)==v&&a(p[h])}}else{var m=e._targetAObject;a(m)}}}},mod.namespace("Action.ActionElement",ActionElement);var ActionForm=function(e,t,r){var a=this;ActionForm.__super__.constructor.apply(a,arguments),this._nestedAction=r,this._stageDom=t};mod.extend(ActionForm,Action);var proto$20=ActionForm.prototype;proto$20.doAction=function(){var e=this;if(e.logicPositive()){e._nestedAction&&(e._behavior.param.callback=e._nestedAction.doAction.bind(e._nestedAction));var t=Browser$1._globalObject.MugedaBehavior;if(t){e._behavior.param.isCss=!0,t.popupForm(e._behavior.param);var r=e._behavior.param.iframeDiv;r&&e._stageDom&&(r.style.padding=0,e._stageDom.appendChild(r))}}};var ActionGetCheckout=function(e,t){ActionGetCheckout.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._serviceId=null};mod.extend(ActionGetCheckout,Action);var proto$1$=ActionGetCheckout.prototype;proto$1$.doAction=function(e){var t=this,r=t._stage._displayObject;r._renderManager;var a=t._options.onFinish,n=t._options.onFailure;if(!t.logicPositive()){a&&a.doAction.apply(a);return}var o=t._behavior,s=o.param||{},_,l;switch(s.time_cycle){case"today":_=new Date,_.setHours(0,0,0,0),l=new Date(_.getTime()+24*3600*1e3-1);break;case"yesterday":_=new Date(new Date().getTime()-24*3600*1e3),_.setHours(0,0,0,0),l=new Date(_.getTime()+24*3600*1e3-1);break;case"this_Week":_=new Date(new Date);let m=_.getDay(),T=_.getDate()-m+(m==0?-6:1);_.setDate(T),l=new Date(_.getTime()+7*24*3600*1e3-1);break;case"this_month":_=new Date,_.setDate(1),_.setHours(0,0,0,0),l=new Date,l.setMonth(l.getMonth()+1),l.setDate(0),l.setHours(23,59,59,999);break;case"custom":_=new Date(s.start_time),l=new Date(s.end_time);break}var c=t._stage._displayObject._renderManager._mugeda,d=s.nickname_target,f=s.avatar_target;if(!d||d.indexOf("more2|-|")===-1)u=[];else{let m=d.replace("more2|-|","");var u=c._scene.getObjectByName(m,"prefix2")}if(!f||f.indexOf("more2|-|")===-1)p=[];else{let m=f.replace("more2|-|","");var p=c._scene.getObjectByName(m,"prefix2")}var v=s.checkout_target,h=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};h.getCheckout&&h.getCheckout({serviceId:v,timeStart:`${_.getFullYear()}-${_.getMonth()+1}-${_.getDate()} ${_.getHours()}:${_.getMinutes()}:${_.getSeconds()}`,timeEnd:`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()} ${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,sort:s.sort==="时间降序"?"DESC":"升序",count:Math.max(u.length,p.length)},function(m){m.status==0?(m.data.forEach(function(T,y){u[y]&&u[y]._setText(T.nickname),p[y]&&c._displayObjectHash[p[y]._id]._setSrc(T.avatar)}),a&&a.doAction.apply(a),ActionGetCheckout.__super__.doAction.apply(t,arguments)):n&&n.doAction.apply(n)}),ActionGetCheckout.__super__.doAction.apply(t,arguments)};var ActionGetLocalData=function(){ActionGetLocalData.__super__.constructor.apply(this,arguments)};mod.extend(ActionGetLocalData,Action);var proto$1_=ActionGetLocalData.prototype;proto$1_.doAction=function(){var e=this,t=e._behavior.param;if(e.logicPositive()){var r=e._displayObject._getRoot(),a=r._renderManager._mugeda,n=a._scene.getObjectByName(e._behavior.param.element);if(n){var o=Mugeda.getContentId(),s=o.crid,_=null;switch(t.readRange){case"every":for(var l=new RegExp("Mugeda_localData_(.+?)_"+t.readName),c=0;c<localStorage.length;c++){var u=localStorage.key(c);if(l.test(u)){_=localStorage.getItem(u);break}}break;case"selected":for(var d=t.readId?t.readId.split(`
`):[],u,f=null,c=0;c<d.length;c++)if(u="Mugeda_localData_"+d[c]+"_"+t.readName,f=window.localStorage.getItem(u),f){_=f;break}break;case"my":default:var u="Mugeda_localData_"+s+"_"+t.readName;_=window.localStorage.getItem(u)}var p,v;try{var h=JSON.parse(_);p=h.value,v=h.expire}catch{return console.log("解析本地数据失败"),!1}if(v&&!(v>new Date().getTime())){window.localStorage.removeItem(u);return}n.text=p}}},mod.namespace("Action.ActionGetLocalData",ActionGetLocalData);var ActionGetLocation=function(e,t){ActionGetLocation.__super__.constructor.apply(this,arguments);var r=this;r.behaviorData=t};mod.extend(ActionGetLocation,Action);var proto$1Z=ActionGetLocation.prototype;proto$1Z.doAction=function(){function e(d){return d instanceof Function}var t=this,r=t.behaviorData,a=r.location_show_target,n=r.location_format?r.location_format.split(","):null,o=t._stage._displayObject,s=o._renderManager,_=s.getReferenceElement(a,!0);if(Browser$1._isWeChat()){var l=Browser$1._globalObject.wx;l&&e(l.getLocation)&&l.getLocation({type:"wgs84",success:function(d){c({longitude:d.longitude,latitude:d.latitude})},cancel:function(d){console.info(d)},fail:function(d){console.info(d)}})}else window.location.protocol!="https:"&&Mugeda.log("当前行为包含获取地理信息服务。该特性仅在HTTPS协议下生效，在你目前使用的HTTP协议下可能无效。"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(d){c({longitude:d.coords.longitude,latitude:d.coords.latitude})},function(d){console.info(d.message)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0,provider:"system",coordsType:"wgs84",geocode:!1});function c(d){if(n&&a){var f=Browser$1._getWeixinServerHost()+"/server/huodong.php/get_city";if(!t.logicPositive())return;window.ajaxHelper({url:f+"?longitude="+d.longitude+"&latitude="+d.latitude+"&response_type=jsonp",type:"jsonp",mode:"postMessage",success:function(u){if(u.status===0)if(u.result&&u.result.addressComponent){var p=u.result.addressComponent,v="";n.forEach((h,m)=>{v+=(m>0?" ":"")+p[h]}),_&&_._setText(v)}else Mugeda.messageBox("地理位置数据获取失败。");else Mugeda.messageBox("服务器错误,错误码:"+u.status)}})}}};var ActionGlobalPause=function(e,t){ActionGlobalPause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionGlobalPause,Action);var proto$1Y=ActionGlobalPause.prototype;proto$1Y.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.pause();var t=this._movieClip._currentScene.getDom();t.querySelectorAll("video").forEach(function(r){r.paused||(r.pause(),r.pausedByGlobalPause=!0)}),Mugeda.stopAudioAll&&Mugeda.stopAudioAll()}},mod.namespace("Action.ActionGlobalPause",ActionGlobalPause);var ActionGlobalResume=function(e,t){ActionGlobalResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionGlobalResume,Action);var proto$1X=ActionGlobalResume.prototype;proto$1X.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.resume();var t=this._movieClip._currentScene.getDom();t.querySelectorAll("video").forEach(function(r){r.paused&&r.pausedByGlobalPause&&(r.play(),r.pausedByGlobalPause=!1)}),Mugeda.playAudioAll&&Mugeda.playAudioAll()}},mod.namespace("Action.ActionGlobalResume",ActionGlobalResume);var History=function(){},MUGEDA_STATE="MUGEDASTATE",getMugedaState=function(e,t){var r={param:t};return r[MUGEDA_STATE]=e,r},activeState=-1,actionList=null,syncActionList=function(){try{window.sessionStorage[MUGEDA_STATE]=JSON.stringify(actionList)}catch(e){console.log("window.sessionStorage:"+e.toString())}},getActionList=function(){try{window.sessionStorage[MUGEDA_STATE]||(window.sessionStorage[MUGEDA_STATE]=JSON.stringify([])),actionList=JSON.parse(window.sessionStorage[MUGEDA_STATE])}catch(e){console.log("window.sessionStorage:"+e.toString()),actionList=[],syncActionList()}return actionList};History._pushAction=function(e){getActionList(),activeState<actionList.length-1&&actionList.splice(activeState+1,actionList.length-1-activeState),actionList.push({backward:e}),syncActionList(),window.history.pushState(getMugedaState(++activeState),document.title)};var runHistory=function(e,t){var r=e.param.concat([t]),a=window.Mugine;return e.mod.split(".").forEach(function(n){a=a[n]}),a[e.fun].apply(window,r)};Browser$1._isServer||window.addEventListener("popstate",function(){var e=window.history.state;if(e==null)t=-1;else var t=e[MUGEDA_STATE];if(t*1==t)if(t<activeState){getActionList();var r=actionList[t+1];_planToRun(function(a){return function(n){a.forward=runHistory(a.backward,n),syncActionList()}}(r)),activeState=t}else t>activeState&&(getActionList(),r=actionList[t],r&&(_planToRun(function(a){return function(n){runHistory(a.forward,n)}}(r)),activeState=t))});var runList=[],_planToRun=function(e){runList.push(e),_runNext()},_runNext=function(){var e=function(r){r&&runList.splice(0,1),_runNext()};if(runList.length){var t=runList[0];t(e)}};mod.namespace("Utils.History",History);var Common={},rootList=[];Common._GetRoot=function(e){return rootList[e]},Common._RegRoot=function(e){return rootList.push(e),rootList.length-1},mod.namespace("Utils.Common",Common);var ActionGoTo=function(e,t,r,a,n,o,s){ActionGoTo.__super__.constructor.apply(this,arguments);var _=this;_._movieClip=a,_._stop=n,_._event=e,_._scene=r,_._relative=t,_._appear=o,_._needBackPoint=s};mod.extend(ActionGoTo,Action);var proto$1W=ActionGoTo.prototype;proto$1W.doAction=function(){var e=this,t=e._movieClip||(e._liveDisplayObject&&e._liveDisplayObject._type=="MovieClip"?e._liveDisplayObject:null);if(t instanceof Array){e._liveDisplayObject=null;for(var r=0;r<t.length;r++){var _=t[r];if(!e.logicPositive()||!_)return;ActionGoTo.__super__.doAction.apply(e,arguments);var a=e._relative,n,o=e._behavior.param,s=e._behavior.type,_=t[r];if(s=="next"?n=1:s=="previous"?n=-1:n=getActualFrame(o,_,e),a&&(n+=_._currentFrame),n<0||n>=_._getTotalFrames())return;var l=this._stage._displayObject._renderManager._mugeda;e._scene=(l._displayObjectHash[_._id]||l)._scene,e._scene.currentSegment=null,e._stop?_.gotoAndStop(n,null,20):_.gotoAndPlay(n,null,20),e._needBackPoint&&History._pushAction({mod:"Action.ActionGoTo",fun:"doHistory",param:[_._getRoot()._rootId,_._id,n,e._movieClip._currentFrame,e._movieClip._pausedBeforeRender,e._stop]}),[ActionEvent.CLICK,ActionEvent.DRAGEND,ActionEvent.DRAGOUT,ActionEvent.DROP,ActionEvent.CONNECTORCONNECTED].indexOf(e._event)>=0&&!_._manualChange&&_._toggleManualChange(!0)}}else{var _=e._movieClip||(e._liveDisplayObject&&e._liveDisplayObject._type=="MovieClip"?e._liveDisplayObject:null);if(e._liveDisplayObject=null,!e.logicPositive()||!_)return;ActionGoTo.__super__.doAction.apply(e,arguments);var a=e._relative,n,o=e._behavior.param,s=e._behavior.type;if(s=="next"?n=1:s=="previous"?n=-1:n=getActualFrame(o,_,e),a&&(n+=_._currentFrame),n<0||n>=_._getTotalFrames())return;var l=this._stage._displayObject._renderManager._mugeda;e._scene=(l._displayObjectHash[_._id]||l)._scene,e._scene.currentSegment=null,e._stop?_.gotoAndStop(n,null,20):_.gotoAndPlay(n,null,20),e._needBackPoint&&History._pushAction({mod:"Action.ActionGoTo",fun:"doHistory",param:[_._getRoot()._rootId,_._id,n,e._movieClip._currentFrame,e._movieClip._pausedBeforeRender,e._stop]}),[ActionEvent.CLICK,ActionEvent.DRAGEND,ActionEvent.DRAGOUT,ActionEvent.DROP,ActionEvent.CONNECTORCONNECTED].indexOf(e._event)>=0&&!_._manualChange&&_._toggleManualChange(!0)}},ActionGoTo._doHistory=function(e,t,r,a,n,o,s){var _=Common._GetRoot(e),l=_._getDisplayObjectById(t);return l._checkMovieClipBusy(s,function(){n?l.gotoAndStop(a,null,20):l.gotoAndPlay(a,null,20)}),{mod:"Action.ActionGoTo",fun:"doHistory",param:[e,t,null,r,o,null]}};var getActualFrame=ActionGoTo._getActualFrame=function(e,t,r){var a=e.frame_name,n=e.frame_number||"";if(n.indexOf("{{")>-1&&n.indexOf("}}")>-1){var o=r._stage._displayObject,s=o._renderManager,_=n.replace(/[\{|\}]/g,""),l=s.getReferenceElement(_,!0);parseInt(l.text)?n=l.text:a=l.text}var c=e.page_id;if(t.id===1&&c){var d=t._scenes.filter(function(y){return y._guid===c});if(d.length===0)throw window.alert("没有找到跳转的目标页"),"没有找到跳转的目标页";f=d[0]}else var f=t._currentScene||t._scenes[0]||{};var u=f._startFrame,p=f._numFrames+u;if(n&&n.length>0){for(var v=n.split(";"),h=[],m=0;m<v.length;m++){var T=v[m];T=parseInt(T)-1+u,T>=u&&T<p&&h.push(T)}n=h.join(";")}return n.length?n:a};mod.exportName(ActionGoTo,["doHistory",ActionGoTo._doHistory]),mod.namespace("Action.ActionGoTo",ActionGoTo);var ActionLink=function(e,t,r){ActionLink.__super__.constructor.apply(this,arguments);var a=this;a._target=t,a._link=e,a._replace=r};mod.extend(ActionLink,Action);var proto$1V=ActionLink.prototype;proto$1V.doAction=function(){var e=this;if(e.logicPositive()){var t=Browser$1._globalObject.MugedaMraid;if(t){var r=e._link,a=r;Browser$1._isPreview()&&a!="about:blank"&&(a=Browser$1._getRedirectUrl(a)),t.openLink(a,e._target,e._replace)}}};var ActionPage=function(e,t,r,a,n,o,s){ActionPage.__super__.constructor.apply(this,arguments);var _=this;_._aimPage=r,_._movieClip=n,_._scene=a,_._relative=t,_._switcher=o,_._needBackPoint=s};mod.extend(ActionPage,Action);var getActualPage=function(){var a=this,e=a._behavior.param,t=e.page_guid||"",r=e.page_number||"",a=this,n=a._movieClip._scenes;if(r){if(r.indexOf("{{")>-1&&r.indexOf("}}")>-1){var o=a._stage._displayObject,s=o._renderManager;r=r.replace(/[\{|\}]/g,"");var _=s.getReferenceElement(r,!0),l=_.text;if(parseInt(l))r=parseInt(l);else if(!parseInt(l)&&l)for(var c="",d=0;d<n.length;d++){var f=n[d];if(c=d+1,f._name==l){r=c;break}}}}else if(t)for(var d=0;d<n.length;d++){var f=n[d];if(f._guid==t){r=d+1;break}}return r},proto$1U=ActionPage.prototype;proto$1U.doAction=function(){var e=this;if(e.logicPositive()){ActionPage.__super__.doAction.apply(e,arguments);var t=e._relative,r=e._aimPage&&e._relative?e._aimPage:getActualPage.call(e);if(t){var a=e._movieClip._getSceneIndexByFrameNum(e._movieClip._currentFrame);r+=a}else{var n=r;if(typeof n=="string"){var o=n.split(";");o.length>1&&(n=o[Math.floor(Math.random()*o.length)]),n=parseInt(n)}r=n-1}if(!e._switcher){console.warn("内容触发了翻页行为但是没有发现翻页对象。这个内容只有一页吗？");return}if(!(e._switcher._isBusy()||isNaN(r))){var s={transition:e._behavior.param.page_transition,exit:e._behavior.param.page_exit,direction:e._behavior.param.page_direction,duration:e._behavior.param.page_time};if(e._movieClip.gotoPage(r,s),e._needBackPoint){var _=this._movieClip;History._pushAction({mod:"Action.ActionPage",fun:"doHistory",param:[_._getRoot()._rootId,_._id,r,s,_._currentFrame,e._movieClip._pausedBeforeRender,0]})}}}},ActionPage._doHistory=function(e,t,r,a,n,o,s,_){var l=Common._GetRoot(e),c=l._getDisplayObjectById(t);return c._checkMovieClipBusy(_,function(){s==0?(c.gotoPage(r,a),o?c.gotoAndStop(n,null):c.gotoAndPlay(n,null)):c.gotoPage(r,a)}),{mod:"Action.ActionPage",fun:"doHistory",param:[e,t,r,a,n,o,1]}},mod.exportName(ActionPage,["doHistory",ActionPage._doHistory]),mod.namespace("Action.ActionPage",ActionPage);var ActionPageControl=function(e,t,r,a){ActionPageControl.__super__.constructor.apply(this,arguments);var n=this;n._event=e,n._disabled=t,n._renderObjectSceneSwitcher=r,n._actionType=a};mod.extend(ActionPageControl,Action);var proto$1T=ActionPageControl.prototype;proto$1T.doAction=function(){var e=this;if(e.logicPositive()&&(ActionPageControl.__super__.doAction.apply(e,arguments),e._renderObjectSceneSwitcher&&e._renderObjectSceneSwitcher._options)){switch(e._actionType){case"forward":e._renderObjectSceneSwitcher._options._scrollDisabledForward=e._disabled;break;case"after":e._renderObjectSceneSwitcher._options._scrollDisabledAfter=e._disabled;break;case"all":e._renderObjectSceneSwitcher._options._scrollDisabledForward=e._disabled,e._renderObjectSceneSwitcher._options._scrollDisabledAfter=e._disabled;break;default:e._renderObjectSceneSwitcher._options._scrollDisabled=e._disabled}e._renderObjectSceneSwitcher._updateArrowStatus()}};var ActionStop=function(e,t,r,a){ActionStop.__super__.constructor.apply(this,arguments);var n=this;n._scene=t,n._movieClip=r,n._appear=a};mod.extend(ActionStop,Action);var proto$1S=ActionStop.prototype;proto$1S.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip;if(!e._scene){var r=this._stage._displayObject._renderManager._mugeda;e._scene=(r._displayObjectHash[t._id]||r)._scene}if(!e._scene)e._movieClip._presetAnimation&&e._movieClip._presetAnimation._setStatus("pause");else{e._scene.currentSegment=null,ActionStop.__super__.doAction.apply(e,arguments);var t=e._movieClip;t.stop(20)}}},mod.namespace("Action.ActionStop",ActionStop);var NodeEvent=function(e,t){var r=this;NodeEvent.__super__.constructor.apply(r,arguments),r._displayObject=t};mod.extend(NodeEvent,MuEvents),NodeEvent.prototype,NodeEvent.CaptureDisplayObject=null;var visibilityEvent=function(e,t){var r=this;visibilityEvent.__super__.constructor.apply(r,arguments),r._displayObject=t};mod.extend(visibilityEvent,MuEvents),visibilityEvent.prototype,visibilityEvent.CaptureDisplayObject=null;var EventPhase=function(){};EventPhase.AT_TARGET=2,EventPhase.BUBBLING_PHASE=3,EventPhase.CAPTURING_PHASE=1,mod.exportName(EventPhase,["AT_TARGET",EventPhase.AT_TARGET,"BUBBLING_PHASE",EventPhase.BUBBLING_PHASE,"CAPTURING_PHASE",EventPhase.CAPTURING_PHASE]),mod.namespace("Events.EventPhase",EventPhase);var EventChangedEvent=function(e,t,r){var a=this;EventChangedEvent.__super__.constructor.apply(a,arguments),a._event=t,a._add=r};mod.extend(EventChangedEvent,MuEvents),EventChangedEvent.prototype;var IEventDispatcher=function(){this.eventListenersCapture={},this.eventListenersBubble={}},_counter=0,_proto_=IEventDispatcher.prototype,domEventList={touchstart:!0,touchmove:!0,touchend:!0,mousedown:!0,mousemove:!0,mouseup:!0,click:!0,dblclick:!0,mouseover:!0,mouseout:!0,pointerdown:!0,pointermove:!0,pointerup:!0,blur:!0,focus:!0},visibilityLikeEvent={visibilityChanged:!0,rendered:!0,removed:!0};_proto_._addEventListenerOnce=function(e,t,r,a){var n=this,o=function(){t.apply(this,arguments),n._removeEventListener(e,t,r)};n._addEventListener(e,o,r,a)},_proto_._addEventListener=function(e,t,r,a,n){var o=this;r=r===!0,a=a||0;var s={priority:a,listener:t,stamp:_counter++,domEvent:!1,domEventBind:!1,type:e,useCapture:r,visibilityLikeEventTarget:n},_=r?o.eventListenersCapture:o.eventListenersBubble,l=_[e];if(l==null&&(l=_[e]=[],l.sorted=!0),l.useSort=l.useSort||a!==0,l.push(s),l.useSort&&(l.sorted=!1),domEventList[e]){s.domEvent=!0;var c=new EventChangedEvent("domeventchanged",s,!0);this._dispatchEvent(c)}visibilityLikeEvent[e]&&(n||(s.visibilityLikeEventTarget=o),o._parent&&o._parent._addEventListener(e,t,r,a,s.visibilityLikeEventTarget))},_proto_._removeParentVisibilityLikeEvent=function(){var e=this;[e.eventListenersCapture,e.eventListenersBubble].forEach(function(t){Object.keys(t).forEach(function(r){if(visibilityLikeEvent[r]){var a=t[r];a.forEach(function(n){e._parent&&e._parent._removeEventListener(n.type,n.listener,n.useCapture,n.visibilityLikeEventTarget)})}})})},_proto_._addParentVisibilityLikeEvent=function(){var e=this;[e.eventListenersCapture,e.eventListenersBubble].forEach(function(t){Object.keys(t).forEach(function(r){if(visibilityLikeEvent[r]){var a=t[r];a.forEach(function(n){e._parent&&e._parent._addEventListener(n.type,n.listener,n.useCapture,n.priority,n.visibilityLikeEventTarget)})}})})};var _dispatchEvent=function(e,t){var r=t._type,a=e[r],n=this;if(a){if(a.useSort&&!a.sorted&&(a.sort(function(o,s){return s.priority===o.priority?s.stamp-o.stamp:s.priority-o.priority}),a.sorted=!0),!a.length)return;a.slice(0).forEach(function(o){if(t.stopped!==2){var s=o.listener.call(n,t);s===!1&&(t.stopPropagation(),t.preventDefault())}})}};_proto_._dispatchEvent=function(e){var t=this;switch(e._target===t&&(e._eventPhase=EventPhase.AT_TARGET),e.eventPhase){case EventPhase.CAPTURING_PHASE:_dispatchEvent.bind(t)(this.eventListenersCapture,e);break;case EventPhase.BUBBLING_PHASE:_dispatchEvent.bind(t)(this.eventListenersBubble,e),t._parent&&e.stopped===0&&(domEventList[e._type]&&t._parent._haveDom||t._parent._dispatchEvent(e));break;case EventPhase.AT_TARGET:_dispatchEvent.bind(t)(this.eventListenersCapture,e),e.stopped!==2&&_dispatchEvent.bind(t)(this.eventListenersBubble,e),e._eventPhase=EventPhase.BUBBLING_PHASE,t._parent&&e.stopped===0&&(domEventList[e._type]&&t._parent._haveDom||t._parent._dispatchEvent(e));break;default:_dispatchEvent.bind(t)(this.eventListenersCapture,e),e.stopped!==2&&_dispatchEvent.bind(t)(this.eventListenersBubble,e)}},_proto_.hasEventListener=function(e,t){return t==null?this.eventListenersCapture[e]!=null&&this.eventListenersCapture[e].length||this.eventListenersBubble[e]!=null&&this.eventListenersBubble[e].length:this.eventListenersCapture[e]!=null&&this.eventListenersCapture[e].length&&this.eventListenersCapture[e].some(function(r){return r.listener==t})||this.eventListenersBubble[e]!=null&&this.eventListenersBubble[e].length&&this.eventListenersBubble[e].some(function(r){return r.listener==t})},_proto_.hasEventListenerBubble=function(e){return this.eventListenersBubble[e]!=null&&this.eventListenersBubble[e].length},_proto_.hasEventListenerCapture=function(e){return this.eventListenersCapture[e]!=null&&this.eventListenersCapture[e].length},_proto_._removeEventListener=function(e,t,r,a){var n=this;r=r===!0;var o=r?this.eventListenersCapture:this.eventListenersBubble,s=visibilityLikeEvent[e],_=o[e];if(_){for(var l=_.length,c=!1;l;){var d=_[--l];if(d.listener===t&&(!s||d.visibilityLikeEventTarget==(a||n))){c=!0;break}}if(c){var f=_.splice(l,1)[0];if(domEventList[e]){var u=new EventChangedEvent("domeventchanged",f,!1);this._dispatchEvent(u)}s&&n._parent&&n._parent._removeEventListener(e,t,r,d.visibilityLikeEventTarget)}}},_proto_.willTrigger=function(e){return this.hasEventListener(e)},mod.namespace("Events.IEventDispatcher",IEventDispatcher),mod.exportName(_proto_,["addEventListener",_proto_._addEventListener,"dispatchEvent",_proto_._dispatchEvent,"hasEventListener",_proto_.hasEventListener,"removeEventListener",_proto_._removeEventListener,"willTrigger",_proto_.willTrigger]);var ColorTransform=function(e){var t=this;t._alphaMultiplier=1,t._filters={},mod.definePropertyGetSet(t,["alphaMultiplier",t._getAlphaMultiplier,t._setAlphaMultiplier])};ColorTransform._tween=function(e,t,r,a,n){var o=a._filter(n);e._alphaMultiplier=(1-a._alpha(n))*(t._alphaMultiplier-r._alphaMultiplier)+r._alphaMultiplier;var s=function(f,u,p){return f==="drop-shadow"?[(1-o)*(u[0]-p[0])+p[0],(1-o)*(u[1]-p[1])+p[1],(1-o)*(u[2]-p[2])+p[2],Color._tween(u[3],p[3],o)]:(1-o)*(u-p)+p},_=t._filters,l=r._filters,c={},d=Object.keys(_);return Object.keys(l).forEach(function(f){_[f]||d.push(f)}),d.forEach(function(f){if(_[f]===void 0)var u=getUndefinedVal(f),p=ColorTransform.parseFilter(f,u);else p=_[f];if(l[f]===void 0){u=getUndefinedVal(f);var v=ColorTransform.parseFilter(f,u)}else v=l[f];c[f]=s(f,p,v)}),e._filters=c,e};var getUndefinedVal=ColorTransform._getUndefinedVal=function(e){return{grayscale:{itensity:0},brightness:{itensity:100},contrast:{itensity:100},saturate:{itensity:100},sepia:{itensity:0},invert:{itensity:0},blur:{itensity:0},"hue-rotate":{rotation:0},"drop-shadow":{h:0,v:0,itensity:0,color:"rgba(0,0,0,0)"}}[e]},getDefaultFilterVal=ColorTransform._getDefaultFilterVal=function(e){return{grayscale:{itensity:100},brightness:{itensity:50},contrast:{itensity:50},saturate:{itensity:50},sepia:{itensity:100},invert:{itensity:100},blur:{itensity:4},"hue-rotate":{rotation:180},"drop-shadow":{h:4,v:4,itensity:4,color:"rgba(0,0,0,1)"}}[e]},proto$1R=ColorTransform.prototype;proto$1R._parseParam=function(e){var t=this;t._alphaMultiplier=e.alpha;var r=e.filters||[];t._filters={},r.forEach(function(a){var n=a.name,o=a.config;o===void 0&&(o=getDefaultFilterVal(n)),t._filters[n]=ColorTransform.parseFilter(n,o)})},ColorTransform.parseFilter=function(e,t){var r=function(n,o){return n===void 0?o:n},a=getDefaultFilterVal(e);return e==="drop-shadow"?[r(t.h,a.h),r(t.v,a.v),r(t.itensity,a.itensity),t.color?Color.parse(t.color):Color.parse(a.color)]:e==="hue-rotate"?r(t.rotation,a.rotation):r(t.itensity,a.itensity)},proto$1R._generateFilterString=function(){var e="",t=this;return Object.keys(t._filters).forEach(function(r){var a=t._filters[r];switch(r){case"grayscale":case"brightness":case"contrast":case"saturate":case"sepia":case"invert":e+=r+"("+a+"%) ";break;case"blur":e+=r+"("+a+"px) ";break;case"hue-rotate":e+=r+"("+a+"deg) ";break;case"drop-shadow":e+=r+"("+a[0]+"px "+a[1]+"px "+a[2]+"px "+a[3]._getCssText()+") ";break}}),e},proto$1R._getAlphaMultiplier=function(){return this._alphaMultiplier},proto$1R._setAlphaMultiplier=function(e){this._alphaMultiplier=e},proto$1R._getFillInfo=function(){return this._fillInfo},proto$1R._setFillInfo=function(e){this._fillInfo=e},proto$1R._getStrokeColor=function(){return this._strokeColor},proto$1R._setStrokeColor=function(e){this._strokeColor=e},proto$1R._getLineWidth=function(){return this._lineWidth},proto$1R._setLineWidth=function(e){this._lineWidth=e},proto$1R._compare=function(e){e=e||{};var t=this,r,a;return t._alphaMultiplier===e._alphaMultiplier&&(r=Object.keys(t._filters))&&(a=Object.keys(e._filters))&&r.length===a.length&&r.every(function(n){var o=r[n],s=a[n];return n==="drop-shadow"?o!==void 0&&s!==void 0&&o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]&&o[2]===s[2]:!isNaN(o)&&!isNaN(s)&&o===s})},proto$1R._clone=function(){var e=this,t=new ColorTransform;t._alphaMultiplier=e._alphaMultiplier,t._filters=[];for(var r in e._filters)t._filters[r]=e._filters[r];return t},proto$1R._getAlpha=function(){var e=this,t=e._alphaMultiplier;return t<.001?0:t},mod.namespace("Geom.ColorTransform",ColorTransform),mod.exportName(ColorTransform,["getUndefinedVal",getUndefinedVal,"getDefaultFilterVal",getDefaultFilterVal]);var TextTransform=function(e){var t=this;t._letterSpace=0,t._fontSize=32,t._lineHeight=100,mod.definePropertyGetSet(t,["letterSpace",t._getLetterSpace,t._setLetterSpace,"fontSize",t._getFontSize,t._setFontSize,"lineHeight",t._getLineHeight,t._setLineHeight])},proto$1Q=TextTransform.prototype;proto$1Q._getLetterSpace=function(){return this._letterSpace},proto$1Q._setLetterSpace=function(e){this._letterSpace=e},proto$1Q._getFontSize=function(){return this._fontSize},proto$1Q._setFontSize=function(e){this._fontSize=e},proto$1Q._getLineHeight=function(){return this._lineHeight},proto$1Q._setLineHeight=function(e){this._lineHeight=e},proto$1Q._compare=function(e){e=e||{};var t=this;return t._letterSpace===e._letterSpace&&t._fontSize===e._fontSize&&t._lineHeight===e._lineHeight},proto$1Q._clone=function(){var e=this,t=new TextTransform;return t._letterSpace=e._letterSpace,t._fontSize=e._fontSize,t._lineHeight=e._lineHeight,t},mod.namespace("Geom.TextTransform",TextTransform);var Transform=function(){var e=this;e._matrix=new Matrix,e._colorTransform=new ColorTransform,e._paramTransform=null,e._beforeTranform=null,e._afterTransform=null,e._additionCss=null,mod.definePropertyGetSet(e,["matrix",e._getMatrix,e._setMatrix,"colorTransform",e._getColorTransform,e._setColorTransform,"paramTransform",e._getParamTransform,e._setParamTransform,"textTransform",e._getTextTransform,e._setTextTransform,"additionCss",e._getAdditionCss,e._setAdditionCss])},div=null;Transform._tween=function(e,t,r,a,n){Matrix._tween(e._matrix,t._matrix,r._matrix,a,n),ColorTransform._tween(e._colorTransform,t._colorTransform,r._colorTransform,a,n),e._paramTransform&&e._paramTransform.constructor._tween(e._paramTransform,t._paramTransform,r._paramTransform,a,n)};var proto$1P=Transform.prototype;proto$1P._parseParam=function(e,t){var r=this;r._matrix._parseParam(e),r._colorTransform._parseParam(e),r._paramTransform&&r._paramTransform._parseParam(e,t)},proto$1P._getAdditionCss=function(){return this._additionCss},proto$1P._setAdditionCss=function(e){e&&(div||(div=document.createElement("div")),div.style.cssText=e,e=div.style.cssText),this._additionCss=e},proto$1P._getMatrix=function(){return this._matrix},proto$1P._setMatrix=function(e){this._matrix=e},proto$1P._getColorTransform=function(){return this._colorTransform},proto$1P._setColorTransform=function(e){this._colorTransform=e},proto$1P._getParamTransform=function(){return this._paramTransform},proto$1P._setParamTransform=function(e){this._paramTransform=e},proto$1P._getTextTransform=function(){return this._textTransform},proto$1P._setTextTransform=function(e){this._textTransform=e},proto$1P._compare=function(e){var t=this;return e instanceof Transform?e===t?!0:t._matrix._compare(e._matrix)&&t._colorTransform._compare(e._colorTransform)&&(t._paramTransform==null&&e._paramTransform==null||t._paramTransform&&t._paramTransform._compareTo(e._paramTransform))&&t._beforeTranform==e._beforeTranform&&t._afterTransform==e._afterTransform&&t._additionCss==e._additionCss:!1},proto$1P._clone=function(){var e=this,t=new Transform;return t._matrix=e._matrix._clone(),t._colorTransform=e._colorTransform._clone(),e._paramTransform!=null&&(t._paramTransform=e._paramTransform._clone()),t._beforeTranform=e._beforeTranform,t._afterTransform=e._afterTransform,t._additionCss=e._additionCss,t},mod.namespace("Geom.Transform",Transform);var Rectangle=function(e,t,r,a){e=e||0,t=t||0,r=r||0,a=a||0;var n=this;n._height=a,n._left=e,n._top=t,n._width=r,mod.definePropertyGetSet(n,["bottom",n._getBottom,n._setBottom,"bottomRight",n._getBottomRight,n._setBottomRight,"height",n._getHeight,n._setHeight,"left",n._getLeft,n._setLeft,"right",n._getRight,n._setRight,"size",n._getSize,n._setSize,"top",n._getTop,n._setTop,"topLeft",n._getTopLeft,n._setTopLeft,"width",n._getWidth,n._setWidth,"x",n._getLeft,n._setLeft,"y",n._getTop,n._setTop])},proto$1O=Rectangle.prototype;proto$1O._getBottom=function(){var e=this;return e._top+e._height},proto$1O._setBottom=function(e){var t=this;t._height=e-t._top},proto$1O._getBottomRight=function(){var e=this;return new Point(e._left+e._width,e._top+e._height)},proto$1O._setBottomRight=function(e){var t=this;t._height=e._y-t._top,t._width=e._x-t._left},proto$1O._getBottomLeft=function(){var e=this;return new Point(e._left,e._top+e._height)},proto$1O._getHeight=function(){return this._height},proto$1O._setHeight=function(e){this._height=e},proto$1O._getLeft=function(){return this._left},proto$1O._setLeft=function(e){this._left=e},proto$1O._getRight=function(){var e=this;return e._left+e._width},proto$1O._setRight=function(e){var t=this;t._width=e-t._left},proto$1O._getSize=function(){var e=this;return new Point(e._width,e._height)},proto$1O._setSize=function(e){var t=this;t._width=e._x,t._height=e._y},proto$1O._getTop=function(){return this._top},proto$1O._setTop=function(e){this._top=e},proto$1O._getTopLeft=function(){var e=this;return new Point(e._left,e._top)},proto$1O._setTopLeft=function(e){var t=this;t._left=e._x,t._top=e._y},proto$1O._getTopRight=function(){var e=this;return new Point(e._left+e._width,e._top)},proto$1O._getWidth=function(){return this._width},proto$1O._setWidth=function(e){var t=this;t._width=e},proto$1O.clone=function(){var e=this;return new Rectangle(e._left,e._top,e._width,e._height)},proto$1O.contains=function(e,t){var r=this;return e>=r._left&&e<=r._left+r._width&&t>=r._top&&t<=r._top+r._width},proto$1O.containsPoint=function(e){var t=this;return t.contains(e._x,e._y)},proto$1O.containRect=function(e){var t=this;return t.contains(e._left,e._top)&&t.contains(e.left,e._getBottom())&&t.contains(e._getRight(),e.top)&&t.contains(e._getRight(),e._getBottom())},proto$1O.copyFrom=function(e){var t=this;t._left=e._left,t._top=e._top,t._width=e._width,t._height=e._height},proto$1O.equals=function(e){var t=this;return t._left===e._left&&t._top===e._top&&t._width===e._width&&t._height===e._height},proto$1O.inflate=function(e,t){var r=this;r._left-=e,r._width+=2*e,r._top-=t,r._height+=2*t},proto$1O.inflatePoint=function(e){return proto$1O.inflate(e._x,e._y)},proto$1O.intersection=function(e){var t=this,r=e,a=t._left+t._width,n=r._left+r._width,o=t._top+t._height,s=r._top+r._height;if(a<r._left||n<t._left||o<r._top||s<t._top)return new Rectangle;var _=Math.max(t._left,r._left),l=Math.max(t._top,r._top);return new Rectangle(_,l,Math.min(a,n)-_,Math.min(o,s)-l)},proto$1O.intersects=function(e){var t=this,r=e,a=t._left+t._width,n=r._left+r._width,o=t._top+t._height,s=r._top+r._height;return!(a<r._left||n<t._left||o<r._top||s<t._top)},proto$1O.isEmpty=function(){var e=this;return e._width<=0||e._height<=0},proto$1O.offset=function(e,t){var r=this;r._left+=e,r._top+=t},proto$1O.offsetPoint=function(e){var t=this;t.offset(e._x,e._y)},proto$1O.setEmpty=function(){this.setTo(0,0,0,0)},proto$1O.setTo=function(e,t,r,a){var n=this;n._left=e,n._width=r,n._top=t,n._height=a},proto$1O.toString=function(){var e=this;return"(x="+e._left+", y="+e._top+", width="+e._width+", height="+e._height+")"},mod.exportName(proto$1O,["clone",proto$1O.clone,"contains",proto$1O.contains,"containsPoint",proto$1O.containsPoint,"containRect",proto$1O.containRect,"copyFrom",proto$1O.copyFrom,"equals",proto$1O.equals,"inflate",proto$1O.inflate,"inflatePoint",proto$1O.inflatePoint,"intersection",proto$1O.intersection,"intersects",proto$1O.intersects,"isEmpty",proto$1O.isEmpty,"offset",proto$1O.offset,"offsetPoint",proto$1O.offsetPoint,"setEmpty",proto$1O.setEmpty,"setTo",proto$1O.setTo,"toString",proto$1O.toString]),mod.namespace("Geom.Rectangle",Rectangle);var Boundary=function(){this._nodes=[],mod.definePropertyReadOnly(this,["nodes",this._getNodes])},proto$1N=Boundary.prototype;proto$1N._getNodes=function(){return this._nodes},proto$1N._getRoundRect=function(){var e=1/0,t=-1/0,r=1/0,a=-1/0;return this._nodes.forEach(function(n){e>n._x&&(e=n._x),t<n._x&&(t=n._x),r>n._y&&(r=n._y),a<n._y&&(a=n._y)}),new Rectangle(e,r,t-e,a-r)},proto$1N._addPoint=function(e){var t=this._nodes;t.push(e)},proto$1N._clockwiseSortPoints=function(){for(var e=this._nodes,t=e.length,r=0,a=0,n=0;n<t;n++)r+=e[n]._x,a+=e[n]._y;var o=new Point(r/t,a/t);for(n=0;n<t-1;n++)for(var s=0;s<t-n-1;s++)if(Boundary._pointCmp(e[s],e[s+1],o)){var _=e[s];e[s]=e[s+1],e[s+1]=_}},Boundary._pointCmp=function(e,t,r){if(e._x>=0&&t._x<0)return!0;if(e._x==0&&t._x==0)return e._y>t._y;var a=(e._x-r._x)*(t._y-r._y)-(t._x-r._x)*(e._y-r._y);if(a<0)return!0;if(a>0)return!1;var n=(e._x-r._x)*(e._x-r._x)+(e._y-r._y)*(e._y-r._y),o=(t._x-r._x)*(t._x-r._y)+(t._y-r._y)*(t._y-r._y);return n>o},Boundary._polygonClip=function(e,t){var r=e._nodes,a=t._nodes,n=r.length,o=a.length;if(n<3||o<3)return!1;for(var s=new Boundary,_=0;_<n;_++)for(var l=(_+1)%n,c=0;c<o;c++){var d=(c+1)%o,f=Boundary._getCrossPoint(r[_],r[l],a[c],a[d]);f&&s._addPoint(f)}for(_=0;_<n;_++)Boundary._isPointInpolygon(t,r[_])&&s._addPoint(r[_]);for(_=0;_<o;_++)Boundary._isPointInpolygon(e,a[_])&&s._addPoint(a[_]);if(!(s._nodes.length<=0))return s._clockwiseSortPoints(),s},Boundary._getCrossPoint=function(e,t,r,a){if(Boundary._isRectCross(e,t,r,a)&&Boundary._isLineSegmentCross(e,t,r,a)){var n=(a._x-r._x)*(e._y-t._y)-(t._x-e._x)*(r._y-a._y),o=(e._y-r._y)*(t._x-e._x)*(a._x-r._x)+r._x*(a._y-r._y)*(t._x-e._x)-e._x*(t._y-e._y)*(a._x-r._x),s=o/n;n=(e._x-t._x)*(a._y-r._y)-(t._y-e._y)*(r._x-a._x),o=t._y*(e._x-t._x)*(a._y-r._y)+(a._x-t._x)*(a._y-r._y)*(e._y-t._y)-a._y*(r._x-a._x)*(t._y-e._y);var _=o/n;return new Point(s,_)}},Boundary._isRectCross=function(e,t,r,a){return Math.min(e._x,t._x)<=Math.max(r._x,a._x)&&Math.min(r._x,a._x)<=Math.max(e._x,t._x)&&Math.min(e._y,t._y)<=Math.max(r._y,a._y)&&Math.min(r._y,a._y)<=Math.max(e._y,t._y)},Boundary._isLineSegmentCross=function(e,t,r,a){var n=e._x*(r._y-t._y)+t._x*(e._y-r._y)+r._x*(t._y-e._y),o=e._x*(a._y-t._y)+t._x*(e._y-a._y)+a._x*(t._y-e._y);return!((n^o)>=0&&!(n==0&&o==0)||(n=r._x*(e._y-a._y)+a._x*(r._y-e._y)+e._x*(a._y-r._y),o=r._x*(t._y-a._y)+a._x*(r._y-t._y)+t._x*(a._y-r._y),(n^o)>=0&&!(n==0&&o==0)))},Boundary._isPointInpolygon=function(e,t){var r,a,n=!1,o=e._nodes,s=o.length;for(r=0,a=s-1;r<s;a=r++)(o[r]._y<=t._y&&t._y<o[a]._y||o[a]._y<=t._y&&t._y<o[r]._y)&&t._x<(o[a]._x-o[r]._x)*(t._y-o[r]._y)/(o[a]._y-o[r]._y)+o[r]._x&&(n=!n);return n},mod.namespace("Geom.Boundary",Boundary),mod.exportName(proto$1N,["addPoint",proto$1N._addPoint,"getRoundRect",proto$1N._getRoundRect]);var AniDataUtils=function(){};AniDataUtils.getTransformObjFromParam=function(e,t){var r=new Transform;return t._bindTrans(r),r._parseParam(e,t),r._matrix._calMatrixFormRaw(),r},AniDataUtils.colorToRgba=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(t)return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:1};var r=/^rgba\s?\(\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+(\.\d+)?)\s?\)\s?$/i.exec(e);return r?{r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:parseFloat(r[4])}:typeof e=="object"?{r:parseInt(e.r),g:parseInt(e.g),b:parseInt(e.b),a:parseFloat(e.a),p:parseFloat(e.p||0)}:null};var DisplayObject=function(e){DisplayObject.__super__.constructor.apply(this,arguments);var t=this;t._useNewId?t._id="n"+DisplayObject._counter2+++(Math.random()*100).toString().substr(0,1):t._id=DisplayObject._counter++,t._mouseX=0,t._mouseY=0,t._visible=!0,t._name=null,t._parent=e||null,t._transform=new Transform,t._rawWidth=0,t._rawHeight=0,t._maxWidth=null,t._maxHeight=null,t._offsetMatrix=null,t._flipMatrix=null,t._notInitialized=!0,t.actions=[],t._filters=[],t._filterStr="",t._easeFactors=[],t._actionClickList=[],t._actionLikedList=[],t._actionUnlikedList=[],t._actionChangeList=[],t._actionTouchStartList=[],t._actionTouchEndList=[],t._actionSlideList={},t._actionScriptHash={},t._actionDragEndList=[],t._hashPrivateActions={},t._behaviors=null,t._haveClickAction=!1,t._dragCaptured=!1,t._guid=null,t._forceHide=!1,t._aniData=null,t._link=null,t._changedEvent=new MuEvents("changed"),Browser$1.os.ios&&(t._changed3dEvent=new MuEvents("changed"),t._changed3dEvent._reason="3d"),t._visibilityEvent=new visibilityEvent("visibilityChanged",t),t._renderedEvent=new visibilityEvent("rendered",t),t._haveDom=!0,t._eventHandler=null,t._maskToList=null,t._maskByList=null,t._unitId=null,t._H=0,mod.definePropertyGetSet(t,["x",t._getX,t._setX,"y",t._getY,t._setY,"width",t._getWidth,t._setWidth,"height",t._getHeight,t._setHeight,"rawWidth",t._getRawWidth,t._setRawWidth,"rawHeight",t._getRawHeight,t._setRawHeight,"scaleX",t._getScaleX,t._setScaleX,"scaleY",t._getScaleY,t._setScaleY,"rotation",t._getRotation,t._setRotation,"alpha",t._getAlpha,t._setAlpha,"visible",t._getVisible,t._setVisible,"name",t._getName,t._setName,"transform",t._getTransform,t._setTransform]),mod.definePropertyReadOnly(t,["mouseX",t._getMouseX,"mouseY",t._getMouseY,"parent",t._getParent,"root",t._getRoot,"realVisible",t._getRealVisible,"aniData",t._getAniData,"stage",t._getStage,"id",t._getId,"type",t._getType])};mod.extend(DisplayObject,IEventDispatcher),DisplayObject._counter=0,DisplayObject._counter2=0;var proto$1M=DisplayObject.prototype;proto$1M._getId=function(){return this._id},proto$1M._getType=function(){return this._type},proto$1M._parseData=function(e){},proto$1M._reset=function(e){var t=this,r=t._aniData.param,a=t._aniData.type,n=t._getStage()._renderManager._mugeda,o=n._displayObjectHash[t._id],s=["left","top","width","height","alpha","rotate","text","frame","image","select"],_=e?e.split(","):s;_=_[0]==="all"?s:_,_.forEach(function(l){if(l=="image")o._defaultSrc&&(o._defaultSrc==="no"?o.src=void 0:o.src=o._defaultSrc);else if(l=="select")if(o.data.type==2038||o.data.type==2041){var c=o.dom.querySelectorAll("input");if(c.length)for(var d=0;d<c.length;d++)c[d].checked=!1}else o.data.type==2039&&(o.dom.querySelector("select").value="",o.text="请选择");else if(l=="frame"&&t._aniData.type==2021&&t._manualChange){var f=t._statusBeforeManualChange;f.paused?t.gotoAndStop(f.frame):t.gotoAndPlay(f.frame),t._toggleManualChange(!1)}else if(l=="text"&&(t._aniData.type==2038||t._aniData.type==2041)){for(var u=o.dom,p=u.querySelectorAll("input"),d=0;d<p.length;d++)p[d].checked=!1;o.checked=!1}else if(l==="text"&&t._aniData.type==2039)o.text=null;else{var v=r[l=="text"?"textContent":l];l=="text"&&(a==2031?v="":v=unescape(v));var h=o[l];v!==void 0&&h!=v&&(o[l]=v)}}),t._dispatchEvent(t._changedEvent)},proto$1M._onChanged=function(e){var t=this,r=t._actionChangeList;r.forEach(function(a){a.doAction()})},proto$1M._onDragged=function(e){var t=this,r=t._actionDragEndList;r.forEach(function(a){a.doAction()})},proto$1M._getRealVisible=function(){var e=this;return this._visible===!1?!1:e._parent?e._parent._getRealVisible():!0},proto$1M._getX=function(){return this._transform._matrix._tx},proto$1M._setX=function(e){var t=this,r=e-t._transform._matrix._tx;t._transform._matrix._rawLeft+=r,t._transform._matrix._tx=e,t._dispatchEvent(t._changedEvent)},proto$1M._getY=function(){return this._transform._matrix._ty},proto$1M._setY=function(e){var t=this,r=e-t._transform._matrix._ty;t._transform._matrix._rawTop+=r,t._transform._matrix._ty=e,t._dispatchEvent(t._changedEvent)},proto$1M._getRawWidth=function(){return this._rawWidth},proto$1M._setRawWidth=function(e){this._rawWidth=e},proto$1M._getRawHeight=function(){return this._rawHeight},proto$1M._setRawHeight=function(e){this._rawHeight=e},proto$1M._getWidth=function(){return this._rawWidth*this._getScaleX()},proto$1M._setWidth=function(e){var t=this,r=e/t._rawWidth;t._setScaleX(r),t._dispatchEvent(t._changedEvent)},proto$1M._getHeight=function(){return this._rawHeight*this._getScaleY()},proto$1M._setHeight=function(e){var t=this,r=e/this._rawHeight;t._setScaleY(r),t._dispatchEvent(t._changedEvent)},proto$1M._getScaleX=function(){var e=this,t=e._transform._matrix;return t._getScaleX()},proto$1M._setScaleX=function(e){var t=this,r=t._transform._matrix;r._setScaleX(e),t._dispatchEvent(t._changedEvent)},proto$1M._getScaleY=function(){var e=this,t=e._transform._matrix;return t._getScaleY()},proto$1M._setScaleY=function(e){var t=this,r=t._transform._matrix;r._setScaleY(e),t._dispatchEvent(t._changedEvent)},proto$1M._getMouseX=function(){return this._mouseX},proto$1M._getMouseY=function(){return this._mouseY},proto$1M._getRotation=function(){var e=this,t=e._transform._matrix;return t._getRotation()},proto$1M._setRotation=function(e){var t=this,r=t._transform._matrix;r._setRotation(e),r._rawSita=e,t._dispatchEvent(t._changedEvent)},proto$1M._getAlpha=function(){return this._transform._colorTransform._alphaMultiplier},proto$1M._setAlpha=function(e){var t=this;if(t._transform._colorTransform._alphaMultiplier!=e)var r=!0;t._transform._colorTransform._alphaMultiplier=e,r&&t._dispatchEvent(t._changedEvent)},proto$1M._getVisible=function(){return this._visible},proto$1M._setVisible=function(e,t){var r=this;if(t===1&&(e==!1?r._forceHide=!0:r._forceHide=null),r._visible!=e)var a=!0;var n=r._visible;return r._visible=e,a&&(r._dispatchEvent(r._changedEvent),r._dispatchEvent(r._visibilityEvent)),n},proto$1M._getName=function(){return this._name},proto$1M._setName=function(e){this._name=e},proto$1M._setAttribute=function(e,t){},proto$1M._getAttribute=function(e){},proto$1M._getObject=function(e){},proto$1M._getParent=function(){return this._parent},proto$1M._getRoot=function(e){var t=this;return t._parent==null?null:t._parent._getRoot(e)},proto$1M._getCurrentFrame=function(){var e=this;return e._currentFrame!==null&&e._currentFrame!==void 0?e._currentFrame:e._parent==null?null:e._parent._getCurrentFrame()},proto$1M._getCurrentSceneFrame=function(){var e=this;return e._currentSceneFrame!==null&&e._currentSceneFrame!==void 0?e._currentSceneFrame:e._parent==null?null:e._parent._getCurrentSceneFrame()},proto$1M._getStage=function(){var e=this;return e._parent==null?null:e._parent._getStage()},proto$1M._getTransform=function(){return this._transform},proto$1M._setTransform=function(e){var t=this,r=!0;t._transform==e||t._transform._compare(e)?r=!1:t._transform=e,r&&t._dispatchEvent(t._changedEvent)},proto$1M.update=function(e){},proto$1M._getTotalMatrix=function(){var e=this,t=this._transform._matrix;return e._parent&&e._parent._offsetMatrix&&(t=Matrix._multiplication(e._parent._offsetMatrix,t)),e._parent&&e._parent._id!=0?Matrix._multiplication(e._parent._getTotalMatrix(),t):t},proto$1M._getBoundary=function(e,t,r){r=r||{};var a=new Boundary,n=this;if(t=t||0,r.total&&(e=n._getTotalMatrix()),e==null)return a._addPoint(new Point(0-t,0-t)),a._addPoint(new Point(n._rawWidth+t,0-t)),a._addPoint(new Point(n._rawWidth+t,n._rawHeight+t)),a._addPoint(new Point(0-t,n._rawHeight+t)),a;if(a._addPoint(e._transform(new Point(0-t,0-t),!0)),a._addPoint(e._transform(new Point(n._rawWidth+t,0-t),!0)),a._addPoint(e._transform(new Point(n._rawWidth+t,n._rawHeight+t),!0)),a._addPoint(e._transform(new Point(0-t,n._rawHeight+t),!0)),r.plain){var o=a.nodes;return{left:o[0]._x,top:o[0]._y,right:o[2]._x,bottom:o[2]._y}}else return a},proto$1M._addResource=function(e){this._resourceList==null?this._resourceList=[e]:this._resourceList.push(e)},proto$1M._getRect=function(){var e=this,t=e._getTotalMatrix(),r=t._transform(new Point(0,0)),a=t._transform(new Point(e._rawWidth,0)),n=t._transform(new Point(0,e._rawHeight)),o=t._transform(new Point(e._rawWidth,e._rawHeight));return{left:Math.min(r.x,o.x,a.x,n.x),top:Math.min(r.y,o.y,a.y,n.y),right:Math.max(r.x,o.x,a.x,n.x),bottom:Math.max(r.y,o.y,a.y,n.y)}},proto$1M._getStagePosition=function(e,t){var r=this,a=r._getTotalMatrix(),n=new Point(0,0);a._transform(n,!0);var o=e!==void 0?e-r._getX():0,s=t!==void 0?t-r._getY():0;return{left:n._x+o,top:n._y+s}},proto$1M._getFixedParam=function(e){return e.rawWidth===void 0&&(e.rawWidth=e.width),e.rawHeight===void 0&&(e.rawHeight=e.height),e.rawWidth<1&&(e.rawWidth=1),e.rawHeight<1&&(e.rawHeight=1),e.width<1&&(e.width=1),e.height<1&&(e.height=1),e},proto$1M.parseParamToDisplayObject=function(e,t){var r=this;e=r._getFixedParam(e,t);var a=e.name;a&&(r._name=a),e.rotate,e.width,e.height;var n=e.rawWidth,o=e.rawHeight,s=e.vF,_=e.hF;(s||_)&&(r._flipMatrix=new Matrix(_?-1:1,0,0,s?-1:1,_?n:0,s?o:0));var l=AniDataUtils.getTransformObjFromParam(e,r);r._setTransform(l),r._updateDisplayObjectFromTransform(l)},proto$1M._updateDisplayObjectFromTransform=function(e){var t=this;t._rawWidth=e._matrix._rawWidth,t._rawHeight=e._matrix._rawHeight,t._width=t._rawWidth*e._matrix._rawScaleX,t._height=t._rawHeight*e._matrix._rawScaleY},proto$1M.tweenParam=function(e,t,r,a){e||(e={}),e.lineCap=t.lineCap||"round",e.lineJoin=t.lineJoin||"round";var n=typeof a=="object"?a:{},o=n.default==null?a:n.default,s=n.left==null?o:n.left,_=n.top==null?o:n.top,l=n.width==null?o:n.width,c=n.height==null?o:n.height,d=n.rotation==null?o:n.rotation,f=n.filter==null?o:n.filter,u=n.alpha==null?o:n.alpha;e.startX=t.startX+s*(r.startX-t.startX),e.startY=t.startY+_*(r.startY-t.startY),e.endX=t.endX+s*(r.endX-t.endX),e.endY=t.endY+_*(r.endY-t.endY),e.width=t.width+l*(r.width-t.width),e.height=t.height+c*(r.height-t.height),e.alpha=t.alpha+u*(r.alpha-t.alpha),e.scaleX=t.scaleX+l*(r.scaleX-t.scaleX),e.scaleY=t.scaleY+c*(r.scaleY-t.scaleY),e.rotate=t.rotate+d*(r.rotate-t.rotate),t.rotateX!=null&&t.rotateY!=null&&r.rotateX!=null&&r.rotateY!=null&&(e.rotateX=t.rotateX+d*(r.rotateX-t.rotateX),e.rotateY=t.rotateY+d*(r.rotateY-t.rotateY),e.pers=t.pers+o*(r.pers-t.pers)),t.rotateCenterX!==void 0&&r.rotateCenterX!==void 0&&t.rotateCenterY!==void 0&&r.rotateCenterY!==void 0&&(e.rotateCenterX=t.rotateCenterX+d*(r.rotateCenterX-t.rotateCenterX),e.rotateCenterY=t.rotateCenterY+d*(r.rotateCenterY-t.rotateCenterY)),e.customPivot=!0;var p=function($,R,I,P,N){return{p:$,r:R,g:I,b:P,a:N}},v=function(){var $={fillStyle:0,fillImage:"",fillStartPos:{x:32,y:10},fillEndPos:{x:80,y:100},fillColors:[p(0,144,200,255,1),p(.8,255,144,200,1),p(1,200,255,144,1)]};return $};e.fillInfo=e.fillInfo||v(),t.fillInfo&&r.fillInfo&&(t.fillInfo.fillStyle==1||t.fillInfo.fillStyle==2)&&(e.fillInfo.fillStartPos.x=t.fillInfo.fillStartPos.x+o*(r.fillInfo.fillStartPos.x-t.fillInfo.fillStartPos.x),e.fillInfo.fillStartPos.y=t.fillInfo.fillStartPos.y+o*(r.fillInfo.fillStartPos.y-t.fillInfo.fillStartPos.y),e.fillInfo.fillEndPos.x=t.fillInfo.fillEndPos.x+o*(r.fillInfo.fillEndPos.x-t.fillInfo.fillEndPos.x),e.fillInfo.fillEndPos.y=t.fillInfo.fillEndPos.y+o*(r.fillInfo.fillEndPos.y-t.fillInfo.fillEndPos.y)),e.fillInfo.fillImage=t.fillInfo.fillImage||r.fillInfo.fillImage,e.fillInfo.imagePosition=t.fillInfo.imagePosition||r.fillInfo.imagePosition,e.fillInfo.imageSize=t.fillInfo.imageSize||r.fillInfo.imageSize;var h=parseFloat(t.fillInfo.horOffset)||0,m=parseFloat(r.fillInfo.horOffset)||0,T=parseFloat(t.fillInfo.verOffset)||0,y=parseFloat(r.fillInfo.verOffset)||0;if(e.fillInfo.horOffset=h+o*(m-h),e.fillInfo.verOffset=T+o*(y-T),e.left=e.startX,e.top=e.startY,e.right=e.startX+e.width,e.bottom=e.startY+e.height,t.curve&&r.curve&&t.curve.points&&r.curve.points&&t.curve.points.length==r.curve.points.length){var E=AniDataUtils.colorToRgba(t.strokeColor),g=AniDataUtils.colorToRgba(r.strokeColor),b={r:Math.max(0,Math.min(255,Math.floor(E.r+o*(g.r-E.r)))),g:Math.max(0,Math.min(255,Math.floor(E.g+o*(g.g-E.g)))),b:Math.max(0,Math.min(255,Math.floor(E.b+o*(g.b-E.b)))),a:Math.max(0,Math.min(1,E.a+o*(g.a-E.a)))},w=Math.min(1,Math.max(0,b.a));if(e.strokeColor="rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+w+")",e.lineWidth=parseInt(t.lineWidth)+o*(parseInt(r.lineWidth)-parseInt(t.lineWidth)),e.fillInfo.fillStyle=t.fillInfo.fillStyle||r.fillInfo.fillStyle,e.fillInfo.fillColors=[],t.fillInfo&&r.fillInfo){var x=t.fillStyle==0?1:t.fillInfo.fillColors.length,C=r.fillStyle==0?1:r.fillInfo.fillColors.length,M=Math.max(x,C),A=t.fillInfo.fillStyle==0?r.fillInfo.fillStartPos:t.fillInfo.fillStartPos,O=r.fillInfo.fillStyle==0?t.fillInfo.fillStartPos:r.fillInfo.fillStartPos;e.fillInfo.fillStartPos.x=A.x+o*(O.x-A.x),e.fillInfo.fillStartPos.y=A.y+o*(O.y-A.y),A=t.fillInfo.fillStyle==0?r.fillInfo.fillEndPos:t.fillInfo.fillEndPos,O=r.fillInfo.fillStyle==0?t.fillInfo.fillEndPos:r.fillInfo.fillEndPos,e.fillInfo.fillEndPos.x=A.x+o*(O.x-A.x),e.fillInfo.fillEndPos.y=A.y+o*(O.y-A.y);for(var S=0;S<M;S++){var E=AniDataUtils.colorToRgba(t.fillInfo.fillColors[Math.min(x-1,S)]),g=AniDataUtils.colorToRgba(r.fillInfo.fillColors[Math.min(C-1,S)]);if(!(E&&g))break;var L=isFinite(E.p)?E.p:g.p,D=isFinite(g.p)?g.p:E.p,b={r:Math.max(0,Math.min(255,Math.floor(E.r+o*(g.r-E.r)))),g:Math.max(0,Math.min(255,Math.floor(E.g+o*(g.g-E.g)))),b:Math.max(0,Math.min(255,Math.floor(E.b+o*(g.b-E.b)))),p:Math.max(0,Math.min(1,L+o*(D-L))),a:Math.max(0,Math.min(1,E.a+o*(g.a-E.a)))};e.fillInfo.fillColors.push(b)}}}return this.tweenFilter(e,t,r,f),e},proto$1M.tweenFilter=function(e,t,r,a){var n=t.filters||[],o=r.filters||[],s={};n.forEach(function(x){s[x.name]={config1:x.config||{},config2:void 0}}),o.forEach(function(x){s[x.name]=s[x.name]||{config1:void 0},s[x.name].config2=x.config||{}});var _=[];for(var l in s){var c=s[l],d=c.config1,f=c.config2,u=100,p=0,v="itensity",h,m,T,y=function(x,C,M,A){return x==null?A:x[C]==null?M:x[C]},E={name:l};if(E.config={},l=="drop-shadow"){[v,"h","v"].forEach(function(x){m=y(d,x,4,0),T=y(f,x,4,0),h=m+a*(T-m),E.config[x]=h}),m=y(d,"color","rgba(0,0,0,1)","rgba(0,0,0,0)"),T=y(f,"color","rgba(0,0,0,1)","rgba(0,0,0,0)");var g=AniDataUtils.colorToRgba(m),b=AniDataUtils.colorToRgba(T),w={r:Math.min(255,Math.max(0,Math.floor(g.r+a*(b.r-g.r)))),g:Math.min(255,Math.max(0,Math.floor(g.g+a*(b.g-g.g)))),b:Math.min(255,Math.max(0,Math.floor(g.b+a*(b.b-g.b)))),a:Math.min(1,Math.max(0,g.a+a*(b.a-g.a)))};w.a=w.a<.001?0:w.a,E.config.color="rgba("+Math.floor(w.r)+","+Math.floor(w.g)+","+Math.floor(w.b)+","+w.a+")",_.push(E)}else["brightness","saturate","contrast"].indexOf(l)>=0?(u=50,p=100):["hue-rotate"].indexOf(l)>=0?(u=180,p=0,v="rotation"):["blur"].indexOf(l)>=0&&(u=4,p=0),m=y(d,v,u,p),T=y(f,v,u,p),h=m+a*(T-m),E.config[v]=h,_.push(E)}e.filters=_},proto$1M._bindTrans=function(){},proto$1M._bindUserAPI=function(e){},proto$1M._hasPresetAnimation=function(){return this._presetAnimation},proto$1M._getRenderObject=function(e){return(e||this._getRoot()._renderManager)._getRenderObjectByDisplayId(this._id)},proto$1M._initProcessAnimation=function(){},proto$1M._getProcessAnimationLength=function(){return 0},proto$1M._setProcessAnimationRatio=function(e){},mod.exportName(proto$1M,["getTotalMatrix",proto$1M._getTotalMatrix,"getBoundary",proto$1M._getBoundary,"hasPresetAnimation",proto$1M._hasPresetAnimation,"getRenderObject",proto$1M._getRenderObject]),mod.namespace("Display.DisplayObject",DisplayObject);var InteractiveObject=function(){InteractiveObject.__super__.constructor.apply(this,arguments)};mod.extend(InteractiveObject,DisplayObject),mod.namespace("Display.InteractiveObject",InteractiveObject);var Assert=function(e,t){if(e==null||!(e instanceof t))throw new TypeError};Assert.Num=function(e){if(e*1!==e)throw new TypeError},Assert.Int=function(e){if(Math.floor(e)!==e)throw new TypeError},Assert.Str=function(e){if(e==null||e.constructor!==String)throw new TypeError},mod.exportName(Assert,["Num",Assert.Num]),mod.exportName(Assert,["Str",Assert.Str]),mod.namespace("Utils.Assert",Assert);var DisplayObjectContainer=function(){DisplayObjectContainer.__super__.constructor.apply(this,arguments);var e=this;e.mouseChildren=!0,e.numChildren=0,e.children=[],e.containerCachedFresh=!0,e.containerCache=[],mod.definePropertyReadOnly(e,["numChildren",function(){return e.children.length}])};mod.extend(DisplayObjectContainer,InteractiveObject);var _prop_=DisplayObjectContainer.prototype;_prop_.setContainerCachedFresh=function(e){var t=this;e instanceof DisplayObjectContainer&&(t.containerCachedFresh=!1)},_prop_.addChild=function(e){var t=this;if(e===t)throw new TypeError;return t.regChild(e),e instanceof DisplayObjectContainer&&(t.containerCachedFresh=!1),t.children.push(e),e},_prop_.addChildAt=function(e,t){Assert.Int(t),Assert(e,DisplayObject);var r=this,a=r.children;if(Assert(e,DisplayObject),r.regChild(e),t>a.length)throw new RangeError;return a.splice(t,0,e),e},_prop_.regChild=function(e){var t=this,r=e._parent;r!=null&&r instanceof DisplayObjectContainer&&r.removeChild(e),t.setContainerCachedFresh(e),e._parent=t,e._addParentVisibilityLikeEvent&&e._addParentVisibilityLikeEvent();var a=new NodeEvent("addchild",e);t._dispatchEvent(a)},_prop_.contains=function(e){Assert(e,DisplayObject);var t=this,r=t.children;if(r.indexOf(e)!==-1)return!0;var a=t.getContainerChildren(),n=a.length,o;for(o=0;o<n;o++)if(a[o].contains(e))return!0;return!1},_prop_.getContainerChildren=function(){var e=this;return e.containerCachedFresh||(e.containerCache=e.children.filter(function(t){return t instanceof DisplayObjectContainer}),e.containerCachedFresh=!0),e.containerCache},_prop_.getDisplayObjectListByType=function(e,t){var r=this,a=r.children,n=a.filter(function(s){return s instanceof e}),o=r.getContainerChildren();return o.forEach(function(s){(!t||!(s instanceof t))&&n.concat(s.getDisplayObjectListByType(e,t))}),n},_prop_.getChildAt=function(e){Assert.Int(e);var t=this,r=t.children;if(e>r.length-1)throw new RangeError;return r[e]},_prop_.getChildByName=function(e){var t=this,r=t.children,a=r.length,n;for(n=a-1;n>-1;n--)if(r[n]._name===e)return r[n];return null},_prop_.getChild=function(){return this.children},_prop_.getChildIndex=function(e){Assert(e,DisplayObject);var t=this,r=t.children,a=r.indexOf(e);if(a==-1)throw new TypeError;return a},_prop_.getObjectUnderPoint=function(e){},_prop_.removeChild=function(e){var t=this;Assert(e,DisplayObject);var r=t.children.indexOf(e);if(r===-1){if(t!==e._parent)throw new RangeError}else return t.removeChildAt(r)},_prop_.removeChildAt=function(e){Assert.Int(e);var t=this,r=t.children;if(e>r.length-1)throw new RangeError;var a=r[e];a._removeParentVisibilityLikeEvent(),a._parent=null,r.splice(e,1),t.setContainerCachedFresh(a);var n=new NodeEvent("remove",a);return t._dispatchEvent(n),n=new NodeEvent("removed"),a._dispatchEvent(n),a},_prop_.setChildIndex=function(e,t){Assert(e,DisplayObject),Assert.Int(t);var r=this,a=r.children,n=a.indexOf(e);if(n===-1)throw new RangeError;a.splice(n,1),n<t?a.splice(t-1,0,e):n>t&&a.splice(t,0,e)},_prop_.swapChildren=function(e,t){Assert(e,DisplayObject),Assert(t,DisplayObject);var r=this,a=r.children,n=a.indexOf(e),o=a.indexOf(t);if(n==-1||o==-1)throw new TypeError;r.swapChildrenAt(n,o)},_prop_.swapChildrenAt=function(e,t){Assert.Int(e),Assert.Int(t);var r=this,a=r.children,n=a.length;if(e>n-1||t>n-1)throw new RangeError;var o=a[e],s=a[t];a[t]=o,a[e]=s},_prop_._getDisplayObjectById=function(e,t){var r=this,a=r.children,n=a.length,o;for(o=0;o<n;o++){var s=a[o],_=t=="guid"?s._guid:s._id;if(_==e)return s;if(s._getDisplayObjectById){var l=s._getDisplayObjectById(e,t);if(l)return l}}},_prop_._getDisplayObjectByGuid=function(e){return this._getDisplayObjectById(e,"guid")},mod.exportName(_prop_,["addChild",_prop_.addChild,"addChildAt",_prop_.addChildAt,"contains",_prop_.contains,"getChildAt",_prop_.getChildAt,"getChildByName",_prop_.getChildByName,"getChildIndex",_prop_.getChildIndex,"getObjectUnderPoint",_prop_.getObjectUnderPoint,"removeChild",_prop_.removeChild,"removeChildAt",_prop_.removeChildAt,"setChildIndex",_prop_.setChildIndex,"swapChildren",_prop_.swapChildren,"swapChildrenAt",_prop_.swapChildrenAt,"getDisplayObjectListByType",_prop_.getDisplayObjectListByType]),mod.namespace("Display.DisplayObjectContainer",DisplayObjectContainer);var Sprite=function(){var e=this;Sprite.__super__.constructor.apply(e,arguments),e._haveAnimation=!1,e._type="Sprite"};mod.extend(Sprite,DisplayObjectContainer);var proto$1L=Sprite.prototype;proto$1L.update=function(e){e=e||{};for(var t=this,r=t.children.length,a=0;a<r;a++){var n=t.children[a];n._type!="MovieClip"&&(n._type=="Sprite"||n instanceof DisplayObject)&&n.update(e)}},proto$1L._getFixedParam=function(e,t){return e.render==="trim"&&(e.rawWidth=e.width,e.rawHeight=e.height),Sprite.__super__._getFixedParam.call(this,e,t),e},proto$1L.tweenParam=function(e,t,r,a){e=Sprite.__super__.tweenParam.apply(this,arguments);var n=typeof a=="object"?a:{},o=n.default===void 0?a:n.default;if(t.render=="trim"&&r.render=="trim"){e.render="trim";var s=parseFloat(t.horOffset)||0,_=parseFloat(r.horOffset)||0,l=parseFloat(t.verOffset)||0,c=parseFloat(t.verOffset)||0;e.horOffset=s+o*(_-s),e.verOffset=l+o*(c-l)}return e},mod.namespace("Display.Sprite",Sprite);var Bezier=function(){};function bezierInterpolate$1(e,t,r,a,n,o){var s=Math.pow(t,3)*r+3*Math.pow(t,2)*e*a+3*t*Math.pow(e,2)*n+Math.pow(e,3)*o;return s}function bezierGetPoint$1(e,t,r){var a=1-r,n=e.nodeX,o=e.nodeY,s=e.forwardX,_=e.forwardY,l=t.backwardX,c=t.backwardY,d=t.nodeX,f=t.nodeY,u=bezierInterpolate$1(r,a,n,s,l,d),p=bezierInterpolate$1(r,a,o,_,c,f);return{x:u,y:p}}Bezier.getPoint=function(e,t,r){return bezierGetPoint$1(e,t,r)},Bezier.subdivision=function(e,t,r){function a(u,p,v){var h=u+v*(p-u);return h}var n=e.length,o=t,s=t+1;s==n&&(s=0);var _={},l={},c={};_.x=a(e[o].nodeX,e[o].forwardX,r),_.y=a(e[o].nodeY,e[o].forwardY,r),l.x=a(e[s].backwardX,e[s].nodeX,r),l.y=a(e[s].backwardY,e[s].nodeY,r);var d=a(e[o].forwardX,e[s].backwardX,r),f=a(e[o].forwardY,e[s].backwardY,r);c.backwardX=a(_.x,d,r),c.backwardY=a(_.y,f,r),c.forwardX=a(d,l.x,r),c.forwardY=a(f,l.y,r),c.nodeX=a(c.backwardX,c.forwardX,r),c.nodeY=a(c.backwardY,c.forwardY,r),e[o].forwardX=_.x,e[o].forwardY=_.y,e[s].backwardX=l.x,e[s].backwardY=l.y,t===n-1?e.push(c):e.splice(s,0,c)},mod.namespace("Utils.Bezier",Bezier);var Tween=function(){var e,t,r,a,n=[];return{start:function(o){r=setInterval(this.update,1e3/(o||60))},stop:function(){clearInterval(r)},add:function(o){n.push(o)},getAll:function(){return n},removeAll:function(){n=[]},remove:function(o){e=n.indexOf(o),e!==-1&&n.splice(e,1)},update:function(){for(e=0,t=n.length,a=new Date().getTime();e<t;)n[e].update(a)?e++:(n.splice(e,1),t--)}}}();Tween.Tween=function(e){var t=e,r={},a={},n={},o=1e3,s=0,_=null,l=Tween.Easing.Linear.EaseNone,c=null,d=null,f=null,u=this;u.to=function(p,v){v!==null&&(o=v);for(var h in p)t[h]!==null&&(n[h]=p[h]);return this},u.start=function(){Tween.add(this),_=new Date().getTime()+s;for(var p in n)t[p]!==null&&(r[p]=t[p],a[p]=n[p]-t[p]);return this},u.stop=function(){return Tween.remove(this),this},u.delay=function(p){return s=p,this},u.easing=function(p){return l=p,this},u.chain=function(p){c=p},u.onUpdate=function(p){return d=p,this},u.onComplete=function(p){return f=p,this},u.getFactor=function(p,v){var h,m;if(h=Math.min(1,Math.max(0,p)),v){m={},v.default==null&&(m.default=l(h,0,0,1,1));for(var T in v){var y=v[T];y&&y.length>5&&(m[T]=l(h,y[2],y[3],y[4],y[5]))}}else m=l(h);return m},u.update=function(p){var v,h,m;if(p<_)return!0;h=(p-_)/o,h=h>1?1:h,m=l(h);for(v in a)t[v]=r[v]+a[v]*m;return d!==null&&d.call(t,m),h==1?(f!==null&&f.call(t),c!==null&&c.start(),!1):!0}},Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{},Step:{},Bezier:{}},Tween.Easing.Linear.EaseNone=function(e){return e},Tween.Easing.Linear.EaseAcc=function(e,t){t=t===void 0?0:t;var r=2/(1+t),a=r*(t-1);return r*e+.5*a*e*e},Tween.Easing.Quadratic.EaseIn=function(e){return e*e},Tween.Easing.Quadratic.EaseOut=function(e){return-e*(e-2)},Tween.Easing.Quadratic.EaseInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},Tween.Easing.Cubic.EaseIn=function(e){return e*e*e},Tween.Easing.Cubic.EaseOut=function(e){return--e*e*e+1},Tween.Easing.Cubic.EaseInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},Tween.Easing.Quartic.EaseIn=function(e){return e*e*e*e},Tween.Easing.Quartic.EaseOut=function(e){return-(--e*e*e*e-1)},Tween.Easing.Quartic.EaseInOut=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},Tween.Easing.Quintic.EaseIn=function(e){return e*e*e*e*e},Tween.Easing.Quintic.EaseOut=function(e){return(e=e-1)*e*e*e*e+1},Tween.Easing.Quintic.EaseInOut=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},Tween.Easing.Sinusoidal.EaseIn=function(e){return-Math.cos(e*Math.PI/2)+1},Tween.Easing.Sinusoidal.EaseOut=function(e){return Math.sin(e*Math.PI/2)},Tween.Easing.Sinusoidal.EaseInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},Tween.Easing.Exponential.EaseIn=function(e){return e==0?0:Math.pow(2,10*(e-1))},Tween.Easing.Exponential.EaseOut=function(e){return e==1?1:-Math.pow(2,-10*e)+1},Tween.Easing.Exponential.EaseInOut=function(e){return e==0?0:e==1?1:(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*(e-1))+2)},Tween.Easing.Circular.EaseIn=function(e){return-(Math.sqrt(1-e*e)-1)},Tween.Easing.Circular.EaseOut=function(e){return Math.sqrt(1- --e*e)},Tween.Easing.Circular.EaseInOut=function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},Tween.Easing.Elastic.EaseIn=function(e){var t,r=.1,a=.25;return e==0?0:e==1?1:(!r||r<1?(r=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)))},Tween.Easing.Elastic.EaseOut=function(e){var t,r=.1,a=.25;return e==0?0:e==1?1:(!r||r<1?(r=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/a)+1)},Tween.Easing.Elastic.EaseInOut=function(e){var t,r=.1,a=.25;return e==0?0:e==1?1:(!r||r<1?(r=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/r),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/a)*.5+1)},Tween.Easing.Back.EaseIn=function(e){var t=1.70158;return e*e*((t+1)*e-t)},Tween.Easing.Back.EaseOut=function(e){var t=1.70158;return(e=e-1)*e*((t+1)*e+t)+1},Tween.Easing.Back.EaseInOut=function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},Tween.Easing.Bounce.EaseIn=function(e){return 1-Tween.Easing.Bounce.EaseOut(1-e)},Tween.Easing.Bounce.EaseOut=function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},Tween.Easing.Bounce.EaseInOut=function(e){return e<.5?Tween.Easing.Bounce.EaseIn(e*2)*.5:Tween.Easing.Bounce.EaseOut(e*2-1)*.5+.5},Tween.Easing.Step.EaseIn=function(e){return 1},Tween.Easing.Step.EaseOut=function(e){return 0},Tween.Easing.Bezier.Ease=function(e,t,r,a,n){var o=1-e,s=3*o*o*e*t+3*o*e*e*a+e*e*e,_=3*o*o*e*r+3*o*e*e*n+e*e*e;return{x:s,y:_}};var PI=Math.PI;function Complex(e,t,r,a){if(t=t||0,!(this instanceof Complex))return new Complex(e,t,r,a);typeof r=="number"?this.m=Math.abs(r):this.m=Math.sqrt(e*e+t*t),typeof a=="number"?this.t=r>=0?a:a+PI:this.t=Math.atan2(t,e),this.t=(this.t%(PI*2)+PI*2)%(PI*2),this.t-=this.t>PI?PI*2:0,this.r=e,this.i=t}Complex.sqrt=function(e){return e.rPow(.5)},Complex.cbrt=function(e){return e.rPow(1/3)},Complex.prototype.rPow=function(e){return Complex.Polar(Math.pow(this.m,e),this.t*e)},Complex.Polar=function(e,t){return new Complex(e*Math.cos(t),e*Math.sin(t),e,t)},Complex.prototype.add=function(e){return new Complex(this.r+e.r,this.i+e.i)},Complex.prototype.sub=function(e){return new Complex(this.r-e.r,this.i-e.i)},Complex.prototype.mult=function(e){return Complex.Polar(this.m*e.m,this.t+e.t)},Tween.CubicBezier=function(e,t,r,a){var n=3*e-3*r+1,o=3*r-6*e,s=3*e,_=3*t-3*a+1,l=3*a-6*t,c=3*t,d=o/3/n,f=s/3/n-d*d;return function(u){if(Math.abs(u-1)<1e-4)return 1;var p=o*s/6/n/n-o*o*o/27/n/n/n+u/2/n,v=p*p+f*f*f;if(v>0){var h=.3333333333333333,m=Math.sqrt(v),T=p+m,y=p-m;return T=T>=0?Math.pow(T,h):-Math.pow(-T,h),y=y>=0?Math.pow(y,h):-Math.pow(-y,h),L=T+y-d,((_*L+l)*L+c)*L}else{var E=new Complex(v),g=Complex.sqrt(E),b=new Complex(p).add(g),w=new Complex(p).sub(g);b=Complex.cbrt(b),w=Complex.cbrt(w);var x=new Complex(d),C=new Complex(-1/2,Math.sqrt(3)/2),M=new Complex(-1/2,-Math.sqrt(3)/2),A=b.add(w).sub(x),O=C.mult(b).add(M.mult(w)).sub(x),S=M.mult(b).add(C.mult(w)).sub(x),L;return A.i<1e-4&&A.r>-1e-4&&A.r<1.0001?L=A:O.i<1e-4&&O.r>-1e-4&&O.r<1.0001?L=O:S.i<1e-4&&S.r>-1e-4&&S.r<1.0001&&(L=S),((_*L.r+l)*L.r+c)*L.r}}},Tween.GetEasingPercent=function(e,t){var r=Tween.map[t];return r(e)},Tween.map={"Linear.EaseNone":Tween.Easing.Linear.EaseNone,"Linear.EaseAcc":Tween.Easing.Linear.EaseAcc,"Quadratic.EaseIn":Tween.Easing.Quadratic.EaseIn,"Quadratic.EaseOut":Tween.Easing.Quadratic.EaseOut,"Quadratic.EaseInOut":Tween.Easing.Quadratic.EaseInOut,"Cubic.EaseIn":Tween.Easing.Cubic.EaseIn,"Cubic.EaseOut":Tween.Easing.Cubic.EaseOut,"Cubic.EaseInOut":Tween.Easing.Cubic.EaseInOut,"Quartic.EaseIn":Tween.Easing.Quartic.EaseIn,"Quartic.EaseOut":Tween.Easing.Quartic.EaseOut,"Quartic.EaseInOut":Tween.Easing.Quartic.EaseInOut,"Quintic.EaseIn":Tween.Easing.Quintic.EaseIn,"Quintic.EaseOut":Tween.Easing.Quintic.EaseOut,"Quintic.EaseInOut":Tween.Easing.Quintic.EaseInOut,"Sinusoidal.EaseIn":Tween.Easing.Sinusoidal.EaseIn,"Sinusoidal.EaseOut":Tween.Easing.Sinusoidal.EaseOut,"Sinusoidal.EaseInOut":Tween.Easing.Sinusoidal.EaseInOut,"Exponential.EaseIn":Tween.Easing.Exponential.EaseIn,"Exponential.EaseOut":Tween.Easing.Exponential.EaseOut,"Exponential.EaseInOut":Tween.Easing.Exponential.EaseInOut,"Circular.EaseIn":Tween.Easing.Circular.EaseIn,"Circular.EaseOut":Tween.Easing.Circular.EaseOut,"Circular.EaseInOut":Tween.Easing.Circular.EaseInOut,"Elastic.EaseIn":Tween.Easing.Elastic.EaseIn,"Elastic.EaseOut":Tween.Easing.Elastic.EaseOut,"Elastic.EaseInOut":Tween.Easing.Elastic.EaseInOut,"Back.EaseIn":Tween.Easing.Back.EaseIn,"Back.EaseOut":Tween.Easing.Back.EaseOut,"Back.EaseInOut":Tween.Easing.Back.EaseInOut,"Bounce.EaseIn":Tween.Easing.Bounce.EaseIn,"Bounce.EaseOut":Tween.Easing.Bounce.EaseOut,"Bounce.EaseInOut":Tween.Easing.Bounce.EaseInOut,"Step.EaseIn":Tween.Easing.Step.EaseIn,"Step.EaseOut":Tween.Easing.Step.EaseOut,custom:Tween.Easing.Bezier.Ease},mod.namespace("Transitions.Tween",Tween);var TweenKeys={};TweenKeys._default="default",TweenKeys._left="left",TweenKeys._top="top",TweenKeys._width="width",TweenKeys._height="height",TweenKeys._rotation="rotation",TweenKeys._filter="filter",TweenKeys._alpha="alpha";var TweenKeysKeys=Object.keys(TweenKeys),Ease=function(){this._type="Linear.EaseNone",this._easeFun={}},proto$1K=Ease.prototype;TweenKeysKeys.forEach(function(e){proto$1K[e]=function(t){return(this._easeFun[e]||this._easeFun._default)(t)}}),Ease._parseEase=function(e){var t=new Ease,r=t._type=e.tween||"Linear.EaseNone";if(r==="custom"||r==="Bezier.Ease"){var a=e.ease||{};Array.isArray(a)&&a.length==0&&(a={}),a[TweenKeys._default]||(t._easeFun._default=Tween.Easing.Linear.EaseNone),Object.keys(TweenKeys).forEach(function(n){var o=a[TweenKeys[n]];o&&(t._easeFun[n]=Tween.CubicBezier(o[2],o[3],o[4],o[5]))})}else t._easeFun._default=Tween.map[r];return t};var easeLine$1=Ease._parseEase({}),MovieClip=function(){MovieClip.__super__.constructor.apply(this,arguments);var e=this;e._currentFrameDecimal=0,e._currentFrame=0,e._currentSceneFrame=0,e._currentFrameLabel=null,e._currentLabels=[],e._currentScene=null,e._enabled=!0,e._loop=!0,e._scenes=[],e._totalFrames=0,e._paused=!1,e._pausedTimeStamp=null,e._pausedFrame=null,e._frameLoaded=0,e._frameLoadedStatus={},e._frameImageLeftNum={},e._prevLoadFrame=-1,e._manualChange=!1,e._statusBeforeManualChange={},e._type="MovieClip",e._frames=[],e._objectFrames={},e._gotoFlag=!1,e._playFlag=!0,e._manual=!1,e._prevActionFlag=null,e._aimFrameDec=null,e._audioList=[],e._prevFrame=null,e._progressAnimationGroup={},e._smoothMode=!1,e._sceneSwitchOpts=null,e._actionAppearList=[],e._prevDisplayListInfo={},e._beforeenterframeEvent=new MuEvents("beforeenterframe"),e.enterFrameEvent=new MuEvents("enterframe"),e._sceneChangeEvent=new MuEvents("scenechange"),e._haveLoadingPage=!1,e._childSelfAnimationDisplayObject=[],e._pausedBeforeRender=!1,e._inBindAnimationMode=!1,mod.definePropertyReadOnly(e,["currentFrame",e._getCurrentFrame,"currentFrameLabel",e._getCurrentFrameLabel,"currentLabels",e._getCurrentLabels,"currentScene",e._getCurrentScene,"frameLoaded",e._getFrameLoaded,"scenes",e._getScenes,"totalFrames",e._getTotalFrames]),mod.definePropertyGetSet(e,["enabled",e._getEnabled,e._setEnabled])};mod.extend(MovieClip,Sprite);var proto$1J=MovieClip.prototype;proto$1J._toggleManualChange=function(e){var t=this;t._manualChange=e,t._statusBeforeManualChange=e?{paused:t._paused,frame:t._currentFrame}:{}},proto$1J._getCurrentFrame=function(){return this._currentFrame},proto$1J._getCurrentSceneFrame=function(){return this._currentSceneFrame},proto$1J._getCurrentFrameLabel=function(){return this._currentFrameLabel},proto$1J._getCurrentLabels=function(){return this._currentLabels},proto$1J._getCurrentScene=function(){return this._currentScene},proto$1J._getEnabled=function(){return this._enabled},proto$1J._setEnabled=function(e){this._enabled=e},proto$1J._getFrameLoaded=function(){return this._frameLoaded},proto$1J._setFrameLoaded=function(e){var t=this,r=t._frameLoaded;if(t._frameLoaded=e,r!=e){var a=new MuEvents("framesLoadedChange",!1,!1);t._dispatchEvent(a)}},proto$1J._getScenes=function(){return this._scenes},proto$1J._getTotalFrames=function(){return this._totalFrames},proto$1J._getFrame=function(e,t){var r=this,a=0;if(t&&(a=t._startFrame),e&&e.length>0){var n=e.split(";");e=n[Math.floor(Math.random()*n.length)]}if(isNaN(e))for(var o=!1,s=r._scenes,_=0;_<s.length;_++){for(var l=s[_],c=l._labels,d=0;d<c.length;d++){var f=c[d];if(f._name===e){var e=f._frame+l._startFrame;o=!0;break}}if(o)break}else e=e*1+a;return parseFloat(e)},proto$1J.toggleSmoothMode=function(e){this._smoothMode=e},proto$1J.gotoPage=function(e,t){var r=this,a=r._scenes;if(e<0)return console.warn("Go to page err: aim page id "+e+" is less than 0.");if(e>a.length-1)return console.warn("Go to page err: aim page id "+e+" is greater than max page "+(a.length-1));var n=a[e]._startFrame;r._sceneSwitchOpts&&(r._sceneSwitchOpts.customPagingOptions=t),r.gotoAndPlay(n,null)},proto$1J.chkActionPower=function(e){return!0},proto$1J.gotoAndPlay=function(e,t,r){var a=this;a._manual||a.chkActionPower(r)&&(a._gotoFlag=Math.floor(e)!=a._currentFrame,a._playFlag=!0,e=a._getFrame(e,t),!e&&e!=0&&(e=0),a._aimFrameDec=e,a._pausedFrame=null,a._paused=!1)},proto$1J._setFrame=function(e){var t=this;t._currentFrame=Math.floor(e),t._currentSceneFrame=Math.floor(e)-Math.floor(t._currentScene?t._currentScene._startFrame:0),t._currentFrameDecimal=e,t._updateScene()},proto$1J._updateScene=function(){var e=this,t=e._currentFrame;if(!(e._currentScene&&t>e._currentScene._startFrame&&t<e._currentScene._startFrame+e._currentScene._numFrames)){var r=e._getSceneIndexByFrameNum(e._currentFrame),a=e._scenes[r];a!==e._currentScene&&(e._currentScene=a,e._dispatchEvent(e._sceneChangeEvent))}},proto$1J.gotoAndStop=function(e,t,r){var a=this;if(!a._manual&&a.chkActionPower(r)){if(a._gotoFlag=Math.floor(e)!=a._currentFrame,a._playFlag=!1,e=a._getFrame(e,t),!e&&e!=0)return!1;a._aimFrameDec=e,a._paused||(a._getStage(),a._pausedTimeStamp=-1/0,a._pausedFrame=e),a._paused=!0}},proto$1J._addFrameDec=function(e){var t=this;if(!t._stopApplyAction){var r=t._totalFrames,a=r-1,n=t._currentFrameDecimal,o=n+e;if(!t._paused&&!t._gotoFlag&&!t._manual){if(Math.floor(o)>a)t._loop?t.gotoAndPlay(0,null,0):t.stop(0);else{var s=t._playFlag,_=t._gotoFlag;t.gotoAndPlay(o,null,0),t._gotoFlag=_,t._playFlag=s}return!0}else return!1}},proto$1J._updateDisplayObjectAnimation=function(e,t,r,a){var n=this,o=e._id,s=n._objectFrames,_=s[o],l=_._keyframes||{};if(e._hasShapeAnimation){var c=_.getNearFrameInfo(r),d=c[0],f=c[1],u=c[2];if(u===void 0)return;var p=new Transform;e._bindTrans(p);var v=_._keyframes[d],h=_._keyframes[f];Transform._tween(p,v,h,_._eases[d],u),e._updateDisplayObjectFromTransform(p),p._matrix._calMatrixFormRaw(),e._setTransform(p),e._dispatchEvent(e._changedEvent)}else if(e._presetAnimation){var m=e._presetAnimation._updateTransformByFrameNum();m&&e._setTransform(m)}else{var T=l[t]||e._transform;if(a)var y=_.getRefTrans(t+1);if(T&&y){var E=r-t,g=new Transform;Transform._tween(g,T,y,easeLine$1,E),g._matrix._calMatrixFormRaw(),e._setTransform(g)}else e._setTransform(T)}},proto$1J._calculateAimFrame=function(){var e=this;e._aimFrameDec==null&&(e._aimFrameDec=e._currentFrameDecimal)},proto$1J._updateTransformByCurrentFrame=function(e){var t=this;if(t._manual&&(t._manual=!1),!t._stopApplyAction){t._dispatchEvent(t._beforeenterframeEvent);var r=t._aimFrameDec,a=t._getRoot()._renderManager;(t._scenes||[]).length>1&&(a._listPendingActions=[]),t._currentFrame=Math.floor(r),t._currentSceneFrame=Math.floor(r)-Math.floor(t._currentScene?t._currentScene._startFrame:0),t._currentFrameDecimal=r,t._paused=!t._playFlag,t._updateScene();var n=t._currentFrame,o=t._currentFrameDecimal;if(t._paused)var s=t._getStage()._totolFrame-t._pausedTimeStamp,_=s+o;var l=t._getDisplayInfoByFrame(n),c=t._prevDisplayListInfo,d=t._prevDisplayListInfo={};l==null&&(l={_displayObjectList:[]});for(var f=l._displayObjectList,u=t._actionAppearList,p=u.some(function(S){if(S._event==ActionEvent.APPEAR)return S instanceof ActionStop&&f.indexOf(S._displayObject)>-1}),v=t._objectFrames,h=f.length,m={},T=0;T<h;T++){var y=f[T],E=y._id;delete c[E],d[E]=y;var g;if(y._hasProgress){var b=y._unitId;m[b]=t._progressAnimationGroup[b]}if(y._forceHide===!0?y._setVisible(!1):(y._forceHide,g=y._setVisible(!0)),y._haveAnimation){var w=v[E];if(w._keyframes,!t._smoothMode&&t._paused){var x=w._getStopFrame(n),C=Math.min(x,_);r=parseInt(C),A=C}else{var M=t._pausedFrame;if(!t._smoothMode&&M!=null)x=w._getStopFrame(M),x>o?(r=parseInt(x),A=x):(t._pausedFrame=null,r=n,A=o);else{r=n;var A=o}}p&&(A=Math.floor(w._getStopFrame(n))),t._updateDisplayObjectAnimation(y,r,A,e)}y._haveSelfFunction?y._haveSelfFunction():y.children&&y.children.forEach(S=>{S._haveSelfFunction&&S._haveSelfFunction()}),y.update({appear:g!=!0||y._notInitialized}),y._notInitialized=!1}Object.keys(c).forEach(function(S){c[S]._setVisible(!1)}),Object.keys(m).forEach(function(S){var L=m[S],D=t._objectFrames[L[0]._id],$=((A===void 0?o:A)-D._min)/(D._max-D._min);handleProcessAnimation($,L)});var O=!1;return t._currentFrame!==t._prevFrame&&(t._aimFrameDec=null,t._gotoFlag=!1,t._prevActionFlag=null,t._prevFrame=t._currentFrame,O=!0),O}};var handleProcessAnimation=MovieClip.handleProcessAnimation=function(e,t){var r=[];t.forEach(function(o){var s=o._getProcessAnimationLength();r.push(s)});var a=r.reduce(function(o,s){return o+s},0),n=e*a;t.forEach(function(o,s){var _=r.slice(0,s).reduce(function(d,f){return d+f},0),l=_+r[s],c;n<=_?c=0-(_-n)/r[s]:n>=l?c=1+(n-l)/r[s]:c=(n-_)/r[s],o._setProcessAnimationRatio(c)})};proto$1J._getDisplayInfoByFrame=function(e){return this._frames[e]},proto$1J.addChild=function(e){var t=this;MovieClip.__super__.addChild.apply(t,arguments),t._prevDisplayListInfo[e._id]=e},proto$1J._getObjectSceneIndex=function(e){var t=e._id,r=this,a=r._objectFrames[t];if(a)for(var n=a._min,o=a._max,s=r._scenes,_=s.length,l=0;l<_;l++){var c=s[l];if(n>=c._startFrame&&n<c._startFrame+c._numFrames)return o<c._startFrame+c._numFrames?l:1/0}else return 1/0;throw new Error("object not belong to this movieClip")},proto$1J._getSceneIndexByFrameNum=function(e){for(var t=this,r=t._scenes,a=r.length,n=0;n<a;n++){var o=r[n];if(e>=o._startFrame&&e<o._startFrame+o._numFrames)return n}return-1},proto$1J.nextFrame=function(){},proto$1J.nextScene=function(){},proto$1J.play=function(e){var t=this;t._manual||t.chkActionPower(e)&&(t._gotoFlag&&t._playFlag||(t._gotoFlag=!1,t._playFlag=!0,t._aimFrameDec=t._currentFrameDecimal,t._paused=!1))},proto$1J.prevFrame=function(){},proto$1J.stop=function(e){var t=this;if(!t._manual&&t.chkActionPower(e)){if(t._gotoFlag&&!t._playFlag||(t._gotoFlag=!1,t._playFlag=!1,t._aimFrameDec=t._currentFrameDecimal),!t._paused){var r=t._getStage();t._pausedTimeStamp=r._totolFrame,t._pausedFrame=t._currentFrame}t._paused=!0}},proto$1J.checkFrameResourceLoaded=function(e,t){var r=this,a=r._frameImageLeftNum;if(r._totalFrames!==r._frameLoaded){for(var n=e;n<=t;n++)if(a[n]>0)return!1}var o=function(){var u=new MuEvents("framesLoadedChange");r._dispatchEvent(u),this._removeEventListener("framesLoadedChange",o)},s=r.children,_=[],l=r._objectFrames;s.forEach(function(u){if(u instanceof Sprite){var p=u._id,v=l[p];if(v._min<e||v._max>t)return;u instanceof MovieClip?_.push(u):_.concat(u.getDisplayObjectListByType(MovieClip,MovieClip))}});for(var c=_.length,d=0;d<c;d++){var f=_[d];if(f.checkFrameResourceLoaded(0,f._totalFrames-1)===!1)return f._addEventListener("framesLoadedChange",o),!1}return!0},proto$1J.removeChild=function(e){var t=this;MovieClip.__super__.removeChild.apply(t,arguments);var r=e._id;delete t._objectFrames[r];var a=t._frames;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];o.removeObject(e)}},proto$1J._checkMovieClipBusy=function(e,t){var r=this,a=function(){if(!(n++<1)){if(r._removeEventListener("enterframe",a),r._getRoot()._renderManager._paging)return e(!1);t(),e(!0)}},n=0;r._addEventListener("enterframe",a)},proto$1J._getKeyFrameInfo=function(e){return this._objectFrames[e]},mod.exportName(proto$1J,["gotoAndPlay",proto$1J.gotoAndPlay,"gotoAndStop",proto$1J.gotoAndStop,"nextFrame",proto$1J.nextFrame,"nextScene",proto$1J.nextScene,"play",proto$1J.play,"prevFrame",proto$1J.prevFrame,"stop",proto$1J.stop,"removeChild",proto$1J.removeChild,"updateDisplayObjectAnimation",proto$1J._updateDisplayObjectAnimation,"getKeyFrameInfo",proto$1J._getKeyFrameInfo]),mod.namespace("Display.MovieClip",MovieClip);var ActionPlay=function(e,t,r){ActionPlay.__super__.constructor.apply(this,arguments);var a=this;a._scene=t,a._movieClip=r};mod.extend(ActionPlay,Action);var proto$1I=ActionPlay.prototype;proto$1I.doAction=function(){var e=this;if(e.logicPositive()){var t=e._movieClip;if(!e._scene){var r=this._stage._displayObject._renderManager._mugeda;e._scene=(r._displayObjectHash[t._id]||r)._scene}e._scene?(e._scene.currentSegment=null,ActionPlay.__super__.doAction.apply(e,arguments),e._movieClip.play(20)):e._movieClip._presetAnimation&&e._movieClip._presetAnimation._setStatus("play")}};var ActionVideoPause=function(e,t){ActionVideoPause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionVideoPause,Action);var proto$1H=ActionVideoPause.prototype;proto$1H.doAction=function(){if(this.logicPositive()){var e=this._movieClip._currentScene.getDom();e.querySelectorAll("video").forEach(function(t){t.paused||(t.pause(),t.pausedByGlobalPause=!0)})}},mod.namespace("Action.ActionVideoPause",ActionVideoPause);var ActionVideoResume=function(e,t){ActionVideoResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionVideoResume,Action);var proto$1G=ActionVideoResume.prototype;proto$1G.doAction=function(){if(this.logicPositive()){var e=this._movieClip._currentScene.getDom();e.querySelectorAll("video").forEach(function(t){t.paused&&t.pausedByGlobalPause&&(t.play(),t.pausedByGlobalPause=!1)})}},mod.namespace("Action.ActionVideoResume",ActionVideoResume);var ActionStagePause=function(e,t){ActionStagePause.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionStagePause,Action);var proto$1F=ActionStagePause.prototype;proto$1F.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.pause()}},mod.namespace("Action.ActionStagePause",ActionStagePause);var ActionStageResume=function(e,t){ActionStageResume.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t};mod.extend(ActionStageResume,Action);var proto$1E=ActionStageResume.prototype;proto$1E.doAction=function(){if(this.logicPositive()){var e=this._stage._displayObject._renderManager;e.resume()}},mod.namespace("Action.ActionStageResume",ActionStageResume);var ActionVideoControl=function(e,t){ActionVideoControl.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._videoTarget={}};mod.extend(ActionVideoControl,Action);var proto$1D=ActionVideoControl.prototype;proto$1D.doAction=function(){var e=this;if(e.logicPositive()){e._movieClip,e._videoTarget&&e._videoTarget._aniData.guid;var t=e._behavior.param||{},r=t.control_mode,a=t.jump_position;r==="play"?e._videoTarget._play():r==="pause"?e._videoTarget._pause():r==="stop"?e._videoTarget._stop():r==="jump_and_play"?e._videoTarget._jumpAndPlay(a):r==="jump_and_pause"&&e._videoTarget._jumpAndPause(a),ActionVideoControl.__super__.doAction.apply(e,arguments)}};var ActionUpdateChart=function(e,t){ActionUpdateChart.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetChartObject=null};mod.extend(ActionUpdateChart,Action);var proto$1C=ActionUpdateChart.prototype;proto$1C.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior,a=r.param||{};if(t._targetChartObject){var n=t._targetChartObject.getChartObject();n&&n.updateData(a.chart_data,e&&e._originEvent?e._originEvent:null)}else console.warn("行为出错：指定的图表不存在");ActionUpdateChart.__super__.doAction.apply(t,arguments)}};var ActionVote=function(e,t){ActionVote.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._serviceId=null,r._voteDisplayAObject=null};mod.extend(ActionVote,Action);var proto$1B=ActionVote.prototype;proto$1B.updateVoteData=function(e,t){var r=this,a=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{},n=r._behavior,o=n.param||{},s=o.vote_value;a.getVoteData&&a.getVoteData(o.vote_target,function(_,l){var c=l[s]||{};r._countDisplayAObject&&(r._countDisplayAObject.text=c.count?c.count:0),r._votedDisplayAObject&&(r._votedDisplayAObject.text=c.voted?1:0)})},proto$1B.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior,a=r.param||{},n=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};n.vote&&n.vote({serviceId:a.vote_target,value:a.vote_value},function(o){if(o.status==0){var s=t._options.onFinish;s&&s.doAction.apply(s);var _=(o.result||{})[a.vote_value]||{};t._countDisplayAObject&&(t._countDisplayAObject.text=_.count?_.count:0),t._votedDisplayAObject&&(t._votedDisplayAObject.text=_.voted?1:0)}else{var l=t._options.onFailure;l&&l.doAction.apply(l)}}),ActionVote.__super__.doAction.apply(t,arguments)}};var ActionWiper=function(e,t){ActionWiper.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetVRObject=null};mod.extend(ActionWiper,Action);var proto$1A=ActionWiper.prototype;proto$1A.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior;r.param;var a=t._targetObject.getWiperObject?t._targetObject.getWiperObject():null;a&&a.reset(),ActionWiper.__super__.doAction.apply(t,arguments)}};var ActionUpdateVR=function(e,t){ActionUpdateVR.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetVRObject=null};mod.extend(ActionUpdateVR,Action);var proto$1z=ActionUpdateVR.prototype;proto$1z.doAction=function(e){var t=this;if(t.logicPositive()){var r=t._behavior;r.param;var a=t._targetObject.getVRObject?t._targetObject.getVRObject():null;a&&a.doAction(r,e&&e._originEvent?e._originEvent:null),ActionUpdateVR.__super__.doAction.apply(t,arguments)}};var ActionRecordAudio=function(e,t,r){ActionRecordAudio.__super__.constructor.apply(this,arguments),r=r||{};var a=this;a._targetAudioObject=null,a._targetTextObject=null,a._useNative=r.mode==="native"};mod.extend(ActionRecordAudio,Action);var proto$1y=ActionRecordAudio.prototype;proto$1y.doAction=function(){var e=this,t=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};if(e.logicPositive()){var r=e._behavior||{},a=(r.param||{}).record_action||"start",n=e._targetAudioObject,o=e._targetTextObject,s=function(_){var l=_.url,c=_.localId,d=e._options.onFinish;if(o&&t.translateVoice({wx:Browser$1._globalObject.wx,isShowProgressTips:1,localId:c,callback:function(p){o._setText(p),d&&d.doAction.apply(d)}}),n){n._audioObject._setAudioSrc(l);var f=n._audioObject._audio;if(f){var u=n._renderObject;f.addEventListener("pause",u._audioPauseEventHandler.bind(u)),f.addEventListener("playing",u._audioPlayingEventHandler.bind(u))}t.addCustomMugedaParameters(encodeURIComponent("m_"+n._aniData.guid),encodeURIComponent(l))}!o&&d&&d.doAction.apply(d,[_])};a=="stop"?e._useNative?t.stopNativeRecord({guid:n?n._aniData.guid:"",success:function(_){s(_)}}):t.stopRecord({wx:Browser$1._globalObject.wx,success:function(_){s(_)}}):e._useNative?t.startNativeRecord({success:function(_){s(_)},error:function(_){console.log("Error in recording audio: "+_.desc)}}):t.startRecord({wx:Browser$1._globalObject.wx,isShowProgressTips:1,success:function(_){s(_)},error:function(_){console.log("Error in recording audio: "+_.desc)}}),ActionRecordAudio.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionRecordAudio",ActionRecordAudio);var ActionSubmit=function(e,t){ActionSubmit.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._extraData=null};mod.extend(ActionSubmit,Action);var proto$1x=ActionSubmit.prototype;proto$1x.lottery=function(e){var t=this;t._extraData=e},proto$1x.doAction=function(){return new Promise((e,t)=>{var r=this,a=r._options.onFinish,n=r._options.onFailure,o=!!this._behavior.param.submit_once,s=this._behavior.id;if(!r.logicPositive()){t(new Error("条件不满足，无法提交"));return}var _;try{_=JSON.parse(window.localStorage.getItem("mugedaFormSubmitData"))}catch{_=[]}Array.isArray(_)||(_=[]);var l=!0,c="",d=!1,f=Mugeda.getContentId(),u=f.crid;if(o){for(var p=0;p<_.length;p++)_[p].id===s&&_[p].id&&_[p].crid===u&&(l=!1,c="你只能提交一次表单。",d=!0,_[p].time=new Date*1);d||_.push({id:s,time:new Date*1,crid:u})}_=_.filter(function(h){if(isNaN(h.time))return!1;var m=new Date*1-h.time;return m<1e3*3600*24*7});try{window.localStorage.setItem("mugedaFormSubmitData",JSON.stringify(_))}catch{console.error("记录提交记录失败")}if(!l){n?n.doAction.apply(n):Mugeda.messageBox(c||"表单提交条件未满足。请检查输入后重试。"),t(new Error(c||"表单提交条件未满足。请检查输入后重试。"));return}r._movieClip;var v=r._stage._displayObject._renderManager._mugeda;r._behavior.extraData=r._extraData,r._behavior.mugeda=v,r._callback=function(h){h=h||{},h.status==0?(a&&a.doAction.apply(a),e(h)):h.status!==void 0&&(n&&n.doAction.apply(n),t(h))},ActionSubmit.__super__.doAction.apply(r,arguments)})},mod.namespace("Action.ActionSubmit",ActionSubmit);var ActionSegment=function(e){ActionSegment.__super__.constructor.apply(this,arguments);var t=this;t._event=e,t._behavior=null,t._targetAObject=null};mod.extend(ActionSegment,Action);var proto$1w=ActionSegment.prototype;proto$1w.doAction=function(){var e=this;if(e.logicPositive()){ActionSegment.__super__.doAction.apply(e,arguments);var t=e._behavior.param,r=e._targetAObject;if(r&&t){var a=t.segment_loop=="loop",n=parseInt(t.segment_start),o=parseInt(t.segment_end);if(n>o){var s=o;o=n,n=s}r.scene&&(r.scene.setSegment("segment",n-1,o-1,a),r.scene.playSegment("segment"))}}},mod.namespace("Action.ActionSegment",ActionSegment);var ActionShare=function(e){ActionShare.__super__.constructor.apply(this,arguments);var t=this;t._event=e};mod.extend(ActionShare,Action);var proto$1v=ActionShare.prototype;proto$1v.doAction=function(){var e=this;if(e.logicPositive()){ActionShare.__super__.doAction.apply(e,arguments);var t=function(p){var v=e._stage;if(v){var h=v._displayObject._renderManager;p=h._replaceMacros(p,"")}return p},r=e._behavior||{},a=r.param||{},n=a.share_title,o=a.share_desc,s=a.share_timeline||n,_=a.share_thumb,l={};if(n&&(l.title=t(n)),o&&(l.desc=t(o)),s&&(l.timelineTitle=t(s)),_){var c=Mugeda.getMugedaObject()||{},d=c.aniData||{},f=d.metadata,u=location.origin;f&&(_=Mugeda.previewMode?u+_:(c.resDir||window._mrmcp.creative_path||"")+_),l.img_url=_}Browser$1._globalObject.defineWechatParameters&&Browser$1._globalObject.defineWechatParameters(l)}},mod.namespace("Action.ActionShare",ActionShare);var ActionMusicIcon=function(e){ActionMusicIcon.__super__.constructor.apply(this,arguments)};mod.extend(ActionMusicIcon,Action);var proto$1u=ActionMusicIcon.prototype;proto$1u.doAction=function(){var e=this;if(e.logicPositive()){var t=e._behavior.param,r=t.audioicon_mode,a=t.audioicon_status,_=t.audio,n=parseFloat(t.control_volume),o=parseFloat(t.control_position),s=e._stage._displayObject._renderManager._audioIndicator;s._setAudio(_),s._setMode(r),s._setStatus(a);var _=s.audio;_&&(isNaN(n)||(_.volume=.01*n),isNaN(o)||(_.currentTime=o)),ActionMusicIcon.__super__.doAction.apply(e,arguments)}};var ActionTimer=function(e,t){ActionTimer.__super__.constructor.apply(this,arguments);var r=this;r._movieClip=t,r._targetDisplayObject=[]};mod.extend(ActionTimer,Action);var proto$1t=ActionTimer.prototype;proto$1t.doAction=function(){var e=this;if(e.logicPositive()){var t=e._targetDisplayObject,r=e._behavior.param,a=r.timer_status;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]?t[n]._timerStatus=a:console.warn("行为出错：指定的定时器不存在");else console.warn("行为出错：指定的定时器不存在");ActionTimer.__super__.doAction.apply(e,arguments)}},mod.namespace("Action.ActionTimer",ActionTimer);var Macro=function(){};Macro.FunList={},Macro.NeedRender={},Macro._regFunction=function(e,t,r){Macro.FunList[e]=t,r&&(Macro.NeedRender[e]=1)},Macro._chkNeedFresh=function(e){var t=!1;return Macro._parseMacroText(e,function(r){Macro.NeedRender[r]&&(t=!0)},!0,!1),t},Macro._getValue=function(e){if(Macro.FunList[e])return Macro.FunList[e].apply(this,Array.prototype.slice.call(arguments,1))},Macro._parseMacroText=function(e,t,r,a,n){return a=a!==!1,e.replace(/P\{\{(.+?)\}\}/g,function(o,s){for(var _=s.split("|"),l=null,c=0;c<_.length;c++){for(var d=_[c],f=[],u=0;;){var p=d.indexOf(":",u);if(p==-1)break;u=p+1,d.substr(p-1,2)!="\\:"&&(f.push(d.substr(0,p)),d=d.substr(p+1),u=0)}f.push(d),f=f.map(function(v){return v.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/\\(.)/g,"$1")}),f.splice(1,0,l),f.push(n),Macro.FunList[f[0]]?(a&&(l=Macro.FunList[f[0]].apply(this,f)),r&&t.apply(this,f)):(r&&t.apply(this,f),a||(l=null))}return l})},Macro.prototype,mod.exportName(Macro,["parseMacroText",Macro._parseMacroText,"regFunction",Macro._regFunction]),mod.namespace("Utils.Macro",Macro);function Plugin(){}Plugin._userDisplayObjectClass=globalThis.userDisplayObjectClass=globalThis.userDisplayObjectClass||{},Plugin._registerDisplayObjectClass=function(e,t){Plugin._userDisplayObjectClass[e]=t},Plugin._userRenderObjectClass=globalThis.userRenderObjectClass=globalThis.userRenderObjectClass||{},Plugin._registerRenderObjectClass=function(e,t){Plugin._userRenderObjectClass[e]=t},Plugin._getRenderObjectClassByDisplayObject=function(e){const t=e._aniData&&e._aniData.type;if(t!==void 0&&Plugin._userRenderObjectClass[t])return Plugin._userRenderObjectClass[t];var r=Object.keys(Plugin._userDisplayObjectClass).filter(function(a){return e instanceof Plugin._userDisplayObjectClass[a]});if(r.length)return Plugin._userRenderObjectClass[r[0]]},Plugin._getUserDisplayObject=function(e){return Plugin._userDisplayObjectClass[e]},Plugin._userActionObjectClass=globalThis._userActionObjectClass=globalThis._userActionObjectClass||{},Plugin._registerActionObjectClass=function(e,t){Plugin._userActionObjectClass[e]=t},Plugin._getUserActionObjectClass=function(e){return Plugin._userActionObjectClass[e]},Plugin._commonPlugin=globalThis._commonPlugin=globalThis._commonPlugin||{},Plugin._registerActionCommonPlugin=function(e,t){return Plugin._commonPlugin[e]=t},Plugin._anidataPlugin=globalThis._anidataPlugin=globalThis._anidataPlugin||{},Plugin._registerAniDataPlugin=function(e,t){return Plugin._anidataPlugin[e]=t},mod.namespace("Utils.Plugin",Plugin),mod.exportName(Plugin,["registerDisplayObjectClass",Plugin._registerDisplayObjectClass,"registerRenderObjectClass",Plugin._registerRenderObjectClass]);var ActionRanking=function(e,t){ActionRanking.__super__.constructor.apply(this,arguments);var r=this;r.RankingType=e,r.behaviorData=t};mod.extend(ActionRanking,Action);var proto$1s=ActionRanking.prototype;function WechatUserInfo(e){function t(r){var a=new RegExp("(^|&)"+r+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(a);return n!=null?decodeURIComponent(n[2]):null}switch(e){case 0:return t("nickname")||"微信昵称";case 1:return t("avatar");case 2:return t("openid")}}var decodeHtmlEntity=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(r)})},config=null;Math.random().toString(),proto$1s.doAction=function(){return new Promise((e,t)=>{var r=this,a=r.behaviorData,n=a.ranking_target,o=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{},s=r._stage._displayObject,_=s._renderManager,l=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/get?response_type=jsonp";if(config||window.ajaxHelper({url:l+"&serviceId="+n,type:"jsonp",mode:"postMessage",success:function(w){w.status==0?config=w:Mugeda.messageBox("获取配置信息失败")}}),this.RankingType=="submitScore"){var c=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/ranking/submit_score",d,f,u;_.getReferenceElement(a.score,!0)&&(d=parseInt(_.getReferenceElement(a.score,!0)._getText())),_.getReferenceElement(a.ranking_name,!0)&&(f=_.getReferenceElement(a.ranking_name,!0)._getText()),_.getReferenceElement(a.ranking_avatar,!0)&&(u=_.getReferenceElement(a.ranking_avatar,!0)._getSrc());var p;if(a.on_board&&(p=_.getReferenceElement(a.on_board,!0)),!r.logicPositive()){t();return}var v={serviceId:"&serviceId="+n,score:"&score="+d};WechatUserInfo(0)=="微信昵称"?(v.openId="&openId="+getMsuid(),v.nickname=f?"&nickname="+f:"",v.avatar="&avatar="+(u||"http://card.mgd5.com/mugeda/user_large.jpg")):(v.openId="&openId="+WechatUserInfo(2),v.nickname=f?"&nickname="+f:"",v.avatar="&avatar="+(u||"http://card.mgd5.com/mugeda/user_large.jpg")),o.message.show("正在提交..."),window.ajaxHelper({url:c+"?response_type=jsonp"+v.serviceId+v.openId+v.score+v.nickname+v.avatar,type:"jsonp",jsonp_callback:"mgdCallback_"+ +new Date,mode:"postMessage",success:function(w){if(o.message.close(),w.status===0){var x=r._options.onFinish;x&&x.doAction.apply(x),p&&(w.ranked?p._setText("1"):p._setText("0")),config&&y({score:d,nickname:v.nickname.split("=")[1],avatar:v.avatar.split("=")[1],serviceId:"local",openId:getMsuid(),id:"local"}),e()}else Mugeda.messageBox("提交失败"),t()}})}else if(this.RankingType=="getRanking"){if(!r.logicPositive()){t();return}var h=Browser$1._getWeixinServerHost()+"/server/huodong.php/dataservice/ranking/get?response_type=jsonp&serviceId="+n,m=window.localStorage.getItem(n);if(m){m=JSON.parse(m);var T=Date.parse(new Date)/1e3;T-m.time>10?E(function(w){var x={};x.res=w,x.time=Date.parse(new Date)/1e3,window.localStorage.setItem(n,JSON.stringify(x)),window.localStorage.setItem(n,JSON.stringify(x))}):(console.log("正在获取本地数据..."),b(m.res),console.log("获取成功.."),e())}else E(function(w){var x={};x.res=w,x.time=Date.parse(new Date)/1e3,window.localStorage.setItem(n,JSON.stringify(x))})}function y(w){var x=window.localStorage.getItem(n);if(x){x=JSON.parse(x);var C=x.res,M=x.time;if(config.config.rankingRule=="DESC"){for(var A=!1,O=0;O<C.length;O++)w.openId==C[O].openId&&(A=!0);if(A){for(var S=0;S<C.length;S++)if(w.openId==C[S].openId&&w.score>C[S].score){C.splice(S,1),C.splice(S,0,w);break}}else for(var L=0;L<C.length;L++)if(w.score>=C[L].score){C.splice(L,0,w),C.pop();break}}else if(config.config.rankingRule=="ASC"){for(var A=!1,O=0;O<C.length;O++)w.openId==C[O].openId&&(A=!0);if(A){for(var S=0;S<C.length;S++)if(w.openId==C[S].openId&&w.score<C[S].score){C.splice(S,1),C.splice(S,0,w);break}}else for(var L=0;L<C.length;L++)if(w.score<=C[L].score){C.splice(L,0,w),C.pop();break}}window.localStorage.setItem(n,JSON.stringify({res:C,time:M})),console.log(C)}}function E(w){o.message.show("正在获取..."),window.ajaxHelper({url:h,type:"jsonp",mode:"postMessage",success:function(x){o.message.close(),x.status===0&&(b(x.rankings),w&&w(x.rankings))}})}function g(w,x){return w.indexOf("_")>-1?_.getReferenceElement(w.split("_")[0]+"/"+w.split("_")[1]+(x+1),!0):_.getReferenceElement(w+(x+1),!0)}function b(w){for(var x=a.ranking_element,C=a.rankee_element,M=a.score_element,A=a.avatar_element,O=0;O<w.length;O++){var S=g(x,O),L=g(C,O),D=g(M,O),$=g(A,O);S&&S._setText(O+1),L&&L._setText(decodeHtmlEntity(w[O].nickname.toString())),D&&D._setText(decodeHtmlEntity(w[O].score.toString())),$&&$._setSrc(decodeHtmlEntity(w[O].avatar))}e()}})};var ActionSetLocalData=function(){ActionSetLocalData.__super__.constructor.apply(this,arguments)};mod.extend(ActionSetLocalData,Action);var proto$1r=ActionSetLocalData.prototype;proto$1r.doAction=function(){var e=this;if(e.logicPositive()){var t=Mugeda.getContentId(),r=t.crid,a=parseInt(e._behavior.param.expire),n=new Date().getTime()+a*60*1e3;if((isNaN(n)||a===0)&&(n=1/0),e._behavior.param=e._behavior.param||{},e._behavior.param.name===void 0)console.warn("行为出错：设定的本地数据未指定名称");else{var o=e._behavior.param.value||"",s=e._stage._displayObject._renderManager;o=s._replaceMacros(o),window.localStorage.setItem("Mugeda_localData_"+r+"_"+e._behavior.param.name,JSON.stringify({value:o,expire:n}))}}},mod.namespace("Action.ActionSetLocalData",ActionSetLocalData);const mapIdActions={};var ActionTypeEnum=(e=>(e.RESET_ELEMENT="resetElement",e))(ActionTypeEnum||{}),ActionManager=function(){};ActionManager._getAction=function(e,t){var r=e.type,a=e.param||{},n=a.scope||"",o=e.event,s=t.parentMovieClip,_=t.parentParentMovieClip,l=t.renderObjectSceneSwitcher,c=t.stage,d=c.getNode(),f=t.displayObj,u=t.needBackPoint,p=t.referenceActions,v=function(H,q){var re={stopFlag:!1};q(H,re);for(var K=H._children,ee=K.length,ie=0;ie<ee;ie++){var ne=K[ie];v(ne,q)}},h=function(H){var q=[];if(["{{all}}","{{alldragged}}","{{visible}}","{{dragged}}"].indexOf(H)>=0)v(c,function(K){var ee=K._displayObject._aniData||{};ee.param;{var ie=(ee.type||"").toString();ie.match(/\d+/)&&q.push(T._displayObjectHash[K._displayObject._id])}});else{var re=T._scene.getObjectByName(H);re&&q.push(re)}return q},m=null;if(!n.match(/\{\{.*\}\}/)){if(n==="symbol"||r=="audio")m=s;else if(n&&n.length&&n!="stage"){var T=c._displayObject._renderManager._mugeda;if(n&&n.indexOf("more|-|")>-1){var y=[],E=n.split("more|-|")[1],g=T._scene.getObjectByName(E,"prefix");g&&(m=g)}else if(n.indexOf("[[")>-1&&n.indexOf("]]")>-1){var y=[],b=n.replace(/[\[|\]]/g,"");if(b=="all"){for(var w=h("{{all}}"),x=0;x<w.length;x++){var g=w[x]._displayObject;g&&g._type=="MovieClip"&&y.push(g)}m=y}}else{var C=n.split("_");if(C&&C.length>1){var M=T.scene.getObjectByName(C[0]);M&&(m=M.scene.getObjectByName(C[1],"displayobject"))}else m=T._scene.getObjectByName(n,"displayobject")}}m||(m=_||s)}var A;if(r==="gotoAndPlay"||r==="gotoAndStop"||r==="gotoAndPause"){var O=r!=="gotoAndPlay";A=new ActionGoTo(o,!1,null,m,O,o===ActionEvent.APPEAR,u)}else if(r=="call")A=new ActionCallPhone(r,a);else if(r=="next")A=new ActionGoTo(o,!0,null,m,!0,o===ActionEvent.APPEAR,u);else if(r=="previous")A=new ActionGoTo(o,!0,null,m,!0,o===ActionEvent.APPEAR,u);else if(r=="pause")A=new ActionStop(o,null,m,o===ActionEvent.APPEAR);else if(r=="play")A=new ActionPlay(o,null,m);else if(r=="gotoPage")A=new ActionPage(o,!1,a.page_number,null,m,l,u);else if(r=="disablePage")A=new ActionPageControl(o,!0,l,"all");else if(r=="disablePageForward")A=new ActionPageControl(o,!0,l,"forward");else if(r=="disablePageAfter")A=new ActionPageControl(o,!0,l,"after");else if(r=="enablePage")A=new ActionPageControl(o,!1,l,"all");else if(r=="enablePageForward")A=new ActionPageControl(o,!1,l,"forward");else if(r=="enablePageAfter")A=new ActionPageControl(o,!1,l,"after");else if(r=="nextPage")A=new ActionPage(o,!0,1,null,m,l,u);else if(r=="prevPage")A=new ActionPage(o,!0,-1,null,m,l,u);else if(r==="globalPause")A=new ActionGlobalPause(o,m);else if(r==="globalResume")A=new ActionGlobalResume(o,m);else if(r==="audioPause")A=new ActionAudioPause(o,m);else if(r==="audioResume")A=new ActionAudioResume(o,m);else if(r==="videoPause")A=new ActionVideoPause(o,m);else if(r==="videoResume")A=new ActionVideoResume(o,m);else if(r==="stagePause")A=new ActionStagePause(o,m);else if(r==="stageResume")A=new ActionStageResume(o,m);else if(r=="changeElement")A=new ActionElement(o);else if(r==ActionTypeEnum.RESET_ELEMENT)A=new ActionElement(o,!0);else if(r=="playSegment")A=new ActionSegment(o);else if(r=="audioicon")A=new ActionMusicIcon(o);else if(r=="timerStatus")A=new ActionTimer(o);else if(r=="complexTimerStatus")A=new ActionComplexTimer(o);else if(r=="shareinfo")A=new ActionShare(o);else if(r=="audio")A=new ActionAudio(o,m);else if(r=="controlAudio")A=new ActionAudioControl(o,m);else if(r=="controlVideo")A=new ActionVideoControl(o,m);else if(r=="controlCanvas")A=new ActionCanvasDraw(o,m);else if(r=="chooseImage")A=new ActionChooseImage(o,m,{_keepValue:a.keep_value});else if(r=="showWechatAvatar")A=new ActionChooseImage(o,m,{_type:ActionChooseImage.Type.Image,_keepValue:a.keep_value,_source:function(H){H(Macro._getValue("wechatAvatar"))}});else if(r=="showWechatNickname")A=new ActionChooseImage(o,m,{_type:ActionChooseImage.Type.Text,_keepValue:a.keep_value,_source:function(H){H(Macro._getValue("wechatNickName"))}});else if(r=="updateChart")A=new ActionUpdateChart(o,m);else if(r=="vote")A=new ActionVote(o,m);else if(r=="submitCheckout")A=new ActionCheckout(o,m);else if(r=="getCheckout")A=new ActionGetCheckout(o,m);else if(r=="vrControl")A=new ActionUpdateVR(o,m);else if(r=="resetWiper")A=new ActionWiper(o,m);else if(r=="changePicture")A=new ActionChangePicture(o,m);else if(r=="recordAudio")A=new ActionRecordAudio(o,m);else if(r=="recordNativeAudio")A=new ActionRecordAudio(o,m,{mode:"native"});else if(r=="submitForm")A=new ActionSubmit(o,m);else if(r=="link")A=new ActionLink(a.url,a.urlTarget,a.replace);else if(r=="form"){var S,L=a.targetValue,D=L?JSON.parse(unescape(L)):null;if(D)var $={event:"click",id:"form",mode:2,name:"",param:D,type:a.openTarget=="frame"?"gotoAndPlay":"gotoPage"},S=ActionManager._getAction($,t);A=new ActionForm(o,d,S)}else if(r=="drag"){var R=a.type*1;R===4?R=10:R===5&&(R=113),[1,2,3,10].indexOf(R)!==-1?(R===10&&(R=4),A=new ActionDrag(f,R,a.reset,a.inertia)):A=new ActionDragFree(f,R,a.reset,a.inertia)}else if(Plugin._getUserActionObjectClass(r))A=new(Plugin._getUserActionObjectClass(r))(e,t);else if(r=="getCounter"||r=="setCounter")A=new ActionCounter(r,a);else if(r=="getLocation")A=new ActionGetLocation(r,a);else if(r=="setData"||r=="getData")A=new ActionDatabase(r,a);else if(r=="changeCanvas"){var I=a.canvas_name,P=c._displayObject._renderManager;A=new ActionCounter$1(r,a),A._canvasTarget=P.getReferenceElement(I,!1)}else if(r=="submitScore"||r=="getRanking")A=new ActionRanking(r,a);else if(r=="setLocalData")A=new ActionSetLocalData(o);else if(r=="getLocalData")A=new ActionGetLocalData(o);else if(r=="clipboard")A=new ActionClipboard(o);else{var I=a.element_name||a.instance_name,P=c._displayObject._renderManager,N=P.getReferenceElement(I,!1);if(N&&N._createActionClass)var B=N._createActionClass();else B=Action;A=new B(o)}if(A){A._behavior=e,A._displayObject=f,A._stage=c,A._event=o,f.actions=f.actions||[];var j=p||f.actions;if(j.push(A),e&&e.logic){var V=e.logic,P=c._displayObject._renderManager;A._logicRefernceAObject=P.getReferenceElement(V.element,!0)}if(e&&(e.type=="changeElement"||e.type==ActionTypeEnum.RESET_ELEMENT||e.type=="playSegment")){var I=a.element_name||a.instance_name||"",Q=I.match(/\{\{.*\}\}/),P=c._displayObject._renderManager;A._targetAObject=Q?null:P.getReferenceElement(I,!0,!1,t.displayObj)}if(e&&e.type=="timerStatus"){var T=c._displayObject._renderManager._mugeda,I=a.timer_name,P=c._displayObject._renderManager;if(I&&I.indexOf("more|-|")>-1){var E=I.split("more|-|")[1],g=T._scene.getObjectByName(E,"prefix");if(g)for(var x=0;x<g.length;x++)A._targetDisplayObject.push(P.getReferenceElement(g[x]._name,!1))}else A._targetDisplayObject.push(P.getReferenceElement(I,!1))}if(e&&e.type=="complexTimerStatus"){var T=c._displayObject._renderManager._mugeda,I=a.timer_name,P=c._displayObject._renderManager;A._targetDisplayObject.push(P.getReferenceElement(I,!1))}if(e&&e.type=="controlAudio"){var I=a.audio_target,P=c._displayObject._renderManager;A._audioTarget=P.getReferenceElement(I,!1)}if(e&&e.type=="controlVideo"){var I=a.video_target,P=c._displayObject._renderManager;A._videoTarget=P.getReferenceElement(I,!1)}if(e&&e.type=="controlCanvas"){var I=a.element_name,P=c._displayObject._renderManager;A._canvasTarget=P.getReferenceElement(I,!1)}if(e&&(e.type=="chooseImage"||e.type=="showWechatNickname"||e.type=="showWechatAvatar")){var I=a.target_name,P=c._displayObject._renderManager;if(!I||I=="undefined")var F=P._mugeda._displayObjectHash[f._id];else var F=P.getReferenceElement(I,!0,!0);A._targetAObject=F}if(e&&e.type=="updateChart"){var I=a.target_chart,P=c._displayObject._renderManager;A._targetChartObject=P.getReferenceElement(I,!1)}else if(e&&e.type=="vote"){var I=a.vote_display,P=c._displayObject._renderManager;A._countDisplayAObject=I&&I!=="undefined"?P.getReferenceElement(I,!0):null;var I=a.vote_voted,P=c._displayObject._renderManager;A._votedDisplayAObject=I&&I!=="undefined"?P.getReferenceElement(I,!0):null,A.updateVoteData()}else if(e&&e.type=="vrControl"){var I=a.element_name,P=c._displayObject._renderManager;A._targetObject=I&&I!=="undefined"?P.getReferenceElement(I,!1):A._displayObject}else if(e&&e.type=="resetWiper"){var I=a.element_name,P=c._displayObject._renderManager;A._targetObject=I&&I!=="undefined"?P.getReferenceElement(I,!1):A._displayObject}else if(e&&e.type=="getData"){var I=a.element_name,P=c._displayObject._renderManager;A._targetAObject=I&&I!=="undefined"?P.getReferenceElement(I,!0):null}if(e&&e.type=="changePicture"){var P=c._displayObject._renderManager,T=c._displayObject._renderManager._mugeda,I=a.target_name;if(I&&I.indexOf("more|-|")>-1){var E=I.split("more|-|")[1],W=T._scene.getObjectByName(E,"prefix");if(W)for(var x=0;x<W.length;x++)A._targetAObject.push(P.getReferenceElement(W[x]._name,!1))}else!I||I=="undefined"?A._targetAObject.push(P._mugeda._displayObjectHash[f._id]):A._targetAObject.push(P.getReferenceElement(I,!1));var G=a.source_name;if(G)var Z=P.getReferenceElement(G,!0);A._sourceAObject=Z}if(e&&(e.type=="recordAudio"||e.type=="recordNativeAudio")){var X=a.target_name,U=a.target_text,P=c._displayObject._renderManager;A._targetAudioObject=P.getReferenceElement(X,!1),A._targetTextObject=P.getReferenceElement(U,!1)}var z,te;try{var Y=a.submit_onsuccess,k=JSON.parse(decodeURIComponent(a.onsuccess_param)),J=a.submit_onfailure,ae=JSON.parse(decodeURIComponent(a.onfailure_param))}catch{}if(Y&&Y!="none"&&k){var S={event:"click",id:"onFinish",mode:2,name:"",param:k,type:Y};z=ActionManager._getAction(S,t)}if(J&&J!="none"&&ae){var S={event:"click",id:"onFailure",mode:2,name:"",param:ae,type:J};te=ActionManager._getAction(S,t)}A._setOptions({onFinish:z,onFailure:te});const H=A.doAction;return A.doAction=function(...q){const re=H.apply(A,q);let K=null;return re instanceof Promise?K=re:K=Promise.resolve(),K.then(()=>{(A._behavior.postBehaviorIds||[]).forEach(ie=>{const ne=mapIdActions[ie];ne&&ne.doAction()})}).catch(ee=>{}),K},mapIdActions[A._behavior.id]=A,A}},mod.namespace("Action.ActionManager",ActionManager);var Bitmap=function(){Bitmap.__super__.constructor.apply(this,arguments);var e=this;e._bitmapData=null,e._smoothing=null,e._pixelSnapping=null,e._resourceList=null,mod.definePropertyGetSet(e,["bitmapData",e._getBitmapData,e._setBitmapData,"Smoothing",e._getSmoothing,e._setSmoothing])};mod.extend(Bitmap,DisplayObject);var proto$1q=Bitmap.prototype;proto$1q._getBitmapData=function(){return this._bitmapData},proto$1q._setBitmapData=function(e){var t=this;t._bitmapData=e,t._dispatchEvent(t._changedEvent)},proto$1q._getSmoothing=function(){return this._smoothing},proto$1q._setSmoothing=function(e){this._smoothing=e},mod.namespace("Display.Bitmap",Bitmap);var AudioControl=function(){AudioControl.__super__.constructor.apply(this,arguments);var e=this;e._audio=null,e._autoPlay=!1,e._audioOnBitmap=null,e._audioOffBitmap=null,e._loop=null,e._type="audio",e._updateChecker=null,e._actionAudioControlList={},e._resourceList=[],e.constructor._createAObject||(e.constructor._createAObject=function(){var t=function(n,o){var s=this;t.__super__.constructor.apply(s,arguments),mod.definePropertyGetSet(s,["progress",a._getProgress,a._setProgress])},r=MugineRequire("Utils/mugedaAPIAObject");mod.extend(t,r);var a=t.prototype;return a._getProgress=function(){var n=this._displayObject._audioObject;return 100*n._audio.currentTime/n._audio.duration},a._setProgress=function(n){var o=this._displayObject._audioObject;o._audio.currentTime=o._audio.duration/100*n},t})};mod.extend(AudioControl,Bitmap);var proto$1p=Bitmap.prototype;proto$1p._bindBehavior=function(e,t){var r=this;r._actionAudioControlList=r._actionAudioControlList||{},r._actionAudioControlList[e]?r._actionAudioControlList[e].push(t):r._actionAudioControlList[e]=[t]},proto$1p._triggerBehavior=function(e,t){var r=this;r._actionAudioControlList=r._actionAudioControlList||{},r._actionAudioControlList[e]&&r._actionAudioControlList[e].forEach(function(a){a(t)})},proto$1p._setUrl=function(e){var t=this;t._audioObject._setAudioSrc(e)},mod.namespace("Display.AudioControl",AudioControl);var LoaderInfo=function(){var e=this;LoaderInfo.__super__.constructor.apply(e,arguments),e._content=null,e._contentType=null,e._loader=null,e._url=null,e._state=LoaderInfo.STATE.IDLE};mod.extend(LoaderInfo,IEventDispatcher),LoaderInfo.STATE={CANCELLED:-1,IDLE:0,LOAD:1,LOADED:2};var proto$1o=LoaderInfo.prototype;proto$1o._cancel=function(){this._state=LoaderInfo.STATE.CANCELLED},mod.namespace("Display.LoaderInfo",LoaderInfo);var Loader=function(e){var t=this;e&&e._useNewId&&(t._useNewId=!0),Loader.__super__.constructor.apply(t,arguments),t._content=null,t._contentLoaderInfo=new LoaderInfo};mod.extend(Loader,DisplayObjectContainer);var proto$1n=Loader.prototype;proto$1n._load=function(e){var t=this;e._load(t)},mod.namespace("Display.Loader",Loader);var id$3=0,ResourceData=function(){var e=this;e._id="r"+id$3++,e._src=null,e._loader=new Loader(e),mod.definePropertyGetSet(e,["src",e._getSrc,e._setSrc])},proto$1m=ResourceData.prototype;proto$1m._getSrc=function(){return this._src},proto$1m._setSrc=function(e){this._src=e};var WebAudioMock=function(e){var t=this;WebAudioMock.__super__.constructor.apply(t,arguments),t._src=e,t._readyState=0,t._buffer=null,t._waitingPlay=!1,t._connected=!1,t._currentSource=null,t._gainNode=null,t._currentTime=null,t._loop=!1,t._paused=!0,t._prevPlayTimeStamp=null,t._ended=!1,t._prevStopTime=null,t._needDispatchTimeUpdate=!1,t._currentGain=1,t._audioBufferQuene=[],t._muted=!1,mod.definePropertyGetSet(t,["src",t._getSrc,t._setSrc,"currentTime",t._getCurrentTime,t._setCurrentTime,"loop",t._getLoop,t._setLoop,"volume",t._getVolume,t._setVolume,"muted",t._getMuted,t._setMuted]),mod.definePropertyReadOnly(t,["readyState",t._getReadyState,"paused",t._getPaused,"duration",t._getDuration,"ended",t._getEnded])},audioCtx=null;if(Browser$1._globalObject.AudioContext||Browser$1._globalObject.webkitAudioContext)var getAudioContext=WebAudioMock.getAudioContext=function(){return audioCtx||(audioCtx=new(window.AudioContext||window.webkitAudioContext)),audioCtx};mod.extend(WebAudioMock,IEventDispatcher);var proto$1l=WebAudioMock.prototype;proto$1l._getEnded=function(){return this._ended},proto$1l._addEventListener=function(e){var t=this;e==="timeupdate"&&!t._needDispatchTimeUpdate&&(t._needDispatchTimeUpdate=!0),WebAudioMock.__super__._addEventListener.apply(t,arguments)},proto$1l._removeEventListener=function(e){var t=this;WebAudioMock.__super__._removeEventListener.apply(t,arguments),e==="timeupdate"&&!t.hasEventListener(e)&&(t._needDispatchTimeUpdate=!1)},proto$1l._getVolume=function(){var e=this;return e._currentGain},proto$1l._setVolume=function(e){var t=this;t._currentGain=e,t._gainNode&&(t._gainNode.gain.value=t._muted?0:e)},proto$1l._getMuted=function(){var e=this;return e._muted},proto$1l._setMuted=function(e){var t=this;t._muted=!!e,t._setVolume(t._currentGain)},proto$1l._getLoop=function(){return this._loop},proto$1l._setLoop=function(e){var t=this;t._loop=e},proto$1l._getCurrentTime=function(){var e=this;return e._paused?e._prevStopTime:getAudioContext().currentTime-this._prevPlayTimeStamp},proto$1l._setCurrentTime=function(e){var t=this,r=t._paused;e!=t._getCurrentTime()&&(t._pause(),t._prevStopTime=e,r||t._play(),t._needDispatchTimeUpdate&&t._dispatchEvent(new MuEvents("timeupdate")))},proto$1l._getSrc=function(){return this._src},proto$1l._setSrc=function(e){var t=this;e!=t._src&&(t._src=e,t._readyState=0,t._connected&&(t._disconnect(),t._paused||(t._paused=!0,t._dispatchEvent(new MuEvents("pause")))))},proto$1l._getReadyState=function(){return this._readyState},proto$1l._getDuration=function(){var e=this,t=e._buffer;if(t)return t.duration},proto$1l._load=function(){var e=this,t=e._src,r=new XMLHttpRequest;r.onload=function(){var a=r.response;if(Browser$1.os.ios){var n=new Uint8Array(a.slice(0,10));if(n[0]===73&&n[1]===68&&n[2]===51){var o=(n[6]&127)*2097152+(n[7]&127)*16384+(n[8]&127)*128+(n[9]&127);a=a.slice(o)}if(typeof Uint8Array<"u"){Uint8Array.prototype.indexOf===void 0&&(Uint8Array.prototype.indexOf=Array.prototype.indexOf);var s=new Uint8Array(a),_=s.indexOf(255);_===-1||(a=a.slice(_))}}getAudioContext().decodeAudioData(a,function(l){e._buffer=l,e._readyState=4,e._prevStopTime=0,e._dispatchEvent(new MuEvents("canplay")),e._dispatchEvent(new MuEvents("canplaythrough"))},function(l){console.error(l)})},r.open("GET",t,!0),r.responseType="arraybuffer",r.send()},proto$1l._connect=function(e){var t=this;t._currentSource=e,t._gainNode||(t._gainNode=getAudioContext().createGain(),t._gainNode.connect(getAudioContext().destination),t._gainNode.gain.value=t._currentGain),e.buffer=t._buffer,e.connect(t._gainNode),t._connected=!0,t._currentSource=e,e.onended=function(){t._currentSource==this&&(t._disconnect(),t._paused||(t._prevStopTime=0,t._paused=!0,t._loop?t._play():(t._dispatchEvent(new MuEvents("pause")),t._ended=!0)))}},proto$1l._disconnect=function(){var e=this;e._currentSource.disconnect(),e._currentSource=null,e._connected=!1},proto$1l._play=function(){var e=this;if(e._ended=!1,!!e._paused){var t=getAudioContext().createBufferSource();if(e._audioBufferQuene.push(t),!(e._waitingPlay||e._playingNeedToConfirm)){var r=function(){var n=function(){if(e._audioBufferQuene.length){var o=e._audioBufferQuene.pop();if(e._connected||e._connect(o),e._prevStopTime!=null)var s=e._prevStopTime;else s=e._getCurrentTime();e._currentSource.start(0,s),e._playingNeedToConfirm=!0;var _=function(l){if(getAudioContext().activeSourceCount>0||getAudioContext().state==="running"){e._prevPlayTimeStamp=getAudioContext().currentTime-s,e._playingNeedToConfirm=!1,e._paused=!1,e._dispatchEvent(new MuEvents("playing")),e._audioBufferQuene=[];return}else return l<3?setTimeout(function(){_(l+1)},150):(e._playingNeedToConfirm=!1,e._disconnect(),n())};_(1)}};n()};if(e._readyState===0){e._waitingPlay=!0,e._load();var a=function(){e._removeEventListener("canplaythrough",a),e._waitingPlay&&(r(),e._waitingPlay=!1)};e._addEventListener("canplaythrough",a)}else r()}}},proto$1l._pause=function(){var e=this;e._waitingPlay=!1,e._currentSource&&(e._currentSource.stop(0),e._prevStopTime=e._getCurrentTime(),e._paused=!0,e._dispatchEvent(new MuEvents("pause")),e._disconnect())},proto$1l._getPaused=function(){return this._paused},mod.exportName(proto$1l,["load",proto$1l._load,"play",proto$1l._play,"pause",proto$1l._pause,"addEventListener",proto$1l._addEventListener]),mod.namespace("Utils.WebAudioMock",WebAudioMock);var needUseWebAudio=Browser$1.os.android&&Browser$1._isWeChat()&&new Audio().play()!=null,isVolume=!0;if(Browser$1._globalObject.audio){isVolume=!0;var testAudio=new Audio;testAudio.volume=.2,testAudio.volume!=.2&&(isVolume=!1),testAudio=void 0}var AudioData=function(){var e=this;AudioData.__super__.constructor.apply(e,arguments),e._src=null,e._name=null,e._audio=null,e._loop=!1,e._dataDisplayObject=!0,e._playWaiting=!1,e._isVolumeBehavior=!1,mod.definePropertyGetSet(e,["loop",proto$1k._getLoop,proto$1k._setLoop]),e.enterframeBinded=!1,e.enterFrameCallback=e._checkVisible.bind(e),e._visible=!1};mod.extend(AudioData,ResourceData);var proto$1k=AudioData.prototype;proto$1k._getLoop=function(){return this._loop},proto$1k._setLoop=function(e){var t=this;t._audio&&(t._audio.loop=e),t._loop=e},proto$1k._checkVisible=function(){var e=this;if(e._getRealVisible()==!1){e._setVisible(!1);var t=e;do t=t._parent;while(t._id!=1);t._removeEventListener("enterframe",e.enterFrameCallback),e.enterframeBinded=!1}},proto$1k._setVisible=function(e){var t=this,r=t._audio;if(r&&t._visible!=e)if(t._visible=e,e)try{if(r.currentTime=0,r.loop=t._loop,r.play(),!t.enterframeBinded){var a=t;do a=a._parent;while(a._id!=1);a._addEventListener("enterframe",t.enterFrameCallback),t.enterframeBinded=!0}}catch{console.log("play problem")}else r.pause()},proto$1k._setAudioSrc=function(e,t){var r=this;r._src=e,Browser$1._globalObject.Audio||(Browser$1._globalObject.Audio=function(c){this.play=function(){},this.pause=function(){},this.load=function(){},this.loop=!0,this.src=c,this.paused=!1,this.addEventListener=function(d,f){},this.removeEventListener=function(d,f){}});var a=Browser$1._globalObject.weixinAudioLoader;if(a){var n=Object.keys(a).filter(function(c){var d=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?((\/?[^\?#]+)?\??([^#]+)?#?(\w*))/,f=c.match(d);if(f&&f[8]&&e.indexOf(f[8])>-1)return!0});if(n[0])var o=r._audio=a[n[0]]}if(!o){var s=r._isVolumeBehavior;if(needUseWebAudio&&t||Browser$1.os.ios&&t||!isVolume&&s||Browser$1.os.ios&&s?o=r._audio=new WebAudioMock(e):(o=r._audio=new Browser$1._globalObject.Audio,o.src=e),Browser$1._isWeChat()){var _=o.play;o.play=function(){Browser$1.os.ios&&o instanceof WebAudioMock&&WebAudioMock.getAudioContext().state!=="running"&&window.top===window||_.call(o),!r._playWaiting&&(r._playWaiting=!0,Browser$1._getWechatJSBridge(function(c){c.invoke("getNetworkType",{},function(){if(r._playWaiting){var d=_.call(o);d&&d.then(function(){}).catch(function(f){}),r._playWaiting=!1}})}))};var l=o.pause;o.pause=function(){r._playWaiting=!1,l.call(o)},o.addEventListener("pause",function(){r._playWaiting=!1})}}o.loop=r._loop},proto$1k._load=function(){var e=this,t=e._loader._contentLoaderInfo;if(!(t._state==LoaderInfo.STATE.LOAD||t._state==LoaderInfo.STATE.LOADED)){var r=Browser$1._globalObject.webkitURL||Browser$1._globalObject.URL,a=function(){mod._jsonp(e._src+".base64.js","MUGEDA_DATA_CALLBACK_"+(e._src.match(/[^/\\\\]+$/)||[""])[0].replace(/[^A-Za-z0-9]/g,"$"),function(l,c){l?(t._state=LoaderInfo.STATE.CANCELLED,_=new MuEvents("ioError",!1),t._dispatchEvent(_)):(t._state=LoaderInfo.STATE.LOADED,_=new MuEvents("complete",!1),t._dispatchEvent(_),e._audio.src=c)})},n=function(){e._audio.load();var l=function(){e._audio.removeEventListener("canplay",l),e._audio.removeEventListener("error",c),t._state=LoaderInfo.STATE.LOADED,_=new MuEvents("complete",!1),t._dispatchEvent(_)},c=function(){e._audio.removeEventListener("canplay",l),e._audio.removeEventListener("error",c),t._state=LoaderInfo.STATE.CANCELLED,_=new MuEvents("ioError",!1),t._dispatchEvent(_)};e._audio.addEventListener("canplay",l),e._audio.addEventListener("error",c)},o=navigator.userAgent.toLowerCase();if(e._audio instanceof WebAudioMock)n();else if(o.indexOf("tbs")==-1&&o.indexOf("crosswalk")==-1&&Browser$1.os.android&&((Browser$1.os.version||"").match(/(\d+)/)||[4])[0]*1<5)t._state=LoaderInfo.STATE.CANCELLED,_=new MuEvents("ioError",!1),setTimeout(function(){t._dispatchEvent(_)});else if(!r||o.indexOf("crosswalk")!=-1)a();else if(!Browser$1.os.tablet&&!Browser$1.os.phone)n();else{var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState==4)if(t._state=LoaderInfo.STATE.LOADED,s.status==200){var l=this.response,c=r.createObjectURL(l);e._audio.src=c,t._state=LoaderInfo.STATE.LOADED;var d=new MuEvents("complete",!1);t._dispatchEvent(d)}else a()},s.open("GET",e._src,!0);try{s.responseType="blob",s.send()}catch{a()}t._state=LoaderInfo.STATE.LOAD;var _=new MuEvents("open",!1);t._dispatchEvent(_)}}},proto$1k._addEventListener=function(){var e=this;e._audio.addEventListener.apply(e._audio,arguments)},proto$1k._removeEventListener=function(){var e=this;e._audio.removeEventListener.apply(e._audio,arguments)},proto$1k._bindUserAPI=function(){},mod.exportName(proto$1k,["addEventListener",proto$1k._addEventListener,"removeEventListener",proto$1k._removeEventListener]),mod.namespace("Display.AudioData",AudioData);var BitmapData=function(){var e=this;BitmapData.__super__.constructor.apply(e,arguments),e._image=null};mod.extend(BitmapData,ResourceData),typeof Image<"u"&&(BitmapData.blankImage=new Image,BitmapData.blankImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");var proto$1j=BitmapData.prototype;proto$1j._load=function(){var e=this,t=e._loader._contentLoaderInfo,r=!1;if(!(t._state==LoaderInfo.STATE.LOAD||t._state==LoaderInfo.STATE.LOADED)){var a=t._url=e._src;t._contentType="image/*";var n=new Image;if(n.setAttribute("data-load","ok"),(Browser$1._globalObject._mrmcp&&(Browser$1._globalObject._mrmcp.cros||Browser$1._globalObject._mrmcp.previewMode)||a.indexOf("wx.qlogo.cn")>=0)&&(n.crossOrigin="Anonymous"),a.indexOf("wx.qlogo.cn")>=0){var o=new Image;o.src=a,a=a+(a.indexOf("?")>0?"&":"?")+"hash="+e._id}n.src=a;var s=e._loader._content=t._content=new Bitmap,_=s._bitmapData=new BitmapData;_._src=a,_._image=n;var l=function(){if(e._image=_._image,!r){n.removeEventListener("load",l),t._state=LoaderInfo.STATE.LOADED;var f=new MuEvents("complete",!1);t._dispatchEvent(f)}},c=function(){if(e._image=_._image,!r){if(this.crossOrigin==="anonymous"){var f=this;console.info("图片跨域加载失败，尝试非跨域，一些依赖跨域的功能可能失效："+this.src);var u=this.src;this.src="",this.crossOrigin=void 0,r=!0,setTimeout(function(){f.src=u,r=!1});return}n.removeEventListener("error",c),t._state=LoaderInfo.STATE.CANCELLED;var p=new MuEvents("ioError",!1);t._dispatchEvent(p)}};n.addEventListener("load",l),n.addEventListener("error",c);var d=new MuEvents("open",!1);t._state=LoaderInfo.STATE.LOAD,t._dispatchEvent(d)}},mod.namespace("Display.BitmapData",BitmapData);var displayListInfo=function(){var e=this;e._displayObjectList=[]},proto$1i=displayListInfo.prototype;proto$1i.addObjectAndTransition=function(e){var t=this,r=t._displayObjectList;r.indexOf(e)==-1&&r.push(e)},proto$1i.removeObject=function(e){var t=this,r=t._displayObjectList,a=r.indexOf(e);a>-1&&r.splice(a,1)};var StyleSheetManager=function(){};if(typeof document<"u"){var style=document.createElement("style");document.head.appendChild(style);var styleSheet=style.sheet}else console.warn("no document found");var counter=0,perfix="mugine_class_",ruleHash={},cssRulesPool=[],animationRulesPool=[],animationRuleHash={};StyleSheetManager.prototype,StyleSheetManager.addRule=function(e,t,r){if(styleSheet)if(r=r||e+"{ "+t+"}",cssRulesPool.length){var a=cssRulesPool.pop(),n=a.selectorText;if(n==null&&a.cssText.indexOf("@font-face")==0){var o=a.cssText.match(/font-family:\s*(.+?);/);o&&(n=o[1])}var s=ruleHash[n];delete ruleHash[n],styleSheet.deleteRule(s);try{styleSheet.insertRule(r,s)}catch(l){console.error("inval style: "+r,l)}ruleHash[e]=s}else{var _=(styleSheet.cssRules||styleSheet.rules).length;try{styleSheet.insertRule(r,_)}catch(l){console.error("inval style: "+r,l)}ruleHash[e]=_}},StyleSheetManager.removeRule=function(e){var t=ruleHash[e];if(t!=null){var r=styleSheet.cssRules||styleSheet.rules;cssRulesPool.push(r[t])}},StyleSheetManager.insertFontStyle=function(e,t){StyleSheetManager.addRule(e,null,"@font-face{font-family:'"+e+"';src:"+t+";}")},StyleSheetManager.removeFontStyle=function(e){StyleSheetManager.removeRule(e)},StyleSheetManager.insertCss=function(e,t){return arguments.length==1&&(t=e,e=perfix+counter++),StyleSheetManager.addRule("."+e,t),e},StyleSheetManager.animationPrefix=null,StyleSheetManager.insertKeyframes=function(e){var t=perfix+counter++,r="@"+StyleSheetManager.animationPrefix+"keyframes "+t+"{ "+e+"}";if(animationRulesPool.length){var a=animationRulesPool.pop(),n=a.name,o=animationRuleHash[n];delete animationRuleHash[n],styleSheet.deleteRule(o),styleSheet.insertRule(r,o),animationRuleHash[t]=o}else{var s=styleSheet.cssRules.length;styleSheet.insertRule(r,s),animationRuleHash[t]=s}return t},StyleSheetManager.deleteCss=function(e){StyleSheetManager.removeRule("."+e)},StyleSheetManager.deleteAnimationCss=function(e){var t=animationRuleHash[e];if(t!=null){var r=styleSheet.cssRules||styleSheet.rules;animationRulesPool.push(r[t])}},StyleSheetManager.updateCss=function(e,t){StyleSheetManager.deleteCss(e),StyleSheetManager.insertCss(e,t)},mod.namespace("Render.StyleSheet",StyleSheetManager);var FontData=function(e,t,r,a,n){var o=this;FontData.__super__.constructor.apply(o,arguments),o._fontName=e,o._src=t,o._chars=r||"",o._dynamic=a,o._base64=null,o._addedToDocument=!1,o._resource=n};extend(FontData,ResourceData),FontData._unique=function(e){return e.replace(/(.)(?=.*\1)/g,"")},FontData._getServerAddress=function(e,t,r){r=r||(Browser$1._isSupportWoff()?"woff":"ttf");var a;return a=Browser$1._getWeixinServerHost()+"/server/",a+"cloudfont.php?font="+e+"&content="+encodeURIComponent(t)+"&format="+r+"&api_type=3"};var fontCharMap={};FontData._resetIncrease=function(){Object.keys(fontCharMap).forEach(function(e){fontCharMap[e].lastForceNewIdx=fontCharMap[e].length})},FontData._getFontData=function(e,t,r,a,n){a==null&&(a=!0),fontCharMap[e]==null&&(fontCharMap[e]=[]);var o=fontCharMap[e];for(c=0;c<o.length;c++){for(var s=o[c],_=0;_<r.length&&s._chars.indexOf(r.charAt(_))!=-1;_++);if(_==r.length)return s}if(o.length==0||!a){var l=new FontData(e,t,r,a,n);return o.push(l),l}else{for(var c=o.length-1;c>=(o.lastForceNewIdx||0)&&!(o[c]._dynamic&&o[c]._getState()==LoaderInfo.STATE.IDLE);c--);return c==(o.lastForceNewIdx||0)-1?(o.push(new FontData(e,t,r,!0,n)),o[o.length-1]):(o[c]._merge(r),o[c])}},FontData._getFontDataIncrease=function(e,t,r,a){if(t.indexOf("cloudfont.php")>-1){var n=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?/,o=t.match(n);o&&Browser$1._globalObject._mrmcp&&Browser$1._globalObject._mrmcp.data_server?t=t.replace(n,Browser$1._getWeixinServerHost()):o||(t=Browser$1._getWeixinServerHost()+t);var s=e.lastIndexOf("-"),_=e.substr(0,s);s=e.indexOf("-"),_=_.substr(s+1)}else{s=e.lastIndexOf("-"),_=e.substr(0,s),s=e.indexOf("-"),_=_.substr(s+1);var l=!1}return FontData._getFontData(_,t,r,l,a)};var proto$1h=FontData.prototype;proto$1h._getServerAddress=function(e){return FontData._getServerAddress(this._fontName,this._chars,e)},proto$1h._getFontFamily=function(){var e=this;return"c-"+e._fontName+"-"+e._id},proto$1h._getContentType=function(){return"font/*"},proto$1h._merge=function(e){var t=this;t._chars=FontData._unique(t._chars+e)},proto$1h._getState=function(){var e=this;return e._loader._contentLoaderInfo._state},proto$1h._load=function(){var e=this,t=e._loader._contentLoaderInfo,r=e._getState();if(!(r==LoaderInfo.STATE.LOAD||r==LoaderInfo.STATE.LOADED)){if(e._dynamic)var a=e._getServerAddress();else a=e._resource.dir.getFullPath(e._src);var n=function(){e._dynamic?(t._state=LoaderInfo.STATE.CANCELLED,s=new MuEvents("ioError",!1),t._dispatchEvent(s),StyleSheetManager.insertFontStyle(e._getFontFamily(),'url("'+a+'")')):_jsonp(a=e._resource.dir.getFullPath(e._src+".base64.js"),"MUGEDA_DATA_CALLBACK_"+(e._src.match(/[^/\\\\]+$/)||[""])[0].replace(/[^A-Za-z0-9]/g,"$"),function(l,c){l?(s=new MuEvents("ioError",!1),t._dispatchEvent(s)):(e._base64=c,t._state=LoaderInfo.STATE.LOADED,s=new MuEvents("complete",!1),t._dispatchEvent(s))})};if(location.protocol==="file:")n();else{var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState==4)if(o.status==200){var l=o.response,c=new window.FileReader;c.readAsDataURL(l),c.onload=function(){e._base64=this.result,t._state=LoaderInfo.STATE.LOADED;var d=new MuEvents("complete",!1);t._dispatchEvent(d)}}else n()};var s=new MuEvents("open",!1);t._state=LoaderInfo.STATE.LOAD,t._dispatchEvent(s);try{if(a.length>1024){var _=a.match(/content=(.*?)(&|$)/);if(!_)throw new Error("No Content");a=a.replace(_[0],""),_=_[1],o.open("POST",a,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.responseType="blob",o.send("content="+_)}else o.open("GET",a,!0),o.responseType="blob",o.send()}catch{setTimeout(n)}}}},proto$1h._addToDocument=function(){var e=this;e._base64&&!e._addedToDocument&&(StyleSheetManager.insertFontStyle(e._getFontFamily(),'url("'+e._base64+'")'),e._addedToDocument=!0)},namespace("Display.FontData",FontData);var Form=function(){Form.__super__.constructor.apply(this,arguments)};mod.extend(Form,DisplayObject),mod.namespace("Display.Form",Form);var FrameLabel=function(){FrameLabel.__super__.constructor.apply(this,arguments);var e=this;e._frame=0,e._name=""};mod.extend(FrameLabel,IEventDispatcher),mod.namespace("Display.FrameLabel",FrameLabel);var GradientType=function(){};GradientType.LINEAR="linear",GradientType.RADIAL="radial";var id$2=0,GraphicsGradientFill=function(e,t,r,a,n){var o=this;o.type=e||GradientType.LINEAR,o.colors=t,o.ratios=r,o.fillStartPos=a,o.fillEndPos=n,o._gradId="grad_"+id$2++},proto$1g=GraphicsGradientFill.prototype;proto$1g._getDefs=function(){var e=this,t=e.type;if(t==GradientType.LINEAR)var r="linearGradient";else r="radialGradient";var a=e.fillStartPos,n=e.fillEndPos,o="<defs><"+r+' id="'+e._gradId+'" ';if(t==GradientType.LINEAR)o+='x1="'+a._x+'" x2="'+n._x+'" y1="'+a._y+'" y2="'+n._y+'" ';else{o+='cx="'+a._x+'" cy="'+a._y+'" fx="'+a._x+'" fy="'+a._y+'" ';var s=a._x-n._x,_=a._y-n._y,l=Math.sqrt(s*s+_*_);o+='r="'+l+'" '}o+='gradientUnits="userSpaceOnUse">';for(var c=e.colors,d=e.ratios,f=c.length,u=0;u<f;u++){var p=Math.abs(d[u])<.001?0:d[u],v=c[u]._getAlpha();o+='<stop class="" stop-opacity="'+v+'" offset="'+p+'" style="stop-color: '+c[u]._getCssText()+';"></stop>'}return o+="</"+r+"></defs>",o},proto$1g._getFill=function(){return"url(#"+this._gradId+")"},proto$1g._updateDefs=function(){return!1},mod.namespace("Display.GraphicsGradientFill",GraphicsGradientFill);var id$1=0,GraphicsImageFill=function(e,t,r,a,n){var o=this;o._bitmapData=e,o._horOffset=parseFloat(t)||0,o._verOffset=parseFloat(r)||0,o._imagePosition=a||"center",o._imageSize=n||"cover",o._gradId="fill_"+id$1++},proto$1f=GraphicsImageFill.prototype;proto$1f._getImageSizePosition=function(e){var t=this,r=t._bitmapData,a=e._getWidth(),n=e._getHeight(),o=e._getX(),s=e._getY(),_=e._hasShapeAnimation;if(!r)return null;var l=r._image,c=l.width,d=l.height,f=c/d,u=a/n,p=l.src.indexOf(r._src)>=0,v={},h=e._lastInfo||{};p&&(e._lastInfo=h);var m=t._horOffset,T=t._verOffset;_&&(a=Math.round(a),n=Math.round(n),o=Math.round(o),s=Math.round(s));var y=t._imageSize,E=t._imagePosition;if(y=="cover"?(v.desHeight=n,v.desWidth=a,f<u?(v.srcWidth=a,v.srcHeight=a/f):(v.srcHeight=n,v.srcWidth=n*f)):y=="contain"?(v.srcWidth=c,v.srcHeight=d,f>u?(v.desWidth=a,v.desHeight=a/f):(v.desHeight=n,v.desWidth=n*f)):y=="fill"?(v.desHeight=n,v.desWidth=a,v.srcWidth=a,v.srcHeight=n):y=="width"?(v.desWidth=a,v.desHeight=n,v.srcWidth=a,v.srcHeight=a/f):y=="height"?(v.desWidth=a,v.desHeight=n,v.srcWidth=n*f,v.srcHeight=n):y=="tile"?(v.desHeight=d,v.desWidth=c,v.srcWidth=c,v.srcHeight=d):(v.desHeight=n,v.desWidth=a,v.srcWidth=c,v.srcHeight=d),_&&(v.desHeight=Math.round(v.desHeight),v.desWidth=Math.round(v.desWidth),v.srcWidth=Math.round(v.srcWidth),v.srcHeight=Math.round(v.srcHeight)),y=="tile")v.srcLeft=0,v.desLeft=0;else if(E=="center"||E=="top"||E=="bottom"){var g=(a-v.srcWidth)/2,b=(a-v.desWidth)/2,w=Math.round(a/2),x=h.centerImageLeft===void 0||E=="center"&&y=="raw"&&Math.abs(h.centerObjLeft-o-w)<2||E=="top"&&y=="width"&&h.lastTop==s||E=="bottom"&&y=="width"&&h.lastBottom==s+n;if(_&&x){h.centerImageLeft===void 0&&(g=Math.round(g),b=Math.round(b),h.lastTop=s,h.lastBottom=s+n,h.centerImageLeft=-g+w,h.centerObjLeft=o+w);var C=h.centerImageLeft,M=o+w-h.centerObjLeft;v.srcLeft=w-C-M+Math.round(m),v.desLeft=Math.round(b)}else v.srcLeft=g+m,v.desLeft=b}else E.indexOf("left")>=0?(v.srcLeft=m,v.desLeft=0):E.indexOf("right")>=0&&(v.srcLeft=a-v.srcWidth-m,v.desLeft=a-v.desWidth);if(y=="tile")v.srcTop=0,v.desTop=0;else if(E=="center"||E=="left"||E=="right"){var A=(n-v.srcHeight)/2,O=(n-v.desHeight)/2,S=Math.round(n/2),x=h.centerImageTop===void 0||E=="center"&&y=="raw"&&Math.abs(h.centerObjTop-s-S)<2||E=="left"&&y=="height"&&h.lastLeft==o||E=="right"&&y=="height"&&h.lastRight==o+a;if(_&&x){h.centerImageTop===void 0&&(A=Math.round(A),O=Math.round(O),h.lastLeft=o,h.lastRight=o+a,h.centerImageTop=-A+S,h.centerObjTop=s+S);var L=h.centerImageTop,D=s+S-h.centerObjTop;v.srcTop=S-L-D+Math.round(T),v.desTop=Math.round(O)}else v.srcTop=A+T,v.desTop=O}else E.indexOf("top")>=0?(v.srcTop=T,v.desTop=0):E.indexOf("bottom")>=0&&(v.srcTop=n-v.srcHeight-T,v.desTop=n-v.desHeight);return v},proto$1f._getDefs=function(e){var t=this,r="",a=e._aniData.param,n=a.fillInfo,o=navigator.userAgent,s=!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),_=!!((n.horOffset||n.verOffset)&&(n.horOffset!="0"||n.verOffset!="0")),l=t._getImageSizePosition(e);if(!l)r="";else if(!_&&s&&e._bitmapData&&e._aniData.type&&(e._aniData.type==2004||e._aniData.type==2003)){var c={radius:e._aniData.type==2004?"50%":"0%",width:"100%",height:"100%",src:t._bitmapData._src,repeat:"no-repeat",size:"auto",position:"left top"};n.imageSize?n.imageSize=="cover"?c.size="cover":n.imageSize=="width"?c.size="100% auto":n.imageSize=="height"?c.size="auto 100%":n.imageSize=="fill"?c.size="100% 100%":n.imageSize=="raw"?c.size="auto auto":n.imageSize=="tile"&&(c.repeat="repeat",c.size="auto"):c.size="cover",n.imagePosition?n.imagePosition=="center"?c.position="center":n.imagePosition=="left"?c.position="left center":n.imagePosition=="lefttop"?c.position="left top":n.imagePosition=="top"?c.position="top center":n.imagePosition=="righttop"?c.position="right top":n.imagePosition=="right"?c.position="right center":n.imagePosition=="rightbottom"?c.position="right bottom":n.imagePosition=="bottom"?c.position="bottom center":n.imagePosition=="leftbottom"&&(c.position="left bottom"):c.position="center",r+='<div id="'+t._gradId+'" style="border-radius:'+c.radius+";width:"+c.width+";height:"+c.height+";background-image:url("+c.src+");background-size:"+c.size+";background-position:"+c.position+";background-repeat:"+c.repeat+';"></div>'}else r+='<defs><pattern patternUnits="userSpaceOnUse"  id="'+t._gradId+'" width="'+l.desWidth+'" height="'+l.desHeight+'"><image xlink:href="'+t._bitmapData._src+'" x="'+(Math.abs(l.srcLeft)<.001?0:l.srcLeft)+'" y="'+(Math.abs(l.srcTop)<.001?0:l.srcTop)+'" width="'+l.srcWidth+'" height="'+l.srcHeight+'" preserveAspectRatio="none" /></pattern></defs>';return r},proto$1f._updateDefs=function(e,t){return!1},proto$1f._getFill=function(){return"url(#"+this._gradId+")"},mod.namespace("Display.GraphicsImageFill",GraphicsImageFill);var GraphicsPathWinding$1="../display/graphicsPathWinding",GraphicsPathCommand$1="../display/graphicsPathCommand",GraphicsPath=function(e,t,r){e=e||[],t=t||[],r=r||GraphicsPathWinding$1.EVEN_ODD;var a=this;a._commands=e,a._data=t,a._winding=r,mod.definePropertyGetSet(a,["commands",a._getCommands,a._setCommands,"data",a._getData,a._setData,"winding",a._getWinding,a._setWinding])},proto$1e=GraphicsPath.prototype;proto$1e._getCommands=function(){return this._commands},proto$1e._setCommands=function(e){this._commands=e},proto$1e._getData=function(){return this._data},proto$1e._setData=function(e){this._data=e},proto$1e._getWinding=function(){return this._winding},proto$1e._setWinding=function(e){this._winding=e},proto$1e.curveTo=function(e,t,r,a){var n=this;n._commands.push(GraphicsPathCommand$1.CUBIC_CURVE_TO),n._data.push(e,t,r,a)},proto$1e.lineTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.LINE_TO),r._data.push(e,t)},proto$1e.moveTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.MOVE_TO),r._data.push(e,t)},proto$1e.wideLineTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.WIDE_LINE_TO),r._data.push(e,t)},proto$1e.wideMoveTo=function(e,t){var r=this;r._commands.push(GraphicsPathCommand$1.WIDE_MOVE_TO),r._data.push(e,t)},mod.exportName(proto$1e,["curveTo",proto$1e.curveTo,"lineTo",proto$1e.lineTo,"moveTo",proto$1e.moveTo,"wideLineTo",proto$1e.wideLineTo,"wideMoveTo",proto$1e.wideMoveTo]),mod.namespace("Display.GraphicsPath",GraphicsPath);var GraphicsSolidFill=function(e){this._color=e||0},proto$1d=GraphicsSolidFill.prototype;proto$1d._getDefs=function(){return""},proto$1d._getFill=function(){return this._color._getCssText()},proto$1d._updateDefs=function(){return!1},mod.namespace("Display.GraphicsSolidFill",GraphicsSolidFill);var GraphicsStroke=function(e,t,r,a,n,o,s){var _=this;_._thickness=e||NaN,_._pixelHinting=t||!1,_._scaleMode=r||"normal",_._caps=a||"round",_._joints=n||"round",_._miterLimit=o??3,_._fill=s},proto$1c=GraphicsStroke.prototype;proto$1c._setFill=function(e){this._fill=e},mod.namespace("Display.GraphicsStroke",GraphicsStroke);var Graphics=function(){var e=this;e._actions=[],e._thickness=0,e._hash=0},proto$1b=Graphics.prototype;proto$1b.reset=function(){this._actions=[],this._hash++},proto$1b.drawPath=function(e,t,r,a){var n=this,o=n._actions.length?n._actions[n._actions.length-1]:null;(a||!(o instanceof GraphicsPath))&&(o=new GraphicsPath,n._actions.push(o),n._hash++),o._commands=o._commands.concat(e),o._data=o._data.concat(t),r&&(o._winding=r)},proto$1b.getActions=function(){return this._actions},proto$1b.beginFill=function(e,t){var r=this,a=new GraphicsSolidFill(e);r._actions.splice(t===void 0?this._actions.length:t,0,a),r._hash++},proto$1b.beginGradientFill=function(e,t,r,a,n){var o=this,s=new GraphicsGradientFill(e,t,r,a,n);o._actions.push(s),o._hash++},proto$1b.beginBitmapFill=function(e,t,r,a,n){var o=this,s=new GraphicsImageFill(e,t,r,a,n);o._actions.push(s),o._hash++},proto$1b.endFill=function(){},proto$1b.lineStyle=function(e,t,r,a){var n=this,o=new GraphicsSolidFill(t),s=new GraphicsStroke(e,null,null,r,a,null,o);n._thickness=e,n._actions.push(s),n._hash++},mod.exportName(proto$1b,["drawPath",proto$1b.drawPath]),mod.namespace("Display.Graphics",Graphics);var GraphicsPathCommand=function(){};GraphicsPathCommand.CUBIC_CURVE_TO=6,GraphicsPathCommand.CURVE_TO=3,GraphicsPathCommand.LINE_TO=2,GraphicsPathCommand.MOVE_TO=1,GraphicsPathCommand.NO_OP=0,GraphicsPathCommand.WIDE_LINE_TO=5,GraphicsPathCommand.WIDE_MOVE_TO=4,mod.exportName(GraphicsPathCommand,["CUBIC_CURVE_TO",GraphicsPathCommand.CUBIC_CURVE_TO,"CURVE_TO",GraphicsPathCommand.CURVE_TO,"LINE_TO",GraphicsPathCommand.LINE_TO,"MOVE_TO",GraphicsPathCommand.MOVE_TO,"NO_OP",GraphicsPathCommand.NO_OP,"WIDE_LINE_TO",GraphicsPathCommand.WIDE_LINE_TO,"WIDE_MOVE_TO",GraphicsPathCommand.WIDE_MOVE_TO]),mod.namespace("Display.GraphicsPathCommand",GraphicsPathCommand);var GraphicsPathWinding=function(){};GraphicsPathWinding.EVEN_ODD="evenOdd",GraphicsPathWinding.NON_ZERO="nonZero",mod.exportName(GraphicsPathWinding,["EVEN_ODD",GraphicsPathWinding.EVEN_ODD,"NON_ZERO",GraphicsPathWinding.NON_ZERO]),mod.namespace("Display.GraphicsPathWinding",GraphicsPathWinding);var IFrame=function(){IFrame.__super__.constructor.apply(this,arguments);var e=this;e._url=null};mod.extend(IFrame,DisplayObject);var proto$1a=IFrame.prototype;proto$1a._getUrl=function(){return this._url},proto$1a._setUrl=function(e){var t=this,r=e!=t._url;t._url=e,r&&t._dispatchEvent(t._changedEvent)},proto$1a._type="IFrame",mod.namespace("Display.IFrame",IFrame);var KeyframeInfo=function(){var e=this;e._keyframes={},e._eases={},e._refTrans={},e._min=null,e._max=null,e._interpolateFrame=null,e._aniData=null},proto$19=KeyframeInfo.prototype;proto$19._setInterpolateFrame=function(e){this._interpolateFrame=e},proto$19._getStopFrame=function(e){var t=this,r=t._interpolateFrame;return r==null||e<=r||e>t._max?e:(e-r)/(t._max-t._interpolateFrame)*(t._max-t._interpolateFrame+1)+r},proto$19.addKeyframe=function(e,t,r,a){var n=this,o=n._min,s=n._max;n._keyframes[e]=t,r!==void 0&&(n._refTrans[e]=r),a!==void 0&&(n._eases[e]=a),n._keyframes[e]=t,n._min=o===null?e:Math.min(e,o),n._max=s===null?e:Math.max(e,s)},proto$19.getRefTrans=function(e){var t=this;return t._refTrans[e]==null?t._keyframes[e]:t._refTrans[e]},proto$19.getNearFrameInfo=function(e){for(var t=void 0,r=-1/0,a=void 0,n=1/0,o=Object.keys(this._keyframes),s=0;s<o.length;s++){var _=o[s]-e;_<=0&&_>r&&(r=_,t=o[s]),_>=0&&_<n&&(n=_,a=o[s])}if(t===void 0&&a!==void 0){a=t;var l=0}else t!==void 0&&a===void 0?(a=t,l=0):t!==void 0&&a!==void 0&&(a-t===0?l=0:l=(e-t)/(a-t));return[t,a,l]},proto$19.getKeyframe=function(e){return this._keyframes[e]},proto$19.getKeyframes=function(e){return this._keyframes},mod.exportName(proto$19,["getKeyframes",proto$19.getKeyframes]);var MaskType=function(){};MaskType.MaskSource=1,MaskType.MaskAim=2;var Scene=function(){var e=this;e._labels=[],e._name="",e._guid="",e._numFrames=0,e._startFrame=0,e._aniData=null,mod.definePropertyReadOnly(e,["startFrame",e._getStartFrame,"length",e._getLength])},proto$18=Scene.prototype;proto$18._getStartFrame=function(){return this._startFrame},proto$18._getLength=function(){return this._numFrames},proto$18.getDom=function(){return document.querySelector("div[data-type=scene][data-guid="+this._guid+"]")},mod.namespace("Display.Scene",Scene);var DisplayObjectTrans=function(){},FillType=function(){};FillType.COLOR="COLOR",FillType.LINEAR="LINEAR",FillType.RADIAL="RADIAL",FillType.IMAGE="IMAGE",mod.namespace("Transform.FillType",FillType);var ShapeTrans=function(){var e=this;ShapeTrans.__super__.constructor.apply(this,arguments),e._fillType=FillType.COLOR,e._fillVal=new Color,e._strokeColor=new Color,e._strokeWidth=1,e._curves=[],mod.definePropertyGetSet(e,["fillType",e._getFillType,e._setFillType,"fillVal",e._getFillVal,e._setFillVal])};mod.extend(ShapeTrans,DisplayObjectTrans);var proto$17=ShapeTrans.prototype;proto$17._getFillType=function(){return this._fillType},proto$17._setFillType=function(e){this._fillType=e},proto$17._getFillVal=function(){return this._fillVal},proto$17._setFillVal=function(e){this._fillVal=e},proto$17._compareDetailFillAndStock=function(e){var t=new this.constructor,r=this;if(t._fillType=void 0,t._fillVal=void 0,t._strokeColor=void 0,t._strokeWidth=void 0,r._fillType!==e._fillType)t._fillType=r._fillType,t._fillVal=r._fillVal;else{var a=r._fillType;a===FillType.COLOR?r._fillVal._compareTo(e._fillVal)===!1&&(t._fillType=r._fillType,t._fillVal=r._fillVal):a===FillType.LINEAR||a===FillType.RADIAL?(r._fillVal._colors.some(function(n,o){return n._compareTo(e._fillVal._colors[o])===!1})||r._fillVal._ratios.some(function(n,o){return n===e._fillVal._ratios[o]})||!r._fillVal._p0.equals(e._fillVal._p0)||!r._fillVal._p1.equals(e._fillVal._p1))&&(t._fillType=r._fillType,t._fillVal=r._fillVal):a===FillType.IMAGE&&(r._fillVal._url!==e._fillVal._url||r._fillVal._x!==e._fillVal._x||r._fillVal._y!==e._fillVal._y||r._fillVal._pos!==e._fillVal._pos||r._fillVal._size!==e._fillVal._size)&&(t._fillType=r._fillType,t._fillVal=r._fillVal)}return r._strokeColor._compareTo(e._strokeColor)===!1&&(t._strokeColor=e._strokeColor),r._strokeWidth!==e._strokeWidth&&(t._strokeWidth=e._strokeWidth),t},proto$17._compareFillAndStockTo=function(e){var t=this;if(t._fillType!==e._fillType)return!1;var r=t._fillType;if(r===FillType.COLOR){if(t._fillVal._compareTo(e._fillVal)===!1)return!1}else if(r===FillType.LINEAR||r===FillType.RADIAL){if(t._fillVal._colors.some(function(a,n){return a._compareTo(e._fillVal._colors[n])===!1})||t._fillVal._ratios.some(function(a,n){return a===e._fillVal._ratios[n]})||!t._fillVal._p0.equals(e._fillVal._p0)||!t._fillVal._p1.equals(e._fillVal._p1))return!1}else if(r===FillType.IMAGE&&(t._fillVal._url!==e._fillVal._url||t._fillVal._x!==e._fillVal._x||t._fillVal._y!==e._fillVal._y||t._fillVal._pos!==e._fillVal._pos||t._fillVal._size!==e._fillVal._size))return!1;if(t._strokeColor._compareTo(e._strokeColor)===!1||t._strokeWidth!==e._strokeWidth)return!1},proto$17._compareTo=function(e){var t=this;return!(e==null||t._compareFillAndStockTo(e)===!1||JSON.stringify(t._curves)!==JSON.stringify(t._curves))},proto$17._parseParam=function(e,t){var r=this;r._parseFillAndStroke(e,t),r._parseCurve(e,t)},proto$17._parseCurve=function(e){var t=this,r=e.curves,a=e.curve;r||(r=[a]),t._curves=r},proto$17._parseFillAndStroke=function(e,t){var r=this,a=e.customValue,n=e.presetImage,o=e.fillInfo||{},s=t._bitmapDataSetByAPI||a||Macro._getValue(n)||o.fillImage;if(s)r._fillType=FillType.IMAGE,r._fillVal={_url:s,_x:o.horOffset,_y:o.verOffset,_pos:o.imagePosition,_size:o.imageSize};else if(o.fillStyle===0){r._fillType=FillType.COLOR;var _=o.fillColors[0];r._fillVal=new Color(_.r,_.g,_.b,_.a)}else if(o.fillStyle===void 0)r._fillType=FillType.COLOR,r._fillVal=new Color(0,0,0,0);else{r._fillType=o.fillStyle===1?FillType.LINEAR:FillType.RADIAL;var l=o.fillColors,c=l.map(function(p){return new Color(p.r,p.g,p.b,p.a)}),d=l.map(function(p){return p.p}),f=o.fillStartPos,u=o.fillEndPos;r._fillVal={_colors:c,_ratios:d,_p0:new Point(f.x,f.y),_p1:new Point(u.x,u.y)}}r._strokeColor=Color.parse(e.strokeColor),r._strokeWidth=e.lineWidth},ShapeTrans._tween=function(e,t,r,a,n){n=a._default(n),ShapeTrans._tweenFillAndStroke(e,t,r,a,n);var o=function(g,b,w){var x={};return x.nodeX=g.nodeX+w*(b.nodeX-g.nodeX),x.nodeY=g.nodeY+w*(b.nodeY-g.nodeY),x.forwardX=g.forwardX+w*(b.forwardX-g.forwardX),x.forwardY=g.forwardY+w*(b.forwardY-g.forwardY),x.backwardX=g.backwardX+w*(b.backwardX-g.backwardX),x.backwardY=g.backwardY+w*(b.backwardY-g.backwardY),x},s=t._curves,_=r._curves,l=Math.min(s.length,_.length);e._curves=[];for(var c=0;c<l;c++){for(var d=s[c].points,f=_[c].points,u=Math.max(d.length,f.length),p=Math.min(d.length,f.length),v=[],h=0;h<p-2;h++){var m=d[h],T=f[h],y=o(m,T,n);v.push(y)}for(var h=p-2;h<u;h++){if(d.length>f.length){var m=d[h],E=[f[p-2],f[p-1]];Bezier.subdivision(E,0,(h-(p-2))/(u-p+1));var T=E[1]}else if(d.length<f.length){var E=[m[p-2],m[p-1]];Bezier.subdivision(E,0,(h-(p-2))/(u-p+1));var m=E[1],T=f[h]}else var m=d[h],T=f[h];var y=o(m,T,n);v.push(y)}e._curves.push({points:v,closed:s[c].closed})}},ShapeTrans._tweenFillAndStroke=function(e,t,r,a,n){var o=t._fillType,s=r._fillType;if(o===s&&o===FillType.COLOR)e._fillType=o,e._fillVal=Color._tween(t._fillVal,r._fillVal,n);else if(o===s&&o===FillType.IMAGE)e._fillType=o,e._fillVal={_url:t._fillVal._url,_x:t._fillVal._x+n*(r._fillVal._x-t._fillVal._x),_y:t._fillVal._y+n*(r._fillVal._y-t._fillVal._y),_pos:t._fillVal._pos,_size:t._fillVal._size};else if(o===FillType.IMAGE)e._fillType=o,e._fillVal={_url:t._fillVal._url,_x:t._fillVal._x,_y:t._fillVal._y,_pos:t._fillVal._pos,_size:t._fillVal._size};else if(s===FillType.IMAGE&&n===1)e._fillType=s,e._fillVal={_url:r._fillVal._url,_x:r._fillVal._x,_y:r._fillVal._y,_pos:r._fillVal._pos,_size:r._fillVal._size};else{e._fillType=o;var _=t._fillVal,l=r._fillVal;o===FillType.COLOR?(e._fillType=s,_={_colors:l._colors.map(function(){return _.clone()}),_ratios:l._ratios.slice(0),_p0:new Point(0,0),_p1:new Point(0,0)}):s===FillType.COLOR&&(l={_colors:_._colors.map(function(){return l.clone()}),_ratios:_._ratios.slice(0),_p0:new Point(0,0),_p1:new Point(0,0)});for(var c=_._colors,d=l._colors,f=_._ratios,u=l._ratios,p=c.length,v=d.length,h=Math.min(p,v),m=_._p0,T=l._p0,y=_._p1,E=l._p1,g=[],b=[],w=0;w<h;w++){g.push(Color._tween(c[w],d[w],n));var x=isFinite(f[w])?f[w]:u[w],C=isFinite(u[w])?u[w]:f[w];b.push(Math.min(1,x+n*(C-x)))}e._fillVal={_colors:g,_ratios:b,_p0:new Point(m._x+n*(T._x-m._x),m._y+n*(T._y-m._y)),_p1:new Point(y._x+n*(E._x-y._x),y._y+n*(E._y-y._y))}}e._strokeColor=Color._tween(t._strokeColor,r._strokeColor,n),e._strokeWidth=t._strokeWidth+n*(r._strokeWidth-t._strokeWidth)},proto$17._clone=function(){var e=this,t=new ShapeTrans,r=t._fillType=e._fillType;return r===FillType.IMAGE?t._fillVal=JSON.parse(JSON.stringify(e._fillVal)):r===FillType.COLOR?t._fillVal=e._fillVal.clone():t._fillVal={_colors:e._fillVal._colors.map(function(a){return a.clone()}),_ratios:e._fillVal._ratios.slice(0),_p0:e._fillVal._p0.clone(),_p1:e._fillVal._p1.clone()},e._strokeColor&&(t._strokeColor=e._strokeColor.clone()),t._strokeWidth=e._strokeWidth,t._curves=JSON.parse(JSON.stringify(e._curves)),t},mod.namespace("Transform.ShapeTrans",ShapeTrans);var Shape=function(){Shape.__super__.constructor.apply(this,arguments);var e=this;e._graphics=new Graphics,e._resourceList=null,e._progressRatio=1,e._keyframes=[],e._bitmapDataSetByAPI=null,mod.definePropertyReadOnly(e,["graphics",e._getGraphics])};mod.extend(Shape,DisplayObject);var proto$16=Shape.prototype;proto$16._type="Shape",proto$16._getGraphics=function(){return this._graphics},proto$16._getBoundary=function(e,t){t=t||1;var r=this,a=r._graphics._thickness/2*t;return Shape.__super__._getBoundary.call(r,e,a)},proto$16._getBitmapData=function(){return this._bitmapData},proto$16._setBitmapData=function(e){var t=this;t._bitmapDataSetByAPI=e;var r=t._transform._clone();if(r._paramTransform._fillType===FillType.IMAGE)r._paramTransform._fillVal._url=e?e._src:"";else{var a=t._aniData.param&&t._aniData.param.fillInfo?t._aniData.param.fillInfo:{};r._paramTransform._fillType=FillType.IMAGE,r._paramTransform._fillVal={_url:e,_size:a.imageSize?a.imageSize:"cover",_pos:a.imagePosition?a.imagePosition:"center",_x:a.horOffset?a.horOffset:0,_y:a.verOffset?a.verOffset:0}}t._updateDisplayObjectFromTransform(r),t._dispatchEvent(t._changedEvent)},proto$16._setFillStyle=function(e){for(var t=this,r=t._graphics,a=r.getActions(),n=0;n<a.length;n++){var o=a[n];if(o instanceof GraphicsSolidFill||o instanceof GraphicsGradientFill||o instanceof GraphicsImageFill){a.splice(n,1);break}}r.beginFill(e,n),t._dispatchEvent(t._changedEvent)},proto$16._getFillStyle=function(){for(var e=this,t=e._graphics,r=t.getActions(),a=0;a<r.length;a++){var n=r[a];if(n instanceof GraphicsSolidFill)return n._color;if(n instanceof GraphicsGradientFill||n instanceof GraphicsImageFill)return}},proto$16._setLineStyle=function(e){for(var t=this,r=t._graphics,a=r.getActions(),n=0;n<a.length;n++){var o=a[n];if(o instanceof GraphicsStroke){o._setFill(new GraphicsSolidFill(e)),r._hash++;break}}t._dispatchEvent(t._changedEvent)},proto$16._getLineStyle=function(e){for(var t=this,r=t._graphics,a=r.getActions(),n=0;n<a.length;n++){var o=a[n];if(o instanceof GraphicsStroke)return o._fill._color}},proto$16._initProcessAnimation=function(){this._initialText=this._getText()},proto$16._updateDisplayObjectFromTransform=function(e,t){var r=this,a=r._graphics;t=!0,a.reset(),e=e||r._transform;var n=e._paramTransform,o=r._aniData,s=o.param,_=s.lineCap,l=s.lineJoin;a.lineStyle(n._strokeWidth,n._strokeColor,_,l);var c=n._fillVal;if(n._fillType===FillType.IMAGE){var d=c._url;if(r._resourceList=r._resourceList||[],r._bitmapData&&(d===r._bitmapData||r._bitmapData._src===d))var f=r._bitmapData;else{if(r._bitmapData){var u=r._resourceList.indexOf(r._bitmapData);r._resourceList.splice(u,1)}var p=r._getRoot(!0);d instanceof BitmapData?f=d:f=p._getBitmapData(d),r._resourceList.push(f),r._bitmapData=f}var v=c._x,h=c._y,m=c._pos,T=c._size;a.beginBitmapFill(f,v,h,m,T)}else if(n._fillType===FillType.COLOR)a.beginFill(c);else{var y=n._fillType===FillType.LINEAR?GradientType.LINEAR:GradientType.RADIAL;a.beginGradientFill(y,c._colors,c._ratios,c._p0,c._p1)}n._curves.forEach(function(E){if(E&&E.points){var g=E.points,b=g.length,w,x=[],C=[];for(w=0;w<b;w++){var M=g[w],A=w>0?g[w-1]:0;w===0?(x.push(GraphicsPathCommand.MOVE_TO),C.push(M.nodeX),C.push(M.nodeY)):(x.push(GraphicsPathCommand.CUBIC_CURVE_TO),C.push(M.nodeX),C.push(M.nodeY),C.push(A.forwardX),C.push(A.forwardY),C.push(M.backwardX),C.push(M.backwardY))}E.closed&&b>1&&(M=g[0],A=g[b-1],x.push(GraphicsPathCommand.CUBIC_CURVE_TO),C.push(M.nodeX),C.push(M.nodeY),C.push(A.forwardX),C.push(A.forwardY),C.push(M.backwardX),C.push(M.backwardY))}a.drawPath(x,C,!1,t)}),Shape.__super__._updateDisplayObjectFromTransform.call(this,e,t)},proto$16._getFixedParam=function(e,t){return e.rawWidth=e.width,e.rawHeight=e.height,t&&(e.curve=t.curve),Shape.__super__._getFixedParam.call(this,e,t),e},proto$16.tweenParam=function(e,t,r,a){e=Shape.__super__.tweenParam.apply(this,arguments);var n=function(v,h,m){var T={};return T.nodeX=v.nodeX+m*(h.nodeX-v.nodeX),T.nodeY=v.nodeY+m*(h.nodeY-v.nodeY),T.forwardX=v.forwardX+m*(h.forwardX-v.forwardX),T.forwardY=v.forwardY+m*(h.forwardY-v.forwardY),T.backwardX=v.backwardX+m*(h.backwardX-v.backwardX),T.backwardY=v.backwardY+m*(h.backwardY-v.backwardY),T};if(t.curve&&r.curve&&t.curve.points&&r.curve.points&&t.curve.points.length==r.curve.points.length){e.curveTweened=!0;var o=t.curve.points,s=r.curve.points,_=t.curve.points.length;e.customPivot=!1,e.curve=e.curve||{closed:t.curve.closed},e.curve.points=[];for(var l=typeof a=="object"?a:{},c=l.default===void 0?a:l.default,d=0;d<_;d++){var f=o[d],u=s[d],p=n(f,u,c);e.curve.points.push(p)}}return e},proto$16._bindTrans=function(e){e._paramTransform=new ShapeTrans},proto$16._bindUserAPI=function(e){var t=this;Shape.__super__._bindUserAPI.call(t,e),mod.exportName(e,["setFillColor",function(r,a,n,o){t._setFillStyle(new Color(r,a,n,o))},"setLineColor",function(r,a,n,o){t._setLineStyle(new Color(r,a,n,o))}]),mod.definePropertyGetSet(e,["fillColor",function(){var r=t._getFillStyle();return r?r._getCssText():null},function(r){t._setFillStyle(Color.parse(r))}])},proto$16._initProcessAnimation=function(){this._originProgressTransform=this._transform},proto$16._getProcessAnimationLength=function(){var e=0,t=this._originProgressTransform._paramTransform._curves;return t.forEach(function(r){var a=r.closed,n=r.points.length;a||n--,e+=n}),e},proto$16._setProcessAnimationRatio=function(e){if(this._originProgressTransform._paramTransform&&this._originProgressTransform._paramTransform._curves){var t=this._originProgressTransform._paramTransform._curves,r=[],a=this._aniData.param.lineType;if(a&&a!=="solid"){t.forEach(function(s){var _=s.closed,l=s.points.length;_||l--;var c;e<0?c=-1:e>1?c=1:c=e;var d=c*l,f={closed:s.closed,points:JSON.parse(JSON.stringify(s.points))},u=Math.floor(d<0?0:d),p=d-u;u<f.points.length&&(Bezier.subdivision(f.points,u,p),p>0&&u++,f.points=f.points.slice(0,u+1),f.closed=!1),r.push(f)});var n=this._originProgressTransform._clone();n._paramTransform._curves=r,this._transform=n,this._updateDisplayObjectFromTransform(n,!0)}else{t.forEach(function(s){s.closed,s.points.length});var o;e<0?o=-1:e>1?o=1:o=e,this._progressRatio=o}this._dispatchEvent(this._changedEvent)}},mod.namespace("Display.Shape",Shape);var Slides=function(){Slides.__super__.constructor.apply(this,arguments);var e=this;e._imageList=null,e._activeIndex=0,mod.definePropertyReadOnly(e,["imageList",e._getImageList])};mod.extend(Slides,DisplayObject);var proto$15=Slides.prototype;proto$15._type="Slides",proto$15._getImageList=function(){return this._imageList},proto$15._getText=function(){return this._activeIndex+1},mod.namespace("Display.Slides",Slides);var StageAlign=function(){};StageAlign.BOTTOM="B",StageAlign.BOTTOM_LEFT="BL",StageAlign.BOTTOM_RIGHT="BR",StageAlign.LEFT="L",StageAlign.RIGHT="R",StageAlign.TOP="T",StageAlign.TOP_LEFT="TL",StageAlign.TOP_RIGHT="TR",mod.exportName(StageAlign,["BOTTOM",StageAlign.BOTTOM,"BOTTOM_LEFT",StageAlign.BOTTOM_LEFT,"BOTTOM_RIGHT",StageAlign.BOTTOM_RIGHT,"LEFT",StageAlign.LEFT,"RIGHT",StageAlign.RIGHT,"TOP",StageAlign.TOP,"TOP_LEFT",StageAlign.TOP_LEFT,"TOP_RIGHT",StageAlign.TOP_RIGHT]),mod.namespace("Display.StageAlign",StageAlign);var StageDisplayState=function(){};StageDisplayState.FULL_SCREEN_INTERACTIVE="fullScreenInteractive",StageDisplayState.NORMAL="normal",mod.exportName(StageDisplayState,["BOTTOM",StageDisplayState.FULL_SCREEN_INTERACTIVE,"BOTTOM_LEFT",StageDisplayState.NORMAL]),mod.namespace("Display.StageDisplayState",StageDisplayState);var StageScaleMode=function(){};StageScaleMode.ADAPT_WIDTH="width",StageScaleMode.ADAPT_WIDTH2="width2",StageScaleMode.ADAPT_HEIGHT="height",StageScaleMode.ADAPT_COVER="cover",StageScaleMode.ADAPT_CONTAIN="contain",StageScaleMode.ADAPT_FILL="fill",StageScaleMode.ADAPT_NONE="none",StageScaleMode.ADAPT_NONEMOBILE="none_mobile",StageScaleMode.ADAPT_NONEPC="none_pc",StageScaleMode.ADAPT_NOSCALE="no_scale",mod.namespace("Display.StageScaleMode",StageScaleMode);var Stage=function(e){Stage.__super__.constructor.apply(this,arguments);var t=this;t._align=StageAlign.TOP_LEFT,t._color=0,t._frameRate=0,t._fullScreenHeight=0,t._fullScreenWidth=0,t._fullScreenSourceRect=null,t._nativeWindow=null,t._scaleMode=StageScaleMode.ADAPT_WIDTH,t._displayState=StageDisplayState.NORMAL,t._stageHeight=0,t._stageWidth=0,t._parent=e||null,t._deltaFrame=0,t._totolFrame=0,t._renderManager=null,t._getBitmapData=null,t._rootId=null,t._cacheActionFunc=null,t._msuidCallbacks=[],mod.definePropertyReadOnly(t,["x",t._getX,"y",t._getY,"scaleX",t._getScaleX,"scaleY",t._getScaleY,"rotation",t._getRotation,"alpha",t._getAlpha,"visible",t._getVisible,"name",t._getName,"fullScreenHeight",t._getFullScreenHeight,"fullScreenWidth",t._getFullScreenWidth]),mod.definePropertyGetSet(t,["align",t._getAlign,t._setAlign,"color",t._getColor,t._setColor,"frameRate",t._getFrameRate,t._setFrameRate,"displayState",t._getDisplayState,t._setDisplayState,"fullScreenSourceRect",t._getFullScreenSourceRect,t._setFullScreenSourceRect,"scaleMode",t._getScaleMode,t._setScaleMode])};mod.extend(Stage,DisplayObjectContainer);var proto$14=Stage.prototype;proto$14._type="Stage",proto$14._getAlign=function(){return this._align},proto$14._setAlign=function(e){this._align=e},proto$14._getColor=function(){return this._color},proto$14._setColor=function(e){this._color=e},proto$14._getFrameRate=function(){return this._frameRate},proto$14._setFrameRate=function(e){this._frameRate=e},proto$14._getDisplayState=function(){return this._displayState},proto$14._setDisplayState=function(e){this._displayState=e},proto$14._getFullScreenHeight=function(){},proto$14._getFullScreenWidth=function(){},proto$14._getFullScreenSourceRect=function(){return this._fullScreenSourceRect},proto$14._setFullScreenSourceRect=function(e){this._fullScreenSourceRect=e},proto$14._getScaleMode=function(){return this._scaleMode},proto$14._setScaleMode=function(e){this._scaleMode=e},proto$14._getStage=function(){return this},proto$14._getRoot=function(e){return e&&this._isVirtual&&this._parent?this._parent._getRoot(e):this},proto$14._registerMsuidCallback=function(e){e&&this._msuidCallbacks.push(e)},proto$14._runMsuidCallbacks=function(e){this._msuidCallbacks.forEach(function(t){t&&t(e)})},mod.namespace("Display.Stage",Stage);var id=0,VideoData=function(){var e=this;e._useNewId=!0,VideoData.__super__.constructor.apply(e,arguments),e._id=id++,e._src=null,e._guid=null};mod.extend(VideoData,ResourceData);var proto$13=VideoData.prototype;proto$13._load=function(){var e=this,t=e._loader._contentLoaderInfo;if(t._state===LoaderInfo.STATE.LOAD||t._state===LoaderInfo.STATE.LOADED){t._state=LoaderInfo.STATE.CANCELLED,setTimeout(function(){var _=new MuEvents("ioError",!1);t._dispatchEvent(_)},0);return}var r='video/mp4; codecs="avc1.42401f,mp4a.40.2"';if(!("MediaSource"in window)||!MediaSource.isTypeSupported(r)){t._state=LoaderInfo.STATE.CANCELLED,setTimeout(function(){var _=new MuEvents("ioError",!1);t._dispatchEvent(_)},0);return}var a=e._mediaSource=new MediaSource;e._meidaSourceUrl=URL.createObjectURL(a);var n,o=[],s=!1;a.addEventListener("sourceopen",function(){var _=a.addSourceBuffer(r);n=function(){a.readyState==="open"&&_&&_.updating===!1&&(o.length?_.appendBuffer(o.shift()):s&&a.readyState==="open"&&a.endOfStream())},_.addEventListener("updateend",n),n()}),fetch(e._src).then(function(_){if(_.ok){var l=_.body.getReader(),c=0,d=function(){l.read().then(function(f){if(f.done){if(s=!0,t._state!==LoaderInfo.STATE.LOADED){var u=new MuEvents("complete",!1);t._dispatchEvent(u)}}else{if(c+=f.value.length,o.push(f.value),n&&n(),c>512*1024&&t._state!==LoaderInfo.STATE.LOADED){t._state=LoaderInfo.STATE.LOADED;var u=new MuEvents("complete",!1);t._dispatchEvent(u)}d()}})};d()}}).catch(function(_){t._state=LoaderInfo.STATE.CANCELLED;var l=new MuEvents("ioError",!1);t._dispatchEvent(l)})},proto$13._mediaSourceOpen=function(){},mod.namespace("Display.VideoData",VideoData);var VideoIFrame=function(){VideoIFrame.__super__.constructor.apply(this,arguments)};mod.extend(VideoIFrame,IFrame);var proto$12=VideoIFrame.prototype;proto$12._type="VideoIFrame",mod.namespace("Display.VideoIFrame",VideoIFrame);var Video=function(){Video.__super__.constructor.apply(this,arguments);var e=this;e._video=null,e._embedVideo=!1,e._showControls=!0,e._showPlayIcon=!1,e._needStopAudio=!1,e._autoPlay=!1,e._clickCanPause=!0,e._currentTime=0,e._play=null,e._pause=null,e._stop=null,e._loop=!1,e._type="video",e._getText=function(t){return e._currentTime}};mod.extend(Video,Bitmap);var proto$11=Video.prototype;Video.prototype.isSupportSameLayer=function(){return(navigator.userAgent.match(/TBS\/(\d+)/)||[null,0])[1]*1>=36849||(Browser$1.os.version||"").substr(0,2)==="11"},proto$11._getFixedParam=function(e,t){return e.rawWidth=e.width,e.rawHeight=e.height,Video.__super__._getFixedParam.call(this,e,t),e},proto$11._bindBehavior=function(e,t){this._addEventListener(e.replace("_",""),function(r){t(r._media)})},mod.namespace("Display.Video",Video);var LoadProgressEvent=function(e){var t=this;LoadProgressEvent.__super__.constructor.apply(t,arguments),t._loaded=0,t._total=0,t._loadedOver=!1,mod.definePropertyReadOnly(t,["loaded",proto$10._getLoaded,"total",proto$10._getTotal,"loadOver",proto$10._getLoadOver])};mod.extend(LoadProgressEvent,MuEvents);var proto$10=LoadProgressEvent.prototype;proto$10._getLoaded=function(){return this._loaded},proto$10._getTotal=function(){return this._total},proto$10._getLoadOver=function(){return this._loadedOver};var ReadyEvent=function(){var e=this;ReadyEvent.__super__.constructor.apply(e,arguments),e._waitNum=0,e._callback=null};mod.extend(ReadyEvent,MuEvents);var proto$$=ReadyEvent.prototype;proto$$._goOnLoad=function(){var e=this;e._waitNum--,e._chkOk()},proto$$._chkOk=function(){var e=this;e._waitNum===0?e._callback&&e._callback():e._callbackFail&&e._callbackFail()},proto$$._stopLoad=function(){this._waitNum++},proto$$._registerCallback=function(e){this._callback=e},proto$$._registerFailCallback=function(e){this._callbackFail=e},mod.exportName(proto$$,["stopLoad",proto$$._stopLoad,"goOnLoad",proto$$._goOnLoad]),mod.namespace("Events.ReadyEvent",ReadyEvent);var ResourceEvent=function(e,t){var r=this;ResourceEvent.__super__.constructor.apply(r,arguments),r._url="",mod.definePropertyReadOnly(r,["url",proto$_._getUrl])};mod.extend(ResourceEvent,ReadyEvent);var proto$_=ResourceEvent.prototype;proto$_._getUrl=function(){return this._url};var PresetType=function(){};PresetType.Animation={MOVE_IN:"move_in",MOVE_OUT:"move_out",FADE_IN:"fade_in",FADE_OUT:"fade_out",BOUNCE_IN:"bounce_in",FLIP_IN:"flip_in",ROTATE:"rotate",APPEAR:"appear",POP_IN:"pop_in",CLOSER_IN:"closer_in",ROLL_IN:"roll_in",FLY_IN:"fly_in",SWIRL_IN:"swirl_in",SWIRL_OUT:"swirl_out",FURTHER_IN:"further_in",SHAKE:"shake",SQUEEZE:"squeeze",FLIP:"flip",SWING:"swing",MOVE:"move",SLIDE_UP:"slide_up",QUIVER:"quiver",tilt:"tilt",BOUNCE_OUT:"bounce_out",FLIP_OUT:"flip_out",POP_OUT:"pop_out",FURTHER_OUT:"further_out",ROLL_OUT:"roll_out",FLY_OUT:"fly_out",CLOSER_OUT:"closer_out",RAISED_IN:"raise_in",RAISED_OUT:"raise_out"},PresetType.Param={TYPE:"type",DURATION:"duration",DELAY:"delay",LENGTH:"length",TRANSLATE_X:"translateX",TRANSLATE_Y:"translateY",LOOP:"loop",TRIGGER:"trigger",X:"x",Y:"y",LEFT:"left",TOP:"top",RIGHT:"right",BOTTOM:"bottom",FROM2:"from2",FROM:"from",TO:"to",TO2:"to2",UNIFORM:"uniform",CLOCKWISE:"clockwise",RAISE:"raise",RAISE_UP:"up",DEG:"deg",DATA:"data",WAY:"way"},PresetType.WAY={KEYFRAME:"keyframe",PROGRESS:"progress",CURVE_SHAPE:"curveShape",TEXT_SHAPE:"textShape",MASK:"mask"},PresetType.Trigger={},PresetType.Custom="custom_";var PresetAnimation=function(e){var t=this,r=Browser$1._globalObject._mrmcp||{};t._type=e[PresetType.Param.TYPE]||PresetType.Animation.APPEAR,t._duration=r.report_mode?.001:parseFloat(e[PresetType.Param.DURATION])||.1,t._delay=parseFloat(e[PresetType.Param.DELAY])||0,t._length=parseFloat(e[PresetType.Param.LENGTH])||0,t._startTime=null},proto$Z=PresetAnimation.prototype;proto$Z._applyAnimation=function(e,t){console.warn("Unknown animation:"+this._type)};var EasingFun=Tween.CubicBezier(.25,.1,.25,1);proto$Z._getFrameAnimation=function(e,t,r){for(var a=t[0],n=t.length,o=1;o<n;o++){var s=t[o],_=s.rate;if(e>_)a=s;else{var l=a.rate,c=(e-l)/(_-l);if(c=(s.fun||r||EasingFun)(c),isNaN(s.param)){var d={};Object.keys(s.param).forEach(function(p){var v=s.param[p],h=a.param[p];d[p]=h+(v-h)*c})}else{var f=s.param,u=a.param;d=u+(f-u)*c}return d}}};var MUGEDA_CUSTOM_EVENT_NAME="mugeda_custom",RenderObject=function(e){var t=this;t._displayObject=e,t._eventProxyDom=null,t._transform=null,t._children=[],t._parent=null,t._parentSceneRenderObject=null,t._parentMovieClipRenderObject=null,t._parentMovieClipRenderObjectChild=null,t._c3Accelerate=!window.DEBUG_CS2_MODE,t._c3AccelerateEnabled=null,t._c3AccelerateCurrent=!1,t._childDisplayObjectList=[];var r="mugeda_render_object";t._classNameList=[r],t._staticClassName=null,t._matrixClassName=null,t._clipClassName=null,t._html="",t._node=null,t._prevTransform=null,t._prevVisible=null,t._prevClassText=null,t._displayVal="display: block;",t._prevAdditionCss=null,RenderObject.inited||(RenderObject.inited=!0,StyleSheetManager.insertCss(r,"position: absolute; "+Browser$1.prefix.css+"transform-origin: left top;"+Browser$1.prefix.css+"user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); display: block;")),t._needRenderNext=!1,t._bindedDomEventCapture={},t._bindedDomEventBubble={},t._thisDispatchInputEvent=t._dispatchInputEvent.bind(t),t.touch={},t._boundary=[],t._activeFilterString="",t._prevParentOffsetMatrix=null,t._iAm3d=!1,t._3dBrotherCounter=0,t._prevNeed3dFix=!1};RenderObject.inited=!1,RenderObject.Pixel="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=";var proto$Y=RenderObject.prototype;proto$Y._init=function(){var e=this,t=e._displayObject,r=t._getStage();if(r){var a=r._renderManager._mugeda,n=function(c){var d=t._transform._clone(),f=d._matrix,u=d._matrix._rawDock||"none";if(f._reset(),d._ox=d._oy=0,u!="none"){u=="top"||u=="lefttop"||u=="righttop"?d._matrix._oy=c.marginTop:(u=="bottom"||u=="leftbottom"||u=="rightbottom")&&(d._matrix._oy=-c.marginTop),u=="left"||u=="leftbottom"||u=="lefttop"?d._matrix._ox=c.marginLeft:(u=="right"||u=="rightbottom"||u=="righttop")&&(d._matrix._ox=-c.marginLeft),t._dispatchEvent(t._changedEvent);for(var p=e;p=p._parent,!(!p||p._displayObject._type=="scene"););p&&(p._node?(p=p._node.children[0],p&&(p.style.overflow="visible")):e._overwriteOverflow=!0)}f._calMatrixFormRaw(),t._setTransform(d),t._presetAnimation&&u!="none"&&t._presetAnimation._setStaticTransform(d)};if(t._id>1){if(r._fullScreenRect){var o=a._getAdaption();n(o)}var s=t._parent,_=function(){if(r._fullScreenRect){var c=a._getAdaption();n(c)}},l=function(c){c._displayObject===t&&(r._removeEventListener("changed",_),s=t._parent,s&&s._removeEventListener("remove",l))};r._addEventListener("changed",_),s&&s._addEventListener("remove",l)}}},proto$Y._setNode=function(e){this._node=e},proto$Y.renderC3Status=function(){var e=this,t=e._c3AccelerateEnabled===null?e._c3Accelerate:e._c3AccelerateEnabled,r=e._c3AccelerateCurrent;r!=t&&(e._c3AccelerateCurrent=t,e.setClassName())},proto$Y._initActionAndEvent=function(){var e=this,t=e._displayObject,r=t._getRoot();!r||r._isVirtual||(e._initAction(),t._addEventListener("domeventchanged",function(){return function(a){e._domEventChangedHandler.call(e,t,a)}}()),e._domEventChangedHandler(t))},proto$Y._buildFun=function(){var e=this,t=e._displayObject;t._visible==!1&&(e._node.style.display="none"),e._initActionAndEvent()},proto$Y._domEventChangedHandler=function(e,t){var r=this;if(t)var a=[t._event],n=t._add;else a=[],[e.eventListenersCapture,e.eventListenersBubble].forEach(function(o){for(var s in o)o.hasOwnProperty(s)&&(a=a.concat(o[s]))}),n=!0;a.forEach(function(o){if(o.domEvent){var s=o.type,_=o.useCapture,l=r._canvasRender;if(l)c=_?l._bindedDomEventCapture:l._bindedDomEventBubble;else var c=_?r._bindedDomEventCapture:r._bindedDomEventBubble;n?c[s]?c[s]++:(c[s]=0,l?l._node.addEventListener(s,l._thisDispatchInputEvent,_):r._node.addEventListener(s,r._thisDispatchInputEvent,_)):--c[s]==0&&(l?l._node.removeEventListener(s,l._thisDispatchInputEvent,_):r._node.removeEventListener(s,r._thisDispatchInputEvent,_))}})},proto$Y._dispatchInputEvent=function(e){for(var t=this,r=e.type,a=t._eventProxyDom||e.target,n=t._displayObject._getRoot()._getRenderObject(),o=n.getNode(),s=!1;a&&a!==o&&l==null;){var _=a.className||"";if(typeof a.className!="string"&&(_=""),_.indexOf("__mugeda_stat")>=0){s=!0;break}var l=a._relateRenderObject;a=a.parentNode}if(!s){l==null?l={}:l._displayObject._type=="scene"&&(l=l._parent);var c=new InputEvent(r,e);c._eventPhase=e.eventPhase,c._target=l._displayObject,c._stage=n._displayObject,c[r+"MugedaHookSource"]=e[r+"MugedaHookSource"],t._displayObject._dispatchEvent(c)}},proto$Y._getHTML=function(){var e=this,t=e._html,r=e._classNameList.join(" ");return t=t.replace("{{className}}",r),t},RenderObject._findClickDisplayObject=function(e,t,r){for(var a=e.length,n=a-1;n>=0;n--){var o=e[n];if(!o._maskToList){var s=o._transform._matrix;s=Matrix._multiplication(r,s);var _=o._getBoundary(s);if(Boundary._isPointInpolygon(_,t))return o.children&&o.children.length!=0?(o._offsetMatrix&&(s=Matrix._multiplication(o._offsetMatrix,s)),RenderObject._findClickDisplayObject(o.children,t,s)):o;if(o.children&&o.children.length){o._offsetMatrix&&(s=Matrix._multiplication(o._offsetMatrix,s));var l=RenderObject._findClickDisplayObject(o.children,t,s);if(l)return l}}}},proto$Y._addChild=function(e,t,r,a){var n=this;e._displayObject=t,e._transform=r||t._transform,a==null?(n._childDisplayObjectList.push(t),n._children.push(e)):(n._childDisplayObjectList.splice(a,0,t),n._children.splice(a,0,e)),e._parent=n,e._parentMovieClipRenderObject=n._parentMovieClipRenderObject,e._parentMovieClipRenderObjectChild=n._parentMovieClipRenderObjectChild,e._parentSceneRenderObject=n._parentSceneRenderObject;var o;return n._displayObject&&(o=n._displayObject._getRoot()),o||(o=t._getRoot()),o._renderManager._displayHash[t._id]=e,e._parentMovieClipRenderObject&&t._type=="MovieClip"&&e._parentMovieClipRenderObject._movieClipRenderObjectList.push(e),e},proto$Y._beforeRedraw=function(e,t){var r=this,a=r._displayObject;if(a._presetAnimation&&a._presetAnimation._currentAniIndex!==void 0){var n=a._presetAnimation._list[a._presetAnimation._currentAniIndex];if(n&&n._maskData&&n.canvasNode){var o=r.currentPresetCanvas=n.canvasNode;e.save();var s=t,_=o._canvasMatrix._getScaleX(),l=o._canvasMatrix._getScaleY();return e.transform(s._a,s._b,s._c,s._d,s._tx,s._ty),e.drawImage(o,0,0,o.width*_,o.height*l),e.restore(),!1}}return!0},proto$Y._prepareCanvasRender=function(){},proto$Y._removeChild=function(e){var t=this,r=e._displayObject,a=t._childDisplayObjectList.indexOf(r);if(t._childDisplayObjectList.splice(a,1),a=t._children.indexOf(e),t._children.splice(a,1),e._parentMovieClipRenderObject){var n=e._parentMovieClipRenderObject._movieClipRenderObjectList;a=n.indexOf(n),a!==-1&&n.splice(a,1)}var o=t._displayObject._getRoot()||t._parent._displayObject._getRoot();delete o._renderManager._displayHash[r._id]},proto$Y._setDisplayInitState=function(){var e=this,t=e._displayObject,r=StyleSheetManager.insertCss("width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+(t._haveClickAction?"cursor: pointer;":""));e._classNameList.push(r),e._staticClassName=r},proto$Y._setStaticPosition=function(e,t,r){var a=this,n=a._displayObject,o=n._transform;e=e||o._matrix;var s=n._parent&&n._parent._offsetMatrix,_=n._graphics||{},l=_._actions||[],c=!1;l.forEach(function(b){b._bitmapData&&(c=!0)});var d="";if(s&&(d+=" "+s._toCssText()),n._hasShapeAnimation&&n._resourceList&&n._resourceList[0]){var f=e._clone();f._tx=Math.round(f._tx),d+=" "+f._toCssText(!1,n._hasShapeAnimation&&c)}else d+=" "+e._toCssText(!1,n._hasShapeAnimation&&c);o._beforeTranform&&(d=o._beforeTranform+" "+d),n._flipMatrix&&(d+=" "+n._flipMatrix._toCssText());var u=!Browser$1.os.ios,p=Browser$1.enable3DRendering===void 0?u:Browser$1.enable3DRendering,v=!1,h=Browser$1.os.ios&&(e._is3d||n._type==="VR"||n._type==="video"||n._type==="IFrame"||n._type==="Live"||n._type==="Wiper");h=h||a._iAm3d&&n._haveAnimation,a._3dBrotherCounter||h?d=" translateZ("+a._parent._children.indexOf(a)*100+"px) "+d:(p||v)&&(d=" translateZ(0) "+d);var m=o._colorTransform,T=""+Browser$1.prefix.css+"transform:"+d+";opacity: "+(a.currentPresetCanvas?0:m._getAlpha())+";";o._additionCss&&(T+=o._additionCss),n._visible?T+=a._displayVal:a._node&&(T+="display: none;");var y=a._matrixClassName;if(t)o._additionCss!=a._prevAdditionCss&&(a._node.style.cssText=a._node.style.cssText.replace(a._prevAdditionCss,""),a._prevAdditionCss=o._additionCss),a._node.style.cssText+=T;else{var E=StyleSheetManager.insertCss(T);a._classNameList.push(E),a._matrixClassName=E}if(a._prevCurrentPresetCanvas&&(a._prevCurrentPresetCanvas.style.display=n._visible?"block":"none"),Browser$1.os.ios){var g=a;h&&!a._iAm3d?(g._visibilityChangedHandlerBinded||(g._visibilityChangedHandlerBinded=RenderObject._visibilityChangedHandler.bind(g),g._removeNodeHandlerBinded=RenderObject._removeNodeHandler.bind(g),n._addEventListener("visibilityChanged",g._visibilityChangedHandlerBinded),n._addEventListener("removed",g._removeNodeHandlerBinded)),a._iAm3d=!0,a._displayObject._getRealVisible()&&g._visibilityChangedHandlerBinded()):!h&&a._iAm3d&&(n._removeEventListener("visibilityChanged",g._visibilityChangedHandlerBinded),n._removeEventListener("removed",g._removeNodeHandlerBinded),g._visibilityChangedHandlerBinded=void 0,a._displayObject._getRealVisible()&&(RenderObject._set3dCounter(!1,a),delete a.prevIosFixedVisible),a._iAm3d=!1)}t||y&&a._classNameList.splice(a._classNameList.indexOf(y),1),r&&a.setClassName(),t||y&&StyleSheetManager.deleteCss(y),a._prevTransform=o._clone(),a._prevVisible=n._visible,a._prevNeed3dFix=!!a._3dBrotherCounter,a._prevParentOffsetMatrix=n._parent&&n._parent._offsetMatrix?n._parent._offsetMatrix._clone():null},RenderObject._visibilityChangedHandler=function(){var e=this,t=e._displayObject._getRealVisible();!t&&e.prevIosFixedVisible?(RenderObject._set3dCounter(!1,this),e.prevIosFixedVisible=!1):t&&!e.prevIosFixedVisible&&(RenderObject._set3dCounter(!0,this),e.prevIosFixedVisible=!0)},RenderObject._removeNodeHandler=function(){RenderObject._set3dCounter(!1,this)},RenderObject._set3dCounter=function(e,t,r){var a=function(n,o){for(var s=n._parent,_=s._children,l=_.indexOf(n),c=l+(o?1:0);c<_.length;c++){var d=_[c],f=d._displayObject,u=d._3dBrotherCounter;e?d._3dBrotherCounter++:d._3dBrotherCounter--,!!u!=!!d._3dBrotherCounter&&f._getRealVisible()&&f._dispatchEvent(d._displayObject._changed3dEvent)}var p=s._displayObject;p&&p._type==="scene"&&(s=s._parent),p&&p._id>1&&a(s)};r?a(t):a(t,!0)},proto$Y._setClipClass=function(e){var t=this;if(t._parent._clipTop!=null){t._clipClassName&&(StyleSheetManager.deleteCss(t._clipClassName),t._classNameList.splice(t._classNameList.indexOf(t._clipClassName),1));var r=StyleSheetManager.insertCss("top:"+Math.round(Math.min(0,t._parent._clipTop))+"px; left:"+Math.round(Math.min(0,t._parent._clipLeft))+"px");if(t._classNameList.push(r),t._clipClassName=r,t._canvasRender)var a=t._canvasRender._getNode();e&&t.setClassName(a)}};var staticGlobalBehaviors=[{customEventName:"mugeda_audio_pause",event:"custom_event",id:"mugeda_audio_pause",mode:2,name:"声音暂停",param:{event_name:"声音暂停"},type:"audioPause"},{customEventName:"mugeda_audio_resume",event:"custom_event",id:"mugeda_audio_resume",mode:2,name:"声音恢复",param:{event_name:"声音恢复"},type:"audioResume"},{customEventName:"mugeda_video_pause",event:"custom_event",id:"mugeda_video_pause",mode:2,name:"视频暂停",param:{event_name:"视频暂停"},type:"videoPause"},{customEventName:"mugeda_video_resume",event:"custom_event",id:"mugeda_video_resume",mode:2,name:"视频恢复",param:{event_name:"视频恢复"},type:"videoResume"},{customEventName:"mugeda_stage_pause",event:"custom_event",id:"mugeda_stage_pause",mode:2,name:"舞台暂停",param:{event_name:"舞台暂停"},type:"stagePause"},{customEventName:"mugeda_stage_resume",event:"custom_event",id:"mugeda_stage_resume",mode:2,name:"舞台恢复",param:{event_name:"舞台恢复"},type:"stageResume"},{customEventName:"mugeda_global_pause",event:"custom_event",id:"mugeda_global_pause",mode:2,name:"全局暂停",param:{event_name:"全局暂停"},type:"globalPause"},{customEventName:"mugeda_global_resume",event:"custom_event",id:"mugeda_global_resume",mode:2,name:"全局恢复",param:{event_name:"全局恢复"},type:"globalResume"},{customEventName:"mugeda_next_page",event:"custom_event",id:"mugeda_next_page",mode:2,name:"下一页",param:{event_name:"下一页"},type:"nextPage"},{customEventName:"mugeda_prev_page",event:"custom_event",id:"mugeda_prev_page",mode:2,name:"上一页",param:{event_name:"上一页"},type:"prevPage"}];proto$Y._initAction=function(){var e=this,t=e._displayObject;e._displayObject._renderObject=e;var r=t._getStage()._aniData,a,n;if(t._type==="Stage")a=t.children[0],n=t.children[0],t._behaviors||(t._behaviors=[]),t._behaviors=t._behaviors.concat(staticGlobalBehaviors);else{var o=e._parentMovieClipRenderObject||{};n=o._displayObject,n&&(a=n._getStage().children[0])}if(t._behaviors){var s=t._behaviors;if(handleBehavior.bind(e)(t,s,n,a),r.metadata.isTestpaper&&s.some(function(h){return h.type==="submitDefaultQuestion"})){for(var _=new Date,l=r.metadata.question||{},c=t._getStage()._renderManager,d=l.checkedNames||[],f=0;f<d.length;f++){var u=c.getReferenceElement(d[f]);!u&&e._getOldTikuDisplayObject&&(u=e._getOldTikuDisplayObject(d[f],"score")),u&&(u._addEventListener(Browser$1.InputEnd,function(){e._setQuestionReportObj(e._recalculateScore(l.checkedNames,l.passScore),_,r.title||r.tt)}),u._addEventListener("changed",function(){e._setQuestionReportObj(e._recalculateScore(l.checkedNames,l.passScore),_,r.title||r.tt)}))}e._setQuestionReportObj(e._recalculateScore(l.checkedNames||[],l.passScore||0),_,r.title||r.tt)}t._behaviors=null}for(var p in t._hashPrivateActions){var v=t._hashPrivateActions[p];s=v.behaviors,handleBehavior.bind(e)(t,s,n,a,v.actions)}},proto$Y._recalculateScore=function(e,t,r){for(var a=this,n=a._displayObject,o=n._getStage()._renderManager,s=0,_=0,l=0,c=0,d=0;d<e.length;d++){var f=o.getReferenceElement(e[d]);if(!f&&a._getOldTikuDisplayObject){var u=a._getOldTikuDisplayObject(e[d],"score");l=(u?u._getText()*1:0)||0;var p=a._getOldTikuData(e[d]);p&&p.data&&p.data.tickling&&p.data.tickling.correct&&(c=p.data.tickling.correct.score*1)}else if(f){var v=f._getRenderObject();v._checkAns(),l=f._getScore(),c=f._total}else break;s+=l||0,_+=c||0}return n._value=s,_=parseFloat(parseFloat(_).toFixed(1)),s=parseFloat(parseFloat(s).toFixed(1)),{totalCorrect:s,totalAll:_,passValue:t}},proto$Y._setQuestionReportObj=function({totalCorrect:e,totalAll:t,passValue:r},a,n){var o=this,s=o._displayObject,_=new Date,l=_-a;s.reportObj={startTime:a,endTime:_,duration:l,totalCorrect:e,totalAll:t,passValue:r,title:n}},proto$Y.setClassName=function(e){var t=this;if(e=e||t._node,e==null&&(t.getNode(),e=t._node),e!=null){if(t._c3AccelerateCurrent&&t._animtionClassName)var r=t._classNameList.concat([t._animtionClassName]).join(" ");else r=t._classNameList.join(" ");t._prevClassText!=r&&(t._prevClassText=r,e.setAttribute("class",r))}},proto$Y.getNode=function(){var e=this;if(e._node==null){var t=document.querySelector('[data-mid="'+e._displayObject._id+'"]');t?(e._node=t,e._node._relateRenderObject=e,e._buildFun&&e._buildFun(),e._prevVisible||(e._node.style.cssText+="display:none;")):e._canvasRender&&e._canvasRender._getNode()}return e._node},proto$Y.render=function(e){var t=this;if(t._node){var r=t._displayObject,a=r._transform,n=a._colorTransform._generateFilterString();if(t.currentPresetCanvas=void 0,r._presetAnimation&&r._presetAnimation._currentAniIndex!==void 0){var o=r._presetAnimation._list[r._presetAnimation._currentAniIndex];if(o&&o._maskData)var s=t.currentPresetCanvas=o.canvasNode}if(t._prevNeed3dFix===!!t._3dBrotherCounter&&a._compare(t._prevTransform)&&t._prevVisible===r._visible&&n===t._activeFilterString&&s===t._prevCurrentPresetCanvas&&(!r._parent||!r._parent._offsetMatrix||r._parent._offsetMatrix._compare(t._prevParentOffsetMatrix)))return;var _=!0;if((n||n!==t._activeFilterString)&&(t._node.style[Browser$1.prefix.js+"Filter"]=n,t._activeFilterString=n),t._setStaticPosition(null,_),t._prevCurrentPresetCanvas!==s&&(t._prevCurrentPresetCanvas&&(t._prevCurrentPresetCanvas.style.display="none"),s&&(s.style.display="block"),t._prevCurrentPresetCanvas=s),r._dispatchEvent(r._renderedEvent),t._overwriteOverflow){for(var l=t;l=l._parent,!(!l||l._displayObject._type=="scene"););l&&(l=l._node.children[0],l&&(l.style.overflow="visible"),t._overwriteOverflow=!1)}return!0}};var handleBehavior=function(e,t,r,a,n){var o=this;try{var s=o._displayObject._getRoot().children[0]._getRenderObject()._renderObjectSceneSwitcher}catch{s=null}t.forEach(function(_){var l=_.event;if(l={appear:ActionEvent.APPEAR,click:ActionEvent.CLICK,mouseover:ActionEvent.MOUSEOVER,mouseout:ActionEvent.MOUSEOUT,hotspot:ActionEvent.HOTSPOT,property:ActionEvent.CHANGE,dragend:ActionEvent.DRAGEND,drag:ActionEvent.DRAG,drop:ActionEvent.DROP,dragout:ActionEvent.DRAGOUT,preset_end:ActionEvent.PRESETEND,liked:ActionEvent.LIKED,unliked:ActionEvent.UNLIKED,video_start:ActionEvent.VIDEOSTART,video_pause:ActionEvent.VIDEOPAUSE,video_end:ActionEvent.VIDEOEND,video_at:ActionEvent.VIDEOAT,wiper_finish:ActionEvent.WIPERFINISH,canvas_save_finish:ActionEvent.CANVASFINISH,connector_connected:ActionEvent.CONNECTORCONNECTED,connector_disconnected:ActionEvent.CONNECTORDISCONNECTED,touch_start:ActionEvent.TOUCHSTART,touch_end:ActionEvent.TOUCHEND,slide_right:ActionEvent.SLIDERIGHT,slide_right_up:ActionEvent.SLIDERIGHTUP,slide_up:ActionEvent.SLIDEUP,slide_left_up:ActionEvent.SLIDELEFTUP,slide_left:ActionEvent.SLIDELEFT,slide_left_down:ActionEvent.SLIDELEFTDOWN,slide_down:ActionEvent.SLIDEDOWN,slide_right_down:ActionEvent.SLIDERIGHTDOWN,audio_at:ActionEvent.AUDIOAT,audio_start:ActionEvent.AUDIOSTART,audio_pause:ActionEvent.AUDIOPAUSE,audio_stop:ActionEvent.AUDIOSTOP,behavior_success:ActionEvent.BEHAVIOR_SUCCESS,custom_event:ActionEvent.CUSTOMEVENT,script:ActionEvent.SCRIPT}[l],l==null&&(l=ActionEvent.OTHER),_.param.bk&&([ActionEvent.CLICK,ActionEvent.DRAGEND,ActionEvent.DROP,ActionEvent.DRAGOUT].indexOf(l)>-1||l.indexOf("touch_")==0||l.indexOf("slide_")==0))var c=!0;var d=ActionManager._getAction(_,{parentMovieClip:r,parentParentMovieClip:a,renderObjectSceneSwitcher:s,stage:e._getRoot()._getRenderObject(),displayObj:e,needBackPoint:c,referenceActions:n});if(d){if(l===ActionEvent.APPEAR)r._actionAppearList.push(d);else if(l===ActionEvent.CLICK)e._actionClickList.push(d),o._bindTapAction(e);else if(l===ActionEvent.LIKED)e._actionLikedList.push(d);else if(l===ActionEvent.UNLIKED)e._actionUnlikedList.push(d);else if(l===ActionEvent.CHANGE)e._actionChangeList.push(d),o._bindChangeAction(e);else if(l===ActionEvent.DRAGEND)e._actionDragEndList.push(d);else if(l===ActionEvent.DRAG)d._bindDragEvent(e);else if(l===ActionEvent.TOUCHSTART)e._actionTouchStartList.push(d),o._bindTouchStartEvent(e);else if(l===ActionEvent.TOUCHEND)e._actionTouchEndList.push(d),o._bindTouchEndEvent(e);else if(l===ActionEvent.SCRIPT){var f=d._behavior.scriptName;e._actionScriptHash[f]=d}else if(l.indexOf("slide_")===0)e._actionSlideList[l]||(e._actionSlideList[l]=[]),e._actionSlideList[l].push(d),o._bindSlideEvent(e);else if([ActionEvent.AUDIOSTART,ActionEvent.AUDIOPAUSE,ActionEvent.AUDIOSTOP,ActionEvent.AUDIOAT].indexOf(l)!==-1)o._bindMediaAction(l,_,d);else if([ActionEvent.VIDEOSTART,ActionEvent.VIDEOPAUSE,ActionEvent.VIDEOEND,ActionEvent.VIDEOAT].indexOf(l)!==-1)o._bindMediaAction(l,_,d);else if(l===ActionEvent.DROP||l===ActionEvent.DRAGOUT){var u=d._behavior.drop||{},p=d._behavior.param||{},v=p.scope||p.element_name||p.audio_target||"";v.match(/\{\{.*\}\}/);var h=u.name;if(h||v){var m=d._stage._displayObject._renderManager,T=h?m.getReferenceElement(h):null,y=m._dropObjectList.filter(function(x){return x.container==e&&x.dropIn===void 0});y&&y.length?(y=y[0],y.action=d,y.target=T,y.dropIn=l===ActionEvent.DROP):m._dropObjectList.push({container:e,action:d,target:T,dropIn:l===ActionEvent.DROP})}}else if(l===ActionEvent.PRESETEND){var E=d._behavior.preset||{},h=E.name;if(h)var m=d._stage._displayObject._renderManager,g=m.getReferenceElement(h);else g=o._displayObject;g._presetAnimation&&g._presetAnimation._registerAction({event:l,action:d})}else if(l===ActionEvent.MOUSEOVER)o._displayObject._addEventListener("mouseover",function(){d.doAction.bind(d)()});else if(l===ActionEvent.MOUSEOUT)o._displayObject._addEventListener("mouseout",function(){d.doAction.bind(d)()});else if(l===ActionEvent.WIPERFINISH)e._wiperActionList.push(d);else if(l===ActionEvent.CANVASFINISH)e._canvasActionList.push(d);else if(l===ActionEvent.CONNECTORCONNECTED||l===ActionEvent.CONNECTORDISCONNECTED)e._connectorActionList.push(d);else if(l===ActionEvent.CUSTOMEVENT)o._bindCustomEvent(d);else if(l!==ActionEvent.BEHAVIOR_SUCCESS){if(l===ActionEvent.OTHER){var b=Browser$1._globalObject.MugedaBehavior;if(b){var w=o.getNode();b.setupMobileActions({dataRef:null,displayObject:e,aniData:e._aniData,dom:w},_,function(){d.constructor!==Action&&d.doAction.bind(d)()})}}}}})},_checkSlide=function(e){var t=e._getInputX(),r=e._getInputY(),a=this,n=a,o=a._getStage(),s=setTimeout(function(){o.hasEventListener(Browser$1.InputEnd,_)&&o._removeEventListener(Browser$1.InputEnd,_,!0,-100),s=null},2e3),_=function(l){var c=this,d=l._getInputX()-t,f=l._getInputY()-r;if(d*d+f*f>32*32){var u=Math.atan2(-f,d)*180/Math.PI;if(-22.5<u&&u<=22.5)var p=ActionEvent.SLIDERIGHT;else 22.5<u&&u<=67.5?p=ActionEvent.SLIDERIGHTUP:67.5<u&&u<=112.5?p=ActionEvent.SLIDEUP:112.5<u&&u<=157.5?p=ActionEvent.SLIDELEFTUP:157.5<u||u<=-157.5?p=ActionEvent.SLIDELEFT:-157.5<u&&u<=-112.5?p=ActionEvent.SLIDELEFTDOWN:-112.5<u&&u<=-67.5?p=ActionEvent.SLIDEDOWN:-67.5<u&&u<=-22.5&&(p=ActionEvent.SLIDERIGHTDOWN)}p&&(n._actionSlideList[p]||[]).forEach(function(v){v.doAction(l)}),c._removeEventListener(Browser$1.InputEnd,_,!0,-100),s!=null&&clearTimeout(s)};o._addEventListener(Browser$1.InputEnd,_,!0,-100)};proto$Y._bindSlideEvent=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.InputStart,_checkSlide)||t._addEventListener(Browser$1.InputStart,_checkSlide,!1,-100)};var customEventDisplayObjMap=new Map,hasListenerCustomEvent=!1;function getMovieClipByDisplayObject(e){if(!e)throw new Error("getMovieClip param is not provide");if(e._movieClip)return e._movieClip;var t=e._parent;if(!t)throw new Error("no found movieclip");if(t instanceof MovieClip)return t;var r=t._parent;if(r&&r instanceof MovieClip)return r;throw new Error("unknow error on found movieclip")}var _customEventHandle=function(e){var t=e.detail,r;if(!t||!(r=t.customEventName)){console.warn("customevent接收到错误的事件");return}if(!customEventDisplayObjMap.has(r)){console.warn("该自定义触发未绑定行为！");return}var a=customEventDisplayObjMap.get(r)||[];a.forEach(function(n){var o=n._behavior.autoJumpBeforeRun;if(o)try{var s=getMovieClipByDisplayObject(n._displayObject),_=n._displayObject.id,l=s.getKeyFrameInfo(_);l&&s.gotoAndPlay(l._min)}catch(c){console.warn(c)}n.doAction(e)})};proto$Y._bindCustomEvent=function(e){if(e){var t=e._behavior.customEventName;customEventDisplayObjMap.has(t)||customEventDisplayObjMap.set(t,[]),customEventDisplayObjMap.get(t).push(e),hasListenerCustomEvent||(hasListenerCustomEvent=!0,document.addEventListener(MUGEDA_CUSTOM_EVENT_NAME,_customEventHandle))}};var _touchEndHandle=function(e){var t=this,r=t._actionTouchEndList;t._getRealVisible()&&r.forEach(function(a){a.doAction(e)})};proto$Y._bindTouchEndEvent=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.InputEnd,_touchEndHandle)||t._addEventListener(Browser$1.InputEnd,_touchEndHandle,!1,-100)};var _touchStartHandle=function(e){var t=this,r=t._actionTouchStartList;r.forEach(function(a){a.doAction(e)})};proto$Y._bindTouchStartEvent=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.InputStart,_touchStartHandle)||t._addEventListener(Browser$1.InputStart,_touchStartHandle,!1,-100)},proto$Y._bindTapAction=function(){var e=this,t=e._displayObject;t.hasEventListener(Browser$1.Click,_tapActionHandler)||(t._addEventListener(Browser$1.InputStart,_tapActionHandler,!1,-100),t._addEventListener(Browser$1.InputEnd,_tapActionHandler,!1,-100),t._addEventListener(Browser$1.Click,_tapActionHandler,!1,-100))},proto$Y._bindChangeAction=function(){var e=this,t=e._displayObject;t.hasEventListener("changed",_changeActionHandler)||t._addEventListener("changed",_changeActionHandler,!1,-100)},proto$Y._bindMediaAction=function(e,t,r){var a=t.param,n=this._displayObject,o=a.mediaElement;if(o===void 0||o==="")var s=n;else{var _=n._getRoot()._renderManager._mugeda;s=_._scene.getObjectByName(o,"name_name")}if(!s)return console.error("物体"+o+"不存在");if(!s._bindBehavior)return console.error("物体不是媒体元素");s._bindBehavior(e,function(l){if([ActionEvent.VIDEOAT,ActionEvent.AUDIOAT].indexOf(e)!==-1){var c=a.mediaCondition,d=a.mediaValue;if(c===void 0||c===""||d===void 0||d==="")return r.doAction.bind(r)();var f=l.currentTime;c=="eq"&&Math.abs(f-d)<.2&&(f=d),Action._checkLogic(c,f,d)&&r.doAction.bind(r)()}else r.doAction.bind(r)()})};var _changeActionHandler=function(e){var t=this;e._reason==="3d"||t._onChanged(e)},tapEventList=[],_tapActionHandler=function(e){var t=this;e.type==Browser$1.InputStart?(tapEventList=tapEventList.filter(function(r){return r.eventMark==1&&e._originEvent.timeStamp-r.startTime<500}),tapEventList.push({startObject:t,eventMark:1,startTime:e._originEvent.timeStamp,startX:e._getInputX(),startY:e._getInputY()})):e.type==Browser$1.InputEnd?tapEventList.forEach(function(r){r.startObject==t&&(r.eventMark|=2,r.diffTime=e._originEvent.timeStamp-r.startTime,r.diffX=e._getInputX()-r.startX,r.diffY=e._getInputY()-r.startY)}):e.type==Browser$1.Click&&tapEventList.forEach(function(r){if(r.startObject==t&&(r.eventMark|=4,r.diffTime<500&&r.diffX*r.diffX+r.diffY*r.diffY<8*8)){var a=t._actionClickList,n=[];a.forEach(function(o,s){var _={id:o._displayObject._guid,action:o._behavior.type,desc:o._behavior.desc||(o._behavior.param||{}).event_name||o._behavior.name||""};if(o._behavior.type=="submitForm"){var l="",c=Mugeda.getMugedaObject(),d=o._behavior.param.submit_object;d&&(d=d.split(","),d.length&&d.forEach(function(v,h){var m=v.split("_"),T;if(m&&m.length>1){var y=c.scene.getObjectByName(m[0]);y&&(T=y.scene.getObjectByName(m[1]))}else T=c.scene.getObjectByName(v);if(T){var E=T.text;h==d.length-1?l+=v+"="+E:l+=v+"="+E+"&"}})),l&&(_.data=l)}if(n.push(_),o._behavior.type=="video"){var f=t._aniData.param||{};if(o._behavior.param.video_id=t._id,f.behavior){var u,p;u=JSON.parse(f.behavior),p=parseInt(u[s].param.video_controls),o._behavior.param.video_controls=p}o._behavior.param.video_continue_audio=f.continueAudio,o._behavior.param.auto=f.videoAutoPlay,o._behavior.param.clickStatus=f.clickStatus,o._behavior.param.hidePlayIcon=f.hidePlayIcon,o._behavior.param.video_name=f.name,o._behavior.param.video_mode="object"}o.doAction(e)}),Mugeda.DataStats&&Mugeda.DataStats.entry({type:"interActions",data:n})}})};proto$Y._getDisplayObject=function(){return this._displayObject},mod.definePropertyReadOnly(proto$Y,["displayObject",proto$Y._getDisplayObject]),mod.namespace("Render.RenderObject",RenderObject);var renderObjectBitmap=function(){renderObjectBitmap.__super__.constructor.apply(this,arguments);var e=this;e._prevImageSrc=null,e._canvasRender=null};mod.extend(renderObjectBitmap,RenderObject);var proto$X=renderObjectBitmap.prototype;proto$X._init=function(){var e=this;renderObjectBitmap.__super__._init.apply(e);var t=e._displayObject;e._prevImageSrc=t._bitmapData._image?t._bitmapData._image.src:""},proto$X._setDisplayInitState=function(){var e=this,t=e._displayObject,r="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;"+(t._haveClickAction?"cursor: pointer;":"");if(Browser$1.browser.safari&&(Browser$1.os.phone||Browser$1.os.tablet)){var a=t._flipMatrix;e._neg2Fix=!0;var n=-2,o=-2;r+="border: 2px transparent solid;box-sizing: content-box;";var s=new Matrix(1,0,0,1,n,o);t._flipMatrix?t._flipMatrix=Matrix._multiplication(a,s):t._flipMatrix=s}var _=StyleSheetManager.insertCss(r);e._classNameList.push(_),e._staticClassName=_,e._html='<img ondragstart="return false;" style="'+(BitmapData.blankImage.src==e._prevImageSrc?"visibility:hidden;":"")+'" data-type="bitmap" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" src="'+e._prevImageSrc+'" />'},proto$X.render=function(){var e=this,t=e._canvasRender;t||renderObjectBitmap.__super__.render.apply(e,arguments),e._refreshImage()},proto$X._redraw=function(e,t){var r=this;if(r._beforeRedraw(e,t)){var a=r._displayObject;if(a._bitmapData){var n=a._bitmapData._image;e.transform(t._a,t._b,t._c,t._d,t._tx,t._ty);try{var o=Mugeda.hashCachedImages||{};n=o[a._bitmapData._src]||n,r._neg2Fix?e.drawImage(n,2,2,a._rawWidth,a._rawHeight):e.drawImage(n,0,0,a._rawWidth,a._rawHeight)}catch(s){console.error(s),window.location.href.indexOf("m_dbg=1")>0&&Mugeda.log("渲染图片出错！地址："+n.src.substr(0,32))}}}},proto$X._refreshImage=function(){var e=this,t=e._displayObject;if(t._bitmapData==null)r="";else{if(t._bitmapData._image==null)return;var r=t._bitmapData._src}if(r!==e._prevImageSrc){e._prevImageSrc=r;var a=e._canvasRender;if(!a){var n=e.getNode(!0);n.tagName=="DIV"?(n.firstChild&&n.firstChild.tagName=="IMG"?n.firstChild.setAttribute("src",e._prevImageSrc):n.style.backgroundImage='url("'+e._prevImageSrc+'")',n.style.visibility="visible"):(n.setAttribute("src",e._prevImageSrc),n.style.visibility="visible")}}},mod.namespace("Render.Bitmap",renderObjectBitmap);var TransitionEffects=function(){};TransitionEffects._registerEffect=function(e,t){TransitionEffects[e]=t},TransitionEffects._getInstance=function(e,t){var r=new TransitionEffects[e](t);return r},mod.namespace("SceneSwitcher.TransitionEffects",TransitionEffects);var TransitionEffect=function(e){this._switcher=e,this._dir=null,this._renderObject=null,this._fromSceneRenderObject=null,this._toSceneRenderObject=null,this._duration=null,this._direction=null,this._stage=null,this._fromPrevious=null};TransitionEffect.prototype,mod.namespace("SceneSwitcher.TransitionEffect",TransitionEffect);var EffectCssTransition=function(){EffectCssTransition.__super__.constructor.apply(this,arguments),this.TRANSITION_CLASS_NAME="mugine_class_transition_"+this._switcher._counter,this.ENTER_CLASS_NAME="mugine_class_enter_"+this._switcher._counter,this._enterUp=!0,this.constructor._globalInited||(this._globalInit(),this.constructor._globalInited=!0)};mod.extend(EffectCssTransition,TransitionEffect);var proto$W=EffectCssTransition.prototype;proto$W._globalInit=function(){},proto$W._updateTransitionClass=function(){var e=this,t=Browser$1.prefix.css+"transition-duration: "+e._duration+"ms;";StyleSheetManager.updateCss(e.TRANSITION_CLASS_NAME,t),t="z-index: 1",StyleSheetManager.updateCss(e.ENTER_CLASS_NAME,t)},proto$W._start=function(e,t){var r=this;if(r._updateTransitionClass(),r._enterUp)if(e===0){var a=r._toSceneRenderObject;a._classNameList.push(r.ENTER_CLASS_NAME),a._displayObject._visible=!0,a.setClassName()}else a=r._fromSceneRenderObject;else e===0?(a=r._toSceneRenderObject,a._displayObject._visible=!0):(a=r._fromSceneRenderObject,a._classNameList.push(r.ENTER_CLASS_NAME),a.setClassName());r._setTransitionStart(e,a),setTimeout(function(){a._classNameList.push(r.TRANSITION_CLASS_NAME),a.setClassName(),e===1&&a._node.getBoundingClientRect(),setTimeout(function(){r._setTransitionEnd(e,a),a._setStaticPosition(null,!0,!0)},0)},1),e===1?(r._isLeaving=!0,t()):(r._isEntering=!0,r._leaveCallback=t);var n=function(){if(Browser$1.haveTransitionEnd&&this.removeEventListener(Browser$1.TransitionEnd,n),e===0){if(!r._isEntering)return;r._isEntering=!1}else{if(!r._isLeaving)return;r._isLeaving=!1}!r._isLeaving&&!r._isEntering&&r._leaveCallback()};a._setStaticPosition(null,!0,!0),Browser$1.haveTransitionEnd&&a._node.addEventListener(Browser$1.TransitionEnd,n),setTimeout(n,r._duration)},proto$W._end=function(e,t){var r=this;if(e===0)var a=r._toSceneRenderObject;else a=r._fromSceneRenderObject;for(;a._classNameList.indexOf(r.TRANSITION_CLASS_NAME)>-1;)a._classNameList.splice(a._classNameList.indexOf(r.TRANSITION_CLASS_NAME),1);var n=a._classNameList.indexOf(r.ENTER_CLASS_NAME);n>=0&&a._classNameList.splice(n,1),r._finish&&r._finish(e,a),a.getNode().style.cssText+=Browser$1.prefix.css+"transform-origin: inherit;",a._setStaticPosition(null,!0,!0),t()},mod.namespace("SceneSwitcher.EffectCssTransition",EffectCssTransition);var EffectLadder$1=function(){EffectLadder$1.__super__.constructor.apply(this,arguments)};EffectLadder$1._name="centerRotate",TransitionEffects._registerEffect(EffectLadder$1._name,EffectLadder$1),mod.extend(EffectLadder$1,EffectCssTransition);var proto$V=EffectLadder$1.prototype;proto$V._setTransitionStart=function(e,t){var r=this,a=r._switcher.constructor,n=r._stage,o=r._direction,s=new Transform,_=s._matrix;if(_._create3DMatrix(!0,!0),e===0){if(o===a._Direction._VERTICAL){var l=n._stageWidth*2,c="perspective("+l+"px) rotateX(180deg)";s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+"px 0;",s._setAdditionCss(c)}else l=n._stageHeight*2,c="perspective("+l+"px) rotateY(180deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c);var d=s._colorTransform;d._alphaMultiplier=0}else o===a._Direction._VERTICAL?(l=n._stageWidth*2,c="perspective("+l+"px) rotateX(0deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+" 0;",s._setAdditionCss(c)):(l=n._stageHeight*2,c="perspective("+l+"px) rotateY(0deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c));t._displayObject._transform=s},proto$V._setTransitionEnd=function(e,t){var r=this,a=r._switcher.constructor,n=r._stage,o=r._direction,s=new Transform,_=s._matrix;if(_._create3DMatrix(!0,!0),e===0)if(o===a._Direction._VERTICAL){var l=n._stageWidth*2,c="perspective("+l+"px) rotateX(0deg)";s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+"px 0;",s._setAdditionCss(c)}else l=n._stageHeight*2,c="perspective("+l+"px) rotateY(0deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c);else if(o===a._Direction._VERTICAL)l=n._stageWidth*2,c="perspective("+l+"px) rotateX(180deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: 0 "+n._fullScreenRect._height/2+"px 0;",s._setAdditionCss(c);else{l=n._stageHeight*2,c="perspective("+l+"px) rotateY(180deg)",s._beforeTranform=c,c=Browser$1.prefix.css+"transform-origin: "+n._fullScreenRect._width/2+"px 0 0;",s._setAdditionCss(c);var d=s._colorTransform;d._alphaMultiplier=0}t._displayObject._transform=s},proto$V._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectLadder",EffectLadder$1);var EffectAppear=function(){EffectAppear.__super__.constructor.apply(this,arguments)};EffectAppear._name="appear",TransitionEffects._registerEffect(EffectAppear._name,EffectAppear),mod.extend(EffectAppear,EffectCssTransition);var proto$U=EffectAppear.prototype;proto$U._setTransitionStart=function(e,t){var r=new Transform;this._duration=10,t._displayObject._transform=r},proto$U._setTransitionEnd=function(e,t){var r=new Transform;t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectAppear",EffectAppear);var EffectBox=function(){EffectBox.__super__.constructor.apply(this,arguments),this._initClassName()};EffectBox._name="box",TransitionEffects._registerEffect(EffectBox._name,EffectBox),mod.extend(EffectBox,EffectCssTransition);var proto$T=EffectBox.prototype;proto$T._initClassName=function(){this.TRANSITION_BOX_CLASS_NAME="mugine_class_transition_box_"+this._switcher._counter,this.PRESERVE_3D_CLASS_NAME="mugine_class_preserve_3d_"+this._switcher._counter},proto$T._globalInit=function(){var e=this;EffectBox.__super__._globalInit.apply(e,arguments),this._initClassName();var t=Browser$1.prefix.css+"transition-timing-function: linear;";StyleSheetManager.updateCss(this.TRANSITION_BOX_CLASS_NAME,t),t=Browser$1.prefix.css+"transform-style: preserve-3d;";var r=Browser$1.prefix.css+"backface-visibility: hidden;";StyleSheetManager.updateCss(e.PRESERVE_3D_CLASS_NAME,t),StyleSheetManager.updateCss(e.PRESERVE_3D_CLASS_NAME+' > [data-type="scene"]',r)},proto$T._setTransitionStart=function(e,t){var r=this,a=r._stage,n=r._switcher.constructor,o=r._direction,s=a._fullScreenRect._width/2,_=a._fullScreenRect._height/2;if(t._classNameList.push(r.TRANSITION_BOX_CLASS_NAME),t._parent._classNameList.push(r.PRESERVE_3D_CLASS_NAME),t._parent.setClassName(),o===n._Direction._VERTICAL)var l=Math.min(a._stageHeight,a._fullScreenRect._height)/2,c="X";else l=Math.min(a._stageWidth,a._fullScreenRect._width)/2,c="Y";var d=new Transform;if(e===0){if(o===n._Direction._VERTICAL)if(r._fromPrevious)var f=90;else f=-90;else r._fromPrevious?f=-90:f=90;var u="perspective("+l*2+"px) translateZ("+-l+"px) rotate"+c+"("+f+"deg)";d._beforeTranform=u,u=Browser$1.prefix.css+"transform-origin: "+s+"px "+_+"px "+-l+"px;",d._setAdditionCss(u)}else u="perspective("+l*2+"px) translateZ("+-l+"px) rotate"+c+"(0deg)",d._beforeTranform=u,d._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+s+"px "+_+"px "+-l+"px;");t._displayObject._transform=d},proto$T._setTransitionEnd=function(e,t){var r=this,a=r._stage,n=r._switcher.constructor,o=r._direction,s=a._fullScreenRect._width/2,_=a._fullScreenRect._height/2;if(o===n._Direction._VERTICAL)var l=Math.min(a._stageHeight,a._fullScreenRect._height)/2,c="X";else l=Math.min(a._stageWidth,a._fullScreenRect._width)/2,c="Y";var d=new Transform;if(e===0){var f="perspective("+l*2+"px) translateZ("+-l+"px) rotate"+c+"(0deg)";d._beforeTranform=f,f=Browser$1.prefix.css+"transform-origin: "+s+"px "+_+"px "+-l+"px;",d._setAdditionCss(f)}else{if(o===n._Direction._VERTICAL)if(r._fromPrevious)u=-90;else var u=90;else r._fromPrevious?u=90:u=-90;var f="perspective("+l*2+"px) translateZ("+-l+"px) rotate"+c+"("+u+"deg)";d._beforeTranform=f,f=Browser$1.prefix.css+"transform-origin: "+s+"px "+_+"px "+-l+"px;",d._setAdditionCss(f)}t._displayObject._transform=d},proto$T._finish=function(e,t){var r=this,a=t._classNameList.indexOf(r.TRANSITION_BOX_CLASS_NAME);a>=0&&t._classNameList.splice(a,1),a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME),a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectBox",EffectBox);var EffectCover=function(){EffectCover.__super__.constructor.apply(this,arguments)};EffectCover._name="cover",TransitionEffects._registerEffect(EffectCover._name,EffectCover),mod.extend(EffectCover,EffectCssTransition);var proto$S=EffectCover.prototype;proto$S._setTransitionStart=function(e,t){var r=this,a=r._switcher.constructor;if(e===0){var n=0,o=0,s=1,_=r._direction,l=r._stage,c=r._fromPrevious;_===a._Direction._VERTICAL?c?n=-l._fullScreenRect._height:n=l._fullScreenRect._height:c?o=-l._fullScreenRect._width:o=l._fullScreenRect._width;var d=new Transform,f=d._matrix;f._translate(o,n),d._colorTransform._alphaMultiplier=s}else d=new Transform;t._displayObject._transform=d},proto$S._setTransitionEnd=function(e,t){var r=new Transform;t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectCover",EffectCover);var EffectFadeIn=function(){EffectFadeIn.__super__.constructor.apply(this,arguments)};EffectFadeIn._name="fadein",TransitionEffects._registerEffect(EffectFadeIn._name,EffectFadeIn),mod.extend(EffectFadeIn,EffectCssTransition);var proto$R=EffectFadeIn.prototype;proto$R._setTransitionStart=function(e,t){var r=new Transform;e===0&&(r._colorTransform._alphaMultiplier=0),t._displayObject._transform=r},proto$R._setTransitionEnd=function(e,t){var r=new Transform;e===0||(r._colorTransform._alphaMultiplier=1),t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectFadeIn",EffectFadeIn);var EffectFlip=function(){EffectFlip.__super__.constructor.apply(this,arguments),this._enterUp=!1};EffectFlip._name="flip",TransitionEffects._registerEffect(EffectFlip._name,EffectFlip),mod.extend(EffectFlip,EffectCssTransition);var proto$Q=EffectFlip.prototype;proto$Q._globalInit=function(){},proto$Q._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0),a._beforeTranform="perspective("+o._stageWidth*2+"px) ",_===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),l?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)")):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),l?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)")),t._displayObject._transform=a},proto$Q._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0),a._colorTransform._alphaMultiplier=1,a._beforeTranform="perspective("+o._stageWidth*2+"px) ",_===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;"),l?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"),l?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1),t._displayObject._transform=a},proto$Q._finish=function(e,t){var r=this,a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME);a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null),t._displayObject._transform._colorTransform._alphaMultiplier=1},mod.namespace("SceneSwitcher.EffectFlip",EffectFlip);var EffectLadder=function(){EffectLadder.__super__.constructor.apply(this,arguments)};EffectLadder._name="ladder",TransitionEffects._registerEffect(EffectLadder._name,EffectLadder),mod.extend(EffectLadder,EffectCssTransition);var proto$P=EffectLadder.prototype;proto$P._setTransitionStart=function(e,t){var r=this,a=r._switcher.constructor;if(e===0){var n=0,o=0,s=1,_=r._direction,l=r._stage,c=r._fromPrevious;_===a._Direction._VERTICAL?c?n=-l._fullScreenRect._height:n=l._fullScreenRect._height:c?o=-l._fullScreenRect._width:o=l._fullScreenRect._width;var d=new Transform,f=d._matrix;f._translate(o,n),d._colorTransform._alphaMultiplier=s}else d=new Transform;t._displayObject._transform=d},proto$P._setTransitionEnd=function(e,t){var r=this;if(e===0)var a=new Transform;else{var n=0,o=0,s=r._direction,_=!r._fromPrevious,l=r._stage,c=r._switcher.constructor;s===c._Direction._VERTICAL?_?n=-l._fullScreenRect._height:n=l._fullScreenRect._height:_?o=-l._fullScreenRect._width:o=l._fullScreenRect._width,a=new Transform;var d=a._matrix;d._translate(o,n)}t._displayObject._transform=a},proto$P._finish=function(e,t){var r=new Transform;t._displayObject._transform=r},mod.namespace("SceneSwitcher.EffectLadder",EffectLadder);var EffectPaging=function(){EffectPaging.__super__.constructor.apply(this,arguments)};EffectPaging._name="paging",TransitionEffects._registerEffect(EffectPaging._name,EffectPaging),mod.extend(EffectPaging,EffectCssTransition);var proto$O=EffectPaging.prototype;proto$O._getSmallTrans=function(){var e=this,t=e._stage,r=new Transform,a=t._fullScreenRect._width/2,n=t._fullScreenRect._height/2,o=r._matrix;return o._translate(-a,-n),o._scale(.01,.01),o._translate(a,n),r},proto$O._setTransitionStart=function(e,t){var r=this;if(e===0)var a=r._getSmallTrans();else a=new Transform;t._displayObject._transform=a},proto$O._setTransitionEnd=function(e,t){var r=this;if(e===1)var a=r._getSmallTrans();else a=new Transform;t._displayObject._transform=a},mod.namespace("SceneSwitcher.EffectPaging",EffectPaging);var Counter=0,CanvasRender=function(){var e=this;e._id=Counter++,e._renderObjectContainer=null,e._renderObjectList=[],e._canvas=null,e._ctx=null,e._dirty=!1,e._node=null,e._canvasNode=null,e._bindedDomEventCapture={},e._bindedDomEventBubble={},e._thisDispatchInputEvent=e._dispatchInputEvent.bind(e)},availableCanvasList=[],maxCacheCanvasLen=3;CanvasRender._getCanvas=function(e,t,r){if(availableCanvasList.length&&!r)a=availableCanvasList.pop();else var a=document.createElement("canvas");return a.width=e,a.height=t,document.body.appendChild(a),a.style.cssText+="position:absolute;left:-100000px;",a},CanvasRender._returnCanvas=function(e){e.remove(),availableCanvasList.length<maxCacheCanvasLen&&availableCanvasList.push(e)},CanvasRender._initRenderObjectCanvas=function(e){var t=e._displayObject;if(t){var r=t._maskByList;if(r)if(r.length===0)n=t._getRenderObject(),o=new CanvasRender,o._stage=t._getRoot(),o._renderObjectContainer=n._parent,traversal$1(n,function(s){s._canvasRender=o,s._displayObject._haveDom=!1,s._prepareCanvasRender()});else{var a=r[0],n=a._getRenderObject(),o=n._canvasRender;o==null&&(o=new CanvasRender,o._stage=a._getRoot(),o._renderObjectContainer=e._parent,a._maskToList.forEach(function(s){var _=s._getRenderObject();o._renderObjectList.push(_),traversal$1(_,function(l){l._canvasRender=o,l._displayObject._haveDom=!1,l._prepareCanvasRender()})}),r.forEach(function(s){var _=s._getRenderObject();traversal$1(_,function(l){l._canvasRender=o,l._displayObject._haveDom=!1,l._prepareCanvasRender()}),o._renderObjectList.push(_)}))}}},CanvasRender._getCaptureCanvas=function(e,t,r){var a=this;a._canvasRender==null&&(a._canvasRender=new CanvasRender,a._stage=e._getRoot());var n=a._stage._transform._matrix,o=t===a._stage?n:Matrix._multiplication(n,t._getTotalMatrix()),s=o._getScaleX()*Math.max(2,Browser$1.devicePixelRatio),_=o._getScaleY()*Math.max(2,Browser$1.devicePixelRatio),l=t._rawWidth*s,c=t._rawHeight*_,d=Math.sqrt(1080*1920/l/c);d<1&&(s*=d,_*=d,l=t._rawWidth*s,c=t._rawHeight*_);var f=CanvasRender._getCanvas(l,c,!0),u=f.getContext("2d");if(a._canvasRender._canvasNode=f,e!==t)var p=e._transform._matrix._inverse(),v=t._transform._matrix._inverse(),h=Matrix._multiplication(v,p);else var h=t._transform._matrix._inverse();h._scale(s,_);var m=function(){a._canvasRender.drawItem(e,u,h,1,null,null,!0),r(f,function(){CanvasRender._returnCanvas(f)})},T=e._getRenderObject(),y=0,E=function(g){g._prepareCapture&&(g._prepareCapture(function(){--y===0&&m()}),y++),g._children.forEach(E)};E(T),y===0&&m()};var proto$N=CanvasRender.prototype;proto$N._setDisplayInitState=function(){var e=this;e._html==null?Browser$1.os.ios?e._html='<canvas style="border: 1px solid transparent; margin: -1px 0 0 -1px;" data-type="canvas" class="mugeda_render_object" data-mid="C'+e._id+'" width="0" height="0"></canvas>':e._html='<canvas data-type="canvas" class="mugeda_render_object" data-mid="C'+e._id+'" width="0" height="0"></canvas>':e._html=""},proto$N._getNode=function(){var e=this;if(e._node==null){var t=document.querySelector('[data-mid="C'+e._id+'"]'),r=t;e._node=t,e._node._canvasMatrix=new Matrix,e._canvasNode=r,e._ctx=r.getContext("2d"),e._renderObjectList.forEach(function(n){traversal$1(n,function(o){o._initActionAndEvent()})});var a=e._renderObjectContainer;a&&(a._displayObject._type==="scene"&&(a=a._parent),a&&a._displayObject._addEventListener("rendered",function(){if(e._renderObjectList.length){var n=e._renderObjectList[0]._displayObject;n._dispatchEvent(n._changedEvent)}}))}return e._node};var traversal$1=function(e,t){var r={stopFlag:!1};t(e,r);for(var a=e._children,n=a.length,o=0;o<n;o++){var s=a[o];traversal$1(s,t)}};proto$N._redraw=function(e){var t=this;t._getNode();var r=t._ctx,a=t._renderObjectList,n=a.map(function($){return $._displayObject}),o=new Matrix(1,0,0,1);n[0]&&n[0]._parent&&n[0]._parent._offsetMatrix&&(o=Matrix._multiplication(o,n[0]._parent._offsetMatrix));var s=t.redrawGroup(null,n,o,null,!0,1,e),_=s[0],l=s[1],c=1,d=1;if(n[0]&&n[0]._parent){var f=n[0]._parent._getTotalMatrix();c=f._a,d=f._d}if(n[0])var u=n[0]._getRoot();if(u){var p=Math.max(d,c),v=p*Math.max(u._scaleX,u._scaleY),h=v*Browser$1.devicePixelRatio;if(Browser$1.os.tablet||Browser$1.os.phone){var m=Math.sqrt(166400/(l._x-_._x)/(l._y-_._y));h>m&&(h=m)}var T=s[1],y=s[2],E=s[3];y._x*=h,y._y*=h,E._x*=h,E._y*=h,T._x*=h,T._y*=h;var g=new Point(Math.floor(y._x),Math.floor(y._y)),b=new Point(y._x-g._x,y._y-g._y),w=new Point;if(E._x<=y._x)w._x=g._x;else{var x=E._x-y._x+b._x;w._x=E._x-(x-Math.floor(x))}E._y<=y._y?w._y=g._y:(x=E._y-y._y+b._y,w._y=E._y-(x-Math.floor(x)));var C=new Matrix(h,0,0,h,-w._x,-w._y);if(n[0]&&n[0]._parent&&n[0]._parent._offsetMatrix)var M=Matrix._multiplication(C,n[0]._parent._offsetMatrix);else M=C;var A=Math.ceil(T._x-w._x),O=Math.ceil(T._y-w._y);if(t._canvasNode.width=A,t._canvasNode.height=O,Browser$1.os.ios)var S=function($){t._iAm3d=$;for(var R=t._renderObjectContainer._children,I=R.indexOf(t._renderObjectList[t._renderObjectList.length-1]),P=I+1;P<R.length;P++){var N=R[P],B=N._3dBrotherCounter;$?N._3dBrotherCounter++:N._3dBrotherCounter--,!!B!=!!N._3dBrotherCounter&&N._displayObject._dispatchEvent(N._displayObject._changed3dEvent)}var j=t._renderObjectContainer,V=j._displayObject;V&&V._type==="scene"&&(j=j._parent),V&&V._id>1&&RenderObject._set3dCounter($,j,!0)};if(A===0&&O===0)t._node.style.cssText+="display:none;",Browser$1.os.ios&&S(!1);else{r.setTransform(1,0,0,1,0,0),r.globalAlpha=1,r.clearRect(0,0,A,O),A>0&&O>0&&t.redrawGroup(r,n,M,null,null,h/p,e);var L="",D=Browser$1.os.android&&Browser$1.isWeChat();D&&(L=" translateZ(0)"),Browser$1.os.ios&&(S(!0),L=" translateZ(0)"),t._node._canvasMatrix=C._inverse(),t._node.style.cssText+=Browser$1.prefix.css+"transform: "+t._node._canvasMatrix._toCssText()+L+";display:block;"}}},proto$N.redrawGroup=function(e,t,r,a,n,o,s){var _=this;if(n)var l=[],c=[];r==null&&(r=new Matrix(Browser$1.devicePixelRatio,null,null,Browser$1.devicePixelRatio),t[0]&&t[0]._parent&&t[0]._parent._offsetMatrix&&(r=Matrix._multiplication(r,t[0]._parent._offsetMatrix))),a=a??1;for(var d=t.length,f=0;f<d;f++){var u=t[f],p=u._maskByList,v=p&&p.length?p[0]._maskToList:null;if(p&&v){if(e){var h=_._canvasNode.width,m=_._canvasNode.height,T=CanvasRender._getCanvas(h,m,s),y=T.getContext("2d");y.setTransform(1,0,0,1,0,0),y.globalAlpha=1,y.clearRect(0,0,h,m),y.globalCompositeOperation="source-over"}if(p.forEach(function(R){_.drawItem(R,y,r,a,l,o,s)}),e){var E=CanvasRender._getCanvas(h,m,s),g=E.getContext("2d");g.setTransform(1,0,0,1,0,0),g.globalAlpha=1,g.clearRect(0,0,h,m),g.globalCompositeOperation="source-over"}v.forEach(function(R){_.drawItem(R,g,r,a,c,o,s)}),e&&(y.globalCompositeOperation="source-in",y.setTransform(1,0,0,1,0,0),y.drawImage(E,0,0),CanvasRender._returnCanvas(E),e.setTransform(1,0,0,1,0,0),e.drawImage(T,0,0),CanvasRender._returnCanvas(T));do var b=t[++f];while(b!=null&&(b._maskByList||b._maskToList));f--}else _.drawItem(u,e,r,a,l,o,s)}if(n){var w=1/0,x=1/0,C=-1/0,M=-1/0;if(c.forEach(function(R){R._nodes.forEach(function(I){I._x<w&&(w=I._x),I._x>C&&(C=I._x),I._y<x&&(x=I._y),I._y>M&&(M=I._y)})}),c.length==0)A=new Point(-1/0,-1/0),O=new Point(1/0,1/0);else var A=new Point(w,x),O=new Point(C,M);if(w=1/0,x=1/0,C=-1/0,M=-1/0,l.forEach(function(R){R._nodes.forEach(function(I){I._x<w&&(w=I._x),I._x>C&&(C=I._x),I._y<x&&(x=I._y),I._y>M&&(M=I._y)})}),l.length==0)S=new Point(0,0),L=new Point(0,0);else var S=new Point(w,x),L=new Point(C,M);if(A._x>L._x||O._x<S._x||A._y>L._y||O._y<S._y)var D=new Point(0,0),$=new Point(0,0);else D=new Point(Math.max(S._x,A._x),Math.max(S._y,A._y)),$=new Point(Math.min(L._x,O._x),Math.min(L._y,O._y));return[D,$,A,S]}},proto$N.drawItem=function(e,t,r,a,n,o,s){if(e._visible){t&&(t.filter="none");var _=e._transform,l=_._matrix,c=_._colorTransform._alphaMultiplier;e._offsetMatrix&&(l=Matrix._multiplication(l,e._offsetMatrix));var d=Matrix._multiplication(r,l);if(e._flipMatrix&&(d=Matrix._multiplication(d,e._flipMatrix)),Math.abs(d._tx-Math.round(d._tx))<1e-4&&(d._tx=Math.round(d._tx)),Math.abs(d._ty-Math.round(d._ty))<1e-4&&(d._ty=Math.round(d._ty)),c=c*a,e.children&&e.children.length){var f=this.redrawGroup(t,e.children,d,c,n,o,s);if(n){var u=new Boundary,p=f[0],v=f[1];u._addPoint(p),u._addPoint(new Point(v._x,p._y)),u._addPoint(v),u._addPoint(new Point(p._x,v._y)),n.push(u)}}else{var h=d._a,m=d._b,T=d._c,y=d._d,E=new Matrix(Math.sqrt(h*h+m*m),0,0,Math.sqrt(T*T+y*y)),g=Matrix._multiplication(d,E._inverse());if(n)n.push(e._getBoundary(d,o));else{t.setTransform(g._a,g._b,g._c,g._d,g._tx,g._ty),t.globalAlpha=c;var b=e._getRenderObject();t.filter=_._colorTransform._generateFilterString(),b._redraw&&b._redraw(t,E,o,s)}}}},proto$N._getBoundaryOfDisplayObjectList=function(e){var t=new Point,r=new Point,a=new Point,n=new Point,o=new Point(-1/0,-1/0),s=new Point(1/0,1/0);e.forEach(function(_){var l=_._x,c=_._y,d=_._rawWidth,f=_._rawHeight,u=_._transform._matrix;t._x=l,t._y=c,r._x=l,r._y=c+f,a._x=l+d,a._y=c,n._x=l+d,n._y=c+f,u._transform(t,!0),u._transform(r,!0),u._transform(a,!0),u._transform(n,!0),o._x=Math.min(t._x,r._x,a._x,n._x),o._y=Math.min(t._y,r._y,a._y,n._y),s._x=Math.max(t._x,r._x,a._x,n._x),s._y=Math.max(t._y,r._y,a._y,n._y)})},proto$N._dispatchInputEvent=function(e){var t=this,r=e.type;e.target;var a=new InputEvent(r,e);a._stage=t._stage;var n=a._getInputX(),o=a._getInputY(),s=t._renderObjectContainer._displayObject;s._type=="scene"&&(s=t._renderObjectContainer._parent._displayObject);var _=new Point(n,o),l=s._getTotalMatrix();s._offsetMatrix&&(l=Matrix._multiplication(s._offsetMatrix,l));var c=l,d=RenderObject._findClickDisplayObject(t._renderObjectList.map(function(h){return h._displayObject}),_,c);if(d){for(var f=d,u=[f];f._parent!=s;)f=f._parent,u.push(f);a._eventPhase=e.eventPhase,a._target=d;var p=u.length;if(a._eventPhase==EventPhase.CAPTURING_PHASE)for(var v=p-1;v>=0;v--)u[v]._dispatchEvent(a);else d._dispatchEvent(a)}},CanvasRender.getFillPattern=function(e,t,r,a,n){if(t instanceof GraphicsSolidFill)return CanvasRender.getSolidFill(e,t,r,a);if(t instanceof GraphicsImageFill)return CanvasRender.getBitmapFill(e,t,r,a,n);if(t instanceof GraphicsGradientFill)return CanvasRender.getGradientFill(e,t,r,a)},CanvasRender.getSolidFill=function(e,t,r,a){return t._getFill()},CanvasRender.getGradientFill=function(e,t,r,a){if(t.type==GradientType.LINEAR){var n=e.createLinearGradient(t.fillStartPos._x*r,t.fillStartPos._y*a,t.fillEndPos._x*r,t.fillEndPos._y*a),o=t.ratios;t.colors.forEach(function(c,d){var f=Math.abs(o[d])<.001?0:o[d];n.addColorStop(f,c._getCssText())})}else{var s=Math.abs(t.fillEndPos._x-t.fillStartPos._x)*r,_=Math.abs(t.fillEndPos._y-t.fillStartPos._y)*a,l=Math.sqrt(s*s+_*_);n=e.createRadialGradient(t.fillStartPos._x*r,t.fillStartPos._y*a,0,t.fillStartPos._x*r,t.fillStartPos._y*a,l),o=t.ratios,t.colors.forEach(function(c,d){var f=Math.abs(o[d])<.001?0:o[d];n.addColorStop(f,c._getCssText())})}return n},CanvasRender.getBitmapFill=function(e,t,r,a,n){var o=t._imageSize,s=t._imagePosition,_=getImageSizePosition(t._bitmapData._image,n._getWidth(),n._getHeight(),o,s,t._horOffset,t._verOffset),l=document.createElement("canvas"),c=l.getContext("2d");l.width=_.desWidth*r,l.height=_.desHeight*a;var d=t._bitmapData._image;return c.drawImage(d,_.srcLeft,_.srcTop,_.srcWidth,_.srcHeight,_.desLeft*r,_.desTop*a,_.desWidth*r/(n.scaleX||1),_.desHeight*a/(n.scaleY||1)),e.createPattern(l,t._imageSize=="tile"?"repeat":"no-repeat")};var getImageSizePosition=function(e,t,r,a,n,o,s){var _=e.width,l=e.height,c=_/l,d=t/r,f={};return a=="cover"?(f.desHeight=r,f.desWidth=t,c<d?(f.srcWidth=_,f.srcHeight=_/d):(f.srcHeight=l,f.srcWidth=l*d)):a=="contain"?(f.srcWidth=_,f.srcHeight=l,c>d?(f.desWidth=t,f.desHeight=t/c):(f.desHeight=r,f.desWidth=r*c)):a=="width"?(f.desWidth=t,f.desHeight=r,f.srcWidth=_,f.srcHeight=_/d):a=="height"?(f.desWidth=t,f.desHeight=r,f.srcWidth=l*d,f.srcHeight=l):a=="fill"?(f.desHeight=r,f.desWidth=t,f.srcWidth=_,f.srcHeight=l):a=="tile"?(f.desWidth=_,f.desHeight=l,f.srcWidth=_,f.srcHeight=l):(f.desHeight=r,f.desWidth=t,f.srcWidth=t,f.srcHeight=r),a=="tile"?(f.srcLeft=0,f.desLeft=0):n=="center"||n=="top"||n=="bottom"?(f.srcLeft=(_-f.srcWidth)/2-o,f.desLeft=(t-f.desWidth)/2):n.indexOf("left")>=0?(f.srcLeft=-o,f.desLeft=0):n.indexOf("right")>=0&&(f.srcLeft=_-f.srcWidth+o,f.desLeft=t-f.desWidth),a=="tile"?(f.srcTop=0,f.desTop=0):n=="center"||n=="left"||n=="right"?(f.srcTop=(l-f.srcHeight)/2-s,f.desTop=(r-f.desHeight)/2):n.indexOf("top")>=0?(f.srcTop=-s,f.desTop=0):n.indexOf("bottom")>=0&&(f.srcTop=l-f.srcHeight+s,f.desTop=r-f.desHeight),f};CanvasRender.createFillPattern=function(e,t,_,l){var n="#93C9FF",o,s,_=_||1,l=l||1;if(t._fillType!==FillType.IMAGE)if(t._fillType===FillType.COLOR)n=t._fillVal._getCssText();else if(t._fillType===FillType.LINEAR)for(n=e.createLinearGradient(t._fillVal._p0.x*_,t._fillVal._p0.y*l,t._fillVal._p1.x*_,t._fillVal._p1.y*l),o=0;o<t._fillVal._colors.length;o++)s=t._fillVal._colors[o],u=t._fillVal._ratios[o],n.addColorStop(u,s._getCssText());else if(t._fillType===FillType.RADIAL){var c=Math.abs(t._fillVal._p1.x-t._fillVal._p0.x)*_,d=Math.abs(t._fillVal._p1.y-t._fillVal._p0.y)*l,f=Math.sqrt(c*c+d*d);for(n=e.createRadialGradient(t._fillVal._p0.x*_,t._fillVal._p0.y*l,0,t._fillVal._p0.x*_,t._fillVal._p0.y*l,f),o=0;o<t._fillVal._colors.length;o++){s=t._fillVal._colors[o];var u=t._fillVal._ratios[o];n.addColorStop(u,s._getCssText())}}else n="rgba(255,255,255,0)";return n},mod.namespace("Render.CanvasRender",CanvasRender);var EffectCanvasTransition=function(){EffectCanvasTransition.__super__.constructor.apply(this,arguments)};mod.extend(EffectCanvasTransition,TransitionEffect);var proto$M=EffectCanvasTransition.prototype;proto$M._start=function(e,t){var r=this;e===0?CanvasRender._getCaptureCanvas(r._stage,r._stage,function(a,n){r._toSceneRenderObject._displayObject._setVisible(!0);var o=document.createElement("canvas");o.width=a.width,o.height=a.height,o.style.cssText="position:absolute;width:100%;height:100%;left:0;top:0;z-index:1",r._fromSceneRenderObject.getNode(!0).appendChild(o),r._fromSceneRenderObject._displayObject._setVisible(!1),r._fromSceneRenderObject._setStaticPosition(null,!0,!0),r._toSceneRenderObject._displayObject._setVisible(!1),r._toSceneRenderObject._setStaticPosition(null,!0,!0),r._draw(r.fromCanvas,a,o,function(){r.fromCanvasDone(),r._toSceneRenderObject._displayObject._setVisible(!0),r._toSceneRenderObject._setStaticPosition(null,!0,!0),n(),o.parentNode.removeChild(o),t()})}):e===1&&CanvasRender._getCaptureCanvas(r._stage,r._stage,function(a,n){r.fromCanvas=a,r.fromCanvasDone=n,t()}),CanvasRender._getCaptureCanvas(r._stage,r._stage,function(a,n){})},proto$M._end=function(e,t){t()},mod.namespace("SceneSwitcher.EffectCanvasTransition",EffectCanvasTransition);var EffectDrawBox=function(){EffectDrawBox.__super__.constructor.apply(this,arguments)};EffectDrawBox._name="drawBox",TransitionEffects._registerEffect(EffectDrawBox._name,EffectDrawBox),mod.extend(EffectDrawBox,EffectCanvasTransition);var proto$L=EffectDrawBox.prototype;proto$L._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,_=null,l=r.width,c=r.height,d=e.width,f=e.height,u=10,p=Math.round(u/l*c),v=l/u,h=c/p,m=d/u,T=f/p,y=r.getContext("2d");console.log("draw");function E(g){_||(_=g);var b=g-_,w=Math.min(1,b/s);y.drawImage(e,0,0,l,c);for(var x=v*w,C=h*w,M=0;M<u;M++)for(var A=0;A<p;A++)y.drawImage(t,m*M,T*A,m,T,v*(M+.5)-x/2,h*(A+.5)-C/2,x,C);b<s?window.requestAnimationFrame(E):(console.log("end"),a())}o(E)},mod.namespace("SceneSwitcher.EffectDrawBox",EffectDrawBox);var EffectBackWard=function(){EffectBackWard.__super__.constructor.apply(this,arguments),this._enterUp=!1};EffectBackWard._name="backward",TransitionEffects._registerEffect(EffectBackWard._name,EffectBackWard),mod.extend(EffectBackWard,EffectCssTransition);var proto$K=EffectBackWard.prototype;proto$K._globalInit=function(){},proto$K._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0),a._beforeTranform="perspective("+o._stageHeight*2+"px) ",_===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),l?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)")):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),l?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)")),t._displayObject._transform=a},proto$K._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0),a._colorTransform._alphaMultiplier=1,a._beforeTranform="perspective("+o._stageHeight*2+"px) ",_===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"),l?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(90deg)"):a._colorTransform._alphaMultiplier=1):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"),l?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(90deg)"):a._colorTransform._alphaMultiplier=1),t._displayObject._transform=a},proto$K._finish=function(e,t){var r=this,a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME);a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectBackWard",EffectBackWard);var EffectFallWard=function(){EffectFallWard.__super__.constructor.apply(this,arguments)};EffectFallWard._name="fallward",TransitionEffects._registerEffect(EffectFallWard._name,EffectFallWard),mod.extend(EffectFallWard,EffectCssTransition);var proto$J=EffectFallWard.prototype;proto$J._globalInit=function(){},proto$J._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0),a._beforeTranform="perspective("+o._stageHeight*2+"px) ",_===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),l?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)")):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"+Browser$1.prefix.css+"transition-timing-function:ease"),l?e===0?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1:e===1?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)")),t._displayObject._transform=a},proto$J._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0),a._colorTransform._alphaMultiplier=1,a._beforeTranform="perspective("+o._stageHeight*2+"px) ",_===s._Direction._VERTICAL?(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;"),l?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateX(-90deg)"):a._colorTransform._alphaMultiplier=1):(a._setAdditionCss(Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;"),l?e===0?a._colorTransform._alphaMultiplier=1:(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(0)"):e===1?(a._colorTransform._alphaMultiplier=0,a._beforeTranform+=" rotateY(-90deg)"):a._colorTransform._alphaMultiplier=1),t._displayObject._transform=a},proto$J._finish=function(e,t){var r=this,a=t._parent._classNameList.indexOf(r.PRESERVE_3D_CLASS_NAME);a>=0&&(t._parent._classNameList.splice(a,1),t._parent.setClassName()),t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(null)},mod.namespace("SceneSwitcher.EffectFallWard",EffectFallWard);var EffectCut=function(){EffectCut.__super__.constructor.apply(this,arguments)};EffectCut._name="cut",TransitionEffects._registerEffect(EffectCut._name,EffectCut),mod.extend(EffectCut,EffectCssTransition);var proto$I=EffectCut.prototype;proto$I._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes CUT_X_AGO_OBJ_ONE{            0% {                left : 0;                z-index:10;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+t._stageWidth/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-25deg) scale3d(.75, .75, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:-1;            }            100% {                z-index:-1;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_X_AGO_OBJ_TWO{            0% {                z-index:-1;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+-(t._stageWidth/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(25deg) scale3d(.75, .75, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:10;            }            100% {                z-index:10;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_X_BACK_OBJ_ONE{             0% {                left : 0;                z-index:-1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+t._stageWidth/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-25deg scale3d(.75, .75, 1));                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:10;            }            100% {                z-index:10;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_X_BACK_OBJ_TWO{            0% {                z-index:10;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(1, 1, 1);                transform-origin : "+t._stageWidth+"px "+t._stageHeight/2+"px 0;            }            50% {                z-index:5;                left : "+-(t._stageWidth/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(25deg) scale3d(.75, .75, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }            90% {                z-index:-1;            }            100% {                z-index:-1;                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale3d(.5, .5, 1);                transform-origin : "+t._stageWidth/2+"px "+t._stageHeight/2+"px 0;            }        }        @keyframes CUT_Y_AGO_OBJ_ONE{            0% {                top : 0;                z-index:10;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }            50% {                z-index:5;                top : "+t._stageHeight/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-45deg) scale3d(.75, .75, 1);            }            90% {                z-index:-1;            }            100% {                z-index:-1;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }        }        @keyframes CUT_Y_AGO_OBJ_TWO{            0% {                z-index:-1;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }            50% {                z-index:5;                top : "+-(t._stageHeight/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(45deg) scale3d(.75, .75, 1);            }            90% {                z-index:10;            }            100% {                z-index:10;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }        }        @keyframes CUT_Y_BACK_OBJ_ONE{             0% {                top : 0;                z-index:-1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }            50% {                z-index:5;                top : "+t._stageHeight/2.5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-45deg) scale3d(.75, .75, 1);            }            90% {                z-index:10;            }            100% {                z-index:10;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }        }        @keyframes CUT_Y_BACK_OBJ_TWO{            0% {                z-index:10;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(1, 1, 1);            }            50% {                z-index:5;                top : "+-(t._stageHeight/2.5)+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(45deg) scale3d(.75, .75, 1);            }            90% {                z-index:-1;            }            100% {                z-index:-1;                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale3d(.5, .5, 1);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$I._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;n._create3DMatrix(!0,!0);var c="";if(n._create3DMatrix(!0,!0),_===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var d="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var d="Y"}d=="Y"?l?e==0?c+=Browser$1.prefix.css+"animation:CUT_X_BACK_OBJ_ONE "+this._duration/1e3+"s linear;":c+=Browser$1.prefix.css+"animation:CUT_X_BACK_OBJ_TWO "+this._duration/1e3+"s linear;":e==1?c+=Browser$1.prefix.css+"animation:CUT_X_AGO_OBJ_ONE "+this._duration/1e3+"s linear;":c+=Browser$1.prefix.css+"animation:CUT_X_AGO_OBJ_TWO "+this._duration/1e3+"s linear;":l?e==0?(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;",c+=Browser$1.prefix.css+"animation:CUT_Y_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"):(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px "+o._stageHeight/2+"px;",c+=Browser$1.prefix.css+"animation:CUT_Y_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"):e==1?(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px "+o._stageHeight/2+"px;",c+=Browser$1.prefix.css+"animation:CUT_Y_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"):(c+=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;",c+=Browser$1.prefix.css+"animation:CUT_Y_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"),a._setAdditionCss(c),t._displayObject._transform=a},proto$I._setTransitionEnd=function(e,t){},proto$I._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectCut",EffectCut);var EffectTurn=function(){EffectTurn.__super__.constructor.apply(this,arguments)};EffectTurn._name="turn",TransitionEffects._registerEffect(EffectTurn._name,EffectTurn),mod.extend(EffectTurn,EffectCssTransition);var proto$H=EffectTurn.prototype;proto$H._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes TURN_X_AGO_OBJ_ONE{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(180deg);            }        }        @keyframes TURN_X_AGO_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0);            }        }        @keyframes TURN_X_BACK_OBJ_ONE{             0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-360deg);            }        }        @keyframes TURN_X_BACK_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(360deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(180deg);            }        }        @keyframes TURN_Y_AGO_OBJ_ONE{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(180deg);            }        }        @keyframes TURN_Y_AGO_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0);            }        }        @keyframes TURN_Y_BACK_OBJ_ONE{             0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-180deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-360deg);            }        }        @keyframes TURN_Y_BACK_OBJ_TWO{            0% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(360deg);            }            100% {                "+Browser$1.prefix.css+"backface-visibility:hidden;                "+Browser$1.prefix.css+"transform-style:preserve-3d;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(180deg);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$H._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),t._displayObject._transform=a},proto$H._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;if(n._create3DMatrix(!0,!0),_===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}var d=r._stage._fullScreenRect,f=d._width/2,u=d._height/2;if(c=="Y")if(l)if(e==0){var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_X_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(l)if(e==0){var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var p=Browser$1.prefix.css+"transform-origin: "+f+"px "+u+"px 0px;";p+=Browser$1.prefix.css+"animation:TURN_Y_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}a._setAdditionCss(p),t._displayObject._transform=a},proto$H._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectTurn",EffectTurn);var EffectBank=function(){EffectBank.__super__.constructor.apply(this,arguments)};EffectBank._name="bank",TransitionEffects._registerEffect(EffectBank._name,EffectBank),mod.extend(EffectBank,EffectCssTransition);var proto$G=EffectBank.prototype;proto$G._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes BANK_X_AGO_OBJ_ONE{            0% {                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1);            }            66%{                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(0.79);            }            100% {                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes BANK_X_AGO_OBJ_TWO{            0% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1.21);            }            66% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1);            }            100% {                left : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes BANK_X_BACK_OBJ_ONE{            0% {                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : -"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1.21);            }            66%{                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1);            }            100% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0);            }        }        @keyframes BANK_X_BACK_OBJ_TWO{          0% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            33% {                left : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1);            }            66% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(0.79);            }            100% {                left : "+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes BANK_Y_AGO_OBJ_ONE{            0% {                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            33% {                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1);            }            66%{                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(0.79);            }            100% {                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes BANK_Y_AGO_OBJ_TWO{            0% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1);            }            33% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1.21);            }            66% {                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(25deg) scale(1);            }            100% {                top : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes BANK_Y_BACK_OBJ_ONE{             0% {                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            33% {                top : -"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(1.21);            }            66%{                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(1);            }            100% {                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes BANK_Y_BACK_OBJ_TWO{            0%{                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            33% {                top : 0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(1);            }            66% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-25deg) scale(0.79);            }            100% {                top : "+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$G._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),e==0?a._setAdditionCss("z-index:-1"):a._setAdditionCss("z-index:10"),t._displayObject._transform=a},proto$G._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;if(n._create3DMatrix(!0,!0),_===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}if(c=="Y")if(l)if(e==0){var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_X_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(l)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:BANK_Y_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}a._setAdditionCss(d),t._displayObject._transform=a},proto$G._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectBank",EffectBank);var EffectZoom=function(){EffectZoom.__super__.constructor.apply(this,arguments)};EffectZoom._name="zoom",TransitionEffects._registerEffect(EffectZoom._name,EffectZoom),mod.extend(EffectZoom,EffectCssTransition);var proto$F=EffectZoom.prototype;proto$F._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes ZOOM_X_AGO_OBJ_ONE{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_X_AGO_OBJ_TWO{            0% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }        }        @keyframes ZOOM_X_BACK_OBJ_ONE{            0%{                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_X_BACK_OBJ_TWO{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }        }        @keyframes ZOOM_Y_AGO_OBJ_ONE{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_Y_AGO_OBJ_TWO{            0% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }        }        @keyframes ZOOM_Y_BACK_OBJ_ONE{            0%{                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }            100% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px);            }        }        @keyframes ZOOM_Y_BACK_OBJ_TWO{            0% {                opacity : 1;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(1, 1);            }            100% {                opacity : 0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) scale(0.5, 0.5);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$F._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),e==0?a._setAdditionCss("z-index:-1"):a._setAdditionCss("z-index:10"),t._displayObject._transform=a},proto$F._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;if(n._create3DMatrix(!0,!0),_===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}if(c=="Y")if(l)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_X_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(l)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_BACK_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_BACK_OBJ_TWO "+this._duration/1e3+"s ease;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_AGO_OBJ_ONE "+this._duration/1e3+"s ease;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:ZOOM_Y_AGO_OBJ_TWO "+this._duration/1e3+"s ease;"}a._setAdditionCss(d),t._displayObject._transform=a},proto$F._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectZoom",EffectZoom);var EffectFrame=function(){EffectFrame.__super__.constructor.apply(this,arguments)};EffectFrame._name="frame",TransitionEffects._registerEffect(EffectFrame._name,EffectFrame),mod.extend(EffectFrame,EffectCssTransition);var proto$E=EffectFrame.prototype;proto$E._globalInit=function(){var e=document.createElement("style"),t=Mugeda.scene._stage;e.type="text/css",e.innerHTML="        @keyframes EFFECTFRAME_X_AGO_OBJ_ONE{            0% {                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50%{                left:-"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(.8);            }            100% {                left:-"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(1.2);            }        }        @keyframes EFFECTFRAME_X_AGO_OBJ_TWO{             0% {                left:"+t._stageWidth*1.05+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50%{                left:"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(.8);            }            100% {                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes EFFECTFRAME_X_BACK_OBJ_ONE{            0% {                left:-"+t._stageWidth*1.05+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50% {                left:-"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(20deg) scale(.8);            }            100%{                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }        }        @keyframes EFFECTFRAME_X_BACK_OBJ_TWO{            0%{                left:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(0) scale(1);            }            50%{                left:"+t._stageWidth/5+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(.8);            }            100% {                left:"+t._stageWidth+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageWidth*2+"px) rotateY(-20deg) scale(1.2);            }        }        @keyframes EFFECTFRAME_Y_AGO_OBJ_ONE{            0% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-40deg) scale(.8);            }            100% {                top:-"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes EFFECTFRAME_Y_AGO_OBJ_TWO{             0% {                top:"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(40deg) scale(.8);            }            100% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes EFFECTFRAME_Y_BACK_OBJ_ONE{            0% {                top:-"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(-40deg) scale(.8);            }            100% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }        @keyframes EFFECTFRAME_Y_BACK_OBJ_TWO{            0% {                top:0;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }            50%{                top:0px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(40deg) scale(.8);            }            100% {                top:"+t._stageHeight+"px;                "+Browser$1.prefix.css+"transform: perspective("+t._stageHeight*2+"px) rotateX(0) scale(1);            }        }    ",document.getElementsByTagName("HEAD").item(0).appendChild(e)},proto$E._setTransitionStart=function(e,t){var r=this,a=new Transform,n=a._matrix;r._stage,r._switcher.constructor,r._direction,r._fromPrevious,n._create3DMatrix(!0,!0),e==0?a._setAdditionCss("z-index:-1"):a._setAdditionCss("z-index:10"),t._displayObject._transform=a},proto$E._setTransitionEnd=function(e,t){var r=this,a=new Transform,n=a._matrix,o=r._stage,s=r._switcher.constructor,_=r._direction,l=r._fromPrevious;if(n._create3DMatrix(!0,!0),_===s._Direction._VERTICAL){Math.min(o._stageHeight,o._fullScreenRect._height)/2;var c="X"}else{Math.min(o._stageWidth,o._fullScreenRect._width)/2;var c="Y"}if(c=="Y")if(l)if(e==0){var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: 0px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth+"px "+o._stageHeight/2+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_X_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(l)if(e==0){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_BACK_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_BACK_OBJ_TWO "+this._duration/1e3+"s linear;"}else if(e==1){var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px 0px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_AGO_OBJ_ONE "+this._duration/1e3+"s linear;"}else{var d=Browser$1.prefix.css+"transform-origin: "+o._stageWidth/2+"px "+o._stageHeight+"px 0px;";d+=Browser$1.prefix.css+"animation:EFFECTFRAME_Y_AGO_OBJ_TWO "+this._duration/1e3+"s linear;"}a._setAdditionCss(d),t._displayObject._transform=a},proto$E._finish=function(e,t){t._displayObject._transform._beforeTranform=null,t._displayObject._transform._setAdditionCss(" "),t._node.style[Browser$1.prefix.css+"transform-origin"]="",t._node.style[Browser$1.prefix.css+"animation"]=""},mod.namespace("SceneSwitcher.EffectFrame",EffectFrame);var EffectShutters=function(){EffectShutters.__super__.constructor.apply(this,arguments)};EffectShutters._name="shutters",TransitionEffects._registerEffect(EffectShutters._name,EffectShutters),mod.extend(EffectShutters,EffectCanvasTransition);var proto$D=EffectShutters.prototype;proto$D._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,_=null,l=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,f=n._fromPrevious,u=8,p=e.width,v=e.height,h=function(E,g,b){if(!document.getElementById("shuttersAnimation_shutters")){var w=document.createElement("style");Mugeda.scene._stage,w.id="shuttersAnimation_shutters",w.innerHTML="            @keyframes SHUTTERS_ANIMATION_ITEM{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_OUT{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_ON{                0%{                }                100%{                }            }            @keyframes SHUTTERS_BOX_ANIMATION{                0%{                }                100%{                }            }        ",w.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(w)}},m=function(E,g){var b={};b.items=[];var w=p/E,x=v,C=document.createElement("div");C.style.position="fixed",C.style.left=-d._left+"px",C.style.top=-d._top+"px",C.style.width=p*c+"px",C.style.height=v*c+"px",C.style.zIndex=9999,l.appendChild(C);for(var M=0;M<E;M++){var w=p/E,A=w*M,x=v,O=document.createElement("div");O.style.position="absolute",O.style.left=Math.floor(A*c)+"px",O.style.top="0px",O.style.width=Math.floor(w*c)+"px",O.style.height=Math.floor(x*c)+"px",O.style.perspective=v*c/2+"px",C.appendChild(O);var S=document.createElement("div");S.style.position="absolute",S.style.left=0,S.style.top="0px",S.style.width=Math.floor(w*c)+"px",S.style.height=Math.floor(x*c)+"px",S.style.transformOrigin="50% 50% 0px",S.style.transformStyle="preserve-3d",S.style.transform="rotateY(0)",O.appendChild(S),function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.top="0px",$.style.left=0,$.width=Math.floor(w*c),$.height=Math.floor(x*c),S.appendChild($);var R=$.getContext("2d");R.drawImage(e,A,0,w,x,0,0,w*c,x*c)}(),function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.top="0px",$.style.left=0,$.width=Math.floor(w*c),$.height=Math.floor(x*c),$.style.transformOrigin="right",f?$.style.transform="rotateY(-90deg) translateZ("+Math.floor(w*c)+"px) translateX(0px)":$.style.transform="rotateY(90deg) translateZ(0px) translateX("+Math.floor(w*c)+"px)",S.appendChild($);var R=$.getContext("2d");R.drawImage(t,A,0,w,x,0,0,w*c,x*c)}(),b.items.push(S)}return b.container=C,b};h();var T=m(u);r.getContext("2d"),console.log("draw");function y(E){if(!window.stopLoop){_||(_=E);var g=E-_;if(g<s){var b=g/s,w=90*b;T.items.forEach(function(x){var C=p/u*c/2*b,M=0-p/u*c/2*b;f?x.style.transform="rotateY("+w+"deg) translateZ("+C+"px) translateX("+-M+"px)":x.style.transform="rotateY(-"+w+"deg) translateZ("+C+"px) translateX("+M+"px)"}),window.requestAnimationFrame(y)}else console.log("end"),l.removeChild(T.container),a()}}o(y)},mod.namespace("SceneSwitcher.EffectShutters",EffectShutters);var EffectShuttersAcross=function(){EffectShuttersAcross.__super__.constructor.apply(this,arguments)};EffectShuttersAcross._name="shuttersAcross",TransitionEffects._registerEffect(EffectShuttersAcross._name,EffectShuttersAcross),mod.extend(EffectShuttersAcross,EffectCanvasTransition);var proto$C=EffectShuttersAcross.prototype;proto$C._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,_=null,l=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,f=e.width,u=e.height,p=n._fromPrevious,v=function(y,E,g){if(!document.getElementById("shuttersAnimation_across")){var b=document.createElement("style");Mugeda.scene._stage,b.id="shuttersAnimation_across",console.log(E),b.innerHTML="            @keyframes SHUTTERS_ANIMATION_ITEM{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_OUT{                0%{                }                100%{                }            }            @keyframes SHUTTERS_ANIMATION_ON{                0%{                }                100%{                }            }            @keyframes SHUTTERS_BOX_ANIMATION{                0%{                }                100%{                }            }        ",b.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(b)}},h=function(y,E){var g={};g.items=[];var b=f,w=u/y,x=document.createElement("div");x.style.position="fixed",x.style.left=-d._left+"px",x.style.top=-d._top+"px",x.style.width=f*c+"px",x.style.height=u*c+"px",x.style.zIndex=9999,l.appendChild(x);for(var C=0;C<y;C++){var b=f,w=u/y,M=0,A=w*C,O=document.createElement("div");O.style.position="absolute",O.style.left=M+"px",O.style.top=Math.floor(A*c)+"px",O.style.width=Math.floor(b*c)+"px",O.style.height=Math.floor(w*c)+"px",O.style.perspective="200px",x.appendChild(O);var S=document.createElement("div");S.style.position="absolute",S.style.left=0,S.style.top="0px",S.style.width=Math.floor(b*c)+"px",S.style.height=Math.floor(w*c)+"px",S.style.transformOrigin="50% 50% 0",S.style.transformStyle="preserve-3d",S.style.transform="rotateX(0)",O.appendChild(S),function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.top="0px",$.style.left=0,$.width=Math.floor(b*c),$.height=Math.floor(w*c),S.appendChild($);var R=$.getContext("2d");R.drawImage(e,0,A,b,w,0,0,b*c,w*c)}(),function(){var $=document.createElement("canvas");$.style.position="absolute",$.style.left=0,$.width=Math.floor(b*c),$.height=Math.floor(w*c),$.style.transformOrigin="center top 0",p?($.style.top=0,$.style.transform="rotateX(90deg) translateZ(0) translateY(-"+w*c+"px)"):($.style.top=Math.floor(w*c)+"px",$.style.transform="rotateX(-90deg)"),S.appendChild($);var R=$.getContext("2d");R.drawImage(t,0,A,b,w,0,0,b*c,w*c)}(),g.items.push(S)}return g.container=x,g};v(f/8*c,u*c);var m=h(8);r.getContext("2d"),console.log("draw");function T(y){if(!window.stopLoop){_||(_=y);var E=y-_;if(E<s){var g=E/s,b=90*g;m.items.forEach(function(w){var x=w.offsetHeight/2*g,C=0-w.offsetHeight/2*g;p?w.style.transform="rotateX(-"+b+"deg) translateZ("+x+"px) translateY("+Math.abs(C)+"px)":w.style.transform="rotateX("+b+"deg) translateZ("+x+"px) translateY("+C+"px)"}),window.requestAnimationFrame(T)}else console.log("end"),l.removeChild(m.container),a()}}o(T)},mod.namespace("SceneSwitcher.EffectShuttersAcross",EffectShuttersAcross);var EffectDoor=function(){EffectDoor.__super__.constructor.apply(this,arguments)};EffectDoor._name="door",TransitionEffects._registerEffect(EffectDoor._name,EffectDoor),mod.extend(EffectDoor,EffectCanvasTransition);var proto$B=EffectDoor.prototype;proto$B._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,_=null,l=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,f=e.width,u=e.height,p=n._fromPrevious,v=function(y,E,g){if(!document.getElementById("shuttersAnimation_door")){var b=document.createElement("style");Mugeda.scene._stage,b.id="shuttersAnimation_door",b.innerHTML="            @keyframes DOOR_ANIMATION_BACKGROUND_ENTER{                0%{                    transform-origin:center center 0;                    transform : scale(.5);                }                100%{                    transform-origin: center center 0;                     transform: scale(1);                }            }            @keyframes DOOR_ANIMATION_BACKGROUND_LEAVE{                0%{                    transform-origin:center center 0;                    transform : scale(1);                }                100%{                    transform-origin: center center 0;                     transform: scale(.5);                }            }            @keyframes DOOR_ANIMATION_ONE_ENTER{                0%{                    transform: rotateY(0) translateX(0px) translateZ(0px);                    transform-origin: right center 0;                    opacity : 1;                    left : 0;                }                100%{                    transform: rotateY(25deg) translateX(-"+y+"px) translateZ(40px);                    transform-origin: right center 0;                    opacity : .3;                }            }            @keyframes DOOR_ANIMATION_ONE_LEAVE{                0%{                    transform: rotateY(25deg) translateX(-"+y+"px) translateZ(40px);                    transform-origin: right center 0;                    opacity : .3;                }                100%{                    transform: rotateY(0) translateX(0px) translateZ(0px);                    transform-origin: right center 0;                    opacity : 1;                    left : 0;                }            }            @keyframes DOOR_ANIMATION_TWO_ENTER{                0%{                    transform: rotateY(0) translateX(0) translateZ(0px);                    transform-origin: left center 0;                    opacity : 1;                    left : "+y+"px;                }                100%{                    transform: rotateY(-25deg) translateX("+y+"px) translateZ(40px);                    transform-origin: left center 0;                    opacity : .3;                }            }            @keyframes DOOR_ANIMATION_TWO_LEAVE{                0%{                    transform: rotateY(-25deg) translateX("+y+"px) translateZ(40px);                    transform-origin: left center 0;                    opacity : .3;                }                100%{                    transform: rotateY(0) translateX(0) translateZ(0px);                    transform-origin: left center 0;                    opacity : 1;                    left : "+y+"px;                }            }        ",b.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(b)}},h=function(y,E){var g={};g.items=[];var b=document.createElement("div");return b.style.position="fixed",b.style.left=Math.abs(d._left)+"px",b.style.top=Math.abs(d._top)+"px",b.style.width=f*c+"px",b.style.height=u*c+"px",b.style.perspective="200px",b.style.transformStyle="preserve-3d",b.style.zIndex=9999,l.append(b),function(){var w=document.createElement("canvas");w.style.position="absolute",w.style.top="0px",w.style.left=0,w.width=f*c,w.height=u*c,b.append(w);var x=w.getContext("2d");p?(x.drawImage(e,0,0,t.width,t.height,0,0,f*c,u*c),w.style.animation="DOOR_ANIMATION_BACKGROUND_LEAVE "+E/1e3+"s ease-in"):(x.drawImage(t,0,0,t.width,t.height,0,0,f*c,u*c),w.style.animation="DOOR_ANIMATION_BACKGROUND_ENTER "+E/1e3+"s ease-in")}(),function(){var w=document.createElement("div");w.style.position="absolute",w.style.top="0px",w.style.left=0,w.style.width=f*c/2+"px",w.style.height=u*c+"px",w.style.overflow="hidden",b.append(w);var x=document.createElement("canvas");x.style.position="absolute",x.style.top="0px",x.style.left=0,x.width=f*c/2,x.height=u*c,w.append(x);var C=x.getContext("2d");p?(C.drawImage(t,0,0,f/2,u,0,0,f*c/2,u*c),w.style.animation="DOOR_ANIMATION_ONE_LEAVE "+E/1e3+"s ease-in"):(C.drawImage(e,0,0,f/2,u,0,0,f*c/2,u*c),w.style.animation="DOOR_ANIMATION_ONE_ENTER "+E/1e3+"s ease-in")}(),function(){var w=document.createElement("div");w.style.position="absolute",w.style.top="0px",w.style.left=f*c/2+"px",w.style.width=f*c/2+"px",w.style.height=u*c+"px",w.style.overflow="hidden",b.append(w);var x=document.createElement("canvas");x.style.position="absolute",x.style.top="0px",x.style.left="0px",x.width=f*c/2,x.height=u*c,w.append(x);var C=x.getContext("2d");p?(C.drawImage(t,f/2,0,f/2,u,0,0,f*c/2,u*c),w.style.animation="DOOR_ANIMATION_TWO_LEAVE "+E/1e3+"s ease-in"):(C.drawImage(e,f/2,0,f/2,u,0,0,f*c/2,u*c),w.style.animation="DOOR_ANIMATION_TWO_ENTER "+E/1e3+"s ease-in")}(),g.container=b,g};v(f/2*c);var m=h(2,s);r.getContext("2d"),console.log("draw");function T(y){if(!window.stopLoop){_||(_=y);var E=y-_;E<s?window.requestAnimationFrame(T):(console.log("end"),l.removeChild(m.container),a())}}o(T)},mod.namespace("SceneSwitcher.EffectDoor",EffectDoor);var EffectTease=function(){EffectTease.__super__.constructor.apply(this,arguments)};EffectTease._name="tease",TransitionEffects._registerEffect(EffectTease._name,EffectTease),mod.extend(EffectTease,EffectCanvasTransition);var proto$A=EffectTease.prototype;proto$A._draw=function(e,t,r,a){var n=this,o=n._stage._renderManager.constructor.requestAnimationFrame,s=n._duration,_=null,l=Mugeda.scene.dom,c=Mugeda.scene.width/e.width,d=n._stage._fullScreenRect,f=e.width,u=e.height,p=n._fromPrevious,v=10,h=function(E,g,b){if(!document.getElementById("shuttersAnimation_tease")){var w=document.createElement("style");Mugeda.scene._stage,w.id="shuttersAnimation_tease",w.innerHTML="            @keyframes TEASE_ANIMATION_RIGHT_ENTER{                0%{                    left : 0;                }                100%{                    left : "+E+"px;                }            }            @keyframes TEASE_ANIMATION_LEFT_ENTER{                0%{                    left : 0;                }                100%{                    left : -"+E+"px;                }            }            @keyframes TEASE_ANIMATION_RIGHT_LEAVE{                0%{                    left : "+E+"px;                }                100%{                    left : 0;                }            }            @keyframes TEASE_ANIMATION_LEFT_LEAVE{                0%{                    left : -"+E+"px;                }                100%{                    left : 0;                }            }        ",w.type="text/css",document.getElementsByTagName("HEAD").item(0).appendChild(w)}},m=function(E,g){var b={};b.items=[];var w=f*c,x=u*c,C=f,M=u/E,A=C*c,O=M*c,S=document.createElement("div");return S.style.position="fixed",S.style.left=Math.abs(d._left)+"px",S.style.top=Math.abs(d._top)+"px",S.style.width=w+"px",S.style.height=x+"px",S.style.zIndex=9999,l.append(S),function(){var L=document.createElement("canvas");L.style.position="absolute",L.style.top=0,L.style.left=0,L.width=w,L.height=x,L.style.zIndex=-1,S.append(L);var D=L.getContext("2d");p?D.drawImage(e,0,0,t.width,t.height,0,0,w,x):D.drawImage(t,0,0,t.width,t.height,0,0,w,x)}(),function(){for(var L="RIGHT",D=0;D<E;D++){var $=document.createElement("canvas");$.style.position="absolute",$.style.top=D*O+"px",$.style.left=0,$.width=A,$.height=O,$.style.zIndex=10,S.append($);var R=$.getContext("2d");p?(R.drawImage(t,0,D*M,C,M,0,0,A,O),$.style.animation="TEASE_ANIMATION_"+L+"_LEAVE "+g/1e3+"s ease forwards"):(R.drawImage(e,0,D*M,C,M,0,0,A,O),$.style.animation="TEASE_ANIMATION_"+L+"_ENTER "+g/1e3+"s ease forwards"),L=="RIGHT"?L="LEFT":L="RIGHT"}}(),b.container=S,b};h(Math.floor(Math.floor(f)*c));var T=m(v,s);console.log("draw");function y(E){if(!window.stopLoop){_||(_=E);var g=E-_;g<s?window.requestAnimationFrame(y):(console.log("end"),l.removeChild(T.container),a())}}o(y)},mod.namespace("SceneSwitcher.EffectTease",EffectTease);var RenderObjectSceneSwitcher=function(e,t){var r=this;r._counter=RenderObjectSceneSwitcher.counter++,r._movieClip=e,r._movieClipRenderObject=t;var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAACLCAYAAAAQ7RdAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE1MjY4NkY5Mjg0OTExRTk4MTcxRDVDQzAyOTIxQUFEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE1MjY4NkZBMjg0OTExRTk4MTcxRDVDQzAyOTIxQUFEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTUyNjg2RjcyODQ5MTFFOTgxNzFENUNDMDI5MjFBQUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTUyNjg2RjgyODQ5MTFFOTgxNzFENUNDMDI5MjFBQUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7fISmaAAAWoklEQVR42uydC3BUVZqAb3eaJMgjRsPgrlo6q7NLweLWsMuMLutULWuNo1MzaqkjyEN5GAMpEywLYSm1oEpWtqRgqEKoYg1aIoWb6DpZWZjZCrUCGsAgSQgBzISHCHl1Xp2k8+rXnp+ck/w5ud333u5OP07/f9VfSQXSuefc853/cc75jy0QCGgkCSG3MP0l079jOp1rDlMP0yamjUxvMP2K6WnqrsQQB3VBXAUgWcH0Uab/aOF9tDItZVrC9E/UjfETG1mguMhtTDcwzWeaGeFnnWS6imkVdSsBlAryItOdTCdF+XP3Mi1g6qYuJoBUlIl8kC8Yx79xiemvmX5H3U0AqSQzmf6B6U9i8Ld6mD7H9BB1+/iLnbpg3OVnTE/FCB6QyUz/h+lK6nqyQMkuf830Wz6o4yHPMz1Ar4EAStaYp5Lp38TxGSCh8A9ML9LrGCeAZs6cGdEH1NbWUi+OFciwHWH68wR4lhamv6DEgr7MmjWLYiCCJ6T8iOnxOFtCSiKQmJKpTI8lEDxCphFEBFAywPN/TOck6PMBROVM/5ZeFQFE8IQnsIXoKEFEACWSZGtDO6TnJMnz3saf96f06gigRIAHZvTZSfbcWdxiEkQEEMETAUSQ8PgZvUoCKNaSwwPy2UneDtghcYQgIoBiDQ+khGco0h6CiACKmcAJ0hMKwYMhgphoHr1iAmg84YHs1f2Ktg9qMvwvQUQAETyRQVTG9J/plRNA0ZI7taG6A/enSHuhRsMhgogAihY8YHnuTbF2A0R/1IaqBZEQQGHJPdzy3Jui7U9n+t8EEQEULjxgee5K8X4giAgggicKEB1k+hvqCgLISO7jbhvBM1qgYup/EUQEkBE8YHnuoK4ICtHnTJ+mriCAZIGTmicIHkNJY/qfBBEBJMMDe9umUVcQRAQQwRMriIq1obpzBFCKChxrLid4Iho7+1IdInsKwwOH4W4jDiIePx8zXUYAETwk4YmNaVGqQpRqAEENgK8InnGBCK5uySOA1IYHDo1l0XgfN9mdahClCkBwXPkYwUMQEUDhwQNn/ifT2I4pRIUEEMFDEr78PhUgUhmgeTzmIXjiC9E6Aig54YECGbfQGI67bFEZIhUBgrP8ZQRPwkG0iQBKDnigIEYmjdmEk7eYvkMAETwk4ct6ptsJoMQTOLP/R4InKWSNShDZFYEHCl+k09hMKoh2EUDxFzijf5DgSUpZpQJE9iSHBwpdOFQdYXV1dV0ej8dPEBFABI9Fqaqqan/qqafOvPbaa2dTAKIiAih2AmfxP1cZnoqKitalS5fWwPdHjhzpfOWVV6oHBwd9CkO0PFkhsichPFDQIk1leFasWFHr8/kC4mfHjx93FRQUnGUQ+RWHCE632ggggicsKS8vd8rwSBBV9/f3q2yJFmlDdRZsBFB0BQpXFKsOT15e3nk9eDBE+fn5BBEBZBmefZrCO8ePHj3anJubWxsKHiEnT57sShGIipPhnSf6Ay7jfrHS8DAgLgQCAdO/AxC9/PLLlQwir8IQPcNddjsBFD48RckWVFqRsrKyxtWrV1uCR8jp06d7mMtX3dfXpzpEnyey624neOIHT2Fh4XeRfEZFRUX3ihUrKt1ut0dhiH6rDa35pRFA5gQKUuxVGZ5Dhw41RAqPkOrqavdLL71UxSDyKg4RbNmaQAAZw7Nb4YFwE561a9fWmfzvAbMQ5ebmqm6JfqUNbRqeQADpyxrV4SktLb1uAE+AKyyY+pD60b/pSlVVlfuFF16o7O7uJohSECCo3rJddXg2bNhQbwIeAAYgGGDaz3WA/8wXCqILFy70Llu2LBUggrNfGQTQCDy/Vxme4uLiaybh8XJg3Ey7mXZx7WHaZxaipUuXnnG5XIMKd+l8bej0cUaqA/SvqsNTUlJybdOmTZdNwCOsDsDSybSVaTNTJ9N2DlIv00EjiOrq6vpefPHFys7OTtUhinvxmHgCBEUm/k1lePbt23d148aNVuABq9PBwbnB9DrTH5g2cqBc3BKZggjcOcUh+iemh5lOTDWAoDrLJpXhKSoqurxly5arFi0Phuca0++5hg0RuHPt7e0DCnf1L7ShGoATUwUggGe9yvDs3r27ftu2bdcswtPO4WlEluc6UoCqibt0piG6dOlSP4OoUnGIwBJBFdpJqgOUEvDs3LnzugE8fsltA3haODwN/GsT12bp5yIu6jQbE125cqX/+eefP+N0OvsV7vqfa0N10KeoCtB21eHZsWNHnUl4vDoxTyMCRyQOOvnXVgmkJuTOmYLohx9+GFiyZEllCkAElmiqagABPGtUh2fPnj0NJuHpR5anmQOhB0YfV5GZa5FAI4jGyt/HEqJYALRLZXhgJ/W77757MUx4sNsGILVpQ+lqEd94dJIMzkgt0cKFC880Nzf3KQzRHG3oKs/sZAcI4FmlMjxbt269+OGHHzZFCI8AQcBzc8G0trYWL7ACRG4Okfy7lmKixsbGwUWLFlUqDtFsbegy6exkBahIcXgCmzdvvhABPA06lqdXgkcLAlEnskQ3EICd/N9NQbRgwYIzDQ0NvQRR4gEE8CxXHJ6LBw4caI7A8jTquG1eDI8QCaJ+CSK9+MkURC0tLR6wRCkAUTnTnGQB6D9Uhsfv9wc2btx43gI8fTqWRyQBDOHRgcjHIcIxUZOOOydDFEhhiGYwPT4eEEUTIDgAB/ULVqoMz6ZNm85/+umnTgvw4EVSDE+7WXiCQIRjIj1LJEOkhYLoueeeO3Pt2jW34hCdYDo9EQECeKByziJVex8q5rzxxhvnLMLTza1Ms+S2tQdJGBiKAURyiruTAzxgBFF7e7sXLJHiEN2vDWXnpicaQMWqw/Pmm2+eKy0tbQvDbcMLoCLmcSF4/GbhsQCRsHROFBOZgmjBggWVV65c6SaIYgAQe5Hw+1B66BmF4fGvW7euxiQ8Hg5Gl2R5Gnj8I2Ke/nDhseDO4V0NGCJvKIhcLhdYouoUgOgk07viBhCC53eKw3Pu8OHD7Sbh6eeAhEpVRwxPCIh6g7hzGKJBguim3Mv0GOvDO2MOEPujUGLoc5UtD1wp8uqrr54NAx5heW5o+qnqqMCjA5E3CEQN4ULE3Lmq+vr6LoUh+jFYItaH98QMIA4P1On6rcrwwL08cLWIBbfNheBpkBIG3SjbFjV4JIg0TX+xNVSKOyREPT09PrBEikMEbtxX4UJkt/iioBrKQZXhgXt44D4eE/D4pJinXSfb1jbe8ASBaFDT37HQGA5ECxcurLp48aJLcYjAEt03bgBxeKCk0K9Uhgfu4YFbEEzA45XgaZKybfCznljAYxKiYJbIMLHQ29vrX7JkSbXiEN3BLdF94wIQwRMUnjYJnpZYuG0WIXJJEAlL1MFjJgFRgCCyBpHd5EvZpzI8cFXIqlWrqk3C4+GDrkuKeWR4+mMNjwWIGiWI8DpRSIggJmKf36E4RCdYG38SFYDYB8FZnsUqwwP37cCVIRZiHgCkVUoYJAQ8BokFGSI9dy4kRKy//HB/q+IQTWN6mLVxSkQAsQ+AiifvqtpLcDUI3LNjEZ4uBM8NBE9HosCjA5FPB6JGHXfONESLFy8+CzeJKwwRuHF/CBsg1vlQ4QS26DhUhScvL68K7tkJEx4RkCeU5TEBES7cGLY7x2LGwLJly2oUh2g+678t4VogKHw4XcVegVsM4F6dCOGR13kSDh4MEX8mnzY6O9eqjc3OEUSjZR3rux9bAoj9wl9pitYxAHjgPh24EsRCwsClja6MI7ttA4kKj441kiFyBoGoh08KhhBBTFRRUdGqMERvWrVA/840XbVegFsL4AoQi/DgVDXe29aO4PEkOjwhIHIFsUQisSAsa1CIYLc6s+i1CkO0JJgVCgbQMyrCA7Wi4faCMOGRLU8PgieQDPCYhEhvx8KAWYjKy8udCgIEeYBCUwCxzv0X1VoPV31AjWiT8AxKbhu2PEkPj4E7h9srJgtLEOXl5Z1XFKLFZi3QL1WDB676gELrJuEJtjHUqeO2JSU8QSDqDQERnjRSFaLbWX/NNwPQg6q0GAqqL1q06EwY8Oi5M+0qWB4TEOH2N0runGmIcnNza48ePdqsGES/MwNQjirwwK0EUFg9DHj01nlGDR4V4LEIUYsViKDoZH5+/gXFIJpjBqBbk72VUPsZbiMIE54mCZ4OleExcOeckbhzANHq1asvlJWVNSrSTbeaASg72eGBAupQA9oiPE4tdLZNWXiCQBSsX5xWIAIpLCz8ThGIso0AgvJUE5O1dVDrGQqnW4AHz7TNqQyPAUQRJRYUgijHjAVqSVZ4oK4Z1Hy2AE+wwdGZivCYgMgwNjSC6NChQw1J3DW93MgMi0OyPmnMb3XZbLYfJVOroCwtwAMVNsOEJ2S2KZXgwRDNmjVL9Jfcj1oIUBxoPI2RtWvX1sHXxx9//C+TrU8YG528XYGgAPl8vk6Hw6E6PNARbToJgzGLhqkIjwmIQgFkCiIo3PLEE0/clYQA2bGltaOGwvcTent765KlQVCGFmo6W4DH0op7KsNj4M6ZWmQOBdmGDRvqS0tLrydTX3i93jY+Odj0YiAoV5VRX19fnizwgOWBcrQW4DG954vgCQqR0TYnZSFiY+0YGBnOjQ0DlMb/IXPHjh3nEr0hUDETajiHgCcQxPIEq04jtu4TPMYQWd5oawRRSUnJtWTog7179/5JGzqlkIYt0LD7xnTi6dOn4bqLPycyPFDYAipnhoBH08wfHsO3FxA8kUEkjnpYgmjjxo2XDxw4cDXBrc/F/fv3w1jKRFZo2AIJgOAfJ33wwQeHE7ERUCETys2ahMfy8WWCJ2qWqNlqTPT2229fLSoqupyo7f7666/hbqHJ2tA66QRuhWzCAqVx03QToI8++uhGTU3N5USDBywPVMo0gEevCo1hAQ2CJyKIzJzYvXnoMBRE27Ztu5aIELEJ27V+/fpvgQ09C2RHMVAGJ2wiM6unkhQey3XQCJ6IIQpVM2LMsXcjiHbv3l2fSG395JNPBDwCoHSejbOnTZs2zc5/COYJNsvBImpOa2vrLZmZmRPmzJkT10VVqIQJ8Ljdbr8FeILFPOIqeIInCpKfn6/t2rVLuGZ+rj4EiQ3F2GlowrYhHSPffPNNl91u986dO/e2eLeRceAuLCz8yufz9fKQoBuNIY9dxwoJdbDZ4Gp5eXlzPOGBcrJQETNK8FCqOjaWSF4n0i39FcoS7dy58/qOHTviuibp9Xr9r7/++reDg4MObnUysPXBMZANgeTAs0RBQcHF77//vicOL6YDLI9JeOQrPQxvIyB4Yu7O6RafDAXRnj17GuIJ0ebNmy+cOnWqGxmXdJRAGAZIkyDCMNn6+vr8eXl5NbG8fJY9tBNKJUEFzBDwBLtUyvA+HIInZtk5U+WPExGiL7744npxcXGL5IKmSe6oTW839hi/lMEz8OSTT3577NixcXXn4Bp55lPXL1++vNYEPKEu2A16IxvBExOIvEHcuYZwIXrrrbdqwaUa7zbAIcCPP/746vr16+sl44INzLDYdQanHw3S4UYNDAz4V61adWH79u03NwJG+8HhCHZubm7le++9F2prhx48nZrJi3UJnrhD1BiuJfrss8+cK1eurITyZOP17FDuec2aNdXvvPPOVZ1QQdN7PjuCxid91W3Q+++/3/Doo4+ePHjw4A0oHhHpQzMwffv377/62GOPfXPixIkui/B08JdheLU7wZMQEBneoxQKooqKiu5nn332NJO2aD/z+fPnO59++umKsrIyvVsn/JIOGxjbzJkzISiCaxzgtB1sL4eq9FCFEc5rQBrxFg3t/cFy9913ZxQUFNzz8MMPT5syZcoEKw8MM8nx48dbtm7derW5udloVjF7pXurFPMQPHGUWbNmiUV6SEzB+uJUPqag5vpfcJ3OfyZW+R16rpIsc+fOncLcrPtnzJiRFckzwkFM5lXVs5inLQg4Ir4G6K8wrecJKhh7XQAQPDAsEN3O9E4Oz338+9t5wwwPCD344INTH3nkkdsfeOCBrJycnIzs7Ox0JjfBY/GMl7log06nc+Ds2bOdR44caYfZxKxbKiUMgm0MbZPhIXASBqLhvZbRhAhk/vz5tzKPaNq8efNy2JjLMOuqMSvW/uWXX7aWlJQ4Q3hSXj6e2vg4u8z1Bp+sewCgNP7Q2bwx93KAwBpN4w1ON9MYWbKyshws8Au43W5fuDGdSXhapYQBwZO4EMGifZYE0R0IoilWIRIye/bsSQ899FDW9OnTM9gkng4TOcDR0dEx2NraelPPnTvXY3ATIR57Hu5iOjk0l7gVauTuZ68DxT0eHtD1aiNFxUX2ynJjQEJs+owUnkbJ8rgktw1OUtLITRwRcbZHJyAPaPrHxC1DVFNT4waN4jOLBXrBhdiBMDzOHMjXEwDBA/Twr308BpqgWbuQOBoPL8PTEcLy9OJG0XhNGohkgGS48MZNW5yeVawzYiY8MkD4yG4PH5Qubk4ncRdOLCDZYgxPj2R5GgkeJS0Rfvfye4w1RPLk3cMzidgzuxmWOKRG9XOfr5PP+BigNG10DYVYwtOik20jeJIfokAQl04PrlhBhLO9skHBJ5f92ALJKWIXD5ImcxcOb6BzjBNEevB0SJanWaQPCR4lIBLrRJpJkMYbIr3b2IUxcWljLxwblZ6Wi0ZM5PDA1wwEkDYOEOEOlRdJmyR4XLxxBI96EAVMvE/HOIUS8vN08zHYzlWetEeBIO9sFrN/JodngvTQgXAzcyGo93G6ccwjEgbNyG0jeFLHEskxUUAbKT0dTYiwWyl2TnTwMdeqhdhFDgfqtCAmVENWZtQObW3swahwrBE+iDUoUd8iuW1tBE/KwCRvmdEbg3Zp8rZF8Dc1HbdN7N1rQjF3lzay5Wh47OkBFIr+UA9stjH4ofFxBLFfqgUlC0RxCoIndSGSQZJPtIY7iWPrh0MXPAabdRJWfjMAyRZCPqorbzg147viTaselOUQgRouStGELE83wZPSEOGxFizJoJkESfyOvHkAF93Elkev9NmYgCxYTKJJwZ28WwE0SxvZvyRiJYeOe4c3g3q1sQtUola18DnFvjaRNvQQPCkXE/Vro4/X+JC1EJPvVJ7oypTGnrzcgsGRJ3E3ivlbufVp0UY2Jo+qGyiPQYdBYD+oY+oEQGAZsnkjJvGG6EEkdwyGUOTYcbajUxtZtBJneQie1IQIT7547PTx8QE6BUGULmXp9CZwH4KwF3lA7WgCF2GDWzM4r+QwkR3DJg+nmbv4HxZWaJJkicTCa0CyYAOoA7rQ57gQOMJlMzwjQqI0RB6d8dOPXH8XGn8yRNgS+aUJXF4k7UDaqY1U3jEcgw4TDfFpY2tNY79xMmrARNQIcYZck1y3Pq5i02o3MqMCHE8wk0mSUhBpKOuFvSAcO0/VRnbM6IUSegagTxu9RcfFP69bG7tdJ+QYdFiYDWSKsRXJ5A+fjlReNxK/J8ynmEn60QN7EPEawUMQSRDJXkwXmryFBcoMAdAgAhBP4m7+PT6B4DMzBh0WG+KTHqZfGyn3k44ePE0HIB/qAA+CyYMe2EfgkBiMPbxjRcTRGcjzwXGQ7MJ5dCbxAW2k9LBHC1HOIBKANCkYk7Mi/QgauQKlbMV8kvrJ4pCEMfY8yJo40OQ9QRqDcvbNi7whL9KwxqEjSrOCV9Nf5NJzBTWJcIKGJFKQcHXdNDQWseitYfojHYuOKDVIBoSEJNaunZBQ+zP1dtdEJP8vwADMYETgUmzUWQAAAABJRU5ErkJggg==",n=e._sceneSwitchOpts;a=n.arrowImg||a,e&&e._aniData&&e._aniData.pageInfo&&e._aniData.pageInfo.turnIcon&&(a=""),r._options={transition:n.transition||RenderObjectSceneSwitcher._TransitionType._LADDER,direction:n.direction||RenderObjectSceneSwitcher._Direction._VERTICAL,realtime:n.realtime||"follow",showArrowIcon:n.showArrowIcon==null?!0:n.showArrowIcon,showAudioIcon:n.showAudioIcon==null?!0:n.showAudioIcon,exit:n.exit||"",loop:n.loop==1,arrowImg:a,duration:n.duration||600,onpage:n.onpage||null,beforePageChange:n.beforePageChange||null,behind:n.behind||null},r._options.duration*1===0&&(r._options.duration=1),r._additionOption=null,r._busy1=!1,r._busy2=!1,r._uiIninted=!1,r._nodes=[],r._cancelWaitResource=null,r._taskList=[],r._pagingStatus=null,e._addEventListener("scenechange",r._updateArrowStatus.bind(r)),e._parent.addEventListener("stageRotateChange",r._updateArrowStatus.bind(r))};RenderObjectSceneSwitcher.counter=0,RenderObjectSceneSwitcher._TransitionType={_LADDER:"ladder",_COVER:"cover",_APPEAR:"appear",_FADEIN:"fadein",_BOX:"box",_FLIP:"flip",_PAGING:"paging",_CENTERROTATE:"centerRotate"},RenderObjectSceneSwitcher._Direction={_VERTICAL:"vertical",_HORIZONTAL:"horizontal"},RenderObjectSceneSwitcher._PagingStatus={_NEXT:"next",_PREVIOUS:"previous"},RenderObjectSceneSwitcher._DIR={_ENTER:0,_LEAVE:1},RenderObjectSceneSwitcher._ACTION={_START:0,_END:1};var proto$z=RenderObjectSceneSwitcher.prototype;proto$z._getPrevSceneIndex=function(e){var t=this,r=t._movieClip;if(e==null&&(e=r._scenes.indexOf(r._currentScene)),!(e===0&&r._haveLoadingPage))return e-=1,e<=(r._haveLoadingPage?0:-1)?t._options.loop?r._scenes.length-1:null:e},proto$z._getNextSceneIndex=function(e){var t=this,r=t._movieClip;if(e==null&&(e=r._scenes.indexOf(r._currentScene)),!(e===0&&r._haveLoadingPage))return e+=1,e>=r._scenes.length?t._options.loop?r._haveLoadingPage?1:0:null:e},proto$z._isBusy=function(){return this._busy1||this._busy2},proto$z._initUI=function(){var e=this;if(!e._uiIninted){e._uiIninted=!0;var t=e._movieClipRenderObject,r=t._parent,a=r.getNode(),n=a.parentNode,o=r._displayObject,s="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(180deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(180deg) translateY(-16px);}",_="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(270deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(270deg) translateY(-16px);}",l="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(0deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(0deg) translateY(-16px);}",c="0% { opacity: 0; "+Browser$1.prefix.css+"transform: rotate(90deg) translateY(0);}  50% { opacity: 0.75;} 100% { opacity: 0; "+Browser$1.prefix.css+"transform:rotate(90deg) translateY(-16px);}",d=StyleSheetManager.insertKeyframes(s),f=StyleSheetManager.insertKeyframes(_),u=StyleSheetManager.insertKeyframes(l),p=StyleSheetManager.insertKeyframes(c),v="0% {"+Browser$1.prefix.css+"transform: rotate(0);} 100% {"+Browser$1.prefix.css+"transform: rotate(360deg);}",h=StyleSheetManager.insertKeyframes(v),m="z-index: 20; position: absolute; width: 37px; left: 0; right: 0; margin: 0 auto; ",T="z-index: 20; position: absolute; width: 37px; top:50%;margin-top:-12px;",y=e._options,E=y.arrowImg,g=E==="";try{E=g?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=":Mugeda.currentAni._resource.dir.getFullPath(y.arrowImg)}catch{}var b='<img src="'+E+'" style= "'+(g?"visibility: hidden;":"")+" display:none;"+m+Browser$1.prefix.css+"animation: "+d+" 2s infinite; top: 10px; "+Browser$1.prefix.css+'transform: rotate(180deg);" /><img src="'+E+'" style= "'+(g?"visibility: hidden;":"")+" display:none;"+T+Browser$1.prefix.css+"animation: "+f+" 2s infinite; right: 10px; "+Browser$1.prefix.css+'transform: rotate(270deg);" /><img src="'+E+'" style= "'+(g?"visibility: hidden;":"")+" display:none;"+m+Browser$1.prefix.css+"animation: "+u+" 2s infinite; bottom: 10px; "+Browser$1.prefix.css+'transform: rotate(0deg);" /><img src="'+E+'" style= "'+(g?"visibility: hidden;":"")+" display:none;"+T+Browser$1.prefix.css+"animation: "+p+" 2s infinite; left: 10px; "+Browser$1.prefix.css+'transform: rotate(90deg);" /><div style="'+m+"display:none;"+Browser$1.prefix.css+"animation: "+h+' 1s infinite linear; border-radius: 100%; border:2px solid #fff; border-top-color: rgba(255,70,0,0.6);border-left-color: rgba(255,70,0,0.6); width: 16px; height: 16px;"/>',w=document.createElement("div");w.innerHTML=b;var x=[function(R){e.prevPage()},function(R){e.nextPage()},function(R){e.nextPage()},function(R){e.prevPage()}],C=Array.prototype.slice.call(w.childNodes,0);C.forEach(function(R,I){e._nodes.push(R),n.appendChild(R),R.addEventListener(Browser$1.InputStart,x[I])});var M=!1,A=!1,O=null,S=null,L=0,D=0,$=void 0;o._addEventListener("switchcannel",function(){M=!1,A=!1}),o._addEventListener(Browser$1.InputStart,function(R){var I=e._movieClipRenderObject._currentScene;I.scrollInertia&&$.endInertia(),M=!0,O=R._getInputX(),S=R._getInputY(),L=new Date().getTime()},!1,-50),o._addEventListener(Browser$1.InputMove,function(R){if(M||A)var I=R._getInputY();if(M){var P=t._currentScene,N=I-S;N<0&&o._fullScreenRect._height-P._scrollTop>o._stageHeight-1||N>0&&P._scrollTop>-1||o._scaleMode==="width2"&&(M=!1,A=!0,o._renderManager._forceCheckHash.push(P),D=P._scrollTop,$=new Inertia,$.start(new Point(0,S)))}if(A){$.add(new Point(0,I));var B=R._getInputY()-S;P=t._currentScene,P._scrollTop=D+B}},!1,-50),o._addEventListener(Browser$1.InputEnd,function(R){for(var I=R[R.type+"MugedaHookSource"],P=(R._originEvent||{}).target;P&&P!=document.body&&P.classList&&!P.classList.contains("vr_panorama");)P=P.parentElement;if(!(I==="vr"||P&&P.classList.contains("vr_panorama"))){if(A){A=!1,$._startIterate();var N=e._movieClipRenderObject._currentScene;N.scrollInertia=$}if(M){M=!1;var B=new Date().getTime()-L;if(B>2500)return;var j,V;j=R._getInputX()-O,V=R._getInputY()-S,e._options.direction===RenderObjectSceneSwitcher._Direction._VERTICAL?V>32?(M=!1,e._options._scrollDisabledForward||e.prevPage(),R.stopImmediatePropagation()):V<-32&&(M=!1,e._options._scrollDisabledAfter||e.nextPage(),R.stopImmediatePropagation()):j>32?(M=!1,e._options._scrollDisabledForward||e.prevPage(),R.stopImmediatePropagation()):j<-32&&(M=!1,e._options._scrollDisabledAfter||e.nextPage(),R.stopImmediatePropagation())}}},!1,-50)}};var checkResource=proto$z._checkResource=function(e,t,r,a,n){var o=this,s=t._startFrame,_=s+t._numFrames-1;if(e.checkFrameResourceLoaded(s,_))o._cancelWaitResource=null,a();else{var l=o._nodes[4],c=o._options.direction==RenderObjectSceneSwitcher._Direction._VERTICAL?0:3,d=o._options.direction==RenderObjectSceneSwitcher._Direction._VERTICAL?2:1,f=o._nodes[r?d:c];l.style.top=r?"":"10px",l.style.bottom=r?"10px":"",l.style.display="block",f.style.display="none";var u=function(){e.checkFrameResourceLoaded(s,_)&&(e._removeEventListener("framesLoadedChange",u),l.style.display="none",f.style.display="block",o._cancelWaitResource=null,a())};e.addEventListener("framesLoadedChange",u),o._cancelWaitResource=function(){e._removeEventListener("framesLoadedChange",u),l.style.display="none",f.style.display="block",o._cancelWaitResource=null}}};proto$z.nextPage=function(){var e=this,t=this._movieClipRenderObject;if(!e._isBusy()){e._cancelWaitResource&&e._cancelWaitResource();var r=t._displayObject,a=r._currentScene,n=r._scenes.indexOf(a),o=e._getNextSceneIndex(n),s=r._scenes[o];s&&checkResource.bind(e)(r,s,!0,function(){e._pagingStatus=RenderObjectSceneSwitcher._PagingStatus._NEXT,r.gotoAndPlay(s._startFrame,null,20),r._manual=!0},t)}},proto$z.prevPage=function(){var e=this,t=e._movieClipRenderObject;if(e._cancelWaitResource&&e._cancelWaitResource(),!e._isBusy()){var r=t._displayObject,a=r._currentScene,n=r._scenes.indexOf(a),o=e._getPrevSceneIndex(n),s=r._scenes[o];s&&checkResource.bind(e)(r,s,!1,function(){e._pagingStatus=RenderObjectSceneSwitcher._PagingStatus._PREVIOUS,r.gotoAndPlay(s._startFrame,null,20),r._manual=!0},t)}},proto$z._updateArrowStatus=function(){var e=this,t=e._movieClipRenderObject,r=t._displayObject,a=r._parent,n=r._currentScene,o=r._scenes,s=o.indexOf(n),_=e._nodes,l=e._options._scrollDisabledForward||e._options._scrollDisabledAfter||e._movieClip._haveLoadingPage&&s==-1,c=e._options.direction==RenderObjectSceneSwitcher._Direction._VERTICAL;l=l||r._getRoot()._renderManager._loadingPage.type=="firstpage"&&r._currentScene==r._scenes[0];var d=15,f=l?0:d,u=c?4:2;f&=u,e._getPrevSceneIndex(s)==null&&(f&=-2,f&=-9),e._getNextSceneIndex(s)==null&&(f&=-3,f&=-5),Math.abs(a._stageRotate-Math.PI/2)<.1?f=f<<1|(f&8)>>>3:Math.abs(a._stageRotate+Math.PI/2)<.1&&(f=f>>>1|(f&1)<<3),_.length&&(_[0].style.display=f&1?"block":"none",_[1].style.display=f&2?"block":"none",_[2].style.display=f&4?"block":"none",_[3].style.display=f&8?"block":"none")},proto$z._setAdditionOption=function(e){this._additionOption=e},proto$z._getDuration=function(){var e=this,t=(e._additionOption||{}).duration||e._options.duration;return t},proto$z._getDirection=function(){var e=this,t=(e._additionOption||{}).direction||e._options.direction;return t},proto$z._getTransitionType=function(e,t){var r=this,a=(r._additionOption||{}).transition||r._options.transition;return t===0&&e._haveLoadingPage&&(a=RenderObjectSceneSwitcher._TransitionType._APPEAR),a},proto$z._animateTransform=function(e,t,r,a,n,o,s){var _=this,l=(t||r)._parent,c=l._displayObject;if(e===RenderObjectSceneSwitcher._DIR._ENTER)var d=r;else e===RenderObjectSceneSwitcher._DIR._LEAVE&&(d=t);var f=n<a;_._pagingStatus===RenderObjectSceneSwitcher._PagingStatus._NEXT?f=!1:_._pagingStatus===RenderObjectSceneSwitcher._PagingStatus._PREVIOUS&&(f=!0);var u=this._transitionEffect;u._fromSceneRenderObject=t,u._toSceneRenderObject=r,u._duration=(_._additionOption||{}).duration||_._options.duration,u._direction=_._getDirection(),u._stage=c._getStage(),u._fromPrevious=f,u._start(e,function(){e===RenderObjectSceneSwitcher._DIR._ENTER?_._busy2=!1:e===RenderObjectSceneSwitcher._DIR._LEAVE&&(_._busy1=!1),o&&o(),_._taskList.push(function(){u._end(e,function(){s&&s(),d._parent._displayObject._dispatchEvent(d._parent._displayObject._renderedEvent)})}),_._isBusy()||(_._taskList.forEach(function(p){p()}),delete _._transitionEffect,_._pagingStatus=null,_._taskList=[])})},proto$z._enter=function(e,t,r,a,n,o){return this._animateTransform(0,e,t,r,a,n,o)},proto$z._leave=function(e,t,r,a,n,o){Mugeda.DataStats&&Mugeda.DataStats.entry({type:"updatePageTime",fromId:e._sceneInfo._guid,toId:t._sceneInfo._guid,toName:t._sceneInfo._name||"第"+(a+1)+"页",event:"leavePage"});var s=(e||t)._parent,_=s._displayObject,l=this._getTransitionType(_,r);return this._transitionEffect=TransitionEffects._getInstance(l,this),this._busy1=!0,this._busy2=!0,this._animateTransform(1,e,t,r,a,n,o)},mod.namespace("Render.RenderObjectSceneSwitcher",RenderObjectSceneSwitcher);var renderObjectMovieClip=function(){renderObjectMovieClip.__super__.constructor.apply(this,arguments);var e=this;e._scenes=[],e._currentScene=null,e._animtionClassName=null,e._aniamtionKeyframeName=null,e._prevScene=null,e._renderObjectSceneSwitcher=null,e._movieClipRenderObjectList=[]};mod.extend(renderObjectMovieClip,RenderObject);var proto$y=renderObjectMovieClip.prototype;proto$y._addChild=function(){var e=this,t=renderObjectMovieClip.__super__._addChild.apply(e,arguments);t._parentMovieClipRenderObject=e,t._parentMovieClipRenderObjectChild=t},proto$y._setDisplayInitState=function(){var e=this;renderObjectMovieClip.__super__._setDisplayInitState.apply(e,arguments);var t=e._displayObject;e._html='<div  ondragstart="return false;" data-type="movie-clip" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">{{childNode}}</div>',t._sceneSwitchOpts&&(e._renderObjectSceneSwitcher=new RenderObjectSceneSwitcher(t,e))},proto$y._buildFun=function(){var e=this;renderObjectMovieClip.__super__._buildFun.apply(e,arguments),e._node&&e._scenes.length>0&&e._parent._displayObject instanceof Stage&&e._renderObjectSceneSwitcher&&e._renderObjectSceneSwitcher._initUI()},proto$y._switchToCurrentSceneLeave=function(e,t,r){var a=this,n=a._displayObject,o=n._scenes.indexOf(e),s=n._scenes.indexOf(t),_=a._scenes[o],l=a._scenes[s];a._renderObjectSceneSwitcher._setAdditionOption(n._sceneSwitchOpts.customPagingOptions),a._renderObjectSceneSwitcher._leave(_,l,o,s,r)},proto$y._switchToCurrentScene=function(e){var t=this,r=t._displayObject,a=r._currentScene,n=t._prevScene;if(n!=a)if(t._prevScene=a,n==null)r._scenes.forEach(function(c,d){var f=t._scenes[d];f!=null&&(f._node==null&&f.getNode(),a==c?(t._currentScene=f,f._displayObject._setVisible(!0),f.render()):(n==c||n==null)&&(f._displayObject._setVisible(!1),f.render()))});else{var o=r._scenes.indexOf(n),s=r._scenes.indexOf(a),_=t._scenes[o],l=t._scenes[s];return _._displayObject._setVisible(!0),t._renderObjectSceneSwitcher._enter(_,l,o,s,void 0,function(){_._displayObject._setVisible(!1),e(),t._renderObjectSceneSwitcher._setAdditionOption(r._sceneSwitchOpts.customPagingOptions=null)}),t._currentScene=l,_}},proto$y._executeAppearAction=function(){var e=this,t=e._displayObject,r=t._actionAppearList;r.forEach(function(a){var n=a._displayObject,o=e._node;if(n._getRealVisible()){var s=a._behavior.type,_=a._behavior.param;if(s=="video"){var l=n._aniData.param||{};_.video_id=n._id,_.video_controls=l.hidePlayControls==1?0:1,_.video_continue_audio=l.continueAudio,_.auto=l.videoAutoPlay,_.clickStatus=l.clickStatus,_.hidePlayIcon=l.hidePlayIcon,_.video_name=l.name,_.video_mode="object",_.dom=o}if(s=="gotoPage"||s=="nextPage"||s=="prevPage"){var c=a._stage._displayObject._renderManager;c._listPendingActions=c._listPendingActions||[],c._listPendingActions.push(a)}a.doAction()}})};var RenderObjectShape=function(){RenderObjectShape.__super__.constructor.apply(this,arguments);var e=this;e._prevBitmapDataSrc=null,e._prevGraphicsHash=null,e._prevProgressRatio=null,e._prevHTML=null,e._updateMode="overwrite"};mod.extend(RenderObjectShape,RenderObject);var proto$x=RenderObjectShape.prototype;proto$x._refreshImage=function(e){var t=this,r=t._displayObject,a=r._resourceList;if(a!=null){var n=a[0];if(!(n==null||n._image==null)){var o=n._image.src;if(o!==r._prevImageSrc){r._prevImageSrc=o;var s=t.getNode();e&&(n._image=e),t._setDisplayInitState(),s&&(s.innerHTML=t._getHTML())}}}},proto$x.render=function(){RenderObjectShape.__super__.render.apply(this,arguments);var e=this,t=e._displayObject,r=!1,a=!1,n=t._getBitmapData(),o=t._graphics._hash,s=t._progressRatio;if(n&&e._prevBitmapDataSrc!=n._image.src&&(r=!0,e._prevBitmapDataSrc=n._image.src),e._prevGraphicsHash!=o&&(r=!0,e._prevGraphicsHash=o),e._prevProgressRatio!=s&&(a=!0,e._prevProgressRatio=s),r){var _=e._generateSvgStr(),l=_.match(/id\=\"(.*?)\"/);if(l&&l.length>1)var c=_.replace(new RegExp(l[1],"g"),"");else c=_;if(c!=e._prevHTML){e._prevHTML=c;var d=e.getNode();if(Browser$1.isTestEnvir)d.innerHTML=_;else{var f=d.querySelector("svg");f&&(f.outerHTML=_);var u=d.querySelector("div");u&&u.getAttribute("data-ios")&&(u.outerHTML=_)}d.style.display!="none"&&(d.style.display="none",d.trick=d.offsetHeight,d.style.display="block"),s!=1&&(a=!0)}}if(a){var p=e.getNode().querySelector(".path_"+t._id),v=parseFloat(p.style.strokeDashoffset);t._progressRatio<0&&(t._progressRatio=0);var h=p.style.strokeDasharray;h===""&&(h=t._aniData.param.arcLength||1e4,p.style.strokeDasharray=h);var m=parseFloat(h)*(1-t._progressRatio);v!=m&&(p.style.strokeDashoffset=m),t._progressRatio==0?p.setAttribute("stroke-linecap","none"):p.setAttribute("stroke-linecap",e._displayObject._aniData.param.lineCap||"round")}};var linearInter=function(e,t,r){return e+r*(t-e)};proto$x._redraw=function(e,t,r){r=r||1;var a=this;if(a._beforeRedraw(e,t)){var n=a._displayObject,o=n._graphics,s=o._actions;s.forEach(function(_){if(_ instanceof GraphicsSolidFill&&(n._hasProgress?e.fillStyle="rgba(255,255,255,0)":e.fillStyle=CanvasRender.getFillPattern(e,_)),_ instanceof GraphicsImageFill)n._hasProgress?e.fillStyle="rgba(255,255,255,0)":e.fillStyle=CanvasRender.getFillPattern(e,_,t._a,t._d,n);else if(_ instanceof GraphicsGradientFill)n._hasProgress?e.fillStyle="rgba(255,255,255,0)":e.fillStyle=CanvasRender.getFillPattern(e,_,t._a,t._d);else if(_ instanceof GraphicsStroke)e.strokeStyle=_._fill._color._getCssText(),e.lineWidth=_._thickness*r,e.lineCap=_._caps,e.lineJoin=_._joints;else if(_ instanceof GraphicsPath){var l=_._commands,c=_._data,d=n._progressRatio,f=l.length*d,u=Math.floor(f),p=f-u,v=0;e.beginPath(),l.forEach(function(h,m){if(!(m>u)){if(h===GraphicsPathCommand.MOVE_TO){var T=c[v++],y=c[v++],E=t._transform(T,y);e.moveTo(E._x,E._y)}else if(h===GraphicsPathCommand.CUBIC_CURVE_TO){T=c[v++],y=c[v++];var g=c[v++],b=c[v++],w=c[v++],x=c[v++];if(m==u&&p>0){if(l[m-1]===GraphicsPathCommand.MOVE_TO)var C=c[v-8],M=c[v-7];else l[m-1]===GraphicsPathCommand.CUBIC_CURVE_TO&&(C=c[v-12],M=c[v-11]);var A=p,O=linearInter(C,g,A),S=linearInter(M,b,A),L=linearInter(w,T,A),D=linearInter(x,y,A),$=linearInter(g,w,A),R=linearInter(b,x,A);w=linearInter(O,$,A),x=linearInter(S,R,A);var I=linearInter($,L,A),P=linearInter(R,D,A);T=linearInter(w,I,A),y=linearInter(x,P,A)}var N=t._transform(g,b),B=t._transform(w,x);E=t._transform(T,y),e.bezierCurveTo(N._x,N._y,B._x,B._y,E._x,E._y)}}}),e.fill(),e.stroke()}})}},proto$x._dispatchInputEvent=function(e){var t=this,r=e.type,a=e.target,n=t._displayObject,o=n._aniData.type,s=shapeTypes.includes(o),_=!s||a.nodeName.toLowerCase()=="path"||a.dataset&&a.dataset.mark&&a.dataset.mark=="path";if(_)RenderObjectShape.__super__._dispatchInputEvent.apply(t,arguments);else{for(var l=arguments,c=n._getRoot()._getRenderObject(),d=function(u){if(u._currentFrame!==void 0)var p=(u._getDisplayInfoByFrame(u._currentFrame)||{})._displayObjectList;else p=u.children;p=p.filter(function(x){return x._id!=n._id});var v=new InputEvent(r,e);v._stage=c._displayObject;var h=v._getInputX(),m=v._getInputY(),T=u;T._type=="scene"&&(T=t._renderObjectContainer._parent._displayObject);var y=new Point(h,m),E=T._getTotalMatrix();T._offsetMatrix&&(E=Matrix._multiplication(T._offsetMatrix,E));var g=E,b=RenderObject._findClickDisplayObject(p,y,g);if(b)if(b._type=="MovieClip"||b._type=="Sprite")d(b);else{var w=b._renderObject;w._eventProxyDom=w._node,RenderObjectShape.__super__._dispatchInputEvent.apply(w,l)}},f=n._parent;f._id!=1;)f=f._parent;d(f);return}},proto$x._applyActions=function(e){var t=this,r="",a=null,n=null,o=t._displayObject._hasShapeAnimation&&t._displayObject._resourceList&&t._displayObject._resourceList[0],s=!1;return e.forEach(function(_){if(_ instanceof GraphicsSolidFill&&(a=_),_ instanceof GraphicsImageFill)a=_,s=!0;else if(_ instanceof GraphicsGradientFill)a=_;else if(_ instanceof GraphicsStroke)n=_;else if(_ instanceof GraphicsPath){var l=_._commands,c=_._data,d=0,f="";l.forEach(function(D){if(D===GraphicsPathCommand.MOVE_TO){var $=o&&s?Math.round(c[d++]):c[d++],R=o&&s?Math.round(c[d++]):c[d++];f+=" M"+$+" "+R}else if(D===GraphicsPathCommand.CUBIC_CURVE_TO){if(o&&s){$=Math.round(c[d++]),R=Math.round(c[d++]);var I=Math.round(c[d++]),P=Math.round(c[d++]),N=Math.round(c[d++]),B=Math.round(c[d++])}else{$=c[d++],R=c[d++];var I=c[d++],P=c[d++],N=c[d++],B=c[d++]}f+=" C"+I+" "+P+","+N+","+B+","+$+" "+R}});var u=!1;if(t.getNode()){var p=t._node.querySelector("pattern"),v=t._node.querySelector("image");p&&v&&(u=a._updateDefs(p,v))}u||(r+=a._getDefs(t._displayObject));var h=t._displayObject._aniData.param,m="";if(h.lineType&&h.lineType!="solid"){var T=h.lineGap||4,y={dotted:[2,T],dashed:[12+h.lineWidth,T],dasheddotted:[12+h.lineWidth,T,2,T]},p=y[h.lineType];p&&(m='style="stroke-dasharray: '+p.join(",")+';"')}else t._displayObject._hasProgress&&(m='style="stroke-dasharray: '+(h.arcLength||1e4)+';"');var E=h.fillInfo,g=!!(E&&(E.horOffset||E.verOffset)&&(E.horOffset!="0"||E.verOffset!="0")),b=navigator.userAgent,w=!!b.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(!g&&w&&t._displayObject._bitmapData&&t._displayObject._aniData.type&&(t._displayObject._aniData.type==2004||t._displayObject._aniData.type==2003)){var x=t._displayObject._rawWidth,C=t._displayObject._rawHeight;x=Math.round(x),C=Math.round(C);var M=t._displayObject._aniData.type==2004?"50%":"0%",A=h.lineWidth?h.lineWidth:0,O=A+"px "+(h.lineType?h.lineType:"solid")+" "+(h.strokeColor?h.strokeColor:"#000"),S=x-A,L=C-A;r+='<div data-mark="path" class="path_'+t._displayObject._id+'" style="position:absolute;top:0;left:0;width:'+S+"px;height:"+L+"px;border-radius:"+M+";border:"+O+';"></div>'}else n._fill._color&&(r+='<path class= "path_'+t._displayObject._id+'" d="'+f+'" stroke="'+n._fill._color._getCssText()+'" stroke-width="'+n._thickness+'" fill="'+a._getFill()+'" stroke-width="'+n._thickness+'" stroke-linecap="'+n._caps+'" stroke-linejoin="'+n._joints+'"  '+m+'style="'+(t._displayObject._haveClickAction?"cursor: pointer;":"")+'"/>')}}),r},proto$x.subDivision=function(e,t,r){var a=t,n=r,o=n+1;o==e.length&&(o=0),e[n].forwardX=a.forward.x,e[n].forwardY=a.forward.y,e[o].backwardX=a.backward.x,e[o].backwardY=a.backward.y,a=a.point,a=new this.Point(a.nodeX,a.nodeY,a.forwardX,a.forwardY,a.backwardX,a.backwardY),e.splice(n+1,0,a)},proto$x._generateSvgStr=function(){var e=this,t=e._displayObject,r=t._graphics,a=r._actions,n=r._thickness/2,o=t._aniData.param,s=o.fillInfo,_=navigator.userAgent,l=!!_.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),c=!!(s&&(s.horOffset||s.verOffset)&&(s.horOffset!="0"||s.verOffset!="0")),d=t._rawWidth,f=t._rawHeight,u=a.some(function(h){if(h instanceof GraphicsImageFill)return!0});if(t._hasShapeAnimation&&u&&(d=Math.round(d),f=Math.round(f)),!c&&l&&t._bitmapData&&t._aniData.type&&(t._aniData.type==2004||t._aniData.type==2003)){var p='<div class="curve_render" data-ios="true" style="position:relative;width:'+d+"px;height:"+f+"px;display:block;overflow:visible;margin:-"+n+"px;padding:"+n+'px;">';p+=e._applyActions(a),p+="</div>"}else{var v=t._aniData.type==2048?"none":"block",p='<svg class="curve_render"  width="'+d+'" height="'+f+'" style="display:'+v+";overflow:visible;margin:-"+n+"px;padding:"+n+'px;">';p+=e._applyActions(a),p+="</svg>"}return p},proto$x._setDisplayInitState=function(){var e=this,t=e._displayObject,r=e._prevHTML=e._generateSvgStr();e._html='<div ondragstart="return false;" data-type="shape" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">'+r+"</div>";var a=StyleSheetManager.insertCss("overflow: visible;");e._classNameList.push(a),e._staticClassName=a,e._prevBitmapDataSrc=t._getBitmapData()&&t._getBitmapData()._image.src,e._prevGraphicsHash=t._graphics._hash,e._prevProgressRatio=t._progressRatio},mod.namespace("Render.RenderObjectShape",RenderObjectShape);var RenderObjectScene=function(){var e=this;RenderObjectScene.__super__.constructor.apply(e,arguments),e._sceneInfo=null,e._sceneEnded=!1,e._clipWidth=null,e._clipHeight=null,e._prevClipWidth=null,e._prevClipHeight=null,e._clipLeft=null,e._clipTop=null,e._prevClipTop=null,e._zValue=null,e._clipNode=null,e._scrollTop=0,e._prevScrollTop=0};mod.extend(RenderObjectScene,RenderObject);var proto$w=RenderObjectScene.prototype;proto$w._addChild=function(){var e=this,t=RenderObjectScene.__super__._addChild.apply(e,arguments);t._parentSceneRenderObject=e,t._parentMovieClipRenderObjectChild=t},proto$w._setDisplayInitState=function(){var e=this,t=e._displayObject,r="top: 0;"+Browser$1.prefix.css+"transition: "+Browser$1.prefix.css+"transform, opacity 0ms ease-in-out;",a=StyleSheetManager.insertCss(r);e._classNameList.push(a),e._staticClassName=a;var n=e._parent._displayObject._parent;if(n instanceof Stage)var o=StyleSheetManager.insertCss("position: absolute;overflow: hidden;width: "+n._stageWidth+"px;height: "+n._stageHeight+"px;");var s=t._guid||e._sceneInfo._guid;e._html='<div data-type="scene" data-name="'+e._sceneInfo._name+'" data-mid="'+t._id+'"'+(s?' data-guid="'+s+'"':"")+' class="{{className}}">'+(o?'<div class="mugine_scene_clip '+o+'">{{childNode}}</div>':"{{childNode}}")+"</div>",e._clipClassName=o},proto$w.getNode=function(e){var t=this;if(e){var r=t._getClipNode();if(r)return r}return RenderObjectScene.__super__.getNode.apply(t,arguments)},proto$w._getClipNode=function(){var e=this;if(e._clipNode)return e._clipNode;var t=e.getNode().children[0];return t.className.indexOf("mugine_scene_clip")>-1&&(e._clipNode=t),e._clipNode},proto$w.renderScene=function(){var e=this,t=e._parent._displayObject._parent,r=e.scrollInertia;if(r){var a=r.endInertia=function(){e.scrollInertia=null,e._parent._displayObject.parent._renderManager._forceCheckHash.splice(e._parent._displayObject.parent._renderManager._forceCheckHash.indexOf(e),1),e.scrollInertia=void 0},n=r._iterate();e._scrollTop+=n._y,r._speed&&r._speed._x===0&&r._speed._y===0&&a()}if(t instanceof Stage){if(e._clipClassName&&(e._prevClipTop!==e._clipTop||e._prevClipLeft!==e._clipLeft||e._prevClipWidth!==e._clipWidth||e._prevClipHeight!==e._clipHeight)){e._prevClipTop=e._clipTop,e._prevClipLeft=e._clipLeft,e._prevClipWidth=e._clipWidth,e._prevClipHeight=e._clipHeight;var o=e._getClipNode(),s=o.className;StyleSheetManager.deleteCss(e._clipClassName),StyleSheetManager.deleteCss(e._clipClassName+" > [data-type]");var _=new RegExp(" *"+e._clipClassName,"g");s=s.replace(_,"");var l=StyleSheetManager.insertCss("position: absolute;overflow: hidden;width: "+Math.min(t._stageWidth,e._clipWidth)+"px;height: "+(t._scaleMode==="width2"?t._stageHeight+"px;":Math.min(t._stageHeight+0,e._clipHeight+0)+"px;")+"top:"+Math.max(0,e._clipTop)+"px;left:"+Math.max(0,e._clipLeft)+"px;");e._clipClassName=l,s+=" "+l,o.className=s,StyleSheetManager.insertCss(e._clipClassName+" > [data-type]","top:"+Math.round(Math.min(0,e._clipTop))+"px; left:"+Math.round(Math.min(0,e._clipLeft))+"px")}e._prevScrollTop!==e._scrollTop&&(e._scrollTop>0?(e._scrollTop=0,a&&a()):t._fullScreenRect._height-e._scrollTop>t._stageHeight&&(e._scrollTop=-t._stageHeight+t._fullScreenRect._height,a&&a()),e._clipNode.style.cssText+=Browser$1.prefix.css+"transform:translateY("+e._scrollTop+"px);",e._prevScrollTop=e._scrollTop)}},proto$w.render=function(){var e=this,t=RenderObjectScene.__super__.render.apply(e,arguments);return e.renderScene(),t},proto$w._buildFun=function(){var e=this;e.constructor.__super__._buildFun.apply(e,arguments),e._node.addEventListener(Browser$1.prefix.lowercase+"AnimationEnd",e._handleAnimationEnd.bind(e))},StyleSheetManager.animationPrefix=Browser$1.prefix.css,proto$w._setKeyframeAnimation=function(e){var t=this,r=e._displayObject,a=e._parentMovieClipRenderObject._displayObject,n=a._objectFrames,o=n[r._id],s=1/a._getRoot()._frameRate;if(o){var _=t._sceneInfo,l=_._numFrames,c=_._startFrame,d=l,f=o._min-c,u=o._max-c,p="",v="0.01";f>0&&(p+="0% { "+Browser$1.prefix.css+"transform: scale("+v+"); }",p+=f/d*100-1e-4+"% { "+Browser$1.prefix.css+"transform: scale("+v+"); }");for(var h=f;h<=u+1;h++){var m=h+c,T=o.getKeyframe(m);if(T!=null){var y=T._matrix,E=r._parent&&r._parent._offsetMatrix,g="";E&&(g+=E._toCssText()),g+=" "+y._toCssText(!0),r._flipMatrix&&(g+=" "+r._flipMatrix._toCssText());var b=T._colorTransform,w=Browser$1.prefix.css+"transform:"+g+"; opacity: "+b._getAlpha()+";";if(h<=u){var x=Math.min(100,(h-0)/d*100);p+=x+"% { "+w+"}"}}}u<d-1?(p+=(u+1)/d*100-1e-4+"% { "+w+"}",p+=(u+1)/d*100+"% { "+Browser$1.prefix.css+"transform: scale("+v+"); }",p+="100% { "+Browser$1.prefix.css+"transform:scale("+v+"); }"):p+="100% { "+w+"}";var C=0;if(window.DEBUG_CS3_MODE){var M=e._parentMovieClipRenderObject&&e._parentMovieClipRenderObject._parentMovieClipRenderObject;M&&(C=M._displayObject._objectFrames[e._parentMovieClipRenderObject._parentMovieClipRenderObjectChild._displayObject._id]._min*s)}var A=a._loop?"infinite":1,O=StyleSheetManager.insertKeyframes(p),S=Browser$1.prefix.css+"animation: "+O+" "+d*s+"s linear "+C+"s "+A+" forwards;",L=StyleSheetManager.insertCss(S);e._animtionClassName&&e._classNameList.splice(e._classNameList.indexOf(e._animtionClassName),1);var D=document.querySelectorAll("."+e._staticClassName);D[0]&&e.setClassName(D[0]),e._aniamtionKeyframeName&&StyleSheetManager.deleteAnimationCss(e._aniamtionKeyframeName),e._animtionClassName&&StyleSheetManager.deleteCss(e._animtionClassName),e._animtionClassName=L,e._aniamtionKeyframeName=O}},proto$w._handleAnimationEnd=function(e){var t=this;if(t._parent._displayObject._currentScene!=t._sceneInfo&&(t._sceneEnded=!0),!t._sceneEnded){var r=e.target.parentNode;if(r===t._node){t._sceneEnded=!0;var a=t._parent,n=a._displayObject,o=t._sceneInfo,s=o._startFrame,_=o._numFrames,l=s+_-1;n._currentFrame=l,n._currentFrameDecimal=l+.99999}}};var RenderObjectStage=function(){var e=this;RenderObjectStage.__super__.constructor.apply(e,arguments),e._clipWidth=null,e._clipHeight=null,e._clipStyleClass=null,e._prevClipWidth=null,e._prevClipHeight=null,e._prevWndWidth=null,e._prevWndHeight=null,e._needResize=!1};mod.extend(RenderObjectStage,RenderObject);var proto$v=RenderObjectStage.prototype;proto$v._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.image,a=t._aniData.metadata||{};a.adaptMode;var n="100% 100%",o="";r&&r.length?(r=t._getRoot()._renderManager._resourceLoader._dir.getFullPath(r),o="background-image: url("+r+"); background-repeat: no-repeat;background-size:"+n+";background-position:center;"):o="background:"+t._color._getCssText()+";";var s=StyleSheetManager.insertCss("overflow: hidden;"+o+"left: 0;top: 0;"+(t._haveClickAction?"cursor: pointer;":""));e._classNameList.push(s),e._staticClassName=s,e._html='<div data-type="stage" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">{{childNode}}</div>'},proto$v._buildFun=function(){var e=this;RenderObjectStage.__super__._buildFun.apply(e,arguments),window.addEventListener("orientationchange",function(){var r=document.activeElement;r&&r.blur()});var t=function(){window.WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:"2"}),window.WeixinJSBridge.on("menu:setfont",function(){window.WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:"2"})})};typeof window.WeixinJSBridge>"u"?document.addEventListener("WeixinJSBridgeReady",t,!1):t()},proto$v._getStageRotate=function(e){if(!Browser$1.os.tablet&&!Browser$1.os.phone&&!Browser$1.os.android)return 0;var t=this,r=t._displayObject;e=e||t._getStageSize();var a=e.width,n=e.height,o=r._stageWidth,s=r._stageHeight,_=0,l=(r._aniData.metadata||{}).rotateMode;if(l=="auto"){var c=n/a,d=s/o;if(c>1&&d<1||c<1&&d>1)switch(window.orientation||0){case 0:_=90;break;case 90:_=-90;break;case-90:_=90;break;default:_=-90}}else if(l=="landscape")switch(window.orientation||0){case 0:_=90;break;case 90:_=0;break;case-90:_=0;break;default:_=-90}else if(l=="portrait")switch(window.orientation||0){case 0:_=0;break;case 90:_=-90;break;case-90:_=90;break;default:_=0}return _},proto$v._getStageSize=function(){var e=this,t=e._displayObject,r=e._displayObject._renderManager._stageDom.parentNode;if((t._mrmcp||{}).render_mode=="embedded"&&r!=document.body)a={width:r.offsetWidth,height:r.offsetHeight};else var a=mod.getWndSize();return a},proto$v._adaptStage=function(e){var t=this;t._needResize=!1;var r=t._displayObject,a=r._scaleMode,n=t._getStageSize(),o=n.width,s=n.height,_=r._stageWidth,l=r._stageHeight,c=document.activeElement;if(["INPUT","TEXTAREA"].indexOf(c.tagName)==-1&&!c.getAttribute("contenteditable")&&(c=null),c==null||c._relateRenderObject==null)var d=!0;(r._aniData.metadata||{}).rotateMode;var f=0;if(d?f=t._getStageRotate():f=0,s<t._prevWndHeight&&!d&&f==0){var u=s;o=t._prevWndWidth,s=t._prevWndHeight}f/180*Math.PI!=r._stageRotate&&(r._stageRotate=f/180*Math.PI,r._dispatchEvent(new MuEvents("stageRotateChange")));var p=new Point(o/2,s/2),v=new Point(-o/2,s/2),h=new Matrix;h._rotate(-r._stageRotate),h._transform(p,!0),h._transform(v,!0);var m,T,y;{a==StageScaleMode.ADAPT_NONE&&(Browser$1.os.phone?a=StageScaleMode.ADAPT_WIDTH:a=StageScaleMode.ADAPT_CONTAIN);var E=Math.max(Math.abs(p._x),Math.abs(v._x))*2,g=Math.max(Math.abs(p._y),Math.abs(v._y))*2;if(a==StageScaleMode.ADAPT_WIDTH)T=m=E/_,y=new Rectangle(0,(l-g/T)/2,_,g/T);else if(a==StageScaleMode.ADAPT_WIDTH2)T=m=E/_,y=new Rectangle(0,(l-g/T)/2,_,g/T);else if(a==StageScaleMode.ADAPT_HEIGHT)T=m=g/l,y=new Rectangle((_-E/m)/2,0,E/m,l);else if(a==StageScaleMode.ADAPT_CONTAIN){var b=p._y*v._x,w=p._x*v._y,x=l*p._x,C=_*p._y,M=l*v._x,A=_*v._y,O=-_*(-b+w)/(-x+C+M-A),S=_*(-b+w)/(-x+C-M+A),L=-_*(-b+w)/(x+C-M-A),D=-_*(-b+w)/(x+C+M+A);T=m=Math.min(Math.abs(O),Math.abs(S),Math.abs(L),Math.abs(D))*2/_,y=new Rectangle((_-E/m)/2,(l-g/T)/2,E/m,g/T)}else a==StageScaleMode.ADAPT_COVER?(T=m=Math.max(E/_,g/l),y=new Rectangle((_-E/m)/2,(l-g/T)/2,E/m,g/T)):a==StageScaleMode.ADAPT_FILL?(m=E/_,T=g/l,y=new Rectangle((_-E/m)/2,(l-g/T)/2,E/m,g/T)):a==StageScaleMode.ADAPT_NOSCALE&&(m=1,T=1,y=new Rectangle((_-E/m)/2,(l-g/T)/2,E/m,g/T));u!=null&&y._setHeight(y._getHeight()-(s-u)/T)}Browser$1.os.ios&&a==StageScaleMode.ADAPT_FILL&&(m-=1e-4,T-=1e-4),r._fullScreenRect=y,r._scaleX=m,r._scaleY=T,r._setTransform(new Transform);var $=r._transform._matrix;d&&(t._prevWndWidth=o,t._prevWndHeight=s);var R=0;if(c){var I=c._relateRenderObject;if(I){var P=I._displayObject,N=P,B=new Point(0,0),j=new Point(P._rawWidth,P._rawHeight);do B=N._transform._matrix._transform(B,!0),j=N._transform._matrix._transform(j,!0),N._offsetMatrix&&(B=N._offsetMatrix._transform(B,!0),j=N._offsetMatrix._transform(j,!0)),N=N._parent;while(N._parent&&N._parent._id!=0);var V=y._getBottom(),Q=y._getRight(),F=y._getLeft(),W=y._getTop();if(B._y<W||j._y<W||B._y>V||j._y>V||B._x<F||j._x<F||B._x>Q||j._x>Q){var G=(B._x+j._x)/2,Z=(B._y+j._y)/2;G-y._getWidth()/2-y._getLeft();var X=Z-y._getHeight()/2-y._getTop();X>0?X=Math.min(X,l-V):X=Math.max(X,-W),R=X}}}y._setTop(y._getTop()+R);var U=-r._fullScreenRect._left,z=-r._fullScreenRect._top;if($._translate(-U,-z),$._translate(-r._stageWidth/2,-r._stageHeight/2),$._scale(m,T),$._rotate(r._stageRotate),$._translate(o/2,s/2),$._translate(0,-R*T),y._setHeight(Math.ceil(y._getHeight())),t._clipWidth=y._width,t._clipHeight=y._height,traversalChildScene.bind(t)(function(Y){Y._clipWidth=y._width,Y._clipHeight=y._height,a==StageScaleMode.ADAPT_WIDTH2?(Y._clipLeft=0,Y._clipTop=0):(Y._clipLeft=U,Y._clipTop=z)}),r._dispatchEvent(r._changedEvent),c&&Browser$1.os.ios&&(Browser$1.os.version||"").split(".")[0]*1<11&&setTimeout(function(){c.scrollIntoViewIfNeeded()},500),!fullScreenBind){var te=mod.debounce(t._adaptStage.bind(t),50,!1);r._addEventListener("resize",te,50),window.addEventListener("orientationchange",te,50),r._addEventListener("blur",function(){t._needResize=!0,setTimeout(function(){if(t._needResize&&(te(),Browser$1._weChat&&Browser$1.os.ios)){var Y=document.documentElement.scrollTop||document.body.scrollTop||0;window.scrollTo(0,Math.max(Y-1,0))}},1e3)},!0),r._addEventListener("focus",te,!0),fullScreenBind=!0,t.render(!0)}};var fullScreenBind=!1;Browser$1._globalObject.Mugeda&&(Browser$1._globalObject.Mugeda.getWindowSize=mod.getWndSize);var traversalChildScene=function(e){var t=this._children.filter(function(r){return r instanceof renderObjectMovieClip});t.forEach(function(r){r._children.filter(function(a){return a instanceof RenderObjectScene}).forEach(e)})};proto$v.render=function(){var e=this;e.getNode();var t=RenderObjectStage.__super__.render.call(e,!0),r=!1;if(e._prevClipWidth!==e._clipWidth||e._prevClipHeight!==e._clipHeight){r=!0,e._prevClipWidth=e._clipWidth,e._prevClipHeight=e._clipHeight,e._clipStyleClass&&(StyleSheetManager.deleteCss(e._clipStyleClass),e._classNameList.splice(e._classNameList.indexOf(e._clipStyleClass),1));var a=StyleSheetManager.insertCss("width:"+e._clipWidth+"px;height:"+(e._clipHeight+0)+"px;");e._classNameList.push(a),e._clipStyleClass=a,traversalChildScene.bind(e)(function(n){n.renderScene()})}return(r||t)&&e.setClassName(),t};var TextFormatAlign=function(){};TextFormatAlign.LEFT="left",TextFormatAlign.CENTER="center",TextFormatAlign.RIGHT="right",TextFormatAlign.JUSTIFY="justify",TextFormatAlign.TOP="top",TextFormatAlign.BOTTOM="bottom",mod.exportName(TextFormatAlign,["LEFT",TextFormatAlign.LEFT,"CENTER",TextFormatAlign.CENTER,"RIGHT",TextFormatAlign.RIGHT,"JUSTIFY",TextFormatAlign.JUSTIFY,"TOP",TextFormatAlign.TOP,"BOTTOM",TextFormatAlign.BOTTOM]);var renderObjectTextField=function(){renderObjectTextField.__super__.constructor.apply(this,arguments);var e=this;e._prevText=null,e._prevTextTransform=null,e.cachedVisible=!1,e.scrollDisabled=!1,e._waitFontTimeout=null,e._aimFontData=null,e.changingMark=0};mod.extend(renderObjectTextField,RenderObject);var proto$u=renderObjectTextField.prototype;proto$u._getTextWidth=function(e,t,r){var a=document.createElement("div");a.id="text_measure_"+new Date().getTime(),a.style.padding=0,a.style.margin=0,a.style.display="block",a.style.fontSize=t+"px",a.style.opacity=0,a.style.position="absolute",a.style.left=0,a.style.top=0,r.toLowerCase()=="simhei"&&(r='"Microsoft YaHei", "微软雅黑", SimHei, sans-serif'),a.style.fontFamily=r,a.textContent=e,document.body.appendChild(a);var n=a.clientWidth;return document.body.removeChild(a),n},proto$u._getHtmlAndCss=function(){var b,w;var e=this,t=e._displayObject,r=t._defaultTextFormat,a="",n=t._keyframes||[],o=n.filter(function(x){var C=x.transform._paramTransform._fillType;return C===FillType.LINEAR||C===FillType.RADIAL}),s=n.length===0&&(t._transform._paramTransform._fillType===FillType.LINEAR||t._transform._paramTransform._fillType===FillType.RADIAL)||o.length>0;s&&(a="background:"+getCssBackgroundColor(t._transform)+";"+Browser$1.prefix.css+"text-fill-color: transparent;"+Browser$1.prefix.css+"background-clip: text;");var _=r._color,l=Browser$1.prefix.css!=="-moz-";if(l){e._displayVal="display: "+Browser$1.prefix.css+"box;display: "+Browser$1.prefix.css+"flex;",t._textVAlign,TextFormatAlign.CENTER,t._textVAlign===TextFormatAlign.CENTER&&(a+="margin:auto 0;");var c=t._textVAlign===TextFormatAlign.BOTTOM?"column-reverse":"column",d=t._textVAlign===TextFormatAlign.CENTER?"center":t._textVAlign===TextFormatAlign.BOTTOM?"end":"start",f="display: "+Browser$1.prefix.css+"box;display: "+Browser$1.prefix.css+"flex;"+Browser$1.prefix.css+"box-orient: vertical;"+Browser$1.prefix.css+"flex-direction: "+c+";"+Browser$1.prefix.css+"box-pack: "+d+";"+Browser$1.prefix.css+"justify-content: flex-start;",u='<div class="text_holder" style="'+a+'">'+t._getHtmlText()+"</div>"}else{e._displayVal="display: table;";var p=t._textVAlign===TextFormatAlign.CENTER?"middle":t._textVAlign===TextFormatAlign.BOTTOM?"bottom":"top";f="display: table;",u='<div style="display: table-cell; vertical-align: '+p+";"+a+'">'+t._getHtmlText()+"</div>"}var v='<div ondragstart="return false;" data-type="text-field" data-name="'+t._name+'" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">'+u+"</div>";if(t._fontData)var h=t._fontData._getFontFamily();else h=r._font;var m=t._transform._paramTransform;if(m._strokeColor&&m._strokeColor._a>0||(((w=(b=t._aniData)==null?void 0:b.param)==null?void 0:w.ownParam)??[]).includes("strokeColor")){var T=m._strokeWidth,y=m._strokeColor._getCssText();f+=Browser$1.prefix.css+"text-stroke:"+T/1+"px "+y+";"}var E="position: absolute; overflow-wrap: break-word;word-break: break-word;width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"transform-origin: left top;"+f+"font-family: "+h+";text-align: "+r._align+";text-align-last: auto;color: "+_._getCssText()+";font-size: "+m._fontSize+"px;line-height: "+(m._lineHeight/100||1)+";letter-spacing: "+m._letterSpace+"px;"+(r._bold?"font-weight: bold;":"")+(r._underline?"text-decoration: underline;":"")+(r._italic?"font-style: italic;":"")+(t._haveClickAction?"cursor: pointer;":""),g={html:v,css:E,styles:["p","margin-block-start: 0; margin-block-end: 0;","> *:first-child",a]};return mod.exportName(g,["html",g.html,"css",g.css,"styles",g.styles]),g},proto$u._initLoadFontData=function(){var e=this,t=e._displayObject;if(t._fontData){var r=t._fontData._loader;if(r._contentLoaderInfo._state==LoaderInfo.STATE.LOADED)e._currentFontText=t._text,t._fontData._addToDocument();else{var a=function(){e._cancelCurrentLoadFont=null,e._loadingFontText=null,e._currentFontText=t._text,t._fontData._addToDocument()};e._loadingFontText=t._text,r._contentLoaderInfo._addEventListenerOnce("complete",a),r._contentLoaderInfo._addEventListenerOnce("ioError",a),e._cancelCurrentLoadFont=function(){r._contentLoaderInfo._removeEventListener("complete",a),r._contentLoaderInfo._removeEventListener("ioError",a)}}}},proto$u._setDisplayInitState=function(){var e=this,t=e._getHtmlAndCss();e._html=t.html;var r=t.css,a=t.styles||[],n=e._displayObject;e._initLoadFontData();var o=Mugeda.options?!!Mugeda.options.loopScrollingText:!1,s=n._textOverflow||"visible",_=s==="scroll"||s==="scrollNoBar"||s==="manualScroll"||s==="manualScrollNoBar",l=s==="scrollNoBar"||s==="manualScrollNoBar";s!="visible"&&(r+="overflow: "+(o?"hidden":_?"auto":s)+";",_&&(r+="-webkit-overflow-scrolling: touch;"),e._classNameList.push("mugeda_overflow"),l&&e._classNameList.push("nobar"));var c=StyleSheetManager.insertCss(r);e._classNameList.push(c),e._staticClassName=c;for(var d=0;d<a.length;d+=2){var f=a[d],u=a[d+1];StyleSheetManager.insertCss(`${c} ${f}`,u)}},!Browser$1.mobile&&Browser$1.prefix.css=="-webkit-"&&(StyleSheetManager.insertCss("mugeda_overflow::"+Browser$1.prefix.css+"scrollbar","width: 4px;height:0px;"),StyleSheetManager.insertCss("mugeda_overflow::"+Browser$1.prefix.css+"scrollbar-thumb","background-color:rgba(255,255,255,0.5);"),StyleSheetManager.insertCss("mugeda_overflow::"+Browser$1.prefix.css+"scrollbar-track",Browser$1.prefix.css+"box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.5);background-color: inset 0 0 4px rgba(0, 0, 0, 0.5);"),StyleSheetManager.insertCss("nobar::"+Browser$1.prefix.css+"scrollbar","background-color:rgba(255,255,255,0);"),StyleSheetManager.insertCss("nobar::"+Browser$1.prefix.css+"scrollbar-thumb","background-color:rgba(255,255,255,0);"),StyleSheetManager.insertCss("nobar::"+Browser$1.prefix.css+"scrollbar-track",Browser$1.prefix.css+"box-shadow: inset 0 0 4px rgba(0, 0, 0, 0);background-color: inset 0 0 4px rgba(0, 0, 0, 0);")),StyleSheetManager.insertCss("mugeda_richtext a","text-decoration:none;color:inherit;"),StyleSheetManager.insertCss("mugeda_richtext a:visited","text-decoration:none;color:inherit;"),StyleSheetManager.insertCss("mugeda_richtext img","width:100%;"),proto$u._buildFun=function(){var e=this,t=e._displayObject;t._prevText&&t._updatePreset(),renderObjectTextField.__super__._buildFun.apply(this,arguments)},proto$u._prepareCapture=function(e){var t=this,r=t._displayObject,a=1,n=function(){--a===0&&t._triggerNewSvg(e)},o=t._getHTML().match(/<img.*?>/g)||[],s=o.map(function(c){return c.match(/\ssrc=['"](.*?)['"]/)[1]});if(t._imageCache=t._imageCache||{},s.forEach(function(c){if(t._imageCache[c])return n();a++;var d=t._imageCache[c]=new BitmapData;d._src=c,d._image=BitmapData.blankImage,d._loader._contentLoaderInfo._addEventListener("complete",function(){return n()}),d._loader._contentLoaderInfo._addEventListener("ioError",function(){return n()}),d._load()}),r._fontData){a++;var _=FontData._getFontData(r._fontData._fontName,null,r._text,null,r._getRoot()._resource),l=_._loader;l._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?n():(l._contentLoaderInfo._addEventListenerOnce("complete",n),l._contentLoaderInfo._addEventListenerOnce("ioError",n),t._cancelCurrentLoadFont=function(){l._contentLoaderInfo._removeEventListener("complete",n),l._contentLoaderInfo._removeEventListener("ioError",n)},_._load(l))}n()},proto$u._triggerNewSvg=function(e){var t=this,r=t._displayObject,a="";if(r._fontData){var n=r._fontData._getFontFamily(r);a+="<defs><style>@font-face {font-family: "+n+";src:url("+r._fontData._base64+")}</style></defs>"}var o=r._rawWidth,s=r._rawHeight;r._textOverflow==="visible"&&(s=Math.max(s,r._textHeight));var _=t._getHtmlAndCss(),l=_.html,c=_.css,d=_.styles||[],f="<style>",u="__root";f+=`.${u}{${c}}`;for(var p=0;p<d.length;p+=2){var v=d[p],h=d[p+1];f+=`.${u} ${v}{${h}}`}if(f+="</style>",l=l.replace('class="{{className}}"','class="'+u+'"'),l=l.replace(/(<img[^>]+?)\/?\s*>/g,"$1></img>"),l=l.replace(/(<br[^>]+?)\/?\s*>/g,"$1></br>"),l=l.replace(/&nbsp;/g,"&#160;"),l=l.replace(/<img.*?>/g,function(b){return b.replace(/\ssrc=['"](.*?)['"]/,function(w,x){var C=t._imageCache[x];if(!C)return w;var M=document.createElement("canvas");M.width=C._image.width,M.height=C._image.height;var A=M.getContext("2d");A.drawImage(C._image,0,0);var O=M.toDataURL("image/png");return' src="'+O+'" style="max-width: 100%;"'})}),r._textVAlign===TextFormatAlign.BOTTOM){var m=document.createElement("div");document.body.appendChild(m),m.innerHTML=f+l;var T=m.querySelector(".text_holder"),y=T.offsetTop;document.body.removeChild(m),y=y>0?0:y,y<0&&(f=f.replace("</style>",`.${u} .text_holder{position: relative; top:${-y}px;}</style>`))}else y=0;var E='<?xml version="1.0"?><svg xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+s+'">'+a+'<foreignObject x="0" y="0" width="'+o+'" height="'+s+'"><div xmlns="http://www.w3.org/1999/xhtml">'+f+l+"</div></foreignObject></svg>",g=new Image;g.src="data:image/svg+xml,"+encodeURIComponent(E),g.onload=g.onerror=function(){t._svgImage=g,t._svgImageOffset=[0,y],setTimeout(function(){e()},Browser$1.os.ios&&r._fontData?100:0)}},proto$u._updateSvgImage=function(e){var t=this,r=t._displayObject,a=r._getHtmlText();if(!(a==t._prevSvgText&&r._transform._paramTransform._compareTo(t._prevTextTransform)))if(t._prevSvgText=a,r._fontData)if(r._text==t._currentFontTextSvg){t._cancelCurrentLoadFontSvg&&t._cancelCurrentLoadFontSvg();var n=function(){t._cancelCurrentLoadFontSvg=null,t._currentFontTextSvg=r._text,t._loadingFontTextSvg=null,t._triggerNewSvg(e)};r._fontData._loader._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?n():(t._loadingFontTextSvg=r._text,r._fontData._loader._contentLoaderInfo._addEventListenerOnce("complete",n),r._fontData._loader._contentLoaderInfo._addEventListenerOnce("ioError",n),t._cancelCurrentLoadFontSvg=function(){r._fontData._loader._contentLoaderInfo._removeEventListener("complete",n),r._fontData._loader._contentLoaderInfo._removeEventListener("ioError",n)})}else{if(r._text==t._loadingFontTextSvg)return;t._cancelCurrentLoadFontSvg&&t._cancelCurrentLoadFontSvg(),t._loadingFontTextSvg=r._text;var o=function(){t._cancelCurrentLoadFontSvg=null,t._loadingFontTextSvg=null,t._currentFontTextSvg=r._text,r._fontData=s,t._triggerNewSvg(e)},s=FontData._getFontData(r._fontData._fontName,null,r._text,null,r._getRoot()._resource),_=s._loader;_._contentLoaderInfo._state==LoaderInfo.STATE.LOADED&&o(),t._waitFontTimeoutSvg=setTimeout(function(){_._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?o():(_._contentLoaderInfo._addEventListenerOnce("complete",o),_._contentLoaderInfo._addEventListenerOnce("ioError",o),t._cancelCurrentLoadFont=function(){_._contentLoaderInfo._removeEventListener("complete",o),_._contentLoaderInfo._removeEventListener("ioError",o)},s._load(_))},100),t._cancelCurrentLoadFontSvg=function(){clearTimeout(t._waitFontTimeoutSvg)}}else t._triggerNewSvg(e)},proto$u._prepareCanvasRender=function(){var e=this,t=e._displayObject;t._fontData,t._addEventListener("changed",function(){e.changingMark++||e._updateSvgImage(function(){e.changingMark--,e.changingMark===0?(e.changingMark=1,t._dispatchEvent(t._changedEvent),e.changingMark=0):(e.changingMark=0,t._dispatchEvent(t._changedEvent))})}),e._updateSvgImage(function(){})},proto$u._redraw=function(e,t,r,a){var n=this;if(n._beforeRedraw(e,t)){var o=n._displayObject;if(n._svgImage){var s=Math.max(t._a,t._d);s=1;var _=o._rawWidth*s,l=o._rawHeight*s;e.transform(t._a,t._b,t._c,t._d,t._tx,t._ty);var c=o._textOverflow||"visible";c!="visible"&&(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(_,0),e.lineTo(_,l),e.lineTo(0,l),e.closePath(),e.clip()),e.drawImage(n._svgImage,n._svgImageOffset[0],n._svgImageOffset[1],_,l),c!="visible"&&e.restore()}}},proto$u.render=function(e,t,r){var a=this,n=a._displayObject;renderObjectTextField.__super__.render.apply(a,arguments);var o=n._getHtmlText(),s=n._getRealVisible();if(o!=a._prevText){if(n._fontData){if(n._text==a._currentFontText)a._cancelCurrentLoadFont&&a._cancelCurrentLoadFont();else if(n._text!=a._loadingFontText){a._cancelCurrentLoadFont&&a._cancelCurrentLoadFont(),a._loadingFontText=n._text;var _=function(){a._cancelCurrentLoadFont=null,a._loadingFontText=null,a._currentFontText=n._text,n._fontData=l,l._addToDocument(),a._node.style.cssText+="font-family:"+l._getFontFamily()+";"},l=FontData._getFontData(n._fontData._fontName,null,n._text,null,n._getRoot()._resource),c=l._loader;c._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?_():(a._waitFontTimeout=setTimeout(function(){c._contentLoaderInfo._state==LoaderInfo.STATE.LOADED?_():(c._contentLoaderInfo._addEventListenerOnce("complete",_),c._contentLoaderInfo._addEventListenerOnce("ioError",_),a._cancelCurrentLoadFont=function(){c._contentLoaderInfo._removeEventListener("complete",_),c._contentLoaderInfo._removeEventListener("ioError",_)},l._load(c))},100),a._cancelCurrentLoadFont=function(){clearTimeout(a._waitFontTimeout)})}}a._prevText=o;var d="",f=/^((?!chrome|android).)*(safari|iphone|ipad|ipod)/i.test(navigator.userAgent);f&&(d='<img style="width:1px;height:1px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">'),a._node&&a._node.children.length&&(a._node.children[0].innerHTML=n._getHtmlText()+d)}var u=a.getNode();if(u){if(n._textOverflow=="scroll"||n._textOverflow=="scrollNoBar"){var p=n._getStage(),r=p._totolFrame*1e3/p._frameRate,v=Mugeda.options?!!Mugeda.options.loopScrollingText:!1;if(s&&!a.cachedVisible&&(a.startTime=r||1,a.scrollDisabled=!1),u.scrollHooked||(u.scrollHooked=!0,u.addEventListener(Browser$1.InputStart,function(A){a.scrollDisabled=!0,A.stopPropagation()}),u.addEventListener(Browser$1.InputEnd,function(A){a.scrollDisabled=!1,a.startTime+=r+1e3,A.stopPropagation()})),a.cachedVisible=s,a.startTime){var h=n._scrollSpeed,m=r-a.startTime,T=h*m*.001;v&&u.scrollTop>=u.scrollHeight*.5&&(T=0),T>1&&!a.scrollDisabled&&(Browser$1.isIOS?u.scrollTo({top:u.scrollTop+Math.floor(T)}):u.scrollTo({top:u.scrollTop+Math.floor(T),behavior:"smooth"}),a.startTime=r)}}else if((n._textOverflow!=="visible"||n._textOverflow!=="hidden")&&u.scrollHeight&&u.clientHeight&&u.scrollHeight>u.clientHeight){var y=!1;u.addEventListener(Browser$1.InputStart,function(M){y=!1},{passive:!0}),u.addEventListener(Browser$1.InputMove,function(M){y=!0},{passive:!0}),u.addEventListener(Browser$1.InputEnd,function(M){!n._dragCaptured&&y&&M.stopPropagation()},{passive:!0})}var E=n._transform._paramTransform,g=E._compareDetail(a._prevTextTransform),b=!1,w="";if(g._fillType!==void 0){b=!0;var x=getCssBackgroundColor(n._transform),C=u.querySelector(".text_holder");x&&C&&(g._fillType!==FillType.COLOR?(C.style.background=x,C.style[Browser$1.prefix.css+"background-clip"]="text",C.style[Browser$1.prefix.css+"text-fill-color"]="transparent"):(C.style.color=x,C.style.background=null,C.style[Browser$1.prefix.css+"background-clip"]=null,C.style[Browser$1.prefix.css+"text-fill-color"]=null))}(g._strokeColor!==void 0||g._strokeWidth!==void 0)&&(b=!0,w+=Browser$1.prefix.css+"text-stroke: "+E._strokeWidth+"px "+E._strokeColor._getCssText()+";"),g._letterSpace!==void 0&&(b=!0,w+="letter-spacing:"+g._letterSpace+"px;"),g._lineHeight!==void 0&&(b=!0,w+="line-height:"+(g._lineHeight/100||1)+";"),g._fontSize!==void 0&&(b=!0,w+="font-size:"+g._fontSize+"px;"),b&&(a._prevTextTransform=E),w&&(u.style.cssText+=w)}};var getCssBackgroundColor=function(e){var t=e._paramTransform,r=t._fillType;if(r===FillType.COLOR)return t._fillVal._getCssText();if(r===FillType.LINEAR||r===FillType.RADIAL){var a=t._fillVal._p0.x,n=t._fillVal._p0.y,o=t._fillVal._p1.x,s=t._fillVal._p1.y,_=e._matrix._rawWidth,l=e._matrix._rawHeight,c=Math.atan2(s-n,o-a),d=function(R,I,P){return{x:R*Math.cos(P)-I*Math.sin(P),y:R*Math.sin(P)+I*Math.cos(P)}},f=0,u=d(0,l,-c).x,p=d(_,l,-c).x,v=d(_,0,-c).x,h=d(a,n,-c).x,m=d(o,s,-c).x,T=Math.max(f,u,p,v),y=Math.min(f,u,p,v),E=function(R,I,P,N,B){return(N-P)/(I-R)*(B-R)+parseFloat(P)},g=function(R){return E(y,T,0,100,R)},b=function(R,I,P,N,B){var j=new R.constructor;return j._r=E(N,B,R._r,I._r,P),j._g=E(N,B,R._g,I._g,P),j._b=E(N,B,R._b,I._b,P),j._a=E(N,B,R._a,I._a,P),j},w=function(R,I){return"rgba("+Math.round(R._r)+","+Math.round(R._g)+","+Math.round(R._b)+","+R._a+") "+(I??R.pm)+"%"},x=t._fillVal._colors,C=t._fillVal._ratios;if(r===FillType.LINEAR){var M=[];x.forEach(function(R,I){M.push(g(h+(m-h)*C[I]))});var A=!1,O="";for($=0;$<x.length;$++){var S=x[$],L=M[$];if(A)if(L<100){if(O+=", "+w(S,L),$===x.length-1){O+=", "+w(S,100);break}}else{O+=", "+w(b(S,x[$-1],100,L,M[$-1]),100);break}else{if(L<0)if($<x.length-1){if(M[$+1]<0)continue;O+=", "+w(b(S,x[$+1],0,L,M[$+1]),L)}else O+=", "+w(S,0),O+=", "+w(S,100);else O+=", "+w(S,0),O+=", "+w(S,L);A=!0}}O="linear-gradient("+(Browser$1.browser.ie?c*180/Math.PI+90:-c*180/Math.PI)+"deg"+O+")"}else if(r===FillType.RADIAL){var D=Math.sqrt(Math.pow(a-o,2)+Math.pow(n-s,2));O="";for(var $=0;$<x.length;$++)O+=", "+w(x[$],C[$]*100);O="radial-gradient("+a/_*100+"% "+n/l*100+"%, "+D+"px "+D+"px"+O+")"}return Browser$1.prefix.css+O}else return"transparent"};proto$u._getSvgImage=function(){return this._svgImage},proto$u._getSvgImageOffset=function(){return this._svgImageOffset||[0,0]},mod.definePropertyReadOnly(proto$u,["svgImage",proto$u._getSvgImage,"svgImageOffset",proto$u._getSvgImageOffset]),mod.exportName(proto$u,["getHtmlAndCss",proto$u._getHtmlAndCss,"prepareCapture",proto$u._prepareCapture]),mod.namespace("Render.RenderObjectTextField",renderObjectTextField);var RenderObjectSprite=function(){RenderObjectSprite.__super__.constructor.apply(this,arguments),this._currentInertia=null};mod.extend(RenderObjectSprite,RenderObject);var proto$t=RenderObjectSprite.prototype;proto$t._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.param,a=r.scroll,n=r.scroll_setting,o=(a==="ver"||a==="hor")&&(n==="scrollNoBar"||n==="manualScrollNoBar"),s=(a==="ver"||a==="hor")&&(n=="scroll"||n=="scrollNoBar"),_=StyleSheetManager.insertCss("width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+(t._haveClickAction?"cursor: pointer;":""));e._classNameList.push(_),e._classNameList.push("mugeda_overflow"),o&&e._classNameList.push("nobar"),s&&(t._scrollSpeed=16),e._staticClassName=_,e._html='<div  ondragstart="return false;" outouchstart="" data-type="sprite" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">{{childNode}}</div>'},proto$t._buildFun=function(){var e=this;RenderObjectSprite.__super__._buildFun.apply(e,arguments);var t=e._displayObject,r=t._aniData.param,a=r.scroll;if(r.render==="trim")if(a&&a!=="no")if(Browser$1.os.ios){e.getNode().style.overflow="hidden";var n={};t._addEventListener(Browser$1.InputStart,function(s){var _=new Inertia;e._innerWidth===void 0&&(e._innerWidth=e.getNode().scrollWidth-Math.min(0,t._aniData.param.horOffset||0),e._innerHeight=e.getNode().scrollHeight-Math.min(0,t._aniData.param.verOffset||0)),t._haveSelfFunction=null,e._currentInertia=_;var l=s._stage;_.start(s._getRealPos()),n=new Point(s._getInputX(),s._getInputY());var c,d=function(u){clearTimeout(c),_.add(new Point(u._getInputX(),u._getInputY()));var p=_._getMovingOffset();a==="ver"?p._x=0:a==="hor"&&(p._y=0),e._setOffset(p._x,p._y),c=setTimeout(function(){l._removeEventListener(Browser$1.InputMove,d),l._removeEventListener(Browser$1.InputEnd,f)},100)},f=function(u){l._removeEventListener(Browser$1.InputMove,d),l._removeEventListener(Browser$1.InputEnd,f),t._haveSelfFunction=e._inertiaAnimation.bind(e),d(u),_._startIterate();var p=new Point(u._getInputX(),u._getInputY()),v=Math.abs(p.x-n.x),h=Math.abs(p.y-n.y),m=v>2||h>2;m&&u.stopImmediatePropagation()};l._addEventListener(Browser$1.InputMove,d),l._addEventListener(Browser$1.InputEnd,f),s.stopPropagation()})}else{var o=e.getNode().style;a==="ver"?(o.overflowX="hidden",o.overflowY="auto"):a==="hor"?(o.overflowX="auto",o.overflowY="hidden"):a==="free"&&(o.overflow="auto"),t._addEventListener(Browser$1.InputStart,function(s){var _=s._stage,l=!1,c=function(f){l=!0},d=function(f){_._removeEventListener(Browser$1.InputMove,c),_._removeEventListener(Browser$1.InputEnd,d),l&&f.stopImmediatePropagation()};_._addEventListener(Browser$1.InputMove,c),_._addEventListener(Browser$1.InputEnd,d),s.stopPropagation()})}else e.getNode().style.overflow="hidden"},proto$t._setOffset=function(e,t){var r=this,a=r._displayObject;r.getNode(),a._aniData.param;var n=r._innerWidth,o=r._innerHeight,s=a._offsetMatrix;s._translate(e,t),r._aimPoint||(r._aimPoint=new Point);var _=r._aimPoint;if(_._x=0,_._y=0,s._transform(_,!0),_._x>0)s._translate(-_._x,0);else{var l=_._x-(a._rawWidth-n);l<0&&s._translate(-l,0)}if(_._y>0)s._translate(0,-_._y);else{var c=_._y-(a._rawHeight-o);c<0&&s._translate(0,-c)}a.children.forEach(function(d){d._dispatchEvent(d._changedEvent)})},proto$t._inertiaAnimation=function(){var e=this,t=e._currentInertia,r=t._iterate(),a=e._displayObject,n=a._aniData.param,o=n.scroll;o==="ver"?r._x=0:o==="hor"&&(r._y=0),e._setOffset(r._x,r._y),t._speed&&t._speed._x===0&&t._speed._y===0&&(e._displayObject._haveSelfFunction=null,e._currentInertia=null)},proto$t.render=function(){var e=this,t=e._displayObject,r=t._aniData.param,a=r.scroll,n=r.scroll_setting,o=t._getRealVisible(),s=e.getNode();if((a==="ver"||a==="hor")&&(n=="scroll"||n=="scrollNoBar")&&s){var _=t._getStage(),l=_._totolFrame*1e3/_._frameRate;if(o&&!e.cachedVisible&&(e.startTime=l||1,e.scrollDisabled=!1),s.scrollHooked||(s.scrollHooked=!0,s.addEventListener(Browser$1.InputStart,function(u){e.scrollDisabled=!0,u.stopPropagation()}),s.addEventListener(Browser$1.InputEnd,function(u){e.scrollDisabled=!1,e.startTime+=l+1e3})),e.cachedVisible=o,e.startTime){var c=t._scrollSpeed,d=l-e.startTime,f=c*d*.001;if(f>1&&!e.scrollDisabled){switch(a){case"ver":s.scrollTo({top:s.scrollTop+Math.floor(f),behavior:"smooth"});break;case"hor":s.scrollTo({left:s.scrollLeft+Math.floor(f),behavior:"smooth"});break}e.startTime=l}}}RenderObjectSprite.__super__.render.apply(e,arguments)};var renderObjectForm=function(){renderObjectForm.__super__.constructor.apply(this,arguments)};mod.extend(renderObjectForm,RenderObject);var proto$s=renderObjectForm.prototype;proto$s._setDisplayInitState=function(){var e=this,t=e._displayObject,r="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;"+(t._haveClickAction?"cursor: pointer;":""),a=StyleSheetManager.insertCss(r);e._classNameList.push(a),e._staticClassName=a,e._html='<div  ondragstart="return false;" data-type="form" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" ></div>'},proto$s._buildFun=function(){var e=this;renderObjectForm.__super__._buildFun.apply(this,arguments);for(var t=JSON.parse(e._displayObject._aniData.param.Form),r=e._parentMovieClipRenderObject,a=r;a&&a._displayObject._id!=1;)a=a._parent;var n,o=t.targetValue,s=o?JSON.parse(unescape(o)):null;if(s)var _={event:"click",id:"form",mode:2,name:"",param:s,type:t.openTarget=="frame"?"gotoAndPlay":"gotoPage"},l={renderObjectSceneSwitcher:a._renderObjectSceneSwitcher,parentMovieClip:r._displayObject,stage:e._displayObject._getRoot()._getRenderObject(),parentParentMovieClip:a._displayObject,displayObj:e._displayObject},n=ActionManager._getAction(_,l);n&&(t.callback=n.doAction.bind(n)),Browser$1._globalObject.MugedaBehavior.popupForm(t,!0);var c=t.iframeDiv;c&&(c.style.padding=0,e.getNode().appendChild(c))};var RenderObjectVideo=function(){var e=this;e._ctrls=null,e._arrowNode=null,e._playWaiting=!1,e._pauseWating=!1,e._canTriggerVideoStart=!1,e._canTriggerVideoAt=!1,e._currentVideoDom=null,e._rafId=null,RenderObjectVideo.__super__.constructor.apply(e,arguments)};mod.extend(RenderObjectVideo,renderObjectBitmap);var proto$r=RenderObjectVideo.prototype;proto$r._setDisplayInitState=function(){var e=this,t=e._displayObject;t._play=e._playVideo.bind(this),t._pause=e._pauseVideo.bind(this),t._stop=e._removeVideo.bind(this),t._jumpAndPlay=e._jumpAndPlayVideo.bind(this),t._jumpAndPause=e._jumpAndPauseVideo.bind(this),t._getText=proto$r._getCurrentTime.bind(this);var r=t._aniData.param||{},a=r.hidePlayIcon,n="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;cursor: pointer;",o="position: absolute; width: 100%; height: 100%;background:no-repeat center;background-size:cover;",s=StyleSheetManager.insertCss(n);e._classNameList.push(s),e._staticClassName=s;var _=t._getStage()._stageWidth,l=_/320,c=Math.floor(32*l),d=Math.floor(10*l),f=StyleSheetManager.insertCss("visibility: "+(a?"hidden":"visible")+";width: 73px;height: 48px;position: absolute;left: 0;top: 0;right: 0;bottom: 0;margin: auto;text-align: center;line-height: 84px;opacity: 0.6;");StyleSheetManager.insertCss("video_control_item","display: inline-block;float: left;height: "+c+"px;background-size: "+c/2+"px;background-repeat: no-repeat;background-position: center;"),StyleSheetManager.insertCss('mugeda_video_control [data-theme="gray"]',"filter: grayscale(100%);"),StyleSheetManager.insertCss("video_control_pause","background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+PGcgc3R5bGU9ImZpbGw6IzQyQTFGRiI+PGcgaWQ9InBhdXNlIj48Zz48cmVjdCB4PSI0IiB3aWR0aD0iOCIgaGVpZ2h0PSIzMiIgLz48cmVjdCB4PSIyMCIgd2lkdGg9IjgiIGhlaWdodD0iMzIiIC8+PC9nPjwvZz48L2c+PC9zdmc+);"),StyleSheetManager.insertCss("video_control_play","background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIGlkPSJpY29uLXBsYXkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTIwIDEyMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGcgc3R5bGU9ImZpbGw6ICM0MkExRkY7IiA+PHBvbHlnb24gcG9pbnRzPSIxNy41LDEyMCAxNy41LDAgMTA3LjUsNjAiLz48L2c+PC9zdmc+);"),StyleSheetManager.insertCss("video_control_audio_on","background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgNjExLjk2NCA2MTEuOTY0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MTEuOTY0IDYxMS45NjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjg0LjU1NCw2NC4wMTljLTguMjYxLTMuMzkxLTE3Ljg1Ni0xLjQ3OS0yNC4yNiw0LjkyNEwxMjUuODgxLDIwNC4yNzZIMjIuMjRDOS45MzgsMjA0LjI3NiwwLDIxNC4yMzIsMCwyMjYuNTM0djE2MC41ODQgICAgYzAsMTIuMzAyLDkuOTM4LDIyLjI0LDIyLjI0LDIyLjI0aDEwMy4wMWwxMzUuMTM0LDEzNS4yOTdjNC4yNTYsNC4yOTIsOS45Miw2LjU2NSwxNS43MjgsNi41NjVjMi44NjgsMCw1LjczNi0wLjU2LDguNTMyLTEuNzE0ICAgIGM4LjI5Ny0zLjQwOSwxMy43MjYtMTEuNTYyLDEzLjcyNi0yMC41NDRsLTAuMDM2LTQ0NC4zNDVDMjk4LjMzNCw3NS41ODEsMjkyLjg4Nyw2Ny41LDI4NC41NTQsNjQuMDE5eiBNMTUwLjI4NiwzNzEuMzkgICAgYy00LjE2Ny00LjE2Ny05Ljg2Ny02LjUxMi0xNS43NjUtNi41MTJINDQuNDk4VjI0OC43OTJoOTAuNjE5YzUuOTUyLDAsMTEuNjE2LTIuMzQ1LDE1Ljc4My02LjU2NmwxMDIuOTM4LTEwMy42NDFsMC4wMzYsMzM2LjYyNyAgICBMMTUwLjI4NiwzNzEuMzl6IiBmaWxsPSIjNDJhMWZmIi8+CgkJPHBhdGggZD0iTTUxNi4xNSwzMDYuMjIyYzAtODMuMzg2LTQ5LjU4NC0xNTguNTEtMTI2LjM2OC0xOTEuMzU2Yy0xMS4xNjUtNC44Ny0yNC4zMzIsMC4zNDMtMjkuMTg0LDExLjY1MiAgICBjLTQuODE2LDExLjI5MSwwLjQzMywyNC4zNjgsMTEuNzI0LDI5LjIwMmM2MC4zMTYsMjUuOTAxLDk5LjMzMSw4NC45MzcsOTkuMzMxLDE1MC41MmMwLDY1LjIyMi0zOC43OTgsMTI0LjA5Ni05OC44MjYsMTQ5Ljk5NiAgICBjLTExLjI5MSw0Ljg3LTE2LjUwNCwxNy45ODMtMTEuNjUxLDI5LjIzOGMzLjY0NCw4LjQyNCwxMS44MTQsMTMuNDIsMjAuNDE4LDEzLjQyYzIuOTU4LDAsNS45MTYtMC41NTksOC43ODQtMS44NCAgICBDNDY2Ljc4Myw0NjQuMTcyLDUxNi4xNSwzODkuMjEsNTE2LjE1LDMwNi4yMjJ6IiBmaWxsPSIjNDJhMWZmIi8+CgkJPHBhdGggZD0iTTQxNy42MzIsMzA2LjEzMWMwLTQ0LjA2NS0yNi4xODktODMuNjAyLTY2LjY4NC0xMDAuODFjLTExLjI5MS00LjY4OS0yNC4zNSwwLjQ4Ny0yOS4yMDIsMTEuODE0ICAgIGMtNC43NzksMTEuMjkxLDAuNTIzLDI0LjMzMiwxMS44MTQsMjkuMTY2YzI0LjA4LDEwLjIwOSwzOS41NzMsMzMuNjc1LDM5LjU3Myw1OS44MjljMCwyNS44NDctMTUuMzg2LDQ5LjI3Ny0zOS4xOTQsNTkuNjEyICAgIGMtMTEuMjU1LDQuODctMTYuNDY4LDE4LjAwMS0xMS41MDgsMjkuMjM4YzMuNjQ0LDguMzg4LDExLjgxNCwxMy4zODQsMjAuNDE4LDEzLjM4NGMyLjk1OCwwLDUuOTE2LTAuNTYsOC44Mi0xLjg1NyAgICBDMzkxLjc0OCwzODkuMTIxLDQxNy42MzIsMzQ5LjcwOSw0MTcuNjMyLDMwNi4xMzF6IiBmaWxsPSIjNDJhMWZmIi8+CgkJPHBhdGggZD0iTTQyNy42NDMsMjYuNzljLTExLjI1NS00LjkwNi0yNC4zNjgsMC4zOTctMjkuMjM4LDExLjY4OGMtNC44MTYsMTEuMjkyLDAuNDE1LDI0LjMzMywxMS42NywyOS4yMDIgICAgYzk1LjY1MSw0MS4wMTcsMTU3LjQxLDEzNC42NDcsMTU3LjQxLDIzOC41NDJjMCwxMDMuNTg3LTYxLjU5NywxOTcuMDAxLTE1Ni44NTEsMjM4LjEwOCAgICBjLTExLjI5Miw0Ljg4OS0xNi41MDQsMTcuOTY1LTExLjY1MiwyOS4yMDJjMy42NDQsOC40NDEsMTEuODE0LDEzLjQ3NCwyMC40MzcsMTMuNDc0YzIuOTM5LDAsNS44OTctMC42MTMsOC43NjYtMS44MjEgICAgYzExMS42NjgtNDguMTU5LDE4My43OC0xNTcuNjQ1LDE4My43OC0yNzguOTYyQzYxMiwxODQuNTA3LDUzOS42MTcsNzQuODA1LDQyNy42NDMsMjYuNzl6IiBmaWxsPSIjNDJhMWZmIi8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==);"),StyleSheetManager.insertCss("video_control_audio_off","background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgNjExLjk4IDYxMS45OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNjExLjk4IDYxMS45ODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik05MS4yMjYsNDE0LjgzM2gzMS4wMjVsNTAuNDIxLTUwLjQyaC01Ni4yMjZWMjMyLjg1MmgxMDIuNjgxYzYuNzA0LDAsMTMuMTAxLTIuNjk4LDE3Ljg4NC03LjQzOWwxMTYuNjQxLTExNy40Mzh2NzUuNDc4ICAgIGw1MC40MjEtNTAuNDIxVjQ2Ljg0NGMwLTEwLjE5OS02LjIxNC0xOS40NTctMTUuNjc3LTIzLjNjLTkuMzYtMy45MjQtMjAuMTcyLTEuNzU3LTI3LjQ2OSw1LjUxOUwyMDguNTgyLDE4Mi40MzFIOTEuMjI2ICAgIGMtMTQsMC0yNS4yLDExLjI4Mi0yNS4yLDI1LjJ2MTgxLjk4MUM2Ni4wMjUsNDAzLjU1Miw3Ny4yNDYsNDE0LjgzMyw5MS4yMjYsNDE0LjgzM3oiIGZpbGw9IiM0MmExZmYiLz4KCQk8cGF0aCBkPSJNMzUzLjY1Miw0ODkuNDExbC03OC4wOTUtNzguMTc2bC0zNS42NDQsMzUuNjQ1TDM2MC45ODksNTY4LjJjNC44MjMsNC44MjQsMTEuMjgyLDcuMzc5LDE3Ljg4NCw3LjM3OSAgICBjMy4yMjksMCw2LjQ3OS0wLjU5Miw5LjYwNS0xLjkyMmM5LjQwMS0zLjg4MywxNS42MTUtMTMuMSwxNS42MTUtMjMuMjk5VjI4Mi43NDFsLTUwLjQyMSw1MC40MjJ2MTU2LjI0OEgzNTMuNjUyeiIgZmlsbD0iIzQyYTFmZiIvPgoJCTxwYXRoIGQ9Ik02MDMuODU1LDguMDkzYy01LjM5Ni01LjQxNi0xMi41MDgtOC4wNzMtMTkuNi04LjA3M3MtMTQuMTY0LDIuNjU3LTE5LjYwMSw4LjA3M0w0MDQuMDczLDE2OC42OTZsLTUwLjQyMSw1MC40MjEgICAgTDIwOC4zMTYsMzY0LjQxM2wtNTAuNDIxLDUwLjQyTDguMTI0LDU2NC42NDZjLTEwLjgzMiwxMC44MzItMTAuODMyLDI4LjM2NywwLDM5LjE5OWM1LjQxNiw1LjQxNiwxMi40ODgsOC4xMTUsMTkuNTgsOC4xMTUgICAgYzcuMTEyLDAsMTQuMTg0LTIuNzE5LDE5LjYtOC4xMTVsMTc0Ljc4Ny0xNzQuNzg3bDM1LjcwNS0zNS42ODZsOTUuODU2LTk1Ljg3NWw1MC40MjEtNTAuNDIxTDYwMy44NTUsNDcuMjczICAgIEM2MTQuNjg4LDM2LjUwMiw2MTQuNjg4LDE4LjkyNiw2MDMuODU1LDguMDkzeiIgZmlsbD0iIzQyYTFmZiIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=);"),StyleSheetManager.insertCss('mugeda_render_object[data-mid="'+t._id+'"] video::-webkit-media-controls',"align-items: flex-start;"),StyleSheetManager.insertCss('mugeda_render_object[data-mid="'+t._id+'"] video::-webkit-media-controls-enclosure',"width: "+t._rawWidth+"px;position: relative;"),e._html='<div  ondragstart="return false;" data-type="video" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}"><div style="'+o+'" ></div>',e._html+='<svg version="1.0" class="'+f+'" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="73px" height="48px" viewBox="0 0 73 48" enable-background="new 0 0 73 48" xml:space="preserve">   <g opacity="0.8">   <path d="M73,43c0,2.8-2.3,5-5,5H5c-2.8,0-5-2.3-5-5V5c0-2.8,2.3-5,5-5h63c2.8,0,5,2.3,5,5V43z"/>   </g>   <polygon fill="#FFFFFF" points="28,12.5 28,35.5 48.4,24 "/></svg>';var u=(Mugeda.options||{}).videoProgressColor||"#ee7700",p=t._width-c*3-c*3/2-4,v=Math.floor(15*l),h=Math.floor(16*l);e._html+='<div class="mugeda_video_control" style="display:none; width:100%;height:'+c+'px;background-color:rgba(0,0,0,0.75);color:white;position:absolute;bottom:0;transform: translateZ(0)" data-cid="3">    <div class="video_control_item video_control_pause" data-theme="gray" data-control="play" style="width:'+c+'px; cursor:pointer;" ></div>    <div class="video_control_item video_control_length" data-theme="gray" style="width:'+Math.floor(48*l)+"px; font-size:"+d+"px; line-height:"+c+'px;font-family: Arial; color:#aaa;" >0:00 / 0:00</div>    <div  class="video_control_item video_control_progress" style="width:'+p+'px; position:relative;" ><div class="video_control_bar" style="position: absolute; left: '+v+"px; top: "+v+"px; right: "+v+"px; bottom: "+v+"px;  background: #bbb; border-radius: "+Math.floor(l)+'px;"><div class="video_control_loaded" style="position: absolute; left: 0; top: 0; width:0%; bottom: 0; background: '+u+'; border-radius: 1px;"></div><div class="video_control_slider" data-theme="gray" style="width: '+h+"px; height: "+h+"px; position: absolute; left: 0; top: "+Math.floor(-7*l)+'px; background-color: #42a1ff; border-radius: 50%; cursor:pointer;" ><div class="video_control_target" style="position: absolute;top: -'+Math.floor(36*l)+"px;width: "+c+"px;background: rgba(0,0,0,0.75);left: -"+Math.floor(12*l)+"px;padding: "+Math.floor(4*l)+"px;border-radius: "+Math.floor(4*l)+"px;font-size: "+d+'px;font-family: Arial;text-align: center;">0:00</div></div></div></div>    <div class="video_control_item video_control_audio_on" data-theme="gray" data-control="audio" style="width:'+c+'px;"></div>    <div class="video_control_item video_control_full" data-theme="gray" style="width:'+c+'px; transform: translateZ(1px); -webkit-transform: translateZ(1px); background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjU2cHgiIGhlaWdodD0iMjU2cHgiIHZpZXdCb3g9IjAgMCAzNTcgMzU3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48ZyBpZD0iZnVsbHNjcmVlbiIgc3R5bGU9ImZpbGw6ICM0MmExZmY7IiA+PHBhdGggZD0iTTUxLDIyOS41SDBWMzU3aDEyNy41di01MUg1MVYyMjkuNXogTTAsMTI3LjVoNTFWNTFoNzYuNVYwSDBWMTI3LjV6IE0zMDYsMzA2aC03Ni41djUxSDM1N1YyMjkuNWgtNTFWMzA2eiBNMjI5LjUsMHY1MSAgICBIMzA2djc2LjVoNTFWMEgyMjkuNXoiIC8+PC9nPjwvZz48L3N2Zz4=);"></div></div>',e._html+="</div>",t._addEventListener("visibilityChanged",e._visibilityChanged.bind(e))},proto$r._visibilityChanged=function(){var e=this,t=e._displayObject,r=t._getRealVisible();r||window.MugedaMraid&&window.MugedaMraid.stopVideo()},proto$r._delayedHide=function(e){var t=this;t._ctrls&&(t._hideTimer&&(clearTimeout(t._hideTimer),t._hideTimer=null),e&&(t._hideTimer=setTimeout(function(){(t._ctrls.style.display="block")&&(t._ctrls.style.display="none")},3e3)))},proto$r.getNode=function(e){var t=this,r=RenderObjectVideo.__super__.getNode.apply(t,arguments);return e&&r?r.firstChild:(t._arrowNode==null&&r&&(t._arrowNode=r.children[1]),r)},proto$r.render=function(){var e=this;RenderObjectVideo.__super__.render.apply(e,arguments);var t=e._displayObject,r=e._arrowNode.style,a=t._getTotalMatrix(),n=t._getStage()._transform._matrix;a=Matrix._multiplication(n,a).inverse(),r[Browser$1.prefix.js+"Transform"]="scaleX("+a._getScaleX()+") scaleY("+a._getScaleY()+")";var o=t._getWidth(),s=t._getHeight(),_=t._rawWidth,l=t._rawHeight,c=o/_,d=s/l;d>c?(c=d/c,d=1):(d=c/d,c=1);var f=e.getNode(!0);f.style[Browser$1.prefix.js+"Transform"]="scaleX("+c+") scaleY("+d+")"},proto$r._setOutsideVideoPosition=function(e){var t=this,r=t.getNode(),a=r.getBoundingClientRect();e.style.cssText+="left:"+a.left+"px;top:"+a.top+"px;width:"+a.width+"px;height:"+a.height+"px;"},proto$r._removeVideo=function(){var e=this,t=e._findVideoDom();t&&(e._pauseVideo(),t.canvas&&t.canvas.parentNode.removeChild(t.canvas),t.iframe&&t.iframe.parentNode.removeChild(t.iframe),t.parentNode.removeChild(t),e._ctrls&&(e._ctrls.style.display="none"),e._displayObject._dispatchEvent(new MuEvents("videoend")),e._currentVideoDom=null,e._displayObject._removeEventListener("rendered",e._bindSetOutsideVideoPosition),e._displayObject._removeEventListener("rendered",e._bindSetEmbedVideoPosition),cancelAnimationFrame(e._rafId),e._displayObject._getRoot()._renderManager._unregisterMediaDom(e._displayObject._guid,t,e._displayObject._name))},proto$r._createAndPlayVideo=function(){var e=this,t=e._displayObject,r=document.createElement("video");r._relativeRenderObject=e;var a=null,n=null,o=e._displayObject._getRoot()._transform._getMatrix(),s=t._getTotalMatrix(),_=Matrix._multiplication(o,s),l=_._getRotation()/Math.PI*180;if(Math.abs(90-l)<.1&&(r.style.cssText+="transform-origin: 0% 0%; transform: rotate(0.01deg);"),r.addEventListener("touchstart",function(F){a=Date.now()}),r.addEventListener("touchend",function(F){Date.now()-a<200&&setTimeout(function(){Date.now()-n>100&&r.parentNode.dispatchEvent(new Event("click"))},50)}),r.addEventListener("click",function(F){n=Date.now(),F.preventDefault()}),t._embedVideoTempDisabled&&(t._embedVideo=!0,delete t._embedVideoTempDisabled),t._embedVideo&&Browser$1.os.android&&Browser$1._weChat){var c=t._getBoundary(t._getTotalMatrix()),d=c._nodes[0],f=c._nodes[1],u=c._nodes[2],p=c._nodes[3],v=!0,h=t._getRoot();[d,f,u,p].forEach(function(F){F._x<1||F._x>h._stageWidth-1||F._y<1||F._y>h._stageHeight-1||(v=!1,console.log("ok h5 video"))}),v||(t._embedVideo=!1,t._embedVideoTempDisabled=!0)}t._showControls&&!t._embedVideo&&r.setAttribute("controls",""),e._displayObject._loop&&r.setAttribute("loop",""),r.setAttribute("data-vid",t._guid),r.setAttribute("data-vname",t._name||""),r.setAttribute("src",t._video._meidaSourceUrl||t._video._src),r.setAttribute("playsinline",""),r.setAttribute("x-webkit-airplay",""),r.setAttribute("webkit-playsinline",""),r.setAttribute("preload","auto"),r.style.cssText+="width:100%;height:100%;position:absolute;",t._embedVideo?(r.setAttribute("x5-video-player-type","h5"),r.setAttribute("x5-video-player-fullscreen","true"),r.style.cssText+="object-fit: cover;",t._dispatchEvent(t._changedEvent),Browser$1._isWeChat()&&Browser$1.os.android&&(r.mugedaEnterFullScreen=function(){if(!r.isMugedaFullScreen){r.isMugedaFullScreen=!0,r.style.cssText+="z-index: 1000000000000; visibility: visible;background: black;";var F=!r.paused;document.body.appendChild(r),F&&r.play(),r.videoWidth/r.videoHeight>1&&window.screen.width/window.screen.height<1?(r.setAttribute("x5-video-orientation","landscape"),setTimeout(function(){r.style.cssText+="width:"+window.screen.width+"px; height: "+window.screen.height+"px;"},500)):setTimeout(function(){r.style.cssText+="width:"+window.screen.width+"px; height: "+window.screen.height+"px;"},500)}},r.mugedaExitFullScreen=function(){if(r.isMugedaFullScreen){r.isMugedaFullScreen=!1,r.style.cssText+="z-index: -10; visibility: hidden;background: transparent;";var F=!r.paused,W=t._getRoot()._getRenderObject();W.getNode().appendChild(r),F&&r.play(),r.removeAttribute("x5-video-orientation"),r.style.cssText+="width: 100%; height: 100%;"}},r.addEventListener("x5videoexitfullscreen",function(){r.mugedaExitFullScreen()}))):t._outsideVideo||r.setAttribute("x5-playsinline",""),r.addEventListener("pause",function(){e._playWaiting=!1,e._lastStateChangeTime=new Date().getTime(),!r.ended&&r.currentTime!==0&&t._dispatchEvent(new MuEvents("videopause"));var F=window.backgroundMusic;t._needStopAudio&&F&&F.prevPlayStatus==1&&(F.play(),F.playStatus=1,delete F.prevPlayStatus),r.addEventListener("timeupdate",T),!t._needStopAudio&&F&&Browser$1.os.ios&&m.binded&&(F.removeEventListener("pause",m),m.binded=!1)});var m=function(){var F=window.backgroundMusic;F.playStatus===1&&F.paused&&F.play()};r.addEventListener("play",function(){e._lastStateChangeTime=new Date().getTime();var F=window.backgroundMusic;!t._needStopAudio&&F&&Browser$1.os.ios&&(m.binded||(F.addEventListener("pause",m),m.binded=!0,m()))}),r.addEventListener("ended",function(){var F=!1;do{var W=e._displayObject,G=W._name;if(!G){F=!1;break}var Z=W.actions&&W.actions.filter(function(U){return U._event===ActionEvent.VIDEOEND});if(!Z){F=!1;break}var X=Z.filter(function(U){return U._behavior.type==="controlVideo"&&U._behavior.param.video_target===G});X.length?F=!0:F=!1}while(!1);F?e._displayObject._dispatchEvent(new MuEvents("videoend")):(window.webkitMediaStream&&(this.srcObject=null),e._removeVideo())});var T=function(){if(r.currentTime>0){r.removeEventListener("timeupdate",T);var F=window.backgroundMusic;t._needStopAudio&&F&&(F.prevPlayStatus=F.playStatus===void 0?1:F.playStatus,F.pause(),F.playStatus=0),e._canTriggerVideoStart&&(t._dispatchEvent(new MuEvents("videostart")),e._canTriggerVideoStart=!1,r.canvas&&(r.canvas.style.display="block"))}},y=function(){if(e._canTriggerVideoAt){var F=new MuEvents("videoat");F._media=r,t._dispatchEvent(F),r.canvas&&(r.canvas.style.display="block")}};r.addEventListener("timeupdate",T);var E=function(){y(),e._rafId=requestAnimationFrame(E)};if(r.onplay=function(){E()},r.onpause=function(){cancelAnimationFrame(e._rafId)},r.onended=function(){cancelAnimationFrame(e._rafId)},t._embedVideo){window.h5Videos===void 0&&Object.defineProperty(window,"h5Videos",{set:function(F){console.log(F)},get:function(){return[]}});var g=t._getRoot()._getRenderObject(),b=g.getNode(),w=e.getNode();w.appendChild(r),t._aniData.param.imageSrc&&(r.style.opacity=0),w.style.overflow="hidden";var x=e._ctrls=e.getNode().querySelector(".mugeda_video_control");if(x){var C=x.querySelector('[data-control="play"]'),M=x.querySelector(".video_control_full"),A=x.querySelector('[data-control="audio"]'),O=x.querySelector(".video_control_slider"),S=x.querySelector(".video_control_loaded"),L=x.querySelector(".video_control_length"),D=x.querySelector(".video_control_target"),$=x.querySelector(".video_control_bar");e.getNode().insertBefore(r,x),e.getNode().querySelector("svg").style.display="none",x.style.display=t._showControls?"block":"none",D.style.display="none",e._delayedHide(!0)}else e.getNode().appendChild(r),e.getNode().querySelector("svg").style.display="none";r.addEventListener("pause",function(){C&&(C.className="video_control_item video_control_play")}),r.addEventListener("play",function(){C&&(C.className="video_control_item video_control_pause"),A&&(A.className="video_control_item video_control_audio_"+(r.muted?"off":"on"))}),r.addEventListener("volumechange",function(F){A&&(A.className="video_control_item video_control_audio_"+(r.muted?"off":"on"))});var R=function(){var F=r.buffered;if(!F||!F.length)return;function W(Z,X){for(var U=Z.length,z=-1,te=0,Y=0,k=0;k<U;k++)if(X>=(te=Z.start(k))&&X<=(Y=Z.end(k))){z=k;break}return[z,te,Y]}F=W(F,r.currentTime);var G=Math.floor(F[2]/r.duration*100);r.loadedPercent!=G&&(S&&(S.style.width=G+"%"),r.loadedPercent=G)};r.addEventListener("progress",R);var I=function(F){var W=document.webkitFullscreenElement!==null;r.style.visibility=W?"visible":"hidden"},P=function(F){var W=Math.floor(F/60),G=Math.floor(F-W*60);return W+":"+(G<10?"0":"")+G};r.addEventListener("fullscreenchange",I),r.addEventListener("webkitfullscreenchange",I),C&&(C.onclick=function(F){r[r.paused?"play":"pause"](),e._delayedHide(!0),F.stopPropagation()}),A&&(A.onclick=function(F){r.muted?(r.muted=!1,r.cachedVolume!==void 0&&(r.volume=r.cachedVolume,delete r.cachedVolume)):(r.muted=!0,r.cachedVolume=r.volume),e._delayedHide(!0),F.stopPropagation()}),M&&(M.onclick=function(F){Browser$1.os.android?r.mugedaEnterFullScreen&&r.mugedaEnterFullScreen():r.enterFullscreen?r.enterFullscreen():r.webkitEnterFullscreen?r.webkitEnterFullscreen():r.requestFullScreen?r.requestFullScreen():r.webkitRequestFullScreen&&r.webkitRequestFullScreen(),e._delayedHide(!0),F.stopPropagation()});var N=!1,B=0,j={};h=t._getRoot(),O&&O.addEventListener(Browser$1.InputStart,function(F){N=!0;var W=InputEvent._getRealPos(h,F);j.x=W._x,j.y=W._y,j.startPercent=parseInt(O.style.left);var G=P(r.duration*j.startPercent*.01);D.innerHTML=G,D.style.display="block",e._delayedHide(!1),F.stopPropagation()}),b.addEventListener(Browser$1.InputMove,function(F){if(N){var W=InputEvent._getRealPos(h,F),G=W._x;W._y;var Z=G-j.x;G-j.y;var X=$.clientWidth,U=100*Z/X;B=Math.min(100,Math.max(0,j.startPercent+U));var z=P(r.duration*B*.01);O.style.left=Math.floor(B*.01*X-O.clientWidth*.5)+"px",D.innerHTML=z}}),b.addEventListener(Browser$1.InputEnd,function(F){N&&(N=!1,r.currentTime=r.duration*B*.01,D.style.display="none",e._delayedHide(!0))});var V=!1;r.addEventListener("timeupdate",function(F){V||(r.currentTime>0&&!r.paused&&(V=!0),e._setEmbedVideoPosition(r));var W=100*r.currentTime/r.duration;!N&&O&&(O.style.left=W+"%"),L&&(L.innerHTML=P(r.currentTime)+" / "+P(r.duration)),R()}),e._bindSetEmbedVideoPosition=function(){e._setEmbedVideoPosition(r)},t._addEventListener("rendered",e._bindSetEmbedVideoPosition),e._bindSetEmbedVideoPosition()}else if(t._outsideVideo)document.body.appendChild(r),e._setOutsideVideoPosition(r),e._bindSetOutsideVideoPosition=function(){e._setOutsideVideoPosition(r)},t._addEventListener("rendered",e._bindSetOutsideVideoPosition);else if(e.getNode().appendChild(r),t._bitmapData&&t._bitmapData._src.indexOf("data:image/gif")!==0&&Browser$1.os.android&&Browser$1._weChat){r.style.display="none";var Q=function(){r.currentTime>.1&&(r.style.display=null,r.removeEventListener("timeupdate",Q))};r.addEventListener("timeupdate",Q)}return e._canTriggerVideoStart=!0,e._canTriggerVideoAt=!0,e._currentVideoDom=r,e._playVideo(),e._displayObject._getRoot()._renderManager._registerMediaDom(e._displayObject._guid,r,e._displayObject._name),r},proto$r._setEmbedVideoPosition=function(e){var t=this,r=t._displayObject,a=r._getStage(),n=a._fullScreenRect,o=n._getTopLeft(),s=n._getTopRight(),_=n._getBottomRight(),l=n._getBottomLeft(),c=r._getTotalMatrix(),d=c._inverse();d._transform(o,!0),d._transform(s,!0),d._transform(_,!0),d._transform(l,!0);var f=Math.min(o._x,s._x,_._x,l._x),u=Math.min(o._y,s._y,_._y,l._y),p=Math.max(o._x,s._x,_._x,l._x),v=Math.max(o._y,s._y,_._y,l._y),h=p-f,m=v-u,T=r._rawWidth/2,y=r._rawHeight/2,E=Math.min(h/e.videoWidth,m/e.videoHeight);if(!isNaN(E)){var g=e.videoWidth*E,b=e.videoHeight*E,w=T-g/2,x=y-b/2,C=w-f,M=x-u;Math.abs(C)<.01&&(C=0),Math.abs(M)<.01&&(M=0),e.style.cssText+="left:"+f+"px; top:"+u+"px; width:"+(p-f)+"px; height:"+(v-u)+"px; object-position: "+C+"px "+M+"px; object-fit: contain",e.readyState>0&&e.currentTime>0&&!e.paused&&(e.style.cssText+="background: black; opacity:1;")}},proto$r._findVideoDom=function(){return this._currentVideoDom},proto$r._playVideo=function(){var e=this,t=e._displayObject;e._pauseWating=!1;var r=e._findVideoDom();if(r){if(r.play(),Browser$1._weChat){if(e._playWaiting)return;e._playWaiting=!0,Browser$1._getWechatJSBridge(function(a){a.invoke("getNetworkType",{},function(){e._playWaiting&&(r.play(),e._playWaiting=!1)})})}}else r=e._createAndPlayVideo();Mugeda.DataStats&&Mugeda.DataStats.entry({type:"playVideo",id:t._guid,target:r})},proto$r._pauseVideo=function(){var e=this,t=e._displayObject,r=e._findVideoDom();r&&(r.paused||Mugeda.DataStats&&Mugeda.DataStats.entry({type:"stopVideo",id:t._guid,target:r}),r.readyState>0?(e._playWaiting=!1,r.pause()):(e._pauseWating=!0,r.addEventListener("loadedmetadata",function(){e._pauseWating&&r.pause()})))},proto$r._jumpAndPlayVideo=function(e){var t=this,r=t._findVideoDom();if(r)r.currentTime=e,t._playVideo();else{r=t._createAndPlayVideo();var a=function(){r.removeEventListener("play",a),setTimeout(function(){r.currentTime=e,t._playVideo()},500)};r.addEventListener("play",a)}},proto$r._getCurrentTime=function(){var e=this,t=e._findVideoDom();return t?t.currentTime:0},proto$r._jumpAndPauseVideo=function(e){var t=this,r=t._findVideoDom();if(r)r.currentTime=e,t._pauseVideo();else{r=t._createAndPlayVideo();var a=function(){setTimeout(function(){r.currentTime=e,t._pauseVideo(),r.removeEventListener("canplay",a)},500)};r.addEventListener("canplay",a)}},proto$r._buildFun=function(){var e=this,t=e._displayObject;t._addEventListener("click",function(r){r.preventDefault();var a=e._findVideoDom();if(a){if(new Date().getTime()-e._lastStateChangeTime<150)return;if(!t._aniData.param.hidePlayControls){var n=r._getInputY(),o=new Point(t._getRawWidth(),t._getRawHeight()-50),s=t._getTotalMatrix()._transform(o);if(n>s._y){console.log("skip");return}}t._clickCanPause?a.paused||a.readyState===0?e._playVideo():e._pauseVideo():e._playVideo(),e._ctrls&&t._showControls&&(e._ctrls.style.display=e._ctrls.style.display=="none"?"block":"none",e._delayedHide(!0))}else e._createAndPlayVideo()}),t._autoPlay&&t._getRealVisible()&&e._createAndPlayVideo(),t._addEventListener("visibilityChanged",function(){var r=t._getRealVisible(),a=e._findVideoDom();r&&t._autoPlay?e._playVideo():!r&&a&&e._removeVideo()}),RenderObjectVideo.__super__._buildFun.apply(e,arguments)};var renderObjectAudioControl=function(){var e=this;e._controlSourceIsAppear=!0,e._audioObjectInstance=null,e.playingCheckTimer=null,e._status=null,e._actionPausedMark=!0,renderObjectAudioControl.__super__.constructor.apply(e,arguments)};mod.extend(renderObjectAudioControl,renderObjectBitmap);var proto$q=renderObjectAudioControl.prototype;proto$q._setDisplayInitState=function(){var e=this,t=e._displayObject,r=e._audioObjectInstance=t._audioObject;t._loop&&r._setLoop(!0);var a=r._audio;t._addEventListener("click",e._clickHandler.bind(e)),t._addEventListener("visibilityChanged",e._visibilityChanged.bind(e)),a.addEventListener("pause",e._audioPauseEventHandler.bind(e)),a.addEventListener("playing",e._audioPlayingEventHandler.bind(e)),a.addEventListener("timeupdate",e._audioTimeUpdateEventHandler.bind(e)),t._jumpAndPlay=e._jumpAndPlayAudio.bind(e),t._jumpAndPause=e._jumpAndPlayAudio.bind(e),t._autoPlay&&t._getRealVisible()?t._getStage()._addEventListener("renderready",function(){e._audioObjectInstance._audio.play(),e._setIcoState("off")}):e._setIcoState("off"),renderObjectAudioControl.__super__._setDisplayInitState.apply(e,arguments)},proto$q._audioTimeUpdateEventHandler=function(){var e=this,t=e._displayObject,r=e._audioObjectInstance=t._audioObject;t._triggerBehavior(ActionEvent.AUDIOAT,r._audio)},proto$q._clickHandler=function(){var e=this;renderObjectAudioControl.__super__.render.apply(e,arguments);var t=e._audioObjectInstance._audio,r=e._status;r=="on"?t.pause():t.play()},proto$q._visibilityChanged=function(){var e=this,t=e._displayObject,r=t._getRealVisible(),a=e._audioObjectInstance._audio;r?(a.readyState>0,t._autoPlay&&a.play()):a.readyState>0&&(a.pause(),a.currentTime=0)},proto$q._audioPauseEventHandler=function(){var e=this;e._setIcoState("off"),e._resetTimer();var t=e._audioObjectInstance._audio;if(e._actionPausedMark=!0,t.ended||t.currentTime===0)e._displayObject._triggerBehavior(ActionEvent.AUDIOSTOP);else{var r=t.currentTime;setTimeout(function(){var a=t.currentTime;r===0||a===0&&r!==0?e._displayObject._triggerBehavior(ActionEvent.AUDIOSTOP):e._displayObject._triggerBehavior(ActionEvent.AUDIOPAUSE)})}},proto$q._resetTimer=function(){this.playingCheckTimer&&clearTimeout(this.playingCheckTimer)},proto$q._audioPlayingEventHandler=function(){var e=this;e._resetTimer();var t=e._audioObjectInstance._audio,r=t.currentTime,a=function(){e.playingCheckTimer=null,t.currentTime!=r?(n(),e._actionPausedMark=!1):e.playingCheckTimer=setTimeout(a,100)};e.playingCheckTimer=setTimeout(a,10);var n=function(){e._setIcoState("on"),e._actionPausedMark&&e._displayObject._triggerBehavior(ActionEvent.AUDIOSTART)}},proto$q._setIcoState=function(e){var t=this,r=t._displayObject;if(e=="off")var a=r._audioOffBitmap;else e=="on"&&(a=r._audioOnBitmap);r._setBitmapData(a),t._status=e},proto$q._jumpAndPlayAudio=function(e){var t=this,r=t._audioObjectInstance._audio;r.currentTime=e,setTimeout(function(){r.play()},100)},proto$q._jumpAndPauseAudio=function(e){var t=this,r=t._audioObjectInstance._audio;r.currentTime=e,setTimeout(function(){r.pause()},100)};var renderObjectSlides=function(){renderObjectSlides.__super__.constructor.apply(this,arguments);var e=this;e._inputStartInfo={},e._autoTimer=null,e._transitionCounter=0,e._transitionTime=800};mod.extend(renderObjectSlides,RenderObject);var proto$p=renderObjectSlides.prototype;proto$p._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.param,a=r.imgs||[],n=r.sizeMode||"contain",o=r.dir||"horizontal",s=r.show===void 0?1:r.show,_="position: absolute; overflow: hidden; outline: none; padding: 0; background: transparent; border-radius: 0; border: none; width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"transform-origin: left top;"+Browser$1.prefix.css+"appearance:none;"+Browser$1.prefix.css+"user-select: initial;",l=StyleSheetManager.insertCss(_);e._classNameList.push(l),e._staticClassName=l,e._html='<div ondragstart="return false;" data-type="slides" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" >';var c=e._transitionTime;e._html+='<div id="slide_holder_'+t._id+'" class="slide_holder" style="'+Browser$1.prefix.css+"transition: left "+c+"ms ease-in-out, top "+c+'ms ease-in-out;overflow:visible;display:block;width:100%;height:100%;position:absolute;left:0;top:0;">';for(var d=o=="vertical"?0:-t._rawWidth,f=o=="vertical"?-t._rawHeight:0,u=0;u<=a.length+1;u++){var p=u==0?a.length-1:u==a.length+1?0:u-1;a[p]&&(e._html+='<div class="slide_image" style="display:block;width:100%;height:100%;position:absolute;left: '+d+"px;top:"+f+"px;background-image: url("+a[p].img+");background-position:center;background-repeat:no-repeat;background-size:"+(n=="fill"?"100% 100%":n)+';"></div>'),o=="vertical"?f+=t._rawHeight:d+=t._rawWidth}e._html+="</div>";var v=(t._rawHeight-a.length*16)/2;e._html+='<div id="dots_holder_'+t._id+'" align="center" class="dots_holder" style="display:'+(s==0?"none":"block")+";width:"+(o=="vertical"?"16px":"100%")+";height:"+(o=="vertical"?"100%":"16px")+";position:absolute;"+(o=="vertical"?"top:0;right:8px":"left:0;bottom:8px;")+"; padding-top:"+(o=="vertical"?v+"px":"0")+'">';for(var u=0;u<a.length;u++)e._html+='<div id="slide_dot_'+(t._id+"_"+u)+'" class="slide_dot dot_active" style="display:inline-block;width:8px;height:8px;background-color:white;border:none; opacity:'+(u==e._displayObject._activeIndex?"0.9":"0.3")+';margin:4px;border-radius:50%;"></div>';e._html+="</div>",e._html+="</div>"},proto$p._buildFun=function(){var e=this;renderObjectSlides.__super__._buildFun.apply(e,arguments),e._displayObject._addEventListener(Browser$1.InputStart,e._inputDown.bind(e)),e._displayObject._addEventListener(Browser$1.InputEnd,e._inputUp.bind(e))},proto$p._prepareCapture=function(e){var t=this,r=t._displayObject,a=r._aniData.param,n=a.imgs||[],o=document.querySelector("#dots_holder_"+r._id+" .dot_active"),s=0;try{s=parseInt(o.id.split("_").pop())}catch{}if(n[s]&&n[s].img){var _=new Image;_.src=n[s].img,_.onload=_.onerror=function(){t.slideImage=_,e()}}else e()},proto$p._redraw=function(e,t){var r=this,a=r._displayObject;e.transform(t._a,t._b,t._c,t._d,t._tx,t._ty);try{e.drawImage(r.slideImage,2,2,a._rawWidth,a._rawHeight)}catch(n){console.error(n),window.location.href.indexOf("m_dbg=1")>0&&Mugeda.log("渲染图片出错!")}},proto$p._update=function(e){var t=this;if(!t._transitionCounter){var r=t._displayObject,a=r._aniData.param,n=a.dir||"horizontal",o=a.imgs||[],s=o.length;if(e=e||(n=="vertical"?"down":"right"),e){var _=document.querySelector("#slide_holder_"+r._id),l=document.querySelector("#dots_holder_"+r._id+" .dot_active"),c=l?l.id:"",d=c.split("slide_dot_"+r._id+"_");if(d.length==2){l.className="slide_dot",l.style.opacity="0.3";var f=parseInt(d[1]),u=e=="up"||e=="left";f+=u?-1:1,setTimeout(function(){var v=f==-1?s-1:f==s?0:f,h=f==-1||f==s;l=document.querySelector("#slide_dot_"+(r._id+"_")+v),t._displayObject._activeIndex=v,n=="vertical"?_.style.top=-f*r._rawHeight+"px":n=="horizontal"&&(_.style.left=-f*r._rawWidth+"px"),t._transitionCounter++,setTimeout(function(){t._transitionCounter--;try{var m=Mugeda.options.sliderCallback,T=t._displayObject._aniData.param.imgs[f];T&&m&&m(f,T)}catch{}},t._transitionTime*9/8),l&&(l.style.opacity="0.9"),l&&(l.className="slide_dot dot_active"),h&&(t._transitionCounter++,setTimeout(function(){t._transitionCounter--;var m=0;_.style[Browser$1.prefix.lowercase+"Transition"]="left "+m+"ms ease-in-out, top "+m+"ms ease-in-out",n=="vertical"?_.style.top=-v*r._rawHeight+"px":n=="horizontal"&&(_.style.left=-v*r._rawWidth+"px"),t._transitionCounter++,setTimeout(function(){t._transitionCounter--,m=t._transitionTime,_.style[Browser$1.prefix.lowercase+"Transition"]="left "+m+"ms ease-in-out, top "+m+"ms ease-in-out"},t._transitionTime/16)},t._transitionTime*17/16))},1)}}if(t._autoTimer&&(clearTimeout(t._autoTimer),t._autoTimer=null),a.autoShow){var p=parseFloat(a.playTime)||3;p*=1e3,p=Math.max(500,p),t._autoTimer=setTimeout(function(){t._update()},p)}}},proto$p._inputDown=function(e){var t=this;t._inputStartInfo.x=e._getInputX(),t._inputStartInfo.y=e._getInputY(),t._inputStartInfo.time=new Date().getTime(),t._displayObject},proto$p._inputUp=function(e){var t=this,r=t._displayObject,a=e._getInputX(),n=e._getInputY(),o=new Date().getTime(),s=r._aniData.param,_=s.dir||"horizontal";s.imgs;var l=null;if(o-t._inputStartInfo.time<1e3){var c=a-t._inputStartInfo.x,d=n-t._inputStartInfo.y;_=="vertical"&&Math.abs(d)>Math.abs(c)&&Math.abs(d)>16?l=d>0?"up":"down":_!="vertical"&&Math.abs(d)<Math.abs(c)&&Math.abs(c)>16&&(l=c>0?"left":"right")}t._update(l)},proto$p.render=function(e,t,r){var a=this,n=a._displayObject;renderObjectSlides.__super__.render.apply(a,arguments);var o=n._aniData.param;if(o.autoShow){var s=parseFloat(o.playTime)||3;s*=1e3,s=Math.max(500,s),a._transitionTime>s&&(a._transitionTime=s*.8),a._autoTimer&&(clearTimeout(a._autoTimer),a._autoTimer=null),a._autoTimer=setTimeout(function(){a._update()},s)}};var renderObjectIFrame=function(){renderObjectIFrame.__super__.constructor.apply(this,arguments);var e=this;e._iframe=null,e._prevUrl=null};mod.extend(renderObjectIFrame,RenderObject);var proto$o=renderObjectIFrame.prototype;proto$o._setDisplayInitState=function(){var e=this,t=e._displayObject,r=t._aniData.param,a="position: absolute; overflow: hidden; outline: none; padding: 0; background: transparent; border-radius: 0; width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"transform-origin: left top;"+Browser$1.prefix.css+"appearance:none;"+Browser$1.prefix.css+"user-select: initial;";r.lineWidth&&(a+="border: "+r.lineWidth+"px solid "+r.strokeColor+";");var n=StyleSheetManager.insertCss(a);e._classNameList.push(n),e._staticClassName=n,e._html='<div ondragstart="return false;" style="overflow:auto;-webkit-overflow-scrolling:touch;!important;" data-type="iframe" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}" >',e._html+='<iframe allowfullscreen id="iframe_'+t._id+'" style="'+Browser$1.prefix.css+'overflow:auto;border:none;display:block;width:100%;height:100%;position:absolute;left:0;top:0;" src=""></iframe>',e._html+="</div>"},proto$o._buildFun=function(){var e=this;renderObjectIFrame.__super__._buildFun.apply(e,arguments);var t=e._displayObject;t._addEventListener("visibilityChanged",e._updateIFrameSource.bind(e))},proto$o._updateIFrameSource=function(){var e=this,t=e._displayObject,r="about:blank",a=t._url||r,n=t._getRealVisible(),o=e.getNode(),s=o.firstChild;if(a!=e._prevUrl&&n){var o=e.getNode(),s=o.firstChild;Browser$1._isPreview()&&a!=r&&(a=Browser$1._getRedirectUrl(a)),s.src=a,e._prevUrl=a}n||(s.src="javascript: '<html><body>&nbsp;</body></html>'",setTimeout(function(){s.src=r,e._prevUrl=r},1))},proto$o.render=function(e,t,r){var a=this;renderObjectIFrame.__super__.render.apply(a,arguments),a._updateIFrameSource()};var RenderObjectVideoIFrame=function(){var e=this;RenderObjectVideoIFrame.__super__.constructor.apply(e,arguments),e._iframe=null,e._prevUrl=null,e._cachedVisibilty=null};mod.extend(RenderObjectVideoIFrame,RenderObject);var proto$n=RenderObjectVideoIFrame.prototype;proto$n._setDisplayInitState=function(){var e=this,t=e._displayObject,r="width: "+t._rawWidth+"px; height: "+t._rawHeight+"px;"+Browser$1.prefix.css+"user-select: none;"+(t._haveClickAction?"cursor: pointer;":""),a=StyleSheetManager.insertCss(r);e._classNameList.push(a),e._staticClassName=a,e._html='<div ondragstart="return false;" data-type="video" data-mid="'+t._id+'"'+(t._guid?' data-guid="'+t._guid+'"':"")+' class="{{className}}">   <iframe width="100%" height="100%" allowfullscreen frameborder="0" src="" style="position: absolute;"/></iframe></div>'},proto$n.getNode=function(e){var t=this;return e?t._iframe:RenderObjectVideoIFrame.__super__.getNode.apply(t,arguments)},proto$n._buildFun=function(){var e=this;RenderObjectVideoIFrame.__super__._buildFun.apply(e,arguments);var t=e._displayObject;e._iframe=e.getNode().children[0],t._addEventListener("visibilityChanged",e._visibleChangedHandler.bind(e)),t._addEventListener("rendered",e._renderedHandler.bind(e)),t._getRoot()._addEventListener("resize",function(){setTimeout(function(){e._renderedHandler.bind(e)()},500)}),e._cachedVisibilty=t._getRealVisible()},proto$n._visibleChangedHandler=function(e){var t=this,r=t._displayObject;if(e)var a=t._cachedVisibilty=r._getRealVisible();else a=t._cachedVisibilty;var n="about:blank";if(a)var o=r._url||n;else o=n;o!=t._prevUrl&&t._updateIFrameSource(o)},proto$n._updateIFrameSource=function(e){var t=this,r=t._iframe;r.src=t._prevUrl=e},proto$n._updateIFramePosition=function(){var e=this,t=e._iframe,r=e._displayObject._getRoot();if(e._cachedVisibilty){var a=e.getNode(),n=a.getBoundingClientRect(),o=r._getRotation(),s=new Matrix;s._translate(-n.left-n.width/2,-n.top-n.height/2),s._rotate(o),s._translate(n.left+n.width/2,n.top+n.height/2),s=s._inverse();var _=[new Point(n.left,n.top),new Point(n.left,n.bottom),new Point(n.right,n.top),new Point(n.right,n.bottom)];_.forEach(c=>s._transform(c,!0));var l=new Boundary;_.forEach(c=>l._addPoint(c)),n=l._getRoundRect(),t.style.cssText+="width: "+n.width+"px; height:"+n.height+"px; top:"+n.top+"px; left:"+n.left+"px; transform: rotate("+o+"rad)",t.parentNode!==document.body&&document.body.appendChild(t)}else t.style.width=null,t.style.height=null,t.style.left=null,t.style.top=null,e.getNode().appendChild(t)},proto$n.render=function(e,t,r){var a=this;RenderObjectVideoIFrame.__super__.render.apply(a,arguments),a._visibleChangedHandler()},proto$n._renderedHandler=function(){var e=this;e._updateIFramePosition()};var TextFormat=function(){var e=this;e._align=TextFormatAlign.LEFT,e._bold=!1,e._color=new Color(0,0,0,1),e._font="Arial",e._italic=!1,e._size=12,e._underline=!1,e._letterSpacing=0};mod.namespace("Text.TextFormat",TextFormat);var TextTrans=function(){var e=this;e._fillType=FillType.COLOR,e._fillVal=new Color,e._strokeColor=new Color,e._strokeWidth=1,e._letterSpace=0,e._lineHeight=0,e._fontSize=0};mod.extend(TextTrans,DisplayObjectTrans);var proto$m=TextTrans.prototype;proto$m._parseParam=function(e,t){var r=this,a=e.customValue;delete e.customValue,ShapeTrans.prototype._parseFillAndStroke.call(r,e,t),a&&(e.customValue=a),r._letterSpace=e.letterSpace*1||0,r._lineHeight=e.textLineHeight||e.lineHeight||(e.inputLineheight?e.inputLineheight/e.fontSize*100:"120"),r._fontSize=e.fontSize},proto$m._compareTo=function(e){var t=this;return!(e==null||ShapeTrans.prototype._compareFillAndStockTo.call(t,e)===!1||t._letterSpace!==e._letterSpace||t._lineHeight!==e._lineHeight||t._fontSize!==e._fontSize)},proto$m._compareDetail=function(e){var t=this;if(e==null)return t;var r=ShapeTrans.prototype._compareDetailFillAndStock.call(t,e);return r._letterSpace=t._letterSpace===e._letterSpace?void 0:t._letterSpace,r._lineHeight=t._lineHeight===e._lineHeight?void 0:t._lineHeight,r._fontSize=t._fontSize===e._fontSize?void 0:t._fontSize,r},TextTrans._tween=function(e,t,r,a,n){n=a._default(n),ShapeTrans._tweenFillAndStroke(e,t,r,a,n),e._letterSpace=t._letterSpace*1+n*(r._letterSpace-t._letterSpace),e._lineHeight=t._lineHeight*1+n*(r._lineHeight-t._lineHeight),e._fontSize=t._fontSize*1+n*(r._fontSize-t._fontSize)},proto$m._clone=function(){var e=this,t=new TextTrans,r=t._fillType=e._fillType;return r===FillType.IMAGE?t._fillVal=JSON.parse(JSON.stringify(e._fillVal)):r===FillType.COLOR?t._fillVal=e._fillVal.clone():t._fillVal={_colors:e._fillVal._colors.map(function(a){return a.clone()}),_ratios:e._fillVal._ratios.slice(0),_p0:e._fillVal._p0.clone(),_p1:e._fillVal._p1.clone()},t._strokeColor=e._strokeColor.clone(),t._strokeWidth=e._strokeWidth,t._letterSpace=e._letterSpace,t._lineHeight=e._lineHeight,t._fontSize=e._fontSize,t};const TextField=function(){TextField.__super__.constructor.apply(this,arguments);var e=this;e._text="",e._htmlText="",e._textHeight=0,e._textVAlign=TextFormatAlign.TOP,e._textColor=null,e._strokeColor=null,e._strokeWidth=null,e._defaultTextFormat=new TextFormat,e._textOverflow=null,e._initialText=null,e._presetText=null,e._fontText=null,e._scrollSpeed=16,e._textTransform=null,e._textLineHeight=0,e._keyframes=[]};extend(TextField,InteractiveObject);var proto$l=TextField.prototype;proto$l._type="Text",proto$l._bindUserAPI=function(e){var t=this;TextField.__super__._bindUserAPI.call(t,e),definePropertyGetSet(e,["scrollSpeed",function(){return t._getScrollSpeed()},function(r){t._setScrollSpeed(r)}]),definePropertyGetSet(e,["fillColor",function(){var r=t._getFillStyle();return r?r._getCssText():null},function(r){t._setFillStyle(Color.parse(r))}])},proto$l._getScrollSpeed=function(){return this._scrollSpeed},proto$l._setScrollSpeed=function(e){this._scrollSpeed=isNaN(e)?this._scrollSpeed:e},proto$l._getText=function(e){return this._text};var escapeRegex=/[&"'<>\n]/g,escapeMap={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\n":"<br />"},lookupEscape=function(e){return escapeMap[e]};TextField._escape=function(e){return e.replace(escapeRegex,lookupEscape)},proto$l._setText=function(e,t){try{var r=this;e=e.toString(),(e!=r._text||t)&&(r._text=e,r._isRich||(e=TextField._escape(e).replace(/  /g," &#160;")),r._htmlText=e+'<span style="width:1px;height:1px;overflow:hidden;display:inline-block;"> </span>',r._dispatchEvent(r._changedEvent))}catch{}},proto$l._getHtmlText=function(){return this._htmlText},proto$l._updateSelf=function(){this._updatePreset()},proto$l._updatePreset=function(){var e=this,t=e._presetText,r=Macro._parseMacroText(t,null,!1,!0,this);this._setText(r)},proto$l.parseParamToDisplayObject=function(e,t,r){var a=this;t.type===2010&&(delete e.rawWidth,delete e.rawHeight,delete e.fillInfo.fillImage);var n=e.customValue==null?unescape(e.textContent):e.customValue,o={top:TextFormatAlign.TOP,middle:TextFormatAlign.CENTER,bottom:TextFormatAlign.BOTTOM}[e.textVAlign],s=e.fontFamily;s.toLowerCase()==="simhei"&&(s='"Microsoft YaHei", "微软雅黑", SimHei, sans-serif');var _=e.fontFace,l={left:TextFormatAlign.LEFT,center:TextFormatAlign.CENTER,right:TextFormatAlign.RIGHT,justify:TextFormatAlign.JUSTIFY}[e.textAlign],c=e.fillInfo.fillColors[0];textLikeTypes.includes(t.type)&&a._setText(n),a._fontText=n,a._textVAlign=o,a._textHeight=e.totalHeight*1||0,e.presetText*1&&!(r!=null&&r.noPresetAnimation)&&(a._presetText=n,Macro._chkNeedFresh(a._presetText)&&(a._haveSelfFunction=a._updateSelf),a._updateSelf()),_&&(a._fontData=FontData._getFontDataIncrease(s+"-"+t.guid,_,n,this._resource),a._resourceList=[a._fontData]);var d=a._defaultTextFormat;d._font=s,d._align=l,d._bold=e.fontWeight==="normal"?"":e.fontWeight,d._underline=e.textDecoration==="none"?"":e.textDecoration,d._italic=e.fontStyle==="normal"?"":e.fontStyle,d._color=new Color(c.r,c.g,c.b,c.a),d._type=t.type,TextField.__super__.parseParamToDisplayObject.apply(this,arguments),this._initialText=this._getText()},TextField._createChildClassFactory=function(e,t){return function(r,a){var n=function(o,s){var _=this;n.__super__.constructor.apply(this,arguments),s!=null&&(_._visible=s),o&&o.addChild(_),e.call(_,r,a)};return extend(n,t),n}},TextField._createChildClass=TextField._createChildClassFactory(function(e,t){this._resource=t},TextField),proto$l.tweenParam=function(e,t,r,a){e=TextField.__super__.tweenParam.apply(this,arguments);var n=typeof a=="object"?a:{},o=n.default==null?a:n.default;if(t.letterSpace!==void 0||r.letterSpace!==void 0){var s=t.letterSpace||0,_=r.letterSpace||0;e.letterSpace=s+o*(_-s)}return t.fontSize&&r.fontSize&&(e.fontSize=t.fontSize+o*(r.fontSize-t.fontSize)),(t.textLineHeight!==void 0||r.textLineHeight!==void 0)&&(s=t.textLineHeight||100,_=r.textLineHeight||100,e.textLineHeight=s+o*(_-s)),e},proto$l._setFillStyle=function(e){var t=this,r=t._transform._clone(),a=r._paramTransform;a._fillType=FillType.COLOR,a._fillVal=e,t._transform=r,t._dispatchEvent(t._changedEvent)},proto$l._getFillStyle=function(){var e=this,t=e._transform,r=t._paramTransform;if(r._fillType===FillType.COLOR)return r._fillVal},proto$l._bindTrans=function(e){e._paramTransform=new TextTrans},proto$l._initProcessAnimation=function(){this._initialText=this._getText()},proto$l._getProcessAnimationLength=function(){return this._initialText.length},proto$l._setProcessAnimationRatio=function(e){var t=this._initialText||this._getText();if(e<=0)this._setText("");else if(e>=1)this._setText(t);else{var r=Math.round(t.length*e);this._setText(t.substr(0,r))}},namespace("Text.TextField",TextField);var RenderObjectUtils=function(){};RenderObjectUtils.createInstance=function(e){var t=Plugin._getRenderObjectClassByDisplayObject(e);if(t)return new t(e);if(e instanceof Shape)return new RenderObjectShape(e);if(e instanceof VideoIFrame)return new RenderObjectVideoIFrame(e);if(e instanceof Video)return new RenderObjectVideo(e);if(e instanceof AudioControl)return new renderObjectAudioControl(e);if(e instanceof Bitmap)return new renderObjectBitmap(e);if(e instanceof Slides)return new renderObjectSlides(e);if(e instanceof IFrame)return new renderObjectIFrame(e);if(e instanceof TextField)return new renderObjectTextField(e);if(e instanceof Stage)return new RenderObjectStage(e);if(e instanceof MovieClip)return new renderObjectMovieClip(e);if(e instanceof Sprite)return new RenderObjectSprite(e);if(e instanceof Form)return new renderObjectForm(e)},mod.namespace("Render.RenderObjectUtils",RenderObjectUtils);var LoadingPage=function(){var e=this;e._type="default",e._node=null,e._percentNode=null},proto$k=LoadingPage.prototype;proto$k.init=function(e,t){var r=this,a=r._image,n='<div style="position: absolute;background: black;'+t[0]+Browser$1.prefix.css+'transition: opacity 500ms; opacity: 1;z-index:20">   <div style="position: absolute;height: 20px; width: 100%;top:20%;color:white;text-align: center;font-size: 12px;">       <!--<div><img width="134" src="'+a+'"/></div>-->       <div style="padding: 5px;">加载中...<span class="mugeda_percent"></span></div>   </div></div>',o=document.createElement("div");o.innerHTML=n;var s=r._node=o.children[0];r._percentNode=s.querySelectorAll(".mugeda_percent")[0],e.appendChild(s)},proto$k.update=function(e,t){var r=this,a=Math.min(Math.floor(e/t*100),100);r._percentNode.innerHTML=a+"%"},proto$k.remove=function(){var e=this,t=e._node;t!=null&&(t.style.opacity=0,setTimeout(function(){t.style.display="none"},500))},mod.exportName(proto$k,["init",proto$k.init,"update",proto$k.update,"remove",proto$k.remove]),mod.namespace("Render.LoadingPage",LoadingPage);var AudioIndicator=function(){var e=this;e._state=void 0,e._visible=void 0,e.audio=null,e._dom=null,e.loadInterval=null,e.loadIntervalNum=0,e._prevMode=null,e._movieClip=null,mod.definePropertyReadOnly(e,["dom",proto$j._getDom])},proto$j=AudioIndicator.prototype;proto$j._getDom=function(){return this._dom},proto$j._setMode=function(e){var t=this._dom;if(typeof e!="string"){e=this._prevMode||"righttop";var r=!0}else this._prevMode=e;var a=this._movieClip._parent;Math.abs(a._stageRotate-Math.PI/2)<.1?(e={lefttop:"righttop",righttop:"rightbottom",rightbottom:"leftbottom",leftbottom:"lefttop"}[e],t.style.cssText+=Browser$1.prefix.css+"transform: rotate(90deg);"):Math.abs(a._stageRotate+Math.PI/2)<.1?(e={lefttop:"leftbottom",leftbottom:"rightbottom",rightbottom:"righttop",righttop:"lefttop"}[e],t.style.cssText+=Browser$1.prefix.css+"transform: rotate(-90deg);"):t.style.cssText+=Browser$1.prefix.css+"transform: rotate(0);",e=="lefttop"?(t.style.left="18px",t.style.top="18px",t.style.right="",t.style.bottom=""):e=="leftbottom"?(t.style.left="18px",t.style.bottom="18px",t.style.right="",t.style.top=""):e=="righttop"?(t.style.right="18px",t.style.top="18px",t.style.left="",t.style.bottom=""):e=="rightbottom"&&(t.style.right="18px",t.style.bottom="18px",t.style.left="",t.style.top=""),r||this._setVisible(e!="hide")},proto$j._setStatus=function(e){var t=this;e=="play"?t.audio&&t.audio.play():e=="pause"&&t.audio&&(t.audio.pause(),t.audio.forcePaused=!0)},proto$j._setAudio=function(e){if(e){for(var t=this._movieClip._getRoot(),r=t._aniData,a,n=r.symbols||r.sm||[],o=0;o<n.length;o++)if(n[o].id==e){a=n[o].url;break}if(a){var s=window.backgroundMusic;if(s||(window.autoPlayMusic(!1,e),s=window.backgroundMusic,window.MugedaCard.showAudioControl(t._renderManager._mugeda._scene,s,!1)),s){try{var _=new URL(a,location.href),l=new URL(s.src,location.href)}catch(c){console.log(c)}_.href!==l.href&&(s.src=a)}}}},proto$j._getVisible=function(){return this._visible},proto$j._setVisible=function(e){var t=this;t._visible=e,t._dom.style.display=e?"block":"none"},proto$j._getState=function(){return this._state},proto$j._setState=function(e){var t=this;t._state=e;var r=t._dom.querySelector(".mugine_audio_on"),a=t._dom.querySelector(".mugine_audio_off");r&&(r.style.display=e=="on"?"":"none"),a.style.display=e=="off"?"":"none",t._visible===void 0&&(t._dom.style.display=e!="none"?"block":"none"),t.loadInterval&&clearInterval(t.loadInterval)},proto$j._init=function(e,t){t=t||{};var r=t.audioOffImage,a=t.audioOnImage,n=t.audioIconSize||"small",o=t.audioIconPosition||null,s={small:24,medium:36,large:48,none:0},_=s[n];if(r=r||a,a=a||r,a){try{r=Mugeda.currentAni._resource.dir.getFullPath(r),a=Mugeda.currentAni._resource.dir.getFullPath(a)}catch{}l='<img width="'+_+'" class="mugine_audio_off" style="" src="'+r+'" />',l+='<img width="'+_+'" class="mugine_audio_on" style="" src="'+a+'" />'}else var l='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="'+_+'px" height="'+_+'px" viewBox="0 0 46 46" enable-background="new 0 0 46 46" xml:space="preserve">   <g>       <circle opacity="0.6" cx="23" cy="23" r="23"/>           <g>               <path fill="#ECECEC" d="M23,2c11.6,0,21,9.4,21,21s-9.4,21-21,21S2,34.6,2,23S11.4,2,23,2 M23,0C10.3,0,0,10.3,0,23s10.3,23,23,23 s23-10.3,23-23S35.7,0,23,0L23,0z"/>           </g>       <path fill="#ECECEC" d="M27.5,7.3c0.6,1.1,0.8,2.4,1.6,3.4c0.9,1.5,2.1,2.8,3,4.3c0.6,1.1,1.3,2.2,1.4,3.4c0.4,1.6-0.1,3.4-0.9,4.8 c-0.8,0.7-1.1-0.4-0.9-1c0.1-0.9,0.2-1.8,0-2.7c-0.2-1.3-0.6-2.6-1.4-3.7c-0.7-0.8-1.5-2.5-2.8-2.1c-0.9,0.4-0.7,1.5-0.8,2.3 c-0.6,5-1.2,10.1-1.9,15.1c-0.3,2.1-2.3,3.3-4.1,4c-1.6,0.7-3.5,1-5.2,0.4c-1.6-0.4-3.2-1.8-3-3.5c0.1-2.1,1.8-3.8,3.8-4.4 c1.9-0.8,4.2-0.8,6.1,0.2c0.9,0.4,1.3-0.4,1.5-1.3c0.9-6.4,1.7-12.8,2.5-19.2C26.3,6.8,27.4,6.7,27.5,7.3L27.5,7.3z"/>   </g>   <polygon class="mugine_audio_off" fill="#ECECEC" points="14,11.2 13.2,12.9 33.3,34.2 34.2,32.5 "/></svg>';var c=document.createElement("div");c.id="mugeda_audio_indicator",c.style.cssText+="z-index:20;position:absolute;",c.innerHTML=l,e.appendChild(c);var d=this;d._dom=c;var f=d._movieClip._aniData.music;if(f){var u=d._movieClip._getRoot(),p=u._aniData.symbols||[];p.some(function(v){return v.id==f&&v.type==2})&&d._setMode(o)}d._movieClip._parent._addEventListener("stageRotateChange",d._setMode.bind(d))},mod.exportName(proto$j,["setState",proto$j._setState,"getState",proto$j._getState,"setVisible",proto$j._setVisible,"getVisible",proto$j._getVisible]);var PreLoader=function(){var e=this;PreLoader.__super__.constructor.apply(e,arguments),e._range=null,e._resourceDataHash={},e.resourceDataList=[],e._additionImageList=[],e._movieClip=null,e._loadedNum=0,e._loadingNum=0,e._loadingPage=null,e._loadingPageShowStartTime=0,e._isFirstPageLoad=!1,e._minWait=0,e._interval=0,e._readyToRender=null,e._loadPercent=0},loadProcessPool=[];mod.extend(PreLoader,IEventDispatcher);var proto$i=PreLoader.prototype;proto$i._setLoadRange=function(e){this._range=e},proto$i._buildBitmapLoadProcess=function(e,t){var r=this;r._movieClip=t;var a=r._resourceDataHash,n=r.resourceDataList;e.forEach(function(o){for(var s=o._displayObject,_=o._parentMovieClipRenderObject,l=_._displayObject,c=o._parentMovieClipRenderObjectChild,d=c._displayObject,f=[l._objectFrames[d._id]],u=[l],p=_;p._parentMovieClipRenderObject;){var v=p._parentMovieClipRenderObject,h=p._parentMovieClipRenderObjectChild,m=v._displayObject,T=h._displayObject,y=m._objectFrames[T._id];f.push(y),u.push(m),p=v}for(var E=f[0]._min,g=f[0]._max,b=E;b<=g;b++)l._frameImageLeftNum[b]=(l._frameImageLeftNum[b]||0)+1;s._resourceList.forEach(function(w){var x=w._id;a[x]?a[x].push({movieClip:u,keyframeInfo:f,resourceData:w,displayObject:s}):(n.push(w),a[x]=[{movieClip:u,keyframeInfo:f,resourceData:w,displayObject:s}])})})},proto$i._loadNextBitmap=function(e){var t=this,r={},a=t._movieClip,n=t.resourceDataList,o=t._resourceDataHash,s=t._entryFrameId==null?a._currentFrame:t._entryFrameId;n.forEach(function(E){var g=E._id;r[g]==null&&(r[g]=[]);var b=o[g];b.forEach(function(w){for(var x=w.movieClip,C=w.keyframeInfo,M=x.length,A=M-1,O=0;A>=0;A--,O++){var S=x[A],L=C[A],D=r[g][O],$=S._id==1?s:S._currentFrame,R=Math.min(L._max,Math.max($,L._min)),I=R-$;(D==null||I>=0&&I<D)&&(r[g][O]=I)}})});var _=[];for(var l in r)r.hasOwnProperty(l)&&_.push({priority:r[l],resourceData:o[l][0].resourceData,info:o[l]});if(_.sort(function(E,g){for(var b=Math.max(E.priority.length,g.priority.length),w=0;w<b;w++){var x=E.priority[w]||0,C=g.priority[w]||0;if(x!==C)return x-C}return 0}),t._range!=null&&e){var c=_.filter(function(E){return s+E.priority[0]<=t._range}).length+t._additionImageList.length;c||(c=0)}for(var d=0,f=a._getRoot();(f._skipLoad||loadProcessPool.length<16+d)&&(_.length||t._additionImageList.length);){var u=_[0],p=!1;if(t._additionImageList.length)p=!0;else if(t._range!=null&&s+u.priority[0]>t._range)return c;if(t.loadingNum++,p){var v=t._additionImageList.splice(0,1)[0];h=new BitmapData,h._src=v,loadProcessPool.push(h)}else{_.splice(0,1);var h=u.resourceData;loadProcessPool.push(h);var m=n.indexOf(h);n.splice(m,1)}var T=function(E,g,b){return function(){t._loadedNum<t._maxNum&&t._loadedNum++;var w=loadProcessPool.indexOf(E);loadProcessPool.splice(w,1);var x=E._id,C=b[x],M=[];Mugeda.hashImages=Mugeda.hashImages||{},Mugeda.hashImages[E._src]=E._image;var A=new MuEvents("framesLoadedChange",!1,!1);a._dispatchEvent(A),C&&C.forEach(function(O){var S=O.displayObject;S._dispatchEvent(S._changedEvent);for(var L=O.movieClip[0],D=O.keyframeInfo[0],$=D._min,R=D._max,I=L._frameImageLeftNum,P=$;P<=R;P++)I[P]--;M.indexOf(L)===-1&&M.push(L)}),M.forEach(function(O){var S=O._frameImageLeftNum,L=0;for(var D in S)if(S.hasOwnProperty(D)){var $=S[D];$===0&&L++}O._setFrameLoaded(L,!1)}),g.length&&t._loadNextBitmap(null)}},y=h._loader;f._skipLoad||y._contentLoaderInfo._state===y._contentLoaderInfo.constructor.STATE.LOADED?setTimeout(function(E,g){return function(){E(g,n,o)()}}(T,h)):(y._contentLoaderInfo._addEventListenerOnce("complete",T(h,n,o)),y._contentLoaderInfo._addEventListenerOnce("ioError",T(h,n,o)),y._contentLoaderInfo._addEventListenerOnce("merge",function(){d++}),y._contentLoaderInfo._addEventListenerOnce("mergedone",function(){d--}),y._load(h))}return c},proto$i._load=function(){var e=this;e._loadedNum=0,e._loadingNum=0,e._maxNum=e._loadNextBitmap(!0)},proto$i._updateProcess=function(e,t,r,a,n,o,s,_,l,c){var d=this;d._loadingPage=o,d._loadingPageShowStartTime=new Date*1,d._isFirstPageLoad=s,d._readyToRender=c,d._minWait=_,d._stage=a._getRoot();var f=function(){var v=d._maxNum-d._loadedNum+e._scriptLoadCounter;d._updateLoading(v,d._maxNum+u,l)},u=e._scriptLoadCounter;if(u>0?e._scriptLoadProcessChangeCallback=function(){e._scriptLoadCounter==0&&t(),f()}:(t(),f()),d._maxNum-d._loadedNum>0){var p=function(){var v=d._maxNum-d._loadedNum+e._scriptLoadCounter;d._updateLoading(v,d._maxNum+u),f(),d._maxNum-d._loadedNum==0&&a._removeEventListener("framesLoadedChange",p),v==0&&r()};a._addEventListener("framesLoadedChange",p)}else r(),f()},proto$i._updateLoading=function(e,t,r){e==0&&t==0&&(e=0,t=1);var a=this,n=25,o=1e3/n,s=a._minWait,_=s,l=new Date().getTime(),c=t-e;clearInterval(a._interval),a._interval=setInterval(function(){var d=a._loadingPageShowStartTime,f=new Date().getTime()-d;_=s-f;var u=_<0?1:f/s,p=-(new Date().getTime()-l)/1e3,v=(c+1-Math.exp(p))/t,h=Math.min(v,u),m=t*h,T=a._stage._renderManager._mugeda;a._isFirstPageLoad&&(T._autoProgressDisabled||a._movieClip.gotoAndStop(a._movieClip._scenes[0]._numFrames*m/t)),a._loadPercent=m/t*100,r(m,t,{isTotal:!0}),!T._autoProgressDisabled&&e==0&&_<0&&!a.loadOver&&(a.loadOver=!0,a._startAnimation())},o)},proto$i._startAnimation=function(){var e=this;Mugeda.getMsuid&&Mugeda.getMsuid(function(o){Mugeda.DataStats&&Mugeda.DataStats.init({indexPageId:e._movieClip._scenes[0]._guid,indexPageName:e._movieClip._scenes[0]._name,indexPageNum:e._movieClip._scenes.length,totalPages:e._movieClip._scenes.map(function(s){return{id:s._guid,name:s._name}})}),e._stage&&e._stage._runMsuidCallbacks(o)});var t=new Date*1-e._loadingPageShowStartTime;if(t<e._minWait)setTimeout(function(){e._startAnimation()},e._minWait-t);else{if(clearInterval(e._interval),e._isFirstPageLoad){var n=new ReadyEvent("renderready");e._movieClip.gotoAndPlay(e._entryFrameId),e._movieClip._stopApplyAction=!0,e._entryFrameId=null,n._registerCallback(function(){e._movieClip._stopApplyAction=!1}),e._stage._dispatchEvent(n),n._chkOk()}else{var r=e._readyToRender();try{var a=!!window.parent.mugedaEntryPage}catch{a=!1}!r||a?e._movieClip.gotoAndPlay(e._entryFrameId):r&&e._movieClip.gotoAndStop(e._entryFrameId),e._entryFrameId=null}e._setLoadRange(null),e._loadNextBitmap()}};var scrollOnTextOrSectionOverflow=["scroll","scrollNoBar","manualScroll","manualScrollNoBar"],renderManager=function(e){e=e||{};var t=this;renderManager.__super__.constructor.apply(t,arguments),t._loadingPage=e.loadingPage||function(){return new LoadingPage},t._dropObjectList=[],t._renderList=null,t._stageDom=null,t._resourceLoader=null,t._mugeda=null,t.hasScript=e.hasScript,t._toBeRenderedObjectHash={},t._paused=!1,t._toBeControlledObjectPendingHash=[],t._toBeControlledObjectHash=[],t._thisRoundRenderObjectIdList={},t._delayRenderList={},t._thisRoundRenderObjectIdList={},t._globalRenderedObjectList={},t._renderContext="default",t._removeList=[],t._addChildList=[],t._forceCheckHash=[],t._audioIndicator=new AudioIndicator,t._paging=!1,mod.exportName(t,["audioIndicator",t._audioIndicator]),mod.definePropertyGetSet(t,["loadingPage",proto$h._getLoadingPage,proto$h._setLoadingPage]),t._scrollableObjectList=[],t._preLoader=new PreLoader,t._preLoader._additionImageList=t._additionImageList=[],t._displayHash={},t._mediaHash={}};mod.extend(renderManager,IEventDispatcher);var proto$h=renderManager.prototype;proto$h._getLoadingPage=function(){return this._loadingPage},proto$h._setLoadingPage=function(e){e==null?(this._loadingPage&&this._loadingPage().remove(),this._loadingPage=function(){return{init:function(){},update:function(){},remove:function(){}}}):this._loadingPage=e};var requestAnimationFrameHelper=function(){var e=Browser$1._globalObject;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(function(){t(new Date*1)},1e3/30)}}(),requestAnimationFrame$1=requestAnimationFrameHelper;renderManager.requestAnimationFrame=requestAnimationFrame$1;var setupTimer=function(e){var t=this;requestAnimationFrame$1(function(r){t.prevTime=t.startTime=r,e(r)})},timeLoop=function(e){var t=this;requestAnimationFrame$1(function(r){var a=0,n=0;t._paused?(t.prevTime=r,a=0,n=0):(a=r-t.startTime,n=r-t.prevTime,t.prevTime=r),e(n,a)})};proto$h.pause=function(){this._paused=!0},proto$h.resume=function(){this._paused=!1},renderManager._insertDisplayObject=function(e){var t=this;if(!e._getRenderObject()&&e.parent instanceof MovieClip){var r=e.parent,a=r._getRenderObject(),n=r.getChildIndex(e);do{n--;var o=r.children[n]}while(o&&(o._dataDisplayObject||!o._getRenderObject()));var s=r._getObjectSceneIndex(e);if(o==null)if(s===1/0)var _=0,l=a,c=a.getNode(!0),d=null;else l=a._scenes[s],_=0,c=l.getNode(!0),d=null;else{var f=r._getObjectSceneIndex(o),u=o._getRenderObject();s===1/0?(_=a._children.length,l=a,c=a.getNode(!0),u._parentSceneRenderObject?d=u._parentSceneRenderObject.getNode(!0):d=u.getNode(!0)):f===s?(l=a._scenes[s],_=l._children.indexOf(u)+1,c=l.getNode(!0),d=u.getNode(!0)):(l=a._scenes[s],_=0,c=l.getNode(!0),d=l.getNode(!0))}var p=buildRenderObjectList.call(t,l,e,[],_);traversal(p,function(E,g){E._c3Accelerate=!1,E instanceof renderObjectMovieClip&&(g.stopFlag=!0)});var v=traversalForSetup.call(t,l,_),h=document.createElement("div");if(h.innerHTML=v,d==null){var m=c.children[0];c.insertBefore(h.children[0],m)}else m=d.nextElementSibling,m?c.insertBefore(h.children[0],m):c.appendChild(h.children[0]);traversal(p,function(E){E.getNode()});var T=r._frames;for(var y in T)T.hasOwnProperty(y)&&T[y]._displayObjectList.push(e)}},proto$h.getReferenceElement=function(e,t,r,a){var n=this,o=n._mugeda;e=e||"";var s=e.split("_");r=s.length>1&&r;var _=e.split("/"),l=r?[]:null;if(s&&s.length>1){var c=s[0],d=s[1],f=a?(o._displayObjectHash[a.id]||{})._currentScene:null;if(f&&f._symbolId==c)l=f.getObjectByName(d,"displayobject");else for(var u in o._scene._objectHash)if(o._scene._objectHash.hasOwnProperty(u)){var p=o._scene._objectHash[u];if(r){var v=p&&p._displayObject&&p._displayObject._aniData?p._displayObject._aniData:{};v.type==2021&&c==v.param.symbolId&&l.push(p._scene.getObjectByName(d,"displayobject"))}else if(p&&p._scene&&p._scene._isSymbol()&&c==p._scene._getParentAObject()._getData().param.symbolId){l=p._scene.getObjectByName(d,"displayobject");break}}}else if(_&&_.length>1){var h=_[0],d=_[1],p=o._scene.getObjectByName(h);p&&p._scene&&(l=p._scene.getObjectByName(d,"displayobject"))}else l=o._scene.getObjectByName(e,"displayobject");var m=null;if(l)if(r){for(var T in l)l[T]=t?o._displayObjectHash[l[T]._id]:l[T];m=l}else m=t?o._displayObjectHash[l._id]:l;return m},proto$h._replaceMacros=function(e,t){var r=this,a=new RegExp("\\{\\{(.*?)\\}\\}","g"),n=e.replace(a,function(o,s){var _=s.split("."),l=s,c="";_&&_.length>1&&(l=_[0],c=_[1]);var d=r.getReferenceElement(l,!0),f=t===void 0?"0":t;return d&&(c?c.match(/\d+/)&&d._getText?f=d._getText(parseInt(c)):f=d[c]:((d._displayObject._type||"").toLowerCase(),d._getText&&(f=d._getText()))),e.match(/\{\{(.*?)\}\}\.toFixed/)&&(f="("+f+")"),f.replace&&(f=f.replace(/[\'\"]/g,function(u){return"\\"+u})),f});return n.toString()},proto$h.mainStart=function(e,t){var r=this;r._stageDom=t,r.hasScript&&(Browser$1._globalObject.DEBUG_CS2_MODE=!0),Browser$1._globalObject.DEBUG_CS2_MODE=!0,location.href.indexOf("?c3")>-1&&(window.DEBUG_CS3_MODE=!0),location.href.indexOf("?c2")>-1&&(window.DEBUG_CS2_MODE=!0);var a=e.root,n=r._renderList=new RenderObject(null),o=[];buildRenderObjectList.call(r,n,a,o);var s=a.children[0],_=s._scenes[0]._numFrames;if(r._loadingPage=r._loadingPage(),r._preLoader._entryFrameId=0,(r._loadingPage.type=="firstpage"||r._loadingPage.type=="smart")&&s._scenes[1]){if(_+=s._scenes[1]._numFrames,r._loadingPage.type=="firstpage")var l=!0;s._haveLoadingPage=!0,r._preLoader._entryFrameId=s._scenes[1]._startFrame}try{var c=window.parent.mugedaEntryPage}catch{}if(c){var d=a._aniData,f=-1;[d].concat(d.pages).forEach(function(w,x){w&&w.guid==c&&(f=x)}),f!=-1&&(r._preLoader._entryFrameId=s._scenes[f]._startFrame)}r._preLoader._setLoadRange(_-1),r._audioIndicator._movieClip=a.children[0],r._audioIndicator._init(t,a._aniData.pageInfo),r._audioIndicator._setState("none"),findCss3AccelerateObject.bind(r)(n),traversal(n,function(w){CanvasRender._initRenderObjectCanvas(w)});var u=traversalForSetup.call(r,n);location.href.indexOf("rateDom")>-1&&(u+='<div id="rate" style="position: absolute; text-shadow: 0 0 5px red;; color: red; font-size: 12px;"></div>');var p=function(w,x){var C=function(N){var B=(Mugeda.scene._aniData||{}).pageInfo||{};(w=="mouse"&&B.clickToPage||w=="keyboard"&&B.keyToPage)&&(N=="down"?Mugeda.scene._scene._nextPage():N=="up"?Mugeda.scene._scene._prevPage():N=="home"?Mugeda.scene._scene._gotoPage(0):N=="end"&&Mugeda.scene._scene._gotoPage(Mugeda.scene._scene._getPages().length-1))},M=null;if(w=="mouse")M="down";else if(w=="keyboard"){var A=[13,32,34,39,40],O=[33,37,38],S=[36],L=[35],D=x.keyCode||0;M=A.indexOf(D)>=0?"down":O.indexOf(D)>=0?"up":S.indexOf(D)>=0?"home":L.indexOf(D)>=0?"end":null}if(M){if(x.target&&x.target.tagName&&x.target.tagName=="INPUT"||x.target&&x.target.tagName&&x.target.tagName=="SELECT")return;if(x.target&&x.target.actions&&x.target.actions.length)return;var $=Mugeda.currentAni._scene._movieClip._currentScene;if($&&$.presetAnimationList&&$.presetAnimationClickCount||$.presetAnimationClickCount==0){var R=$.presetAnimationClickCount,I=$.presetAnimationList[R],P=x._target;I?P&&P._aniData&&P._aniData.param&&P._aniData.param.behavior?console.log("目标元素存在行为, 不播放"):I.displayObj._presetAnimation._setStatus("play"):C(M)}else($&&!$.presetAnimationList||$&&$.presetAnimationList&&!$.presetAnimationClickCount)&&C(M)}};r._mugeda._stage.addEventListener(Browser$1.Click,function(w){p("mouse",w)}),document.addEventListener("keyup",function(w){p("keyboard",w)});var v,h=function(){r._mugeda._buildAPINet(a),r._buildBindAnimation();var w=new ReadyEvent("imageready");w._registerCallback(function(){requestAnimationFrame$1(function(){setupTimer.bind(r)(function(){var x=document.createElement("div");x.innerHTML=u,t.appendChild(x.children[0]),location.href.indexOf("rateDom")>-1&&(t.appendChild(x.children[0]),v=window.rateDom=document.getElementById("rate")),n._children[0]._adaptStage(),traversal(n,function(M){M._displayObject&&M.getNode()});var C=new ReadyEvent("domready");C._registerCallback(function(){if(window.addEventListener("resize",function(){a._dispatchEvent(new MuEvents("resize"))}),l)timeLoop.bind(r)(b);else{var M=new ReadyEvent("renderready");M._registerCallback(function(){timeLoop.bind(r)(b)}),a._dispatchEvent(M),M._chkOk()}var A=window.earliestCustomEvent,O=window.cacelEarliestEvent,S=window.earliestEventhandled;!S&&A&&(console.debug("触发早期自定义事件"),window.earliestEventhandled=!0,document.dispatchEvent(new CustomEvent("mugeda_custom",{detail:{customEventName:A[A.length-1]}}))),O&&O()}),a._dispatchEvent(C),C._chkOk()})})}),a._dispatchEvent(w),w._chkOk()},m=new LoadProgressEvent("loadprogress");setTimeout(function(){Browser$1.makeTest();var w=r._renderList._children[0],x=w._getStageRotate(),C=w._getStageSize();if(x%180==0)var M=0,A=0,O=C.width,S=C.height;else M=.5*(C.height-C.width),A=.5*(C.width-C.height),S=C.width,O=C.height;var L="top:"+M+"px;left:"+A+"px;width:"+O+"px;height:"+S+"px;"+Browser$1.prefix.css+"transform:rotate("+x+"deg);";r._loadingPage.init(t,[L,A,M,O,S,x]),l?(h(),a.children[0].stop()):T()});var T=function(){r._preLoader._buildBitmapLoadProcess(o,a.children[0]),r._preLoader._load(a.children[0]._getCurrentFrame());var w=r._loadingPage.type||r._loadingPage._type;r._preLoader._updateProcess(r._resourceLoader,function(){var x=new ReadyEvent("scriptready");a._dispatchEvent(x),x._chkOk()},function(){},s,_,r._loadingPage,l,w=="default"?1e3:2e3,function(x,C){r._loadingPage.update(x,C,{isTotal:!0}),m._total=C,m._loaded=x,m.totalLoadCount=C,m.loadedCount=x,m.loadedRatio=x/C,a._dispatchEvent(m)},h)},y=!0,E=null,g=0,b=function(){window.stopLoop||timeLoop.bind(r)(function(w,x){var C=Math.min(w/r.frameTime,1);y&&(r._loadingPage.remove(),m._loadedOver=!0,a._dispatchEvent(m),y=!1,l&&setTimeout(function(){T()},0),C=0),r._paging&&(C=0),a._deltaFrame=C,a._totolFrame+=C,Math.floor(x/1e3)==E?g++:(v&&(v.innerHTML=g.toString()),g=0,E=Math.floor(x/1e3)),r._addChildList.forEach(function(S){renderManager._insertDisplayObject.call(r,S)}),r._addChildList=[];var M=n._children[0]._children[0];r._renderGlobalObjects();var A=[];traversalMovieClipRenderObject.call(r,M,C,A),r._loopBindAnimation(),A.forEach(function(S){S._dispatchEvent(S.enterFrameEvent)}),r._renderChangedObject();var O=r._removeList;O.forEach(function(L){var L=L._getRenderObject(r);L._parent._removeChild(L);var D=L.getNode();D&&D.parentNode.removeChild(D)}),r._removeList=[],b()})};bindEvent.bind(r)(a)},proto$h._buildBindAnimation=function(){var e=this;for(var t in e._toBeControlledObjectPendingHash)if(e._toBeControlledObjectPendingHash.hasOwnProperty(t)){var r=e._toBeControlledObjectPendingHash[t];if(r.binds)var a=r.movieClip,n=r.binds;else var a=r,o=a._aniData||{},n=o.binds||{};var s=e._mugeda;for(var _ in n)if(n.hasOwnProperty(_)){var l=n[_],c=l.master,d=c=="-1",f=e.getReferenceElement(c),u=f&&["audio","video"].includes(f._type)&&l.trigger=="progress"&&!f.updateHooked;if(d){f=s._scene._movieClip;var p=0;f.addEventListener("beforeenterframe",function(){p!=f._aimFrameDec&&(e._toBeControlledObjectHash.push({master:f,slave:a,property:"progress",stageIsMaster:!0}),p=f._aimFrameDec)})}if(f){if(u){var v=function(m,T,y){return function(){T._getRealVisible()&&m._dispatchEvent(m._changedEvent)}}(f,a);f._type==="video"?f._addEventListener("videoat",v):f._audioObject._audio.addEventListener("timeupdate",v);var h=function(m,T,y){return function(){var E=function(){T._getRealVisible()&&m._dispatchEvent(m._changedEvent)};f._type==="video"?f._removeEventListener("timeupdate",v):m._audioObject._audio.removeEventListener("timeupdate",v),s._scene.addEventListener("enterframe",E),E()}}(f,a);f._type==="video"?f.addEventListener("videostart",h):f._audioObject._audio.addEventListener("playing",h)}!d&&f&&f._addEventListener("changed",function(m,T,y){return function(){(m._dragCaptured||T._type=="audio"||T._type=="video"||y!="progress")&&e._toBeControlledObjectHash.push({master:m,slave:T,property:y})}}(f,a,_))}}}},proto$h._loopBindAnimation=function(){var e=this,t=function(k,J,ae){var H=J.concat([]);H.sort(function(ne,oe){return ne.input<oe.input?-1:ne.input==oe.input?0:1});for(var q=void 0,re=0;re<H.length-1;re++){var K=H[re],ee=H[re+1];if(K.input>ee.input){var ie=K;K=ee,ee=ie}if(K.input<=k&&k<=ee.input){q=K.output+(ee.output-K.output)*(k-K.input)/(ee.input-K.input);break}}return H.length&&re==H.length&&ae&&(H[0].input>k?k=H[0].input:H[H.length-1].input<k&&(k=H[H.length-1].input)),J.length==0&&(q=k),q},r=function(k,J,ae){if(!k._displayObject._dragCaptured)switch(J){case"left":case"top":case"width":case"height":case"alpha":case"rotate":case"rotateX":case"rotateY":case"text":case"pers":k[J]=ae;break}},a={id:-1},n=function(k,J){if(k.id==J)return k;if(k.children!=null){for(var ae=null,H=0;ae==null&&H<k.children.length;H++)ae=n(k.children[H],J);return ae}return null},o=function(k){var J=k.master._id,ae=k.slave._id,H=n(a,J);H||(H={id:J,parent:a},a.children=a.children||[],a.children.push(H));var q={id:ae,parent:H},re=!0;if(H)for(var K={},ee=q;ee.id!=-1;)if(!K[ee.id])K[ee.id]=1,ee=ee.parent;else{re=!1;break}if(re){H.children=H.children||[];for(var ie=0;ie<H.children.length&&H.children[ie].id!=ae;ie++);ie==H.children.length&&H.children.push(q)}return re},s,_=[];for(e._toBeControlledObjectHash.forEach(function(k){_.push(k.master._id)});s=e._toBeControlledObjectHash.shift();){if(s.stageIsMaster){var T=s.master,y=s.slave,E=s.property,l=T._currentScene,c=y._audioObject._audio,A=y._aniData.binds||{},d=A.progress.progress,f=l._startFrame;l._numFrames;var u=f+parseInt(d.start),p=f+parseInt(d.end),v=T._aimFrameDec;if(c.readyState&&d.start&&d.end&&v){if(v>=u&&v<=p){var h=(v-(u-f))/(p-u);h.toFixed(2),h>=0&&h<=100&&c.duration*h<c.duration&&(c.currentTime=c.duration*h,c.play())}else(v<p||v>u)&&(c.paused||c.pause());c.paused&&(c.pausedPosition=c.currentTime),y._dispatchEvent(y._changedEvent)}continue}var m=s.property=="progress"&&s.master._dragCaptured||o(s);if(m){var T=s.master,y=s.slave,E=s.property,g=e._mugeda._displayObjectHash[T._id],b=e._mugeda._displayObjectHash[y._id];if(E=="animation"){for(var w=!0,x=0;x<_.length;x++){var C=e._mugeda._displayObjectHash[_[x]];C._displayObject._visible&&(w=!1)}if(w){y._inBindAnimationMode&&(y.play(),y._inBindAnimationMode=!1);continue}}else if(!g._displayObject._visible&&y._id==1){y.play();continue}var M=y._aniData||{},A=M.binds||{},O=A[E]||{};if(E=="animation"&&y._parent===y._getStage()){var S=y._currentScene,L=S._aniData.binds||{},D=L.animation||{},$=D.master||"",R=e.getReferenceElement($)||"";if(R===s.master)O=D;else continue}var I=O.trigger;if(I=="progress"&&T._type=="audio"){var c=T._audioObject._audio,P=100*c.currentTime/c.duration;Math.abs(P-100)<1e-5&&(P=100)}else if(I=="progress"&&T._type=="video"){var N=e._getRenderObjectByDisplayId(T._id),B=N._currentVideoDom;if(B){var P=100*B.currentTime/B.duration;Math.abs(P-100)<1e-5&&(P=100)}else P=0}else P=g[I];E!="text"&&(P=parseFloat(P),isNaN(P)&&(P=0)),I=="rotate"||I=="rotateX"||I=="rotateY"?P=P*180/Math.PI:I=="alpha"&&(P=P*100);var j=function(k,J){return J=="rotate"||J=="rotateX"||J=="rotateY"?k=k*Math.PI/180:J=="alpha"&&(k=k*.01),Number(Number(k).toFixed(3))};switch(I){case"left":case"top":case"width":case"height":case"alpha":case"rotate":case"rotateX":case"rotateY":case"pers":case"text":case"progress":if(O.map=="key"){var V=O.keys,Q=t(P,V,b._slaveActivated);Q!==void 0&&(Q=j(Q,E),r(b,E,Q),b._slaveActivated=!0)}else if(O.map=="equation")try{var F=O.equation,W=new RegExp(O.variable,"g"),G="V"+Math.floor(1e4*Math.random())+"V";F=F.replace(W,G),W=new RegExp("参考属性","g"),F=F.replace(W,G),F=e._replaceMacros(F);var Z=new Function(G,"return "+F+";"),X=new RegExp("^[0-9]+$");if(X.test(P))var U=Z(Number(P));else var U=Z(P);U!==""&&isFinite(U)?(U=j(U,E),r(b,E,U),b._slaveActivated=!0):typeof U=="string"&&(r(b,E,U),b._slaveActivated=!0)}catch{}else if(O.map=="animation"){var z=O.animation,h=100*(P-z.start)/(z.end-z.start);if(z.type=="switch"){var w=h>=0&&h<=100;y._inBindAnimationMode=!0,y[w?"play":"stop"]()}else if(z.type=="sync"){h=Math.max(0,Math.min(100,h)),y._updateScene();var l=y._currentScene,te=Math.min(l._numFrames*h*.01,l._numFrames);y.toggleSmoothMode(!0),l._numFrames==te&&(te-=.01);var Y=e._listPendingActions||[];Y.length||(y._inBindAnimationMode=!0,y.gotoAndStop(l._startFrame+te))}}else if(O.map=="progress"){var z=O.progress,h=(P-z.start)/(z.end-z.start);if(y._type==="video"){var N=e._getRenderObjectByDisplayId(y._id),B=N._currentVideoDom;B&&(B.currentTime=B.duration?B.duration*h:0,y._dispatchEvent(y._changedEvent))}else{var c=y._audioObject._audio;c.readyState&&(c.currentTime=c.duration*h,c.paused&&(c.pausedPosition=c.currentTime),y._dispatchEvent(y._changedEvent))}}break}}}};var traversalMovieClipRenderObject=function(e,t,r){r=r||[];var a=this,n=e._displayObject;if(!n._stopApplyAction){if(n._getRealVisible()===!1)return;r.push(n),e._currentScene;var o=n._currentScene,s=n._currentFrameDecimal;a._thisRoundRenderObjectIdList={};var _=n._addFrameDec(t);_&&n._aimFrameDec!=null&&o!==n._scenes[n._getSceneIndexByFrameNum(n._aimFrameDec)]&&(o==null||(n._loop?n.gotoAndPlay(o._startFrame,null,2):n.gotoAndStop(s,null,2))),n._calculateAimFrame();var l=function(){var d=n._updateTransformByCurrentFrame(!0),f=function(){d&&e._executeAppearAction()};n._updateScene();var u=e._switchToCurrentScene(function(){a._delayRenderList={},a._paging=!1,f()});if(u!=null){a._paging=!0,a._delayRenderList={};var p=a._thisRoundRenderObjectIdList,v=Object.keys(p);v.forEach(function(h){var m=p[h];if(m._visible==!1){var T=m._getRenderObject();T._parentMovieClipRenderObject._displayObject._id==1&&(a._delayRenderList[h]=m)}})}else f();n._pausedBeforeRender=n._paused};if(n._stopApplyAction)l();else{var c=n._scenes[n._getSceneIndexByFrameNum(n._aimFrameDec)];o&&c!==o?(n._stopApplyAction=!0,e._switchToCurrentSceneLeave(o,c,function(){n._stopApplyAction=!1,l()})):l()}}e._movieClipRenderObjectList.forEach(function(d){traversalMovieClipRenderObject.call(a,d,t,r)})},_dispatchEventEvent=function(e){if(!e.redirected&&InputEvent.CaptureDisplayObject){var t=e.type,r=new InputEvent(t,e);r._eventPhase=e.eventPhase,r._target=InputEvent.CaptureDisplayObject,r._stage=InputEvent.CaptureDisplayObject._getStage(),InputEvent.CaptureDisplayObject._dispatchEvent(r),(e.type==="touchend"||e.type==="mouseup")&&(e.preventDefault(),r._releaseCapture())}},bindEvent=function(e){var t=this,r=t._stageDom,a=(e._mrmcp||{}).render_mode;if(r.addEventListener("mousedown",_dispatchEventEvent.bind(t),!0),r.addEventListener("mousemove",_dispatchEventEvent.bind(t),!0),r.addEventListener("mouseup",_dispatchEventEvent.bind(t),!0),a!="embedded"){Browser$1.os.android&&Browser$1._isWeChat()&&r.addEventListener("click",function(o){o.target.tagName==="IMG"&&o.preventDefault()});var n={};r.addEventListener("touchstart",function(o){n.x=o.changedTouches[0].screenX,n.y=o.changedTouches[0].screenY;var s=InputEvent._getRealPos(e,o);n.inputX=s._x,n.inputY=s._y},!0),r.addEventListener("touchmove",function(o){var s=!1;if(t._scrollableObjectList){var _=o.target,l=!1;if(Browser$1.os.ios&&_&&_.nodeName.toLowerCase()=="video"){var c=o.changedTouches[0].screenX,d=o.changedTouches[0].screenY,f=c-n.x,u=d-n.y,p=Math.abs(f)>Math.abs(u),v=_._relativeRenderObject;if(v){var h=v._displayObject,m=InputEvent._getRealPos(e,o);p=Math.abs(m._x-n.inputX)>Math.abs(m._y-n.inputY);var T=new Point(h._getRawWidth(),h._getRawHeight()-50),y=h._getTotalMatrix()._transform(T);l=p&&m._y>y._y}else{var E=_.getBoundingClientRect();document.body.clientWidth/320,l=p&&d>E.top+E.height-48/1}}for(;_&&_!=r;)if(t._scrollableObjectList.indexOf(_)>=0){s=!0;break}else if(_._relateRenderObject){var g=_._relateRenderObject,h=g._displayObject,b=h._type;if(l||b=="Text"&&scrollOnTextOrSectionOverflow.includes(h._textOverflow)||!Browser$1.os.ios&&b=="Sprite"&&h._scroll&&h._scroll!="no"){s=!0;break}_=_.parentNode}else{var w=window.getComputedStyle(_),x=w["overflow-y"];if((x=="auto"||x=="scroll")&&_.clientHeight<_.scrollHeight){_.scrolled=!0,s=!0;break}else _=_.parentNode}}var C=window.Mugeda||{},M=C.options||{},A=M.supportFrameTouch;(A||!s&&top==window)&&o.preventDefault()},!0),r.addEventListener("touchend",function(o){for(var s=o.target;s&&s!=r;)if(s.scrolled){delete s.scrolled,o.stopPropagation();break}else s=s.parentNode},!0)}},findCss3AccelerateObject=function(e){var t=this;window.DEBUG_CS3_MODE||traversal(e,function(r){var a=r._displayObject;a!=null&&(a instanceof Stage&&(r._c3Accelerate=!1),a instanceof MovieClip&&(r._c3AccelerateEnabled=!1),scrollOnTextOrSectionOverflow.includes(a._textOverflow)&&(r._parentSceneRenderObject._c3Accelerate=!1),a instanceof MovieClip&&r._parentMovieClipRenderObject&&(r._parentSceneRenderObject._c3Accelerate=!1,r._parentSceneRenderObject._children.forEach(function(n){n._c3Accelerate=!1}),a._parent._haveAnimation&&(r._c3Accelerate=!1,r._children.forEach(function(n){n._c3Accelerate=!1,n._children.forEach(function(o){o._c3Accelerate=!1})}))),a._behaviors&&r._parentSceneRenderObject&&(r._parentSceneRenderObject._c3Accelerate=!1,r._parentSceneRenderObject._children.forEach(function(n){n._c3Accelerate=!1})),t.frameRate==null&&a instanceof Stage&&(t.frameRate=a._frameRate,t.frameTime=1e3/t.frameRate))})},traversal=function(e,t){var r={stopFlag:!1};if(t(e,r),!r.stopFlag)for(var a=e._children,n=a.length,o=0;o<n;o++){var s=a[o];traversal(s,t)}},traversalForSetup=function(e,t){for(var r=this,a=e._children,n=a.length,o="",s=0;s<n;s++)if(!(t!=null&&t!==s)){var _=a[s],l=_._displayObject;scrollOnTextOrSectionOverflow.includes(l._textOverflow)&&r._forceCheckHash.push(l),l.type==="Sprite"&&(l._aniData.param.scroll==="ver"||l._aniData.param.scroll==="hor")&&(l._aniData.param.scroll_setting=="scroll"||l._aniData.param.scroll_setting=="scrollNoBar")&&r._forceCheckHash.push(l);var c=l._transform;_._init();var d=_._canvasRender;if(d)d._setDisplayInitState(),o+=d._html,traversalForSetup.call(r,a[s]);else if(l._maskByList==null){_._setDisplayInitState(),_._setStaticPosition(c._matrix);var f=_._getHTML(),u=traversalForSetup.call(r,a[s]);f=f.replace("{{childNode}}",u),o+=f}l._addEventListener("changed",function(){return function(){r._displayObjectChangedHandler(this)}}()),l._addEventListener("remove",function(p){r._removeList.push(p._displayObject)}),l._addEventListener("addchild",function(){return function(p){r._addChildList.push(p._displayObject)}}()),l._dispatchEvent(l._changedEvent)}return o};proto$h._displayObjectChangedHandler=function(e){var t=this,r=e._id,a=e._maskToList;if(a){var n=e._getRenderObject()._canvasRender;if(!n)return;n._dirty=!0,a.forEach(function(s){s._dispatchEvent(s._changedEvent)})}else{var o=t._toBeRenderedObjectHash;t._thisRoundRenderObjectIdList[r]=e,o[r]=e}},proto$h._renderGlobalObjects=function(){var e=this,t=e._renderContext;e._renderContext="global";for(var r in e._globalRenderedObjectList){var a=e._getRenderObjectByDisplayId(r);a._displayObject&&a._displayObject.update()}e._renderContext=t},proto$h._renderChangedObject=function(){var e=this,t=e._toBeRenderedObjectHash;e._forceCheckHash.forEach(function(o){if(o instanceof DisplayObject){var s=o._id;if(t[s])return;var _=o._getRenderObject();_.render()}else o instanceof RenderObject&&o.render()});for(var r={},a=3;a--;){var n=Object.keys(t);if(Object.keys(e._delayRenderList).length&&(n=n.filter(function(o){return!e._delayRenderList[o]})),n.length===0)break;n.forEach(function(o){var s=e._getRenderObjectByDisplayId(o),_=s._canvasRender;_?r[_._id]||(r[_._id]=_,_._redraw()):(s.getNode(),s.render())}),n.forEach(function(o){delete t[o]})}},proto$h._getRenderObjectByDisplayId=function(e){return this._displayHash[e]};var buildRenderObjectList=function(e,t,r,a){var n=this,o=RenderObjectUtils.createInstance(t);if(e._addChild(o,t,null,a),t._resourceList&&t._resourceList.length&&r.push(o),t instanceof DisplayObjectContainer){var s=t.children;if(o instanceof renderObjectMovieClip&&s.length==0){var _=o._scenes[0]=new RenderObjectScene,l=new DisplayObject;l._type="scene",l._getRenderObject=function(){return _},o._addChild(_,l),_._sceneInfo=t._scenes[0]}s.forEach(function(c){if(!c._dataDisplayObject)if(c._presetAnimation&&c._presetAnimation._list.forEach(function(m){if(m._presetMovieClip){var T=new RenderObject(null);m._presetRootRenderObject=buildRenderObjectList.call(n,T,m._presetMovieClip,r),traversal(m._presetRootRenderObject._children[0],function(y){CanvasRender._initRenderObjectCanvas(y)})}}),o instanceof renderObjectMovieClip){var d=t._getObjectSceneIndex(c),f=o._scenes,u=f[d];if(u==null){for(var p=t._scenes.length,v=0;v<p;v++){u=f[v]=new RenderObjectScene;var h=new DisplayObject;h._type="scene",h._getRenderObject=function(){return u},o._addChild(u,h),u._sceneInfo=t._scenes[v]}u=f[d]}buildRenderObjectList.call(n,u,c,r)}else buildRenderObjectList.call(n,o,c,r)})}return o};proto$h._registerMediaDom=function(e,t,r){this._mediaHash[e]=t,Mugeda.addAudioCache(e,t,r);var a={};this._renderList&&this._renderList._children[0]&&this._renderList._children[0]._displayObject&&(a=this._renderList._children[0]._displayObject._aniData.pageInfo||{}),a.audioIconAim==="all"&&this._audioIndicator._getState()==="off"&&(t.muted=!0)},proto$h._unregisterMediaDom=function(e,t,r){delete this._mediaHash[e],Mugeda.removeAudioCache(e,t,r)},proto$h._mute=function(e){for(var t in this._mediaHash)this._mediaHash.hasOwnProperty(t)&&(this._mediaHash[t].muted=e!==!1);var r=Browser$1._globalObject.backgroundMusic;r&&(r.muted=e!==!1)},mod.namespace("Render.RenderManager",renderManager);var PresetAnimationCustom=function(e,t){var r=this;if(r._data=e[PresetType.Param.DATA],r._maskData=r._data[PresetType.WAY.MASK],r._maskData){var a=t._getRoot(),n=MugineRequire("Utils/DataConverter");if(!a._resource)return;(r._maskData.syms||[]).forEach(function(h){var m=h.id,T=h.type;if(T!=3&&T!=2)var y=n.createMovieClipObject(h,a._resource);y&&(a._resource.symbols[m]=y)});var o=r._maskData.layers,s=o[0].units[0];s.keyframes;var _=s.frameCount;r._maskCount=_;var l=JSON.parse(JSON.stringify(t._aniData));l.param.preset=[];var c=new Stage(t);c._isVirtual=!0,c._scaleX=c._scaleY=1,c._renderManager=new renderManager,o[0].maskMode=0;var d="Preset_"+l.guid;a._resource.symbols[d]=n.createMovieClipObject(r._maskData,a._resource);var f=JSON.parse(JSON.stringify(l.param));f.symbolId=d,f.offsetX=r._maskData.offX,f.offsetY=r._maskData.offY,f.rawWidth=r._maskData.refW,f.rawHeight=r._maskData.refH;var u={cw:r._maskData.cw,ch:r._maskData.ch,layers:[{maskMode:1,type:"layer",units:[{frameStart:0,frameCount:1,objects:[{type:2021,guid:d,param:f}]}]},{maskMode:2,type:"layer",units:[{frameStart:0,frameCount:1,objects:[l]}]}]},p=n.createMovieClipObject(u,a._resource),v=new p(c);r._presetMovieClip=v}PresetAnimationCustom.__super__.constructor.apply(r,arguments)};mod.extend(PresetAnimationCustom,PresetAnimation);var proto$g=PresetAnimationCustom.prototype;proto$g._applyAnimation=function(e,t){var r=this;if(r._maskData){var a=r._presetRootRenderObject,n=t._displayObject,o=n._getRenderObject(),s=a._children[0]._children[0]._canvasRender,_=r._presetMovieClip;if(!s._html){s._setDisplayInitState();var l=document.createElement("div");if(l.innerHTML=s._html,o._canvasRender){var f=document.createElement("div");document.body.appendChild(f),f.appendChild(l.firstChild);var d=s._getNode();r.canvasNode=d,document.body.removeChild(f)}else{var c=o.getNode();c.parentNode.insertBefore(l.firstChild,c);var d=s._getNode();r.canvasNode=d}r._offsetMatrix=_._offsetMatrix,n._parent&&n._parent._offsetMatrix?_._offsetMatrix=n._parent._offsetMatrix._clone():_._offsetMatrix=new r._offsetMatrix.constructor,r._canvasRender=s}if(r._canvasRender){var u=e/r._duration,p=function(h){if(h._type==="MovieClip"){var m=h._frames.length,T=(m-1e-7)*u;h.gotoAndPlay(T),h._updateTransformByCurrentFrame(!0)}h.children&&h.children.forEach(p)},v=_.children[1];p(v),_.children[0]._transform=n._transform,n._progressRatio!==void 0&&(_.children[0]._progressRatio=n._progressRatio),n._graphics!==void 0&&(_.children[0]._graphics=n._graphics),r._canvasRender._redraw(!1),n._dispatchEvent(n._changedEvent),r._type.indexOf("out")!==-1&&(o.getNode().style.visibility="hidden")}}};var easeLine=Ease._parseEase({}),PresetAnimationKeyframe=function(e,t){var r=this;PresetAnimationKeyframe.__super__.constructor.apply(r,arguments);var a=r._duration,n=t._getRoot(),o=a*n._frameRate,s=r._data.count,_=Math.max(1,Math.round(o/s)),l=t._aniData,c=l.param,d=c.width,f=c.height,u=function(g,b,w){var x=g[b];return x===void 0?w:x},p=r._data,v=function(g,b,w){return Math.max(b,Math.min(g,w))},h=void 0,m=void 0,T={keyframes:p.items.map(function(g,b){b===0&&(h=d*u(g,"cx",.5*1e6)/1e6,m=f*u(g,"cy",.5*1e6)/1e6);var w={alpha:v(c.alpha+u(g,"a",0),0,1),width:d+u(g,"w",0),height:f+u(g,"h",0),rotate:c.rotate+u(g,"rz",0),rotateX:(c.rotateX||0)+u(g,"rx",0),rotateY:(c.rotateY||0)+u(g,"ry",0),rotateCenterX:d*u(g,"cx",.5*1e6)/1e6,rotateCenterY:f*u(g,"cy",.5*1e6)/1e6,left:u(g,"x",0)+c.left,top:u(g,"y",0)+c.top,dock:c.dock,pers:v(u(c,"pers",0)+u(g,"pers",25),0,1/0)};if(g.filter){var x=[],C=c.filters||[],M={};C.forEach(function(L){var D=L.name;M[D]=L.config||ColorTransform._getDefaultFilterVal(D)});var A=Object.keys(M),O={};g.filter.forEach(function(L){var D=L.name;O[D]=L.config,A.indexOf(D)===-1&&A.push(D)}),A.forEach(function(L){var D=M[L]||ColorTransform._getUndefinedVal(L),$=O[L]||ColorTransform._getUndefinedVal(L);if(L==="drop-shadow"){var R=new Color(D.color),I=new Color($.color);x.push({name:L,config:{h:D.h+$.h,v:D.v+$.v,itensity:D.itensity+$.itensity,color:new Color(v(R._r+I._r,0,255),v(R._g+I._g,0,255),v(R._b+I._b,0,255),v(R._a+I._a,0,1))._getCssText()}})}else L==="hue-rotate"?x.push({name:L,config:{rotation:D.rotation+$.rotation}}):x.push({name:L,config:{itensity:D.itensity+$.itensity}})}),w.filters=x}var S=JSON.parse(JSON.stringify(c));return Object.keys(w).forEach(function(L){S[L]=w[L]}),{id:g.p*_,param:S,tween:g.tw,ease:g.ea}}),frameStart:0,frameCount:s*_};if(p.pathLeft!==void 0&&(T.pathMode=1,T.pathLeft=u(p,"pathLeft",0)*1+h+c.left,T.pathTop=u(p,"pathTop",0)*1+m+c.top,T.path=p.items.map(function(g){var b=g.phs;return{backwardX:u(b,"bx",0)*1,backwardY:u(b,"by",0)*1,forwardX:u(b,"fx",0)*1,forwardY:u(b,"fy",0)*1,nodeX:u(b,"x",0)*1,nodeY:u(b,"y",0)*1}})),this.constructor===PresetAnimationKeyframe){var y=new KeyframeInfo,E=MugineRequire("Utils/DataConverter");E.parseKeyframes(t,0,T,y),this._frameInfo=y}else return T};mod.extend(PresetAnimationKeyframe,PresetAnimationCustom);var proto$f=PresetAnimationKeyframe.prototype;proto$f._applyAnimation=function(e,t){var r=this;if(this.constructor===PresetAnimationKeyframe){var a=t._staticTransform,n=t._displayObject;a._colorTransform._alphaMultiplier;var o=r._frameInfo,s=e/r._duration,_=(o._max+1)*s,l=Math.floor(_),c=o._keyframes[l],d=o._keyframes[l+1];if(c&&d){var f=_-l,u=new c.constructor;n._bindTrans(u),c.constructor._tween(u,c,d,easeLine,f),u._matrix._calMatrixFormRaw(),n._setTransform(u)}else c?n._setTransform(c):n._setTransform(o._keyframes[o._max])}PresetAnimationKeyframe.__super__._applyAnimation.apply(r,arguments)};var presetAnimationCurveShape=function(e,t){var r=this,a=presetAnimationCurveShape.__super__.constructor.apply(r,arguments),n=r._data,o=a.keyframes,s=t._aniData,_=s.param,l=n.items,c=function(u,p,v){return Math.max(p,Math.min(u,v))};if(l.forEach(function(u,p){var v=u.fillInfo;if(v){var h=o[p].param.fillInfo;Object.keys(v).forEach(function(E){var g=v[E];E==="fillColors"?(g.forEach(function(b,w){h[E][w]===void 0&&(h[E][w]=JSON.parse(JSON.stringify(h[E][h[E].length-1])))}),g.forEach(function(b,w){h[E][w]={p:c(h[E][w].p+b.p,0,255),r:c(h[E][w].r+b.r,0,255),g:c(h[E][w].g+b.g,0,255),b:c(h[E][w].b+b.b,0,255),a:c(h[E][w].a+b.a,0,1)}})):E==="fillStartPos"||E==="fillEndPos"?(h[E]===void 0&&(h[E]={x:0,y:0}),h[E]={x:h[E].x+g.x,y:h[E].y+g.y}):E==="fillStyle"&&(h.fillStyle=g)})}var m=u.strokeColor;if(m){var T=Color.parse(_.strokeColor),y=Color.parse(m);o[p].param.strokeColor=new Color(c(T._r+y._r,0,255),c(T._g+y._g,0,255),c(T._b+y._b,0,255),c(T._a+y._a,0,1))._getCssText()}["lineWidth"].forEach(function(E){var g=u[E],b=o[p].param[E];g!==void 0&&(g+=b,g<1&&(g=1),o[p].param[E]=g)})}),this.constructor===presetAnimationCurveShape){var d=new KeyframeInfo,f=MugineRequire("Utils/DataConverter");f.parseCurveShapeKeyframes(t,0,a,d),this._frameInfo=d}else return a};mod.extend(presetAnimationCurveShape,PresetAnimationKeyframe);var proto$e=presetAnimationCurveShape.prototype;proto$e._applyAnimation=function(e,t){var r=this;if(this.constructor===presetAnimationCurveShape){var a=t._displayObject,n=r._frameInfo,o=e/r._duration,s=(n._max+1)*o,_=n.getNearFrameInfo(s),l=_[0],c=_[1],d=_[2];if(d===void 0)return;var f=t._staticTransform.constructor,u=new f;a._bindTrans(u);var p=n._keyframes[l],v=n._keyframes[c];f._tween(u,p,v,n._eases[l],d),a._updateDisplayObjectFromTransform(u),u._matrix._calMatrixFormRaw(),a._setTransform(u)}presetAnimationCurveShape.__super__.constructor.__super__._applyAnimation.apply(r,arguments)};var presetAnimationFade=function(e){presetAnimationFade.__super__.constructor.apply(this,arguments)};mod.extend(presetAnimationFade,PresetAnimation);var proto$d=presetAnimationFade.prototype;proto$d._applyAnimation=function(e,t){var r=this,a=t._staticTransform,n=t._displayObject,o=a._colorTransform._alphaMultiplier,s=e/r._duration,_=a._clone();_._colorTransform._alphaMultiplier=o*s,n._setTransform(_)};var PresetAnimationFly=function(e){var t=this;t._from=e[PresetType.Param.FROM]||e[PresetType.Param.FROM2]||e[PresetType.Param.TO]||e[PresetType.Param.TO2],t._uniform=e[PresetType.Param.UNIFORM]*1||0,t._clockwise=e[PresetType.Param.CLOCKWISE]*1||0,t._raise=e[PresetType.Param.RAISE]||PresetType.Param.RAISE_UP,t._deg=e[PresetType.Param.DEG]==null?360:e[PresetType.Param.DEG],PresetAnimationFly.__super__.constructor.apply(t,arguments)};mod.extend(PresetAnimationFly,PresetAnimation);var proto$c=PresetAnimationFly.prototype;proto$c._applyAnimation=function(e,t){var r=this,a=t._staticTransform,n=t._staticBoundaryRect,o=a._colorTransform._alphaMultiplier,s=o,_=e/r._duration,l=a._clone(),c=l._matrix,d=0,f=0,u=Browser$1._globalObject.globalScalar||1,p=(n._getLeft()+n._getWidth()/2)*u,v=(n._getTop()+n._getHeight()/2)*u;if(r._type==PresetType.Animation.FADE_IN||r._type==PresetType.Animation.FADE_OUT)return r._type==PresetType.Animation.FADE_OUT&&(_=1-_),s=r._getFrameAnimation(_,[{rate:0,param:0},{rate:1,param:1}]),l._colorTransform._alphaMultiplier=o*s,l;if(r._type==PresetType.Animation.RAISED_IN)return S=r._getFrameAnimation(_,[{rate:0,param:{y:(r._raise==PresetType.Param.RAISE_UP?1:-1)*n._getHeight()*.5,alpha:0}},{rate:1,param:{y:0,alpha:1}}]),c._translate(0,S.y),l._colorTransform._alphaMultiplier=o*S.alpha,l;if(r._type==PresetType.Animation.RAISED_OUT)return S=r._getFrameAnimation(_,[{rate:0,param:{y:0,alpha:1}},{rate:1,param:{y:(r._raise==PresetType.Param.RAISE_UP?-1:1)*n._getHeight()*.5,alpha:0}}]),c._translate(0,S.y),l._colorTransform._alphaMultiplier=o*S.alpha,l;if(r._type==PresetType.Animation.FLIP_IN||r._type==PresetType.Animation.FLIP_OUT){if(r._type==PresetType.Animation.FLIP_IN){var h=r._getFrameAnimation(_,[{rate:0,param:Math.PI/2},{rate:.4,param:-.1111111111111111*Math.PI},{rate:.6,param:.05555555555555555*Math.PI},{rate:.8,param:-.027777777777777776*Math.PI},{rate:1,param:0}],EasingInFun)*(r._clockwise?1:-1);s=r._getFrameAnimation(_,[{rate:0,param:0},{rate:.6,param:1},{rate:1,param:1}],EasingInFun)}else h=r._getFrameAnimation(_,[{rate:0,param:0},{rate:.3,param:-15/180*Math.PI},{rate:1,param:Math.PI/2}])*(r._clockwise?-1:1),s=r._getFrameAnimation(_,[{rate:0,param:1},{rate:.3,param:1},{rate:1,param:0}],EasingInFun);var m=c._is3d;return c._create3DMatrix(),c._translate3D(-p,-v),c._rawRotate3dY=h,c._rotateY3D(h),_!=1&&!m&&(c._perspective(Math.max(t._getBoundWidth(),t._getBoundHeight()),50),c._pers=50),c._translate3D(p,v),l._colorTransform._alphaMultiplier=o*s,l}else if(r._type==PresetType.Animation.POP_IN||r._type==PresetType.Animation.POP_OUT||r._type==PresetType.Animation.CLOSER_IN||r._type==PresetType.Animation.FURTHER_OUT){if(r._type==PresetType.Animation.POP_IN){var T=r._getFrameAnimation(_,[{rate:0,param:.3},{rate:.2,param:1.1},{rate:.4,param:.9},{rate:.6,param:1.03},{rate:.8,param:.97},{rate:1,param:1}],BounceInFun);s=r._getFrameAnimation(_,[{rate:0,param:0},{rate:.6,param:1},{rate:1,param:1}],BounceInFun)}else r._type==PresetType.Animation.POP_OUT?(T=r._getFrameAnimation(_,[{rate:0,param:1},{rate:.2,param:.9},{rate:.5,param:1.1},{rate:.55,param:1.1},{rate:1,param:.3}]),s=r._getFrameAnimation(_,[{rate:0,param:1},{rate:.5,param:1},{rate:1,param:0}])):(r._type==PresetType.Animation.CLOSER_IN||r._type==PresetType.Animation.FURTHER_OUT)&&(r._type==PresetType.Animation.FURTHER_OUT&&(_=1-_),S=r._getFrameAnimation(_,[{rate:0,param:{scale:.3,alpha:0}},{rate:.5,param:{scale:1,alpha:1}},{rate:1,param:{scale:1,alpha:1}}]),T=S.scale,s=S.alpha);return c._translate(-p,-v),c._scale(T,T),c._translate(p,v),l._colorTransform._alphaMultiplier=o*s,l}else if(r._type==PresetType.Animation.SWIRL_IN||r._type==PresetType.Animation.SWIRL_OUT){r._type==PresetType.Animation.SWIRL_OUT&&(_=1-_),s=r._getFrameAnimation(_,[{rate:0,param:0},{rate:1,param:1}]);var y=n._getHeight(),E=n._getWidth(),g=n._getLeft(),b=n._getTop();return S=r._getFrameAnimation(_,[{rate:0,param:{originX:0,scale:0,rotate:Math.PI*2,transY:-y*u}},{rate:1,param:{originX:E*u,scale:1,rotate:0,transY:0}}]),c._translate(-(g*u+S.originX),-(b+y)*u),c._scale(S.scale,S.scale),c._rotate(r._clockwise?S.rotate:-S.rotate),c._translate(g*u+S.originX,(b+y)*u),c._translate(0,f),l._colorTransform._alphaMultiplier=o*s,l}else if(r._type==PresetType.Animation.FURTHER_IN||r._type==PresetType.Animation.CLOSER_OUT){if(r._type==PresetType.Animation.FURTHER_IN?S=r._getFrameAnimation(_,[{rate:0,param:{alpha:0,scale:2,filter:2}},{rate:1,param:{alpha:1,scale:1,filter:0}}]):S=r._getFrameAnimation(_,[{rate:0,param:{alpha:1,scale:1,filter:0}},{rate:1,param:{alpha:0,scale:2,filter:2}}]),c._translate(-p,-v),c._scale(S.scale,S.scale),c._translate(p,v),_!=1){var w=S.filter.toFixed(2);l._setAdditionCss(Browser$1.prefix.css+"filter: blur("+w+"px);")}else l._setAdditionCss(Browser$1.prefix.css+"filter: none;");return l._colorTransform._alphaMultiplier=o*S.alpha,l}else{if(r._type==PresetType.Animation.SHAKE)return E=n._getWidth(),S=r._getFrameAnimation(_,[{rate:0,param:{transX:0,rotate:0}},{rate:.15,param:{transX:-.25*E,rotate:-5}},{rate:.3,param:{transX:.2*E,rotate:3}},{rate:.45,param:{transX:-.15*E,rotate:-3}},{rate:.6,param:{transX:.1*E,rotate:2}},{rate:.75,param:{transX:-.05*E,rotate:-1}},{rate:1,param:{transX:0,rotate:0}}]),c._translate(-p,-v),c._rotate(S.rotate/180*Math.PI,S.rotate/180*Math.PI),c._translate(p,v),c._translate(S.transX,0),l;if(r._type==PresetType.Animation.SQUEEZE)return S=r._getFrameAnimation(_,[{rate:0,param:{scaleX:1,scaleY:1}},{rate:.3,param:{scaleX:1.25,scaleY:.75}},{rate:.4,param:{scaleX:.75,scaleY:1.25}},{rate:.5,param:{scaleX:1.15,scaleY:.85}},{rate:.65,param:{scaleX:.95,scaleY:1.05}},{rate:.75,param:{scaleX:1.05,scaleY:.95}},{rate:1,param:{scaleX:1,scaleY:1}}]),c._translate(-p,-v),c._scale(S.scaleX,S.scaleY),c._translate(p,v),l;if(r._type==PresetType.Animation.ROTATE)return h=r._getFrameAnimation(_,[{rate:0,param:0},{rate:1,param:r._deg/180*Math.PI}],r._uniform?function(D){return D}:EasingInOutFun),c._translate(-p,-v),c._rotate(r._clockwise!=0?h:-h),c._translate(p,v),l;if(r._type==PresetType.Animation.FLIP)return S=r._getFrameAnimation(_,[{rate:0,param:{rotate:-360,transZ:0,scale:1}},{rate:.4,param:{rotate:-190,transZ:150,scale:1},fun:EasingOutFun},{rate:.5,param:{rotate:-170,transZ:150,scale:1},fun:EasingOutFun},{rate:.8,param:{rotate:0,transZ:0,scale:1},fun:EasingInFun},{rate:1,param:{rotate:0,transZ:0,scale:1},fun:EasingInFun}]),c._translate(-p,-v),c._scale(S.scale,S.scale),c._translate(p,v),c._create3DMatrix(),c._translate3D(-p,-v),c._rawRotate3dY=r._clockwise?-S.rotate:S.rotate,c._rotateY3D(c._rawRotate3dY/180*Math.PI),_==1?(c._perspective(Math.max(t._getBoundWidth(),t._getBoundHeight()),0),c._pers=0):(c._perspective(Math.max(t._getBoundWidth(),t._getBoundHeight()),50),c._pers=50),c._translate3D(p,v,S.transZ),l;if(r._type==PresetType.Animation.SWING)return h=r._getFrameAnimation(_,[{rate:0,param:0},{rate:.2,param:15},{rate:.4,param:-10},{rate:.6,param:5},{rate:.8,param:-5},{rate:1,param:0}]),b=n._getTop(),c._translate(-p,-b),c._rotate(h/180*Math.PI),c._translate(p,b),l;if(r._type==PresetType.Animation.SLIDE_UP){var x=r._getFrameAnimation(_,[{rate:0,param:0},{rate:1,param:r._length?-r._length:-n._getHeight()}]);return c._translate(0,x),l}else{if(r._type==PresetType.Animation.QUIVER)return S=r._getFrameAnimation(_,[{rate:0,param:{s:1,r:0}},{rate:.1,param:{s:.9,r:-3}},{rate:.2,param:{s:.9,r:-3}},{rate:.3,param:{s:1.1,r:3}},{rate:.4,param:{s:1.1,r:-3}},{rate:.5,param:{s:1.1,r:3}},{rate:.6,param:{s:1.1,r:-3}},{rate:.7,param:{s:1.1,r:3}},{rate:.8,param:{s:1.1,r:-3}},{rate:.9,param:{s:1.1,r:3}},{rate:1,param:{s:1,r:0}}]),c._translate(-p,-v),c._scale(S.s,S.s),c._rotate(S.r/180*Math.PI),c._translate(p,v),l;if(r._type==PresetType.Animation.tilt)return S=r._getFrameAnimation(_,[{rate:0,param:0},{rate:.111,param:0},{rate:.222,param:-12.5},{rate:.333,param:6.25},{rate:.444,param:-3.125},{rate:.555,param:1.5625},{rate:.666,param:-.78125},{rate:.777,param:.390625},{rate:.888,param:-.1953125},{rate:1,param:0}]),c._translate(-p,-v),c._skew(S/180*Math.PI,S/180*Math.PI),c._translate(p,v),l}}var C=0,M=0,A=0,O=0;switch(r._from){case PresetType.Param.TOP:M=-(n._getBottom()+.1*t._stageBoundaryRect._getHeight()),O=1;break;case PresetType.Param.RIGHT:C=t._stageBoundaryRect._getWidth()-n._getLeft()+.1*t._stageBoundaryRect._getWidth(),A=-1;break;case PresetType.Param.BOTTOM:M=t._stageBoundaryRect._getHeight()-n._getTop()+.1*t._stageBoundaryRect._getHeight(),O=-1;break;case PresetType.Param.LEFT:default:C=-(n._getRight()+.1*t._stageBoundaryRect._getWidth()),A=1;break}if(r._type==PresetType.Animation.BOUNCE_IN){var S=r._getFrameAnimation(_,[{rate:0,param:{transX:C,transY:M,alpha:0}},{rate:.6,param:{transX:25*A,transY:25*O,alpha:1}},{rate:.9,param:{transX:-10*A,transY:-10*O,alpha:1}},{rate:1,param:{transX:0,transY:0,alpha:1}}],jumpEasingFun);c._translate(S.transX,S.transY),l._colorTransform._alphaMultiplier=o*S.alpha}else if(r._type==PresetType.Animation.MOVE)S=r._getFrameAnimation(_,[{rate:0,param:{x:0,y:0}},{rate:1,param:{x:-A*(r._length?r._length:n._getWidth()),y:-O*(r._length?r._length:n._getHeight())}}]),c._translate(S.x,S.y);else if(r._type==PresetType.Animation.BOUNCE_OUT)S=r._getFrameAnimation(_,[{rate:0,param:{transX:0,transY:0}},{rate:.2,param:{transX:-10*A,transY:-10*O}},{rate:.4,param:{transX:20*A,transY:20*O}},{rate:.45,param:{transX:20*A,transY:20*O}},{rate:1,param:{transX:C,transY:M}}]),s=r._getFrameAnimation(_,[{rate:0,param:1},{rate:.45,param:1},{rate:1,param:0}]),c._translate(S.transX,S.transY),l._colorTransform._alphaMultiplier=o*s;else if(r._type==PresetType.Animation.ROLL_IN)S=r._getFrameAnimation(_,[{rate:0,param:{transX:C,rotate:-120/180*Math.PI,alpha:0}},{rate:1,param:{transX:0,rotate:0,alpha:1}}]),c._translate(-p,-v),c._rotate(S.rotate*(r._from===PresetType.Param.LEFT?1:-1)),c._translate(p,v),c._translate(S.transX,0),l._colorTransform._alphaMultiplier=o*S.alpha;else if(r._type==PresetType.Animation.ROLL_OUT)S=r._getFrameAnimation(_,[{rate:0,param:{transX:0,rotate:0,alpha:1}},{rate:1,param:{transX:C,rotate:120/180*Math.PI*(r._from===PresetType.Param.RIGHT?1:-1),alpha:0}}]),c._translate(-p,-v),c._rotate(S.rotate),c._translate(p,v),c._translate(S.transX,0),l._colorTransform._alphaMultiplier=o*S.alpha;else if(r._type==PresetType.Animation.FLY_IN){s=r._getFrameAnimation(_,[{rate:0,param:0},{rate:.6,param:1},{rate:1,param:1}],EasingOutFun);var L=r._getFrameAnimation(_,[{rate:0,param:-30/180*Math.PI},{rate:.6,param:-30/180*Math.PI},{rate:.8,param:20/180*Math.PI},{rate:1,param:0}],EasingOutFun);d=r._getFrameAnimation(_,[{rate:0,param:C},{rate:.8,param:0},{rate:1,param:0}],EasingOutFun),c._translate(-p,-v),r._from==PresetType.Param.RIGHT?c.translate(n._getWidth()/2,-n._getHeight()/2):c._translate(-n._getWidth()/2,-n._getHeight()/2),c._skew(L*(r._from==PresetType.Param.RIGHT?1:-1),0),r._from==PresetType.Param.RIGHT?c.translate(-n._getWidth()/2,n._getHeight()/2):c._translate(n._getWidth()/2,n._getHeight()/2),c._translate(p,v),c._translate(d,0),l._colorTransform._alphaMultiplier=o*s}else r._type==PresetType.Animation.FLY_OUT?(S=r._getFrameAnimation(_,[{rate:0,param:{alpha:1,skewX:0,transX:0}},{rate:1,param:{alpha:0,skewX:-45/180*Math.PI,transX:C}}],EasingInFun),c._translate(-p,-v),c._skew(r._from==PresetType.Param.LEFT?S.skewX:-S.skewX,0),c._translate(p,v),c._translate(S.transX,0),l._colorTransform._alphaMultiplier=o*S.alpha):(r._type==PresetType.Animation.MOVE_IN||r._type==PresetType.Animation.MOVE_OUT)&&(r._type==PresetType.Animation.MOVE_OUT&&(_=1-_),S=r._getFrameAnimation(_,[{rate:0,param:{transX:C,transY:M,alpha:0}},{rate:1,param:{transX:0,transY:0,alpha:1}}]),c._translate(S.transX,S.transY),l._colorTransform._alphaMultiplier=o*S.alpha);return l};var jumpEasingFun=Tween.CubicBezier(1-.355,0,.355,1),BounceInFun=Tween.CubicBezier(.215,.61,.355,1),EasingInFun=Tween.CubicBezier(.42,0,1,1),EasingOutFun=Tween.CubicBezier(0,0,.58,1),EasingInOutFun=Tween.CubicBezier(.42,0,.58,1),PresetAnimationProgress=function(e,t){var r=this;PresetAnimationProgress.__super__.constructor.apply(r,arguments)};mod.extend(PresetAnimationProgress,PresetAnimationCustom);var proto$b=PresetAnimationProgress.prototype;proto$b._applyAnimation=function(e,t){var r=this,a=t._displayObject,n=e/r._duration,o=MugineRequire("Display/MovieClip");a._originProgressTransform=t._staticTransform,o.handleProcessAnimation(n,[a]),PresetAnimationProgress.__super__._applyAnimation.apply(r,arguments)};var PresetAnimationStill=function(e,t){var r=this;PresetAnimationStill.__super__.constructor.apply(r,arguments)};mod.extend(PresetAnimationStill,PresetAnimationCustom),PresetAnimationStill.prototype;var presetAnimationTextShape=function(e,t){var r=this,a=presetAnimationTextShape.__super__.constructor.apply(r,arguments),n=r._data,o=a.keyframes,s=n.items;if(s.forEach(function(c,d){["letterSpace","textLineHeight","fontSize"].forEach(function(f){var u=c[f],p=o[d].param[f];u!==void 0&&(u+=p,f==="fontSize"?u<1&&(u=1):u<0&&(u=0),o[d].param[f]=u)})}),this.constructor===presetAnimationTextShape){var _=new KeyframeInfo,l=MugineRequire("Utils/DataConverter");l.parseTextShapeKeyframes(t,0,a,_),r._frameInfo=_}else return a};mod.extend(presetAnimationTextShape,presetAnimationCurveShape);var proto$a=presetAnimationTextShape.prototype;proto$a._applyAnimation=function(e,t){var r=this,a=t._displayObject,n=r._frameInfo,o=e/r._duration,s=(n._max+1)*o,_=n.getNearFrameInfo(s),l=_[0],c=_[1],d=_[2];if(d!==void 0){var f=t._staticTransform.constructor,u=new f;a._bindTrans(u);var p=n._keyframes[l],v=n._keyframes[c];f._tween(u,p,v,n._eases[l],d),a._updateDisplayObjectFromTransform(u),u._matrix._calMatrixFormRaw(),a._setTransform(u),presetAnimationTextShape.__super__._applyAnimation.apply(r,arguments)}};var PresetAnimationManager=function(){var e=this;e._list=[],e._staticTransform=null,e._displayObject=null,e._initialzed=!1,e._currentFrame=0,e._currentAniIndex=0,e._root=null,e._staticBoundaryRect=null,e._stageBoundaryRect=null,e._playStatus="play",e._loop=!1,e._loopTimes=0,e._actions=[],e._actionTriggered=!1,e._presetData={},e._presetIsFirst=!1,e._isPlay=!1},proto$9=PresetAnimationManager.prototype;proto$9._registerAction=function(e){this._actions.push(e)},proto$9._setStatus=function(e){var t=this;e=="play"&&t._currentAniIndex>=t._list.length&&t._resetStatus(),t._playStatus=e},proto$9._addAnimation=function(e){var t=this,r=0;if(t._list.length){var a=t._list[t._list.length-1];r=a._startTime+a._delay+a._duration}e._startTime=r,t._list.push(e)},proto$9._setStaticTransform=function(e){this._staticTransform=e._clone()},proto$9._setDisplayObjectBoundary=function(e){var t=this;if(e==null){var r=t._displayObject._getBoundary(t._staticTransform._matrix);t._staticBoundaryRect=r._getRoundRect()}else t._staticBoundaryRect=e},proto$9._setStageBoundary=function(e){var t=this;t._stageBoundaryRect=e||new Rectangle(0,0,t._root._stageWidth,t._root._stageHeight)},proto$9._bindDisplayObject=function(e){var t=this;t._displayObject=e,e._addEventListener("visibilityChanged",function(){if(e._getRealVisible()){var r=e._aniData.param;if("presetTrigger"in r){var a=r.presetTrigger;a=="auto"?t._resetStatus():(t._resetStatus(),e._presetAnimation._setStatus("pause"))}else t._resetStatus()}else e._setTransform(t._staticTransform)}),t._root=t._displayObject._getRoot(),t._resetStatus(),t._setDisplayObjectBoundary(),t._setStageBoundary()},proto$9._resetStatus=function(e){var t=this;t._staticTransform=t._displayObject._transform,t._initialzed=!1,t._currentFrame=0,t._currentAniIndex=0,t._actionTriggered=!1,t._isPlay=!1;var r=t._displayObject._aniData.param,a=r.presetAuto===void 0?!0:!!r.presetAuto;t._playStatus=e||a?"play":"pause"},proto$9._updateTransformByFrameNum=function(e){var t=this,r=t._displayObject;if(t._currentAniIndex>=t._list.length){if(t._loop)if(t._loopTimes&&t._loopTimes>1){t._loopTimes=t._loopTimes-1;var a=t._staticTransform;t._resetStatus(t._playStatus=="play"),t._staticTransform=a,t._currentFrame=0}else if(t._loopTimes&&t._loopTimes==1)t._loop=!1;else{var a=t._staticTransform;t._resetStatus(t._playStatus=="play"),t._staticTransform=a,t._currentFrame=0}if(!t._actionTriggered){if(r){var n=t._endAction,o=r._presetAnimation._presetData;if(o._presetTrigger=="click"&&(r.parent._currentScene.presetAnimationClickCount=o.nextClickIndex,console.log(o.nextClickIndex)),n){var s=r.parent.children.filter(function(T){return T._guid===n.guid})[0];s&&n.action=="order"&&s._presetAnimation._setStatus("play")}}t._actions.forEach(function(T,y){T.event=="preset_end"&&T.action.doAction()}),t._actionTriggered=!0}}var _=t._currentAniIndex,l=t._list[_],c=_,d=t._list[c];if(d!=null){var f;if(e==null){var u=t._root,p=u._frameRate;if(t._playStatus=="pause")t._initialzed?f=t._currentFrame:f=0,e=f/p;else{var v=u._deltaFrame;f=t._currentFrame+v,e=f/p}}if(!(t._initialzed&&Math.abs(f-t._currentFrame)<1e-5)){for(;d._startTime+d._delay+d._duration<e&&(d=t._list[++c],d!=null););if(t._currentAniIndex=c,l!==d&&l&&d==null)return l._applyAnimation(l._duration,t);if(d!=null){t._currentFrame=f,t._initialzed=!0;var h=e-d._startTime-d._delay;if(h<=0){if(r){var o=r._presetAnimation._presetData;t._presetIsFirst&&(r.parent._currentScene.presetAnimationClickCount=-1,o._presetTrigger=="auto"&&r._presetAnimation._setStatus("play")),o.isFirstClickObj&&(r.parent._currentScene.presetAnimationClickCount=o.presetIndex,console.log(r.parent._currentScene))}return d._applyAnimation(0,t)}else{if(h>=d._duration&&(h=d._duration),r){var m=t._startAction;if(m&&m.action=="sync"){var s=r.parent.children.filter(function(y){return y._guid===m.guid})[0];s&&!s._presetAnimation._isPlay&&(s._presetAnimation._setStatus("play"),s._presetAnimation._isPlay=!0)}}return d._applyAnimation(h,t)}}}}},proto$9._getBoundWidth=function(){return this._staticBoundaryRect._getWidth()},proto$9._getBoundHeight=function(){return this._staticBoundaryRect._getHeight()},mod.exportName(proto$9,["setStaticTransform",proto$9._setStaticTransform,"updateTransformByTime",proto$9._updateTransformByFrameNum,"setDisplayObjectBoundary",proto$9._setDisplayObjectBoundary,"setStageBoundary",proto$9._setStageBoundary]);var PresetAnimationGenerator=function(){},handleClassDic={};handleClassDic[PresetType.Animation.MOVE_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.BOUNCE_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.FADE_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLIP_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.POP_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.CLOSER_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.ROLL_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLY_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.SWIRL_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.SWIRL_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FURTHER_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.SHAKE]=PresetAnimationFly,handleClassDic[PresetType.Animation.SQUEEZE]=PresetAnimationFly,handleClassDic[PresetType.Animation.ROTATE]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLIP]=PresetAnimationFly,handleClassDic[PresetType.Animation.SWING]=PresetAnimationFly,handleClassDic[PresetType.Animation.MOVE]=PresetAnimationFly,handleClassDic[PresetType.Animation.SLIDE_UP]=PresetAnimationFly,handleClassDic[PresetType.Animation.QUIVER]=PresetAnimationFly,handleClassDic[PresetType.Animation.tilt]=PresetAnimationFly,handleClassDic[PresetType.Animation.FADE_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.MOVE_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.BOUNCE_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLIP_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.POP_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FURTHER_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.ROLL_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.FLY_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.CLOSER_OUT]=PresetAnimationFly,handleClassDic[PresetType.Animation.RAISED_IN]=PresetAnimationFly,handleClassDic[PresetType.Animation.RAISED_OUT]=PresetAnimationFly,PresetAnimationGenerator._parseAnimationParam=function(e,t){var r=null;return t.forEach(function(a){if(a){var n=a[PresetType.Param.TYPE];if(a[PresetType.Param.WAY]===PresetType.WAY.KEYFRAME)o=PresetAnimationKeyframe;else if(a[PresetType.Param.WAY]===PresetType.WAY.PROGRESS)o=PresetAnimationProgress;else if(a[PresetType.Param.WAY]===PresetType.WAY.CURVE_SHAPE)o=presetAnimationCurveShape;else if(a[PresetType.Param.WAY]===PresetType.WAY.TEXT_SHAPE)o=presetAnimationTextShape;else if(a[PresetType.Param.WAY]===PresetType.WAY.MASK)o=PresetAnimationStill;else var o=handleClassDic[n];if(!o)return console.log("unknown ani:"+n);var s=new o(a,e);r==null&&(r=new PresetAnimationManager),r._addAnimation(s)}}),r},mod.exportName(PresetAnimationGenerator,["parseAnimationParam",PresetAnimationGenerator._parseAnimationParam]),mod.namespace("PresetAnimation.PresetAnimationGenerator",PresetAnimationGenerator);var ComplexTimer=function(){ComplexTimer.__super__.constructor.apply(this,arguments);var e=this;e.tdirection="down",e.tlength=30,e._renderManager=null,e._startTime=null,e._timerStatus="normal",e._pausedTime=void 0,e._unLockTime=!1,e._hideTextRender=!1};mod.extend(ComplexTimer,TextField),ComplexTimer._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n.ctDirection=a.ctDirection,n.ctAuto=a.ctAuto||"yes",n.ctMethod=a.ctMethod,n.ctDisplay=a.ctDisplay,n.ctCustom=a.ctCustom,n.ctTime=a.ctTime,n.ctUnit=a.ctUnit,n.ctLoop=a.ctLoop,n.ctStart=a.ctStart,n.ctEnd=a.ctEnd},ComplexTimer);var proto$8=ComplexTimer.prototype;proto$8.update=function(e){var t=this;try{var r=window.dayjs,a=window.dayjsPluginDuration}catch(O){console.log(O);return}a&&!r.duration&&r.extend(a.default);var n=t._defaultTextFormat,o=n.ctDirection||"down",s=n.ctAuto||"yes",_=n.ctMethod||"relative",l=n.ctDisplay||"DD天HH时mm分ss秒",c=n.ctCustom||"",d=n.ctTime||"1",f=n.ctUnit||"day",u=n.ctLoop||"noloop",p=n.ctStart||"",v=n.ctEnd||"",h=l==="custom"?c:l,m=r();if(!m||!t._startTime)var T=0;else var T=m-t._startTime;var y=r.duration(0).format(h),E=0;switch(f){case"day":E=d*24*60*60*1e3;break;case"hour":E=d*60*60*1e3;break;case"minute":E=d*60*1e3;break;case"second":E=d*1e3;break}var g=function(){var O="";switch(_){case"absolute":O=y;break;case"relative":o==="up"?O=y:o==="down"&&(O=r.duration(E).format(h));break;case"unlimit":O=y;break}t._setText(O)};if(!t._unLockTime&&s==="no"){g();return}if(!t._renderManager){for(var b=t;b&&!b._renderManager;)b=b.parent;t._renderManager=b._renderManager}var w=t.actions||[],x=function(){t._startTime=r(),t._actionDone=!1;for(var O=0;O<w.length;O++)w[O]._behavior.event=="complex_timer_start"&&w[O].doAction()};if(t._startTime||x(),t._timerStatus=="pause"){t._pausedTime=t._pausedTime||T;return}else if(t._timerStatus=="start")x();else if(t._timerStatus=="continue"&&t._pausedTime!==void 0)t._hideTextRender=!0,t._startTime=r()-t._pausedTime;else if(t._timerStatus=="restart"){x(),g();return}t._timerStatus="normal",delete t._pausedTime;var C="",M=function(){if(!t._actionDone){for(var O=0;O<w.length;O++)w[O]._behavior.event=="complex_timer_up"&&w[O].doAction();u=="noloop"?t._actionDone=!0:x()}};switch(_){case"absolute":o==="up"?r()<=r(p)?(C=y,M()):C=r.duration(r().diff(r(p))).format(h):o==="down"&&(r()>=r(v)?(C=y,M()):C=r.duration(r(v).diff(r())).format(h));break;case"relative":var A=r.duration(E)-T;A>=0?o==="up"?C=r.duration(T).format(h):o==="down"&&(C=r.duration(r.duration(E)-T).format(h)):A<0&&(o==="up"?(M(),C=r.duration(E).format(h)):o==="down"&&(M(),C=r.duration(0).format(h)));break;case"unlimit":C=r.duration(T).format(h);break}t._hideTextRender?t._hideTextRender=!1:t._setText(C)},mod.namespace("Text.ComplexTimer",ComplexTimer);var TextFieldType=function(){};TextFieldType.DYNAMIC="dynamic",TextFieldType.INPUT="input",mod.exportName(TextFieldType,["DYNAMIC",TextFieldType.DYNAMIC,"INPUT",TextFieldType.INPUT]);var TextGyro=function(){TextGyro.__super__.constructor.apply(this,arguments);function e(t){window.gyroInfo=window.gyroInfo||{},window.gyroInfo.alpha=t.alpha,window.gyroInfo.beta=t.beta,window.gyroInfo.gamma=t.gamma}Browser$1._globalObject.mugedaGyroInit||(Browser$1._globalObject.addEventListener("deviceorientation",e,!1),Browser$1._globalObject.mugedaGyroInit=!0)};mod.extend(TextGyro,TextField),TextGyro._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n._gyroType=a.gyroType},TextGyro);var proto$7=TextGyro.prototype;proto$7.update=function(e){var t=this,r=t._defaultTextFormat,a=r._gyroType||"alpha";window.gyroInfo==null&&(window.gyroInfo={});var n=window.gyroInfo[a]||"0.000",o=Math.abs(n),s=Math.floor(o),_=Math.round(1e3*(o-s));_<10?_="00"+_.toString():_<100&&(_="0"+_.toString()),n=(n<0?"-":"")+s+"."+_,t._setText(n)},mod.namespace("Text.TextGyro",TextGyro);var TextRandom=function(){TextRandom.__super__.constructor.apply(this,arguments)};mod.extend(TextRandom,TextField),TextRandom._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n._rmin=a.rmin,n._rmax=a.rmax,n._rinterval=a.rinterval},TextRandom);var proto$6=TextRandom.prototype;proto$6.update=function(e){e=e||{};var t=this;(!t._startTime||e.appear)&&(t._startTime=new Date().getTime());var r=t._defaultTextFormat,a=new Date().getTime(),n=a-t._startTime,o=parseFloat(r._rmin)||0,s=parseFloat(r._rmax)||10,_=parseFloat(r._rinterval)||10,l=_-.001*n;if(l<=0||e.appear){var c=Math.floor(o+(s+1-o)*Math.random());t._setText(c),t._startTime=new Date().getTime()}},mod.namespace("Text.TextRandom",TextRandom);var TextTimer=function(){TextTimer.__super__.constructor.apply(this,arguments);var e=this;e.tdirection="down",e.tlength=30,e._renderManager=null,e._timerStatus="normal",e._pausedTime=void 0};mod.extend(TextTimer,TextField),TextTimer._createChildClass=TextField._createChildClassFactory(function(e,t){var r=this,a=e.param,n=r._defaultTextFormat;n._tprecision=a.tprecision,n._tdirection=a.tdirection,n._tlength=a.tlength,n._talwayson=a.talwayson,n._tloop=a.tloop},TextTimer);var proto$5=TextTimer.prototype;proto$5.update=function(e){e=e||{};var t=this,r=t._defaultTextFormat,a=r._tlength||30,n=r._tprecision||"second",o=r._tdirection||"down",s=r._tloop||"noloop",_=r._trandom||0,l=r._talwayson||"no";if(!t._renderManager){for(var c=t;c&&!c._renderManager;)c=c.parent;t._renderManager=c._renderManager}var d=t._getRealVisible();if(!(!t._startTime&&!d||l=="yes"&&t._renderManager._renderContext!="global")){var f=t.actions||[],u=function(){t._startTime=new Date().getTime()+Math.floor(5-10*Math.random()),t._actionDone=!1;for(var g=0;g<f.length;g++)f[g]._behavior.event=="timer_start"&&f[g].doAction();t.tdirection=o,o=="random"&&(t.tdirection=Math.random()<.5?"down":"up"),t.tlength=parseFloat(a)+_*Math.random()};(!t._startTime||e.appear&&l=="no")&&u();var p=new Date().getTime(),v=p-t._startTime;if(v<0&&(v=1),t._timerStatus=="pause"){t._pausedTime=t._pausedTime||v;return}else t._timerStatus=="continue"&&t._pausedTime!==void 0?t._startTime=new Date().getTime()-t._pausedTime:t._timerStatus=="restart"&&u();t._timerStatus="normal",delete t._pausedTime;var v=.001*(p-t._startTime),h=t.tlength-v,m=t.tdirection=="down"?h:v;if(h>0)if(n=="second")m=Math.round(m);else{var T=Math.floor(m),y=Math.floor(1e3*(m-T));y<10?y="00"+y.toString():y<100&&(y="0"+y.toString()),m=T+"."+y}else h<0&&(m=t.tdirection=="down"?0:t.tlength);if(h<=0&&!t._actionDone){for(var E=0;E<f.length;E++)f[E]._behavior.event=="timer"&&f[E].doAction();s=="noloop"?t._actionDone=!0:u()}t._setText(m)}},mod.namespace("Text.TextTimer",TextTimer);var Browser=MugineRequire("Utils/Browser");MugineRequire("Render/RenderObject");var keyBoard=function(e){var t=window.G(e),r=null,a=function(){var l=Mugeda.scene._getRoot()._renderManager._displayHash[0].getNode(),c="	    	<style>	    		#"+e+'_key_board{	    			background: #fff;	    			position: fixed;	    			bottom: 0;	    			width: 100%;	    			height: 40%;	    			display: flex;					flex-wrap: wrap;					transform: translateZ(1px);	    		}	    	</style>			<div id="'+e+'_key_board">				<div data-key="1" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">1</div>				<div data-key="2" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">2</div>				<div data-key="3" style="border-bottom:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">3</div>				<div data-key="4" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">4</div>				<div data-key="5" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">5</div>				<div data-key="6" style="border-bottom:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">6</div>				<div data-key="7" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">7</div>				<div data-key="8" style="border-bottom:1px solid #f1f1f1;border-right:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">8</div>				<div data-key="9" style="border-bottom:1px solid #f1f1f1;display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">9</div>				<div data-key="0" style="border-right:1px solid #f1f1f1;display: flex; width: 66.25%; align-items: center;justify-content: center;height: 25%;">0</div>				<div data-key="del" style="display: flex; width: 33%; align-items: center;justify-content: center;height: 25%;">←</div>			</div>	    ',d=document.createElement("div");l.appendChild(d),d.innerHTML=c,r=window.G(e+"_key_board"),l.addEventListener(Browser.InputStart,function(f){n(f),s(f)}),l.addEventListener(Browser.InputEnd,function(f){o(f)})},n=function(l){var c=l.target.dataset.key;c&&t&&(l.target.style.background="#f1f1f1",c!="del"?t.value+=c:t.value=t.value.substr(0,t.value.length-1))},o=function(l){l.target.dataset.key&&(l.target.style.background="#fff")},s=function(l){!l.target.dataset.key&&l.target!=t&&(r.style.display="none")},_=function(){var l=window.G(e+"_key_board");l?l.style.display="flex":a()};_()};mod.namespace("Utils.keyBoard",keyBoard);var captchaURL=Browser$1._getWeixinServerHost()+"/server/service_captcha.php",Captcha=function(e){var t=function(){var n=Mugeda.scene._getRoot()._renderManager._displayHash[0].getNode(),o='            <div id="lottery_captcha" style="display:none;position:fixed;width:256px;padding:10px 10px 45px 10px;left:50%;top:35%;transform:translate(-50%,-50%);background:#fff;border-radius:10px;box-shadow:0px 0px 25px 4px #888;">                <p style="margin:0 0 5px 0;font-size:14px;">你是机器人吗?</p>                <p style="margin:0 0 30px 0;font-size:14px;">提交数据前请输入下面的数字:</p>                <div style="overflow:hidden;width: 80%;margin: 0 auto 20px auto;">                    <img id="lottery_captchaImg" style="display:block;float:left;width:75%;height:30px;" src="">                    <img id="lottery_refresh_img" width="30" style="transform:scale(.7);-webkit-transform:scale(.7);display:block;float:right;" src="http://www.iconninja.com/files/794/1010/398/refresh-icon.svg">                </div>                <input readonly="readonly" id="lottery_captcha_value" type="text" style="display: block;width: 80%;margin: 0 auto 30px auto;padding:5px 0;border: 1px solid #a7a7a7;border-radius:3px;">                <div style="overflow: hidden;position: absolute;left: 0;bottom: 0px;width: 100%;border-bottom-left-radius: 10px;border-bottom-right-radius: 10px;">                    <div id="lottery_captcha_submit" style="float:left;width:50%;float:left;padding:10px 0;text-align:center;background:#f36523;color:#fff;">确定</div>                    <div id="lottery_captcha_off" style="float:left;width:50%;float:left;padding:10px 0;text-align:center;background:#8b8b8b;color:#fff;">取消</div>                <div>            </div>        ',s=document.createElement("div");n.appendChild(s),s.innerHTML=o,window.G("lottery_captcha_value").addEventListener("click",function(){new keyBoard("lottery_captcha_value")}),window.G("lottery_captcha_submit").addEventListener("click",function(){var _=window.G("lottery_captcha_value").value,l=captchaURL+"/verfy?captcha="+_;Captcha.xToken&&(l+="&xToken="+Captcha.xToken),window.ajaxHelper({url:l,type:"JSONP",mode:"postMessage",postMessageType:"JSON",success:function(c){c.status===0?(window.G("lottery_captcha").style.display="none",e(_,Captcha.xToken)):(r(),Mugeda.messageBox("验证码错误"),window.G("lottery_captcha_value").value="")}})}),window.G("lottery_captcha_off").addEventListener("click",function(){window.G("lottery_captcha").style.display="none",window.G("lottery_captcha_value").value=""}),window.G("lottery_captchaImg").addEventListener("click",function(){r()}),window.G("lottery_refresh_img").addEventListener("click",function(){r()})},r=function(){var n=captchaURL+"/generate?mode=digit&width=300&height=60&mode=digit&sid="+Math.random();window.ajaxHelper({url:n,type:"jsonp",mode:"postMessage",responseType:"arraybuffer",success:function(o,s){var _=new Uint8Array(o),l=String.fromCharCode.apply(null,_),c=btoa(l);window.G("lottery_captchaImg").src="data:image/jpeg;base64,"+c,s&&s["x-token"]?Captcha.xToken=s["x-token"]:Captcha.xToken=null}}),window.G("lottery_captcha_value").value=""},a=function(){var n=window.G("lottery_captcha");n?(n.style.display="block",r()):(t(),n=window.G("lottery_captcha"),n.style.display="block",r())};a()};Captcha.xToken=null,mod.namespace("Utils.Captcha",Captcha);var dataConverter=function(e,t){};dataConverter._prevContext=null,dataConverter._queryArgs=function(){var e={},t=Browser$1._isServer?"":window.location.search.substring(1);return(t.match(/([^&=]+)=([^&=]*)/g)||[]).forEach(function(r){r=r.split("=");try{e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}catch{console.info("error decodeURIComponent:"+r[1])}}),e}();var addInitCustomParams=function(){var e=Browser$1._globalObject.MugedaTools=Browser$1._globalObject.MugedaTools||{};Object.keys(dataConverter._queryArgs).forEach(function(t){e.addCustomMugedaParameters(encodeURIComponent(t),encodeURIComponent(dataConverter._queryArgs[t]))})};Browser$1._isServer||(window.MugedaTools&&window.MugedaTools.addCustomMugedaParameters?addInitCustomParams():document.addEventListener("cardCommonReady",addInitCustomParams)),dataConverter.parseAnidata=function(e,t){t.resource&&(t.resource=t.resource);var r=t.resource;r.root&&(r.root=r.root),r.dir&&(r.dir=r.dir),r.dir.getFullPath&&(r.dir.getFullPath=r.dir.getFullPath),r.dir.getSamePath&&(r.dir.getSamePath=r.dir.getSamePath),r.symbols&&(r.symbols=r.symbols),r.videoRes&&(r.videoRes=r.videoRes),r.bitmapRes&&(r.bitmapRes=r.bitmapRes);var a=r.root;this.resource=r,a._aniData||(a._aniData=e),a._color=Color.parse(e.color),a._stageWidth=e.width,a._stageHeight=e.height,a._rawWidth=e.width,a._rawHeight=e.height,a._frameRate=e.rate,a._name=e.title,a._getBitmapData=function(l,c){return getBitmapData(r,l,c)};var n=e.metadata||{};a._scaleMode=n.adaptMode||StageScaleMode.ADAPT_NONE,a._mrmcp&&a._mrmcp.render_mode=="inline"&&(a._scaleMode=StageScaleMode.ADAPT_NOSCALE),handleAction(e,a,r);var o=e.symbols;o&&o.forEach(function(l){var c=l.id,d=l.type;if(d==3){var f=new VideoData;f._src=r.dir.getFullPath(l.url),r.videoRes[c]=f}else if(d==2)var u=createAudioData(l,r);u&&(r.symbols[c]=u)}),o&&o.forEach(function(l){var c=l.id,d=l.type;if(d!=3&&d!=2)var f=createMovieClipObject(l,r);f&&(r.symbols[c]=f)});var s=createMovieClipObject(e,r,{splitFont:!0});r.movieClipStack=[];var _=new s(a);return _._sceneSwitchOpts=e.pageInfo||{},r};var aniDataObjectToDisplayObjectClass=function(e,t){dataConverter._prevContext=t;var r=Plugin._getUserDisplayObject(e.type);if(r)return r._createChildClass(e,t);if(e.type===2014)return createSpriteClass(e,t);if(shapeTypes.includes(e.type)||e.type===2074)return createShapeClass(e);if(e.type===2005)return createBitmapClass(e,t);if(e.type===2026)return TextTimer._createChildClass(e,t);if(e.type===2085)return ComplexTimer._createChildClass(e,t);if(e.type===2027)return TextRandom._createChildClass(e,t);if(e.type===2029)return TextGyro._createChildClass(e,t);if(e.type===2021)return getSymbolClass(e,t);if(e.type===2024)return createFormClass(e);if(e.type===2022)return createVideoObject(e,t);if(e.type===2020)return createAudioControlObject(e,t);if(e.type===2030)return createSlidesClass(e);if(e.type===2033)return createIframeClass(e)};dataConverter.aniDataObjectToDisplayObjectClass=aniDataObjectToDisplayObjectClass;var getSymbolClass=function(e,t){var r=e.param,a=r.symbolId;return t.symbols[a]},createSpriteClass=function(e,t){var r=function(a,n){var o=this;r.__super__.constructor.apply(this,arguments),n!=null&&(o._visible=n),a&&a.addChild(o);var s=e.items;o._aniData=e,o._scroll=e.param.scroll||"no",o._offsetMatrix=new Matrix(1,0,0,1,e.param.horOffset*1||0,e.param.verOffset*1||0),s.forEach(function(_){for(var l=t.movieClipStack||[],c="",d=0;d<l.length;d++){var f=l[d].param.name;f&&(c+=f+"/")}var u=c+_.param.name,p=u?dataConverter._queryArgs["m_"+u]:null;if(!p){for(var v="",d=0;d<l.length;d++){var h=l[d].guid;h&&(v+=h+"_")}p=dataConverter._queryArgs["m_"+v+_.guid],!p&&v&&(p=dataConverter._queryArgs["m_"+_.guid])}p&&(_.param.customValue=p);var m=aniDataObjectToDisplayObjectClass(_,t);if(m){var T=new m(o);if(T._aniData=_,_.param.talwayson=="yes"){for(var y=T;y&&!y._renderManager;)y=y.parent;y&&(y._renderManager._globalRenderedObjectList[T._id]=T)}setParamToDisplayObject(_,T,t)}})};return mod.extend(r,Sprite),r},getBitmapData=dataConverter.getBitmapData=function(e,t,r){r=r||"default",r!="original"&&r!=="same"&&(t=e.dir.getFullPath(t)),r==="same"&&(t=e.dir.getSamePath(t));var a=e.bitmapRes;if(t.substr(0,5)!=="data:")var n=a[t];return n||(n=new BitmapData,n._src=t,n._image=BitmapData.blankImage),t.substr(0,5)!=="data:"&&(a[t]=n),n},createBitmapClass=function(e,t){var r=e.param.presetImage,a=e.param.customValue||Macro._getValue(r)||e.param.imageSrc;if(a=="")return null;var n=getBitmapData(t,a),o=function(s,_){var l=this;o.__super__.constructor.apply(l,arguments),_!=null&&(l._visible=_),s&&s.addChild(l),l._setBitmapData(n),l._resourceList=[n],l._aniData=e};return mod.extend(o,Bitmap),o},createFormClass=function(e,t){var r=function(a,n){var o=this;r.__super__.constructor.apply(o,arguments),n!=null&&(o._visible=n),a&&a.addChild(o),o._aniData=e};return mod.extend(r,Form),r},createShapeClass=function(e){var t=function(r,a){var n=this;t.__super__.constructor.apply(n,arguments),a!=null&&(n._visible=a),r&&r.addChild(n),n._aniData=e};return mod.extend(t,Shape),t},createSlidesClass=function(e){var t=function(r,a){var n=this;t.__super__.constructor.apply(n,arguments),a!=null&&(n._visible=a),r&&r.addChild(n),n._aniData=e};return mod.extend(t,Slides),t},createIframeClass=function(e){var t=function(r,a){var n=this;t.__super__.constructor.apply(n,arguments),a!=null&&(n._visible=a),r&&r.addChild(n),n._aniData=e;var o=e.param,s=o.iframeUrl||"about:blank";n._setUrl(s)};return mod.extend(t,IFrame),t},setParamToDisplayObject=function(e,t,r,a,n){a=a||{};var o=e.param;e.binds;var s=a.guid||e.guid;if(s&&(t._guid=s),t._aniData=e,t.parseParamToDisplayObject(o,e,a),o.tO&&(t._textOverflow=o.tO||"hidden",Mugeda.options&&Mugeda.options.loopScrollingText&&["scroll","scrollNoBar","manualScroll","manualScrollNoBar"].includes(t._textOverflow)&&(t._text=t._text+t._text,t._htmlText=t._htmlText.replace(/(.*)(\<span.*)/,"$1<br />$1$2"))),t instanceof MovieClip){var _=o.offsetX,l=o.offsetY;_!=null&&l!=null&&t._offsetMatrix._translate(-_,-l)}var c=a.noPresetAnimation?null:o.preset,d=o.presetAuto===void 0?!0:!!o.presetAuto;if(c&&t.parent.constructor!=Sprite){var f=t._presetAnimation=PresetAnimationGenerator._parseAnimationParam(t,c);if(f&&(f._bindDisplayObject(t),t._haveAnimation=!0,t._presetAnimation._setStatus(d?"play":"pause"),t._presetAnimation._loop=!!o.presetLoop,t._presetAnimation._loopTimes=o.presetLoopTimes?parseInt(o.presetLoopTimes):0,o.presetTrigger&&(o.presetIndex||o.presetIndex==0))){var u=o.presetIndex,p=o.presetTrigger,v=t.parent._scenes[t.parent._scenes.length-1];v.presetAnimationList||(v.presetAnimationList={}),v.presetAnimationClickCount=-1,v.presetAnimationList[u]={displayObj:t,presetIndex:u,presetTrigger:p}}}t._parseData(),r&&r.symbols&&handleAction(o,t,r)},handleAction=function(e,t,r){var a=e.action,n=e.behavior;if(a=="link"){t._link=e.url,t._haveClickAction=!0;var o=t._behaviors=t._behaviors||[];o.push({type:"link",event:"click",param:e})}else if(a==="behavior"&&n)o=t._behaviors=JSON.parse(n),o.some(function(s){var _=s.event;return _=="click"||_.indexOf("slide_")>-1||_.indexOf("touch_")>-1})&&(t._haveClickAction=!0),o.forEach(function(s){var _=s.type,l=s.param,c=l.audio_name,d=l.audio_id,f=l.audio_loop=="1",u=l.audio_url;if(_==="audio"&&(d||u)){for(var p=l.audio_preload=="1"||(t._getStage()._mrmcp||{}).preload_audio=="1",v=t._parent;v&&!(v instanceof MovieClip);)v=v._parent;var h=r.symbols[d];if(h===null&&u&&(h=createAudioData({url:u,sameUrl:p})),h==null)return;var m=new h(v,p);m._name=c,m._loop=f,l.audio_url=m._src;var T=l.audioId=m._id;t._getRoot()._renderManager&&t._getRoot()._renderManager._registerMediaDom(T,m._audio,c),p&&t._addResource(m)}else if(_=="video"){var y=r.videoRes[l.video_id];y&&(l.video_url=y._src)}});else if(a==="form"){t._haveClickAction=!0,o=t._behaviors=t._behaviors||[];try{var e=JSON.parse(e.form)}catch{}e&&o.push({type:"form",event:"click",param:e})}e.drag>0&&(t._haveClickAction=!0,o=t._behaviors=t._behaviors||[],o.push({type:"drag",event:"drag",param:{type:e.drag,reset:e.dragReset,inertia:e.inertia}}))};dataConverter.setParamToDisplayObject=setParamToDisplayObject;var createAudioData=function(e,t){t=t||dataConverter.resource;var r=e.param||{},a=t.root._aniData.audioVol,n=function(o,s){var _=this;n.__super__.constructor.apply(_,arguments);var l=e.sameUrl||s,c=r.customValue||(l?t.dir.getSamePath(e.url):t.dir.getFullPath(e.url));if(o&&o.addChild(_),_._name=null,a)for(var d=0;d<a.length;d++)a[d]==e.guid&&(_._isVolumeBehavior=!0);_._setAudioSrc(c,l)};return mod.extend(n,AudioData),n},createAudioControlObject=function(e,t){var r=e.param,a=r.audioOffImage||r.imageSrc,n=getBitmapData(t,a),o=getBitmapData(t,r.audioOnImage||a),s=!!r.loop,_=!!r.autoplay,l=r.audioUrl,c=function(d,f){var u=this;c.__super__.constructor.apply(u,arguments),f!=null&&(u._visible=f),d&&d.addChild(u);var p=u._getStage()._mrmcp||{},v=r.preload||p.preload_audio=="1";u._setBitmapData(o),u._audioOnBitmap=o,u._audioOffBitmap=n,u._audio=createAudioData({guid:e.guid,url:l,param:r,sameUrl:v}),u._audioObject=new u._audio,u._autoPlay=_,u._aniData=e,u._loop=s,d._getRoot()._renderManager&&d._getRoot()._renderManager._registerMediaDom(e.guid,u._audioObject._audio,r.name),u._resourceList=[n,o],v&&u._resourceList.push(u._audioObject)};return mod.extend(c,AudioControl),c.prototype._getObject=function(){return this._audioObject._audio},c},createVideoObject=function(e,t){var r=e.param,a=r.videoUrl,n=!1;if(/^http(s)*:\/\/[a-zA-Z0-9]+\.[sohu\.com|qq\.com|youku\.com|tudou\.com]/g.test(a)&&a.indexOf(".mp4")==-1&&(n=!0),n){var o=function(l,c){r.rawWidth=r.width,r.rawHeight=r.height,r.lineWidth=0;var d=this;o.__super__.constructor.apply(d,arguments),c!=null&&(d._visible=c),l&&l.addChild(d),d._setUrl(a),d._aniData=e};mod.extend(o,VideoIFrame)}else{var s=r.imageSrc;if(s=="")return null;var _=getBitmapData(t,s),o=function(c,d){var f=this;o.__super__.constructor.apply(f,arguments),d!=null&&(f._visible=d),c&&c.addChild(f),f._setBitmapData(_);var u=new VideoData;u._src=t.dir.getFullPath(r.videoUrl),r.preload&&f._addResource(u),f._aniData=e,f._video=u,f._embedVideo=r.embedVideo*1&&f.isSupportSameLayer(),f._outsideVideo=!f._embedVideo&&!r.embedVideo*1&&(Browser$1.os.version||"").substr(0,4)==="11.0",f._showControls=!(r.hidePlayControls*1),f._showPlayIcon=!(r.hidePlayIcon*1),f._needStopAudio=!(r.continueAudio*1),f._autoPlay=!!(r.videoAutoPlay*1),f._clickCanPause=r.clickStatus!==1,f._loop=r.videoLoop*1};mod.extend(o,Video)}return o},createMovieClipObject=dataConverter.createMovieClipObject=function(e,t,r){var a=function(n,o){var s=this;a.__super__.constructor.apply(s,arguments),o!=null&&(s._visible=o),n&&n.addChild(s),s._aniData=e;var _=e.cw,l=e.ch;_!=null&&l!=null&&(s._offsetMatrix=new Matrix(null,null,null,null,-_/2,-l/2)),e.loop===!1&&(s._loop=!1);var c=[e].concat(e.pages||[]),d=0;c.forEach(function(f,u){(r||{}).splitFont&&FontData._resetIncrease();var p=new Scene;s._scenes.push(p),p._startFrame=d;var v=expressLayers.bind(s)(f.layers,d,t),h=v.totalFrames;if(d+=h,p._numFrames=h,p._name=f.name||"第"+(u+1)+"页",p._guid=f.guid||"",p._aniData=f,p.presetAnimationList){var m=p;if(m.presetAnimationList){for(var T=m.presetAnimationList,y=Object.keys(T).map(B=>B*1).sort((B,j)=>B-j),E={},g=0;g<y.length;g++)E[g]=T[y[g]],E[g].presetIndex=g;m.presetAnimationList=T=E;var b=Object.keys(T).length;T[0],T[b-1];var w=!1;for(var x in T){var C=parseInt(x),M=function(){for(var B=C;B<b;B++)if(T[B+1]&&T[B+1].presetTrigger=="click")return T[B+1]},A=T[C],O=A.displayObj,S=A.presetTrigger,L=A.presetIndex,D=T[C+1],$=M();if(D){var R=D.displayObj,I=D.presetTrigger;D.presetIndex,I=="order"?O._presetAnimation._endAction={guid:R._aniData.guid,action:I}:I=="sync"&&(O._presetAnimation._startAction={guid:R._aniData.guid,action:I})}if(O._presetAnimation._presetData={_presetTrigger:S,event:Browser$1.Click,presetIndex:L},!w&&A.presetTrigger=="click"&&(w=!0,O._presetAnimation._presetData.isFirstClickObj=!0),S=="click"&&$){var P=$.displayObj;$.presetTrigger;var N=$.presetIndex;O._presetAnimation._presetData.nextClickGuid=P._aniData.guid,O._presetAnimation._presetData.nextClickIndex=N}C==0?(S=="auto"?O._presetAnimation._setStatus("play"):(S=="click"||S=="stop"||S=="order"||S=="sync")&&O._presetAnimation._setStatus("pause"),O._presetAnimation._presetIsFirst=!0):S=="auto"?O._presetAnimation._setStatus("play"):(S=="order"||S=="click"||S=="sync"||S=="stop")&&O._presetAnimation._setStatus("pause")}}}}),s._totalFrames=d};return mod.extend(a,MovieClip),a._name=e.name,a._aniData=e,a},parseCurveShapeKeyframes=dataConverter.parseCurveShapeKeyframes=function(e,t,r,a){var n=r.keyframes;n.forEach(function(o,s){var _=o.id+t,l=new Transform;e._bindTrans(l),l._parseParam(e._getFixedParam(o.param),e),a.addKeyframe(_,l,void 0,Ease._parseEase(o)),s===0&&e._setTransform(l)}),a._min=t+r.frameStart,a._max=a._min+r.frameCount-1},parseTextShapeKeyframes=dataConverter.parseTextShapeKeyframes=function(e,t,r,a){var n=r.keyframes;n.forEach(function(o,s){var _=o.id+t,l=new Transform;e._bindTrans(l),o.param.rawWidth=o.param.width,o.param.rawHeight=o.param.height,l._parseParam(e._getFixedParam(o.param),e),a.addKeyframe(_,l,void 0,Ease._parseEase(o))}),a._min=t+r.frameStart,a._max=a._min+r.frameCount-1},parseKeyframes=dataConverter.parseKeyframes=function(e,t,r,a){var n=0,o=r.pathMode>0&&r.path&&r.path.length,s=r.keyframes,_=r.frameStart+t,l=r.frameCount,c=_+l-1;s.forEach(function(d,f){var u=d.id+t,p=d.param;if(s[f+1]){var v=s[f+1].id+t,h=s[f+1].param,m=Ease._parseEase(d),T=m._type;n=0,c===v&&T!=="Step.EaseIn"&&T!=="Step.EaseOut"&&(a._setInterpolateFrame(u),v+=1,n=1);var y=new Transform,E=new Transform;y._parseParam(p),E._parseParam(h);for(var g=u;g<v;g++){var b=(g-u)/(v-u);if(R=new Transform,Transform._tween(R,y,E,m,b),e._transform._paramTransform&&(R._paramTransform=e._transform._paramTransform._clone()),o){var w=r.path,x=f,C=f+1,M=w[x],A=w[C],O=r.pathLeft,S=r.pathTop,L=A?bezierGetPoint(M,A,m._left(b),m._top(b)):M,D=O+L.x-R._matrix._rotateCenterX,$=S+L.y-R._matrix._rotateCenterY;R._matrix._rawLeft=D,R._matrix._rawTop=$}R._matrix._calMatrixFormRaw(),T==="Step.EaseIn"?u===g?a.addKeyframe(g,R,AniDataUtils.getTransformObjFromParam(p,e)):a.addKeyframe(g,R):(T==="Step.EaseOut"&&u===g&&(a._refTrans[v]=AniDataUtils.getTransformObjFromParam(p,e)),a.addKeyframe(g,R))}}else{T=d.tween||"Linear.EaseNone";var R=AniDataUtils.getTransformObjFromParam(p,e);for(e._transform._paramTransform&&(R._paramTransform=e._transform._paramTransform._clone()),g=u+n;g<=c+n;g++)T==="Step.EaseIn"&&u===g?a.addKeyframe(g,R,AniDataUtils.getTransformObjFromParam(p,e)):a.addKeyframe(g,R)}}),n!==0&&(a._max-=n)},expressLayers=function(e,t,r){var a=this,n=e.length,o,s,_,l=[],c=t,d=!1;for(o=n-1;o>=0;o--)if(s=e[o],s.type!="folder"){_=s.maskMode;var f=s.units;f.forEach(function(u){var p=u.frameStart+t,v=u.frameCount,h=p+v-1;c=Math.max(h+1,c);var m=u.objects,T=u.keyframes,y=u.pg||!1,E=a._frames,g=a._objectFrames,b=u.audioId,w=u.audio;if(b||w){var x=a,C=r.symbols[b];if(C===null&&w&&(C=createAudioData({url:w})),C!=null){var M=new C(x);for(M._loop=!0,L=p;L<=h;L++){var A=E[L]=E[L]||new displayListInfo;A.addObjectAndTransition(M)}}}var O="";if(T&&T.length&&T.forEach(function(P){if(O=O||P.param.url,P.name){var N=P.name,B=N.indexOf("_")+1;N=N.substr(B);var j=new FrameLabel;j._name=N,j._frame=P.id,a._scenes[a._scenes.length-1]._labels.push(j)}}),m.length!==0){for(var S=[],L=p;L<=h;L++)E[L]=E[L]||new displayListInfo;m.forEach(function(P){for(var N=r.movieClipStack||[],B="",j=0;j<N.length;j++){var V=N[j].param.name;V&&(B+=V+"/")}var Q=B+P.param.name,F=Q?dataConverter._queryArgs["m_"+Q]:null;if(!F){for(var W="",j=0;j<N.length;j++){var G=N[j].guid;G&&(W+=G+"_")}F=dataConverter._queryArgs["m_"+W+P.guid],!F&&W&&(F=dataConverter._queryArgs["m_"+P.guid])}F&&(P.param.customValue=F);var Z=aniDataObjectToDisplayObjectClass(P,r);if(Z){P.type==2021&&r.movieClipStack.push(P);try{var X=window.parent.mugedaEntryPage||0}catch{X=0}var U=!!a._aniData.activePageId,z=a._aniData.guid,te=p===0&&(!U||!X||X==z),Y=new Z(a,te);if(Y._visible=te,P.type==2021&&r.movieClipStack.pop(),Y._aniData=P,P.param.action=="link"&&!P.param.url&&O&&(P.param.url=O),P.param.talwayson=="yes"){for(var k=Y;k&&!k._renderManager;)k=k.parent;k&&(k._renderManager._globalRenderedObjectList[Y._id]=Y)}if(setParamToDisplayObject(P,Y,r,null),S.push(Y),_==MaskType.MaskSource?(l.forEach(function(q){q._maskByList.push(Y)}),Y._maskToList=l):_==MaskType.MaskAim&&(Y._maskByList=[]),Y.parent===a)for(var J=p;J<=h;J++){var ae=E[J];ae.addObjectAndTransition(Y)}if(y){var H=u.id;Y._unitId=H,Y._hasProgress=!!y,a._progressAnimationGroup[H]||(a._progressAnimationGroup[H]=[]),a._progressAnimationGroup[H].push(Y),Y._initProcessAnimation()}}}),_==MaskType.MaskAim?(d&&(l=[],d=!1),l=l.concat(S)):_==MaskType.MaskSource&&(d=!0);var D=S[0];if(D&&T&&T.length>=2){D._haveAnimation=!0;var $=D._aniData.curve.points.length>0&&T[0].param.curve,R=D._aniData.type===2010;if($){D._hasShapeAnimation=!0;var I=g[D._id]=new KeyframeInfo;parseCurveShapeKeyframes(D,t,u,I)}else R?(D._hasShapeAnimation=!0,I=g[D._id]=new KeyframeInfo,parseTextShapeKeyframes(D,t,u,I)):(E=a._frames,g=a._objectFrames,I=g[D._id]=new KeyframeInfo,parseKeyframes(D,t,u,I))}(T&&T.length===1||D&&!D._haveAnimation)&&S.forEach(function(P){var N=P._transform;[p,h].forEach(function(B){g[P._id]=g[P._id]||new KeyframeInfo,g[P._id].addKeyframe(B,N)})})}})}return c==t?{totalFrames:1}:{totalFrames:c-t}},bezierGetPoint=function(e,t,r,a){a=a??r;var n=1-r,o=1-a,s=e.nodeX,_=e.nodeY,l=e.forwardX,c=e.forwardY,d=t.backwardX,f=t.backwardY,u=t.nodeX,p=t.nodeY,v=bezierInterpolate(r,n,s,l,d,u),h=bezierInterpolate(a,o,_,c,f,p);return{x:v,y:h}},bezierInterpolate=function(e,t,r,a,n,o){var s=Math.pow(t,3)*r+3*Math.pow(t,2)*e*a+3*t*Math.pow(e,2)*n+Math.pow(e,3)*o;return s};mod.exportName(dataConverter,["parseAnidata",dataConverter.parseAnidata,"aniDataObjectToDisplayObjectClass",dataConverter.aniDataObjectToDisplayObjectClass,"setParamToDisplayObject",dataConverter.setParamToDisplayObject]),mod.namespace("Utils.DataConverter",dataConverter);var MugedaAPIEvent=function(){var e=this;e.event={}},proto$4=MugedaAPIEvent.prototype,systemMouseEvent=1,myMouseEvent=2,domMouseEvent={mousedown:systemMouseEvent,mouseup:systemMouseEvent,click:systemMouseEvent,dblclick:systemMouseEvent,mouseover:systemMouseEvent,mouseout:systemMouseEvent,mousemove:systemMouseEvent,touchstart:systemMouseEvent,touchmove:systemMouseEvent,touchend:systemMouseEvent,pointerdown:systemMouseEvent,pointermove:systemMouseEvent,pointerup:systemMouseEvent,inputstart:myMouseEvent,inputmove:myMouseEvent,inputend:myMouseEvent};proto$4._addEventListener=function(e,t,r){if(e=e.toLowerCase(),e==="inputstart"?e=Browser$1.InputStart:e==="inputmove"?e=Browser$1.InputMove:e==="inputend"&&(e=Browser$1.InputEnd),domMouseEvent[e]==systemMouseEvent&&(this._displayObject||this._movieClip)){var a=this,n={fun:t,dir:function(o){var s=o._getSystemEvent();s.inputX==null&&(Object.defineProperty(s,"inputX",{get:function(){return o._getInputX()},configurable:!0}),Object.defineProperty(s,"inputY",{get:function(){return o._getInputY()},configurable:!0}),s.stopPropagation=o.stopPropagation.bind(o),s.stopImmediatePropagation=o.stopImmediatePropagation.bind(o),s.preventDefault=o._preventDefault.bind(o)),t.call(a,s)}};this.event[e]?this.event[e].push(n):this.event[e]=[n],(this._displayObject||this._movieClip)._addEventListener(e,n.dir,r||!1)}else this.event[e]?this.event[e].push(t):this.event[e]=[t];return this},proto$4._removeEventListener=function(e,t,r){if(e=e.toLowerCase(),e=="inputstart"?e=Browser$1.InputStart:e=="inputmove"?e=Browser$1.InputMove:e=="inputend"&&(e=Browser$1.InputEnd),domMouseEvent[e]==systemMouseEvent&&this.dom){if(this.event[e]){for(var a=this.event[e].length-1;a>=0;a--)this.event[e][a].fun&&this.event[e][a].fun==t&&(this.dom.removeEventListener(e,this.event[e][a].dir,r||!1),this.event[e].splice(a,1));this.event[e].length==0&&delete this.event[e]}}else if(this.event[e]){for(a=this.event[e].length-1;a>=0;a--)this.event[e][a]==t&&this.event[e].splice(a,1);this.event[e].length==0&&delete this.event[e]}return this},proto$4._callEvent=function(e,t,r,a,n){var o=[];if(this.event[e]){for(var s=[],_=0;_<this.event[e].length;_++)s[_]=this.event[e][_];for(_=0;_<s.length;_++)try{o.push(s[_].call(this,t,r,a,n))}catch(l){console.error("😨Event callback failed: ",l)}}return o},proto$4._setCapture=function(){},proto$4._releaseCapture=function(){},mod.exportName(proto$4,["addEventListener",proto$4._addEventListener,"removeEventListener",proto$4._removeEventListener,"setCapture",proto$4._setCapture,"releaseCapture",proto$4._releaseCapture]);var MugedaAPIAObject=function(e,t){var r=this;if(r._id=null,r._rotateCenterX=null,r._rotateCenterY=null,r._slaveActivated=!1,r._scene=e.scene,r._currentScene=e.currentScene,MugedaAPIAObject.__super__.constructor.apply(r,arguments),e.guid){r._data=e;var a=t||dataConverter._prevContext,n=r._data,o=dataConverter.aniDataObjectToDisplayObjectClass(n,a),s=new o;s._haveAnimation=!0,r._id=s._id,r._displayObject=s,dataConverter.setParamToDisplayObject(n,s,a)}else if(r._mugeda=e.mugeda,r._id=e.id,r._displayObject=e.displayObject,e.currentScene&&e.mugeda&&e.displayObject){var n=r._displayObject._aniData||{},_=n.binds||{},l=e.mugeda;e.currentScene;var c=l.renderManger;Object.keys(_).length&&(c._toBeControlledObjectPendingHash[e.displayObject._id]=e.displayObject)}r._displayObject._eventHandler=r,mod.definePropertyReadOnly(r,["id",proto$3._getId,"data",proto$3._getData,"realDom",proto$3._getRealDom,"name",proto$3._getName,"link",proto$3._getLink,"scene",proto$3._getScene,"currentScene",proto$3._getCurrentScene,"mugeda",proto$3._getMugeda,"getRealVisible",proto$3._getRealVisible,"thisAni",proto$3._getMugeda,"parent",proto$3._getParent,"audio",proto$3._getAudio,"video",proto$3._getVideo,"displayObject",proto$3._getDisplayObject]),mod.definePropertyGetSet(r,["dom",proto$3._getDom,proto$3._setDom,"width",proto$3._getWidth,proto$3._setWidth,"height",proto$3._getHeight,proto$3._setHeight,"rotate",proto$3._getRotate,proto$3._setRotate,"visible",proto$3._getVisible,proto$3._setVisible,"alpha",proto$3._getAlpha,proto$3._setAlpha,"pers",proto$3._getPerspective,proto$3._setPerspective,"x",proto$3._getX,proto$3._setX,"left",proto$3._getLeft,proto$3._setLeft,"top",proto$3._getTop,proto$3._setTop,"rotateCenterX",proto$3._getRotateCenterX,proto$3._setRotateCenterX,"scaleX",proto$3._getScaleX,proto$3._setScaleX,"rotateX",proto$3._getRotateX,proto$3._setRotateX,"y",proto$3._getY,proto$3._setY,"right",proto$3._getRight,proto$3._setRight,"bottom",proto$3._getBottom,proto$3._setBottom,"rotateCenterY",proto$3._getRotateCenterY,proto$3._setRotateCenterY,"scaleY",proto$3._getScaleY,proto$3._setScaleY,"rotateY",proto$3._getRotateY,proto$3._setRotateY,"url",proto$3._getUrl,proto$3._setUrl,"scrollSpeed",proto$3._getScrollSpeed,proto$3._setScrollSpeed,"text",r._getText,r._setText,"background",r._getBackground,r._setBackground,"border",r._getBorderColor,r._setBorderColor]),r._displayObject._bindUserAPI(r),mod.definePropertyGetSet(r,["src",proto$3._getSrc,proto$3._setSrc]),r._fakeImage=null};mod.extend(MugedaAPIAObject,MugedaAPIEvent);var proto$3=MugedaAPIAObject.prototype;proto$3._getMugeda=function(){return this._mugeda},proto$3._getDisplayObject=function(){return this._displayObject},proto$3._getParent=function(){var e=this._displayObject,t=e._getStage(),r=t._renderManager,a=r._mugeda,n=e.parent||{},o=a._displayObjectHash[n._id];return o||(o=a.scene),o},proto$3._getCurrentScene=function(){return this._currentScene||null},proto$3._getScene=function(){return this._scene||null},proto$3._getLink=function(){return this._displayObject._link},proto$3._getAlpha=function(){return this._displayObject._getAlpha()},proto$3._setAlpha=function(e){this._displayObject._setAlpha(e)},proto$3._getRotate=function(){var e=this._displayObject._transform._matrix._rawSita;return e},proto$3._getRotateX=function(){var e=this._displayObject._transform._matrix._rawRotate3dX;return e},proto$3._getRotateY=function(){var e=this._displayObject._transform._matrix._rawRotate3dY;return e},proto$3._getPerspective=function(){var e=this._displayObject._transform._matrix._pers;return e},proto$3._setRotate=function(e){this._recalculateTransform({rawSita:e})},proto$3._setPerspective=function(e){this._recalculateTransform({pers:e})},proto$3._setRotateX=function(e){this._recalculateTransform({rawRotate3dX:e})},proto$3._setRotateY=function(e){this._recalculateTransform({rawRotate3dY:e})},proto$3._recalculateTransform=function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&(e[t]=parseFloat(e[t]));var r=this,a=r._displayObject,n=a._transform._clone(),o=n._matrix;o._reset();var s=a._rawWidth,_=a._rawHeight;e.width!==void 0&&(o._rawScaleX=e.width/s),e.height!==void 0&&(o._rawScaleY=e.height/_),e.rawSita!==void 0&&(o._rawSita=e.rawSita),e.rawLeft!==void 0&&(o._rawLeft=e.rawLeft),e.rawTop!==void 0&&(o._rawTop=e.rawTop),e.rotateCenterX!==void 0&&(o._rotateCenterX=e.rotateCenterX),e.rotateCenterY!==void 0&&(o._rotateCenterY=e.rotateCenterY),e.rawRotate3dX!==void 0&&(o._rawRotate3dX=e.rawRotate3dX),e.rawRotate3dY!==void 0&&(o._rawRotate3dY=e.rawRotate3dY),e.pers!==void 0&&(o._pers=e.pers),o._calMatrixFormRaw(),a._setTransform(n)},proto$3._getScaleX=function(){return this._displayObject._getScaleX()},proto$3._setScaleX=function(e){this._displayObject._width=this._displayObject._rawWidth*e,this._recalculateTransform({width:this._displayObject._width})},proto$3._getScaleY=function(){return this._displayObject._getScaleY()},proto$3._setScaleY=function(e){this._displayObject._height=this._displayObject._rawHeight*e,this._recalculateTransform({height:this._displayObject._height})},proto$3._getRotateCenterX=function(){return this._displayObject._transform._matrix._rotateCenterX},proto$3._setRotateCenterX=function(e){this._recalculateTransform({rotateCenterX:e})},proto$3._getRotateCenterY=function(){return this._displayObject._transform._matrix._rotateCenterY},proto$3._setRotateCenterY=function(e){this._recalculateTransform({rotateCenterY:e})},proto$3._getX=function(){var e=this;return e._getLeft()+e._getRotateCenterX()*e._getScaleX()},proto$3._getY=function(){var e=this;return e._getTop()+e._getRotateCenterY()*e._getScaleY()},proto$3._setX=function(e){var t=this,r=e-t._getRotateCenterX()*t._getScaleX();t._setLeft(r)},proto$3._setY=function(e){var t=this,r=e-t._getRotateCenterY()*t._getScaleY();t._setTop(r)},proto$3._getRawWidth=function(){return this._displayObject._rawWidth},proto$3._getRawHeight=function(){return this._displayObject._rawHeight},proto$3._getId=function(){return this._id},proto$3._setDom=function(e){var t=this._displayObject,r=t._getRenderObject();r._setNode(e)},proto$3._getDom=function(){var e=this,t=this._displayObject;{var r=t._getRenderObject();if(r)return r.getNode();if(renderManager._insertDisplayObject.call(e._mugeda._renderManager,t),r=t._getRenderObject(),r)return r.getNode()}},proto$3._getRealVisible=function(){return this._displayObject._getRealVisible()},proto$3._getData=function(){return this._displayObject._aniData},proto$3._getWidth=function(){return this._displayObject._getWidth()},proto$3._setWidth=function(e){this._displayObject._setWidth(e),this._recalculateTransform({})},proto$3._getHeight=function(){return this._displayObject._getHeight()},proto$3._setHeight=function(e){this._displayObject._setHeight(e),this._recalculateTransform({})},proto$3._getLeft=function(){return this._displayObject._transform._matrix._rawLeft},proto$3._setLeft=function(e){this._recalculateTransform({rawLeft:e})},proto$3._getRight=function(){var e=this;return e._getLeft()+e._getWidth()},proto$3._setRight=function(e){var t=this,r=e-t._getWidth();t._setLeft(r)},proto$3._getTop=function(){return this._displayObject._transform._matrix._rawTop},proto$3._setTop=function(e){this._recalculateTransform({rawTop:e})},proto$3._getBottom=function(){var e=this;return e._getTop()+e._getHeight()},proto$3._setBottom=function(e){var t=this,r=e-t._getHeight();t._setTop(r)},proto$3._getSrc=function(){var e=this,t=e._displayObject;if(t._audioObject!==void 0)return this._getAudio();if(t._getBitmapData){var r=t._getBitmapData&&t._getBitmapData();if(r)return r._src}else return this._getText()},proto$3._setSrc=function(e){var t=this,r=t._displayObject;if(e!==void 0&&e!=t._getSrc()){if(r._audioObject){r._audioObject._setAudioSrc(e);return}else if(!r._setBitmapData){this._setText(e);return}if(!e)return r._setBitmapData();var a=function(){r._bitmapData._src===e&&r._setBitmapData(n)},n=t._mugeda._stage._getBitmapData(e),o=n._loader._contentLoaderInfo;o._state===LoaderInfo.STATE.LOADED?r._setBitmapData(n):o._state===LoaderInfo.STATE.LOAD?(r._setBitmapData(n),o._addEventListenerOnce("complete",a),o._addEventListenerOnce("ioError",a)):(n._load(),r._setBitmapData(n),o._addEventListenerOnce("complete",a),o._addEventListenerOnce("ioError",a))}},proto$3._getName=function(){return this._displayObject._getName()},proto$3._setVisible=function(e){this._displayObject._setVisible(e,1)},proto$3._getVisible=function(){return this._displayObject._getVisible()},proto$3._getUrl=function(){return this._displayObject._getUrl()},proto$3._setUrl=function(e){this._displayObject._setUrl(e)},proto$3._getScrollSpeed=function(){return this._displayObject._getScrollSpeed?this._displayObject._getScrollSpeed():null},proto$3._setScrollSpeed=function(e){this._displayObject._setScrollSpeed&&this._displayObject._setScrollSpeed(e)},proto$3._getRealDom=function(){this._displayObject._id;var e=this._displayObject._getRenderObject();return e._node},proto$3._clone=function(){var e=this,t=e._displayObject,r=t._aniData,a=t.constructor,n=new a;n._aniData=JSON.parse(JSON.stringify(r)),n._haveAnimation=!0;var o=Plugin._getUserDisplayObject(t._aniData&&t._aniData.type);if(o&&o._createAObject)var s=o._createAObject(),_=new s({displayObject:n,id:n._guid,mugeda:e._mugeda});else if(a._createAObject)var s=a._createAObject(),_=new s({displayObject:n,id:n._guid,mugeda:e._mugeda});else var _=new MugedaAPIAObject({displayObject:n,id:n._guid,mugeda:e._mugeda});var l=e._mugeda._context;return dataConverter.setParamToDisplayObject(r,n,l,{guid:Mugeda.guidGen()}),_},proto$3._getAudio=function(){var e=this,t=e._displayObject,r=t._getRenderObject();if(r._audioObjectInstance)return r._audioObjectInstance._audio},proto$3._getVideo=function(){var e=this,t=e._displayObject,r=t._getRenderObject();return r._currentVideoDom};var attributeList=["dom","width","height","rotate","visible","text","alpha","x","left","top","rotateCenterX","scaleX","y","right","bottom","rotateCenterY","scaleY"];proto$3._setAttribute=function(e,t){var r=this;if(attributeList[e]){var a="_set"+e.substr(0,1).toUpperCase()+e.substr(1);return r[a](t)}else return r._displayObject._setAttribute(e,t)},proto$3._getAttribute=function(e){var t=this;if(attributeList[e]){var r="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return t[r]()}else return t._displayObject._getAttribute(e)},proto$3._getObject=function(e){var t=this;return t._displayObject._getObject(e)},proto$3._setText=function(e){this._displayObject._setText&&(this._displayObject._setText(e),this._displayObject._initialText=e)},proto$3._getText=function(e){return this._displayObject._getText?this._displayObject._getText(e):""},proto$3._getBackground=function(){var e=this._displayObject._getFillStyle();return e._getCssText()},proto$3._setBackground=function(e){var t=Color.parse(e);this._displayObject._setFillStyle(t)},proto$3._getBorderColor=function(){var e=this._displayObject._getLineStyle();return e._getCssText()},proto$3._setBorderColor=function(e){var t=Color.parse(e);this._displayObject._setLineStyle(t)},mod.exportName(proto$3,["clone",proto$3._clone,"setAttribute",proto$3._setAttribute,"getAttribute",proto$3._getAttribute,"getObject",proto$3._getObject]);var MugedaCss3=Browser$1._globalObject.MugedaCss3=Browser$1._globalObject.MugedaCss3||{};MugedaCss3.aObject=MugedaAPIAObject,mod.namespace("Utils.mugedaAPIAObject",MugedaAPIAObject);var MugedaAPIGroup=function(e){var t=this;MugedaAPIGroup.__super__.constructor.apply(t,arguments)};mod.extend(MugedaAPIGroup,MugedaAPIAObject),MugedaAPIGroup.prototype;var MugedaAPIScene=function(e){var t=this;MugedaAPIScene.__super__.constructor.apply(t,arguments),t._mugeda=e.mugeda;var r=t._movieClip=e.movieClip;t._objectHash={},t._id=e.id,r&&(t._symbolId=(r._aniData.param||{}).symbolId||null),t._parentAObject=e.parentAObject,t.segment={},t.currentSegment=null,t.enterframeCallback=null,t.beforeEnterframeCallback=null,t.frameout=[],mod.definePropertyReadOnly(t,["objectHash",proto$2._getObjectHash,"pages",proto$2._getPages,"data",proto$2._getData,"pageNum",proto$2._getPageNum,"currentId",proto$2._getCurrentId,"currentSceneId",proto$2._getCurrentSceneId,"currentDecimalId",proto$2._getCurrentDecId,"thisAni",proto$2._getThisAni,"currentPageIndex",proto$2._getCurrentPageIndex,"pageDom",proto$2._getPageDom,"dom",proto$2._getDom,"isSymbol",proto$2._isSymbol,"parentScene",proto$2._getParentScene,"id",proto$2._getId,"playing",proto$2._getPlaying,"object",proto$2._getParentAObject]);var a=t._mugeda.renderManger,n=t._mugeda._aniData;n.binds&&Object.keys(n.binds).length&&(a._toBeControlledObjectPendingHash[r._id]=r),n.pages&&n.pages.length&&n.pages.forEach(function(s){s.binds&&Object.keys(s.binds).length&&(a._toBeControlledObjectPendingHash[s.guid]||(a._toBeControlledObjectPendingHash[s.guid]={movieClip:r,binds:s.binds}))});var o="enterframe";r._addEventListener(o,function(s){t._callEvent(o,t)})};mod.extend(MugedaAPIScene,MugedaAPIEvent);var proto$2=MugedaAPIScene.prototype;proto$2._getParentAObject=function(){return this._parentAObject},proto$2._getPlaying=function(){var e=this._movieClip;return!e._paused},proto$2._getId=function(){return this._id},proto$2._getParentScene=function(){var e=this._movieClip._getRenderObject(),t=e._parentMovieClipRenderObject;if(t==null)return null;var r=t._displayObject,a=r._id,n=this._mugeda._displayObjectHash[a];return n},proto$2._isSymbol=function(){return this._movieClip.parent.parent!=null},proto$2._getDom=function(){return this._movieClip._getRenderObject().getNode()},proto$2._getPageDom=function(){return this._getDom().querySelectorAll("[data-type=scene]")},proto$2._getData=function(){return this._movieClip._aniData},proto$2._getThisAni=function(){return this._mugeda},proto$2._getPageNum=function(){return this._movieClip._scenes.length},proto$2._getCurrentId=function(){return this._movieClip._currentFrame},proto$2._getCurrentSceneId=function(){return this._movieClip._currentSceneFrame},proto$2._getCurrentDecId=function(){return this._movieClip._currentFrameDecimal},proto$2._getCurrentPageIndex=function(){return this._movieClip._getSceneIndexByFrameNum(this._movieClip._currentFrame)},proto$2._getPages=function(){var e=this;return e._movieClip._scenes},proto$2._getAllDisplayObjectFromDisplayObjectContainer=function(e,t){var r=this;return t||(t=[]),e.children&&(t=t.concat(e.children),e.children.forEach(function(a){t=r._getAllDisplayObjectFromDisplayObjectContainer(a,t)})),t},proto$2.getObjectByName=function(e,t){var r=this,a=r._movieClip;if(e==null)return null;if(e=e.toString(),t=="prefix"){var n=r._getAllDisplayObjectFromDisplayObjectContainer(a),o=[];if(n)for(var s=0;s<n.length;s++){var _=n[s]._name;if(_&&_.substring(0,e.length)==e){var l=getObjectByName(a,_);o.push(l)}}return o}else if(t=="prefix2"){var n=r._getAllDisplayObjectFromDisplayObjectContainer(a),o=[];if(n){for(var s=0;s<n.length;s++){var _=n[s]._name;if(_&&_.substring(0,e.length)==e&&/\d+/.test(_.substring(e.length))){var l=getObjectByName(a,_);o.push(l)}}o.sort(function(m,T){return m._getName().substring(e.length)*1-T._getName().substring(e.length)*1})}return o}else if(t=="name_name"){for(var c=e.split("_"),d=r,s=0;s<c.length;s++){if(d==null)return null;var l=d.getObjectByName(c[s],s===c.length-1?"displayObject":null);if(l==null)return null;l._getScene?d=l._getScene():d=null}return l}else{var f=getObjectByName(a,e);if(f==null)return null;if(f instanceof DisplayObject){if(t=t||"",t.toLowerCase()=="displayobject")return f;var u=f._id,p=r._mugeda._displayObjectHash[u];return p||f}else return f}},proto$2.getObjectById=function(e,t){var r=this,a=r.getDisplayObjectById(e,t);if(a)var n=r._mugeda._displayObjectHash[a._id];return n},proto$2._getDisplayObjectById=function(e,t){var r=this,a=r._movieClip._getDisplayObjectById(e,t);return a};var getObjectByName=function(e,t){var r=e.getChildByName(t);if(r)return r instanceof AudioData?r._audio:r;var a,n=e.children.length;for(a=0;a<n;a++){var o=e.children[a];if(o instanceof Sprite&&!(o instanceof MovieClip)){var s=getObjectByName(o,t);if(s)return s}}};proto$2._getObjectHash=function(){return this._objectHash},proto$2._setSegment=function(e,t,r,a){var n=this;return n.segment[e]={from:Math.min(t,n._movieClip._totalFrames-1),to:Math.min(r,n._movieClip._totalFrames-1),isLoop:a},this},proto$2._playSegment=function(e){var t=this;return(t.currentSegment=t.segment[e])&&t._movieClip.gotoAndPlay(t.currentSegment.from,null,30),setupBeforeEnterframe.call(t),this};var setupEnterframe=function(){var e=this;e.enterframeCallback==null&&(e.enterframeCallback=function(){for(var t=e;t.frameout.length&&t.frameout[0].time<=0;){var r=t.frameout[0].fun;t.frameout.splice(0,1),r.call(t)}t.frameout.length&&(t.frameout[0].time-=t._mugeda._getDeltaFrame())},e._addEventListener("enterframe",e.enterframeCallback))},setupBeforeEnterframe=function(){var e=this;e.beforeEnterframeCallback==null&&(e.beforeEnterframeCallback=function(){e.currentSegment&&e._movieClip._aimFrameDec<e.currentSegment.from?e.currentSegment.from===e.currentSegment.to?e._movieClip.gotoAndStop(e.currentSegment.from,null,25):e._movieClip.gotoAndPlay(e.currentSegment.from,null,25):e.currentSegment&&e._movieClip._aimFrameDec>=e.currentSegment.to&&(e.currentSegment.isLoop?e._movieClip.gotoAndPlay(e.currentSegment.from,null,25):e._movieClip.gotoAndStop(e.currentSegment.to,null,25))},e._movieClip._addEventListener("beforeenterframe",e.beforeEnterframeCallback))},_getObjectHash=function(e,t,r,a){var n,o=e.children.length,s=this;for(a&&(o=1),n=0;n<o;n++){if(a){var _=a;l=a._displayObject}else var l=e.children[n];l._guid||(l._guid=Mugeda.guidGen());var c=null;if(l instanceof Sprite&&!(l instanceof MovieClip)){var d=_||new MugedaAPIGroup({displayObject:l,id:l._guid,mugeda:s._mugeda,currentScene:s});_getObjectHash.bind(s)(l,t,r)}else if(l instanceof MovieClip){c=new MugedaAPIScene({movieClip:l,id:l._guid,mugeda:s._mugeda});var d=_||new MugedaAPIAObject({displayObject:l,id:l._guid,mugeda:s._mugeda,scene:c,currentScene:s});c._parentAObject=d,c._buildAPINet()}else{var f=Plugin._getUserDisplayObject(l._aniData&&l._aniData.type);if(f&&f._createAObject)var u=f._createAObject(),d=_||new u({displayObject:l,id:l._guid,mugeda:s._mugeda,currentScene:s});else if(l.constructor._createAObject)var u=l.constructor._createAObject(),d=new u({displayObject:l,id:l._guid,mugeda:s._mugeda,currentScene:s});else var d=_||new MugedaAPIAObject({displayObject:l,id:l._guid,mugeda:s._mugeda,currentScene:s})}d._scene=c,d._currentScene=s,t[l._guid]=d,r[l._id]=d}return t};proto$2._buildAPINet=function(e){var t=this,r=t._objectHash,a=t._mugeda._displayObjectHash,n=t._movieClip;_getObjectHash.bind(t)(n,r,a,e)},proto$2._appendChild=function(e,t,r){var a=this;a._mugeda._resource,e._mugeda=a._mugeda;var n=e._displayObject,o=a._movieClip,s=o._objectFrames;if(t){var _=t._displayObject,l=o.getChildIndex(_);if(l==-1)throw"behind object is not belong to scene";o.addChildAt(n,l);var c=o._getObjectSceneIndex(_)}else if(r!=null){r==-1&&(r=1/0);for(var d=o.children,f=d.length,u=0;u<f;u++){var p=d[u],v=o._getObjectSceneIndex(p);if(v>r)var h=u}h==null?o.addChild(n):o.addChildAt(n,h),c=r}else o.addChild(n),c=0;var m=new KeyframeInfo;if(c!=1/0){var T=o._scenes[c];m._min=T._startFrame,m._max=T._startFrame+T._numFrames-1}else m._min=0,m._max=o._totalFrames-1;s[n._id]=m,a._mugeda._displayObjectHash[n._id]=n,n._guid||(n._guid=Mugeda.guidGen()),a._objectHash[n._guid]=e;var y=function(E,g){g(E);var b=E.children;if(b!=null)for(var w=b.length,x=0;x<w;x++){var E=b[x];y(E,g)}};a._buildAPINet(e),y(n,function(E){if(E instanceof Bitmap){var g=a._mugeda._displayObjectHash[E._id];g._setSrc(E._bitmapData._src)}})},proto$2._removeChild=function(e){var t=this,r=e._displayObject;r.parent.removeChild(r),delete t._objectHash[r._guid],delete t._mugeda._displayObjectHash[r._id]},proto$2._play=function(){var e=this;return e.currentSegment=null,e._movieClip.play(30)},proto$2._pause=function(){var e=this;return e.currentSegment=null,e._movieClip.stop(30)};var getPageScene=function(e,t){return e._scenes[t]};proto$2._gotoAndPlay=function(e,t){var r=this;return r.currentSegment=null,r._movieClip.gotoAndPlay(e,getPageScene(r._movieClip,t),30)},proto$2._gotoAndPause=function(e,t){var r=this;return r.currentSegment=null,r._movieClip.gotoAndStop(e,getPageScene(r._movieClip,t),30)},proto$2._gotoPage=function(e,t){return this._movieClip.gotoPage(e,t)},proto$2._nextPage=function(){var e=this;return e._movieClip.gotoPage(e._getCurrentPageIndex()+1)},proto$2._prevPage=function(){var e=this;return e._movieClip.gotoPage(e._getCurrentPageIndex()-1)},proto$2._setFrameout=function(e,t){for(var r=this.frameout.length,a=0,n=0;n<this.frameout.length;n++){var o=this.frameout[n];if(a+o.time>e){r=n;break}a+=o.time}return this.frameout.splice(r,0,{time:e-a,fun:t}),setupEnterframe.call(this),this},proto$2._getFrameIdByName=function(e){return this._movieClip._getFrame(e,null)},mod.exportName(proto$2,["getObjectByName",proto$2.getObjectByName,"getObjectById",proto$2.getObjectById,"getDisplayObjectById",proto$2._getDisplayObjectById,"appendChild",proto$2._appendChild,"removeChild",proto$2._removeChild,"play",proto$2._play,"pause",proto$2._pause,"gotoAndPlay",proto$2._gotoAndPlay,"gotoAndPause",proto$2._gotoAndPause,"gotoPage",proto$2._gotoPage,"nextPage",proto$2._nextPage,"prevPage",proto$2._prevPage,"setSegment",proto$2._setSegment,"playSegment",proto$2._playSegment,"setFrameout",proto$2._setFrameout,"getFrameidByName",proto$2._getFrameIdByName,"getFrameIdByName",proto$2._getFrameIdByName]);var MugedaAPIThisAni=function(e){var t=this;MugedaAPIThisAni.__super__.constructor.apply(t,arguments);var r=t._stage=e.stage;t._aniData=e.aniData,t._scene=null,t._context=null,t._callbacks={},t._renderManager=null,t._displayObjectHash={},t._autoProgressDisabled=!1,mod.definePropertyReadOnly(t,["aniData",proto$1._getAniData,"title",proto$1._getTitle,"width",proto$1._getStageWidth,"height",proto$1._getStageHeight,"rate",proto$1._getStageRate,"dom",proto$1._getStageDom,"scene",proto$1._getScene,"frameTime",proto$1._getFrameTime,"deltaFrame",proto$1._getDeltaFrame,"totalRenderedFrame",proto$1._getTotalFrame,"adaption",proto$1._getAdaption,"renderManager",proto$1._getRenderManager,"root",proto$1._getRoot]),["domready","renderready","scriptready","beforeload","loadprogress","click"].forEach(function(a){r._addEventListener(a,function(n){a==="renderready"&&(t.loadProcess="loaded"),a==="domready"?t._callEvent("imageready",n):t._callEvent(a,n)})})};mod.extend(MugedaAPIThisAni,MugedaAPIEvent);var proto$1=MugedaAPIThisAni.prototype;proto$1._defineCallback=function(e,t){var r=this;r._callbacks[e]=t},proto$1._getCallback=function(e){var t=this;return t._callbacks[e]&&t._callbacks[e]instanceof Function?t._callbacks[e]:null},proto$1._enable3DRendering=function(e){Browser$1.enable3DRendering=e},proto$1._registerScrollableObject=function(e){var t=this;t._renderManager._scrollableObjectList.push(e.dom)},proto$1._disableAutoProgress=function(e){var t=this;t._autoProgressDisabled=e},proto$1._getRoot=function(){return this._stage},proto$1._getRenderManager=function(){return this._renderManager},proto$1._getAdaption=function(){var e=this._stage,t=e._fullScreenRect;return{marginLeft:-t._left,marginRight:t._left+t._width-e._stageWidth,marginTop:-t._top,marginBottom:t._top+t._height-e._stageHeight,width:t._width,height:t._height}},proto$1._getDeltaFrame=function(){var e=this._stage;return e._deltaFrame},proto$1._getTotalFrame=function(){var e=this._stage;return e._totolFrame},proto$1._getScene=function(){return this._scene},proto$1._getStageDom=function(){var e=this._stage;e._id;var t=e._getRenderObject();return t._node},proto$1._getStageWidth=function(){var e=this._stage;return e._stageWidth},proto$1._getStageHeight=function(){var e=this._stage;return e._stageHeight},proto$1._getStageRate=function(){var e=this._stage;return e._frameRate},proto$1._getFrameTime=function(){var e=this._stage;return 1e3/e._frameRate},proto$1._getAniData=function(){return this._aniData},proto$1._getTitle=function(){return this._aniData.title},proto$1._buildAPINet=function(e){var t=this,r=e.children[0],a=t._scene=new MugedaAPIScene({movieClip:r,mugeda:t,id:"_main"});Browser$1._globalObject.Mugeda.scene=t,a._buildAPINet()},proto$1._createInstanceOfSymbol=function(e,t){var r=this,a=r._context,n=a.symbols;for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s._name==e){var _=new s;_._haveAnimation=!0;var l=new MugedaAPIAObject({displayObject:_,id:_._guid,mugeda:r._mugeda}),c=s._aniData,d=99999999,f=-d,u=d,p=-d;c.layers.forEach(function(h,m){h.units.forEach(function(T,y){T.objects.forEach(function(E,g){var b=E.param;d=Math.min(d,b.left),f=Math.max(f,b.right),u=Math.min(u,b.top),p=Math.max(p,b.bottom)})})}),c.bound={left:d,right:f,top:u,bottom:p,width:f-d,height:p-u};var v={param:{name:t||"",guid:Mugeda.guidGen(),rotate:0,left:0,top:0,width:c.bound.width,height:c.bound.height,offsetX:(c.bound.left+c.bound.right-c.cw-c.bound.width)/2,offsetY:(c.bound.top+c.bound.bottom-c.ch-c.bound.height)/2}};return dataConverter.setParamToDisplayObject(v,_,a),l}}},proto$1._loadImage=function(e,t){{var r=t.url;this._renderManager._additionImageList.push(r)}},proto$1._log=function(e,t){Browser$1._globalObject.Mugeda.log(e,t)},proto$1._mute=function(e){e=e!==!1,this._renderManager._mute(e)},mod.exportName(proto$1,["getScene",proto$1._getScene,"createInstanceOfSymbol",proto$1._createInstanceOfSymbol,"enable3DRendering",proto$1._enable3DRendering,"defineCallback",proto$1._defineCallback,"getCallback",proto$1._getCallback,"registerScrollableObject",proto$1._registerScrollableObject,"disableAutoProgress",proto$1._disableAutoProgress,"loadImage",proto$1._loadImage,"log",proto$1._log,"mute",proto$1._mute]);var MugedaAPIAdapt=function(){var e=this;e._stage=null,e._Mugeda=null,e._thisAni=null};MugedaAPIAdapt.createMugedaObject=function(e,t){var r=new MugedaAPIAdapt;e.getMugedaObject=r._getMugedaObject.bind(r);var a=t.root,n=t.aniData;return r._stage=a,r._Mugeda=e,r._thisAni=new MugedaAPIThisAni({aniData:n,stage:a}),r};var proto=MugedaAPIAdapt.prototype;proto._getMugedaObject=function(){return this._thisAni},mod.namespace("Utils.MugedaAPIAdapt",MugedaAPIAdapt);var MugedaCompress={keys:["Ac","action","fM","form","tt","title","wt","width","ht","height","cl","color","sm","symbols","ly","layers","vr","version","sC","scripts","zI","zoomInfo","pd","pid","tp","type","nm","name","un","units","lI","layerId","fS","frameStart","fC","frameCount","ad","animated","vb","visible","ob","objects","pm","param","fI","fillInfo","cv","curve","kf","keyframes","md","mode","tw","tween","hK","hashKey","ix","index","rW","rawWidth","rH","rawHeight","sI","symbolId","oX","offsetX","oY","offsetY","rX","rotateCenterX","rY","rotateCenterY","it","items","nI","nodeId","gP","guidPath","ph","path","gi","guid","sm","smooth","iX","innerX","iY","innerY","uX","outerX","uY","outerY","cX","centerX","cY","centerY","ed","edges","st","section","fZ","fontSize","fT","fontStyle","fW","fontWeight","fF","fontFamily","tA","textAlign","tC","textContent","tL","tlength","tP","tprecision","tN","tDirection","tLp","tloop","tD","textDecoration","rI","rmin","rM","rmax","rT","rinterval","tD","textDecoration","cR","cornerRadius","iS","imageSrc","lC","lineCap","lJ","LineJoin","lT","lineType","lG","lineGap","fR","frameRate","iP","innerPercent","TA","trackAnchors","MT","mugedaTrackAnchors"],unzip:function(e){if(!e)return e;if(e.zip!=1)return window.HaniData.unzip(e);var t=JSON.parse(JSON.stringify(e));if(t=MugedaCompress.unzipKey(t),delete t.zip,t.rate==null&&(t.rate=12),t.width==null&&(t.width=600),t.height==null&&(t.height=400),t.guid==null&&(t.guid=""),t.title==null&&(t.title=""),t.script==null&&(t.script=""),t.loop==null&&(t.loop=!0),t.useCamera==null&&(t.useCamera=!1),t.symbols==null&&(t.symbols=[]),t.symbols.length)for(var r=t.symbols,a=0;a<r.length;a++){var n=r[a];n.runtime=!0,n.dirtyFlag=!1,MugedaCompress.unzipLayers(n.layers)}if(t.pages&&t.pages.length)for(var o=t.pages,a=0;a<o.length;a++){var s=o[a];s.runtime=!0,s.dirtyFlag=!1,MugedaCompress.unzipLayers(s.layers)}return MugedaCompress.unzipZoomInfo(t),MugedaCompress.unzipLayers(t.layers),t},unzipKey:function(data){var reg;data=JSON.stringify(data);for(var i=0;i<MugedaCompress.keys.length;i+=2)reg=eval('/"'+MugedaCompress.keys[i]+'":/g'),data=data.replace(reg,'"'+MugedaCompress.keys[i+1]+'":');return JSON.parse(data)},unzipZoomInfo:function(e){for(var t=[],r=e.zoomInfo.split(",")||[],a=0;a<r.length;a+=4){var n=r[a];if(n.indexOf("i")==0){n=n.substr(1),a++;var o=r[a];o.indexOf("t")==0?(o=o.substr(1),a++):o=null,t[n]={offsetLeft:Number(r[a]),offsetTop:Number(r[a+1]),rotation:Number(r[a+2]),zoomLevel:Number(r[a+3])},o&&(t[n].tween=o)}}e.zoomInfo=t},unzipLayers:function(e){for(var t=0;t<e.length;t++){var r=e[t];r.hide=!1,r.lock=!1;for(var a=r.units,n=0;n<a.length;n++){var o=a[n];o.animated&&MugedaCompress.unzipPath(o);for(var s=o.keyframes||[],_=0;_<s.length;_++){var l=s[_].param;MugedaCompress.unzipParam(l)}o.visible==null&&(o.visible=!0),MugedaCompress.unzipObjects(o.objects)}}},unzipPath:function(e){for(var t=e.path.split(","),r=[],a=t.shift(),n=t.shift(),o=0;o<t.length;o+=7)r.push({id:Number(t[o]),backwardX:Number(t[o+1]),backwardY:Number(t[o+2]),forwardX:Number(t[o+3]),forwardY:Number(t[o+4]),nodeX:Number(t[o+5]),nodeY:Number(t[o+6])});r.length?(e.pathLeft=Number(a),e.pathTop=Number(n),e.path=r):(delete e.path,delete e.pathLeft,delete e.pathTop)},unzipObjects:function(e){for(var t=0;t<e.length;t++){var r=e[t];r.items&&r.items.length?MugedaCompress.unzipObjects(r.items):(r.id=0,r.name="",r.items=[],r.aryAnchors=[]),MugedaCompress.unzipCurve(r),MugedaCompress.unzipParam(r.param)}},unzipCurve:function(e){var t=e.curve;if(typeof t=="string"){e.curve={};var r=t.split(","),a=r.shift()==1;e.curve.closed=a;for(var n=[],o=0;o<r.length;o+=6)n.push({backwardX:Number(r[o]),backwardY:Number(r[o+1]),forwardX:Number(r[o+2]),forwardY:Number(r[o+3]),nodeX:Number(r[o+4]),nodeY:Number(r[o+5])});e.curve.points=n}},unzipParam:function(e){e.strokeType==null&&(e.strokeType=0),e.frameRate==null&&(e.frameRate=12),e.lineCap==null&&(e.lineCap="round"),e.lineJoin==null&&(e.lineJoin="round"),e.lineType==null&&(e.lineJoin="solid");for(var t=e.m.split(";"),r=0;r<t.length;r++){var a=t[r].substr(0,1),n=t[r].substr(1);switch(a){case"L":e.left=Number(n);break;case"R":e.right=Number(n);break;case"T":e.top=Number(n);break;case"B":e.bottom=Number(n);break;case"S":e.startX=Number(n);break;case"P":e.startY=Number(n);break;case"E":e.endX=Number(n);break;case"N":e.endY=Number(n);break;case"X":e.scaleX=Number(n);break;case"Y":e.scaleY=Number(n);break;case"O":e.rotate=Number(n);break;case"W":e.lineWidth=Number(n);break;case"A":e.alpha=Number(n);break;case"C":e.strokeColor=n;break}}e.startX==null&&(e.startX=e.left),e.startY==null&&(e.startY=e.top),e.endX==null&&(e.endX=e.right),e.endY==null&&(e.endY=e.bottom),e.width=e.right-e.left,e.height=e.bottom-e.top,delete e.m,MugedaCompress.unzipFillInfo(e)},unzipFillInfo:function(e){if(e.fillInfo){for(var t=e.fillInfo.split(";"),r=Number(t[0]),a=t[1].split(","),n=t[3],o=t[4],s=t[5],_=t[6],l=t[7],c=t[8],d=[],f=0;f<a.length;f+=5)d.push({p:Number(a[f]),r:Number(a[f+1]),g:Number(a[f+2]),b:Number(a[f+3]),a:Number(a[f+4])});var u={fillStyle:r,fillImage:n,foreground:c,fillColors:d,imagePosition:o,imageSize:s,horOffset:_,verOffset:l},p=t[2].split(",");p.length!=4&&(p=[0,0,0,0]),u.fillStartPos={x:Number(p[0]),y:Number(p[1])},u.fillEndPos={x:Number(p[2]),y:Number(p[3])},e.fillInfo=u}}};mod.namespace("Utils.MugedaCompress",MugedaCompress);var ResourceLoader=function(){var e=this;e._aniDataFirstImageList=null,e._loadingPool=[],e._loadOkList=[],e._dir=null,e._scriptLoadCounter=0,e._scriptLoadProcessChangeCallback=null,e._stage=null};ResourceLoader.prototype._buildFirstPageBitmapLoadProcess=function(e){var t=this,r=goThoughFirstPageAniDataAndFindImage.call(t,e),a=[];for(var n in r)r.hasOwnProperty(n)&&a.push(r[n]);a.forEach(function(l){l.ranges.sort(function(c,d){for(var f=Math.max(c.length,d.length),u=0;u<f;u++){var p=c[u]?c[u][0]:0,v=d[u]?d[u][0]:0;if(p!==v)return p-v}})}),a.sort(function(l,c){return l.ranges[0][0][0]-c.ranges[0][0][0]}),t._aniDataFirstImageList=a.map(function(l){return l.src});var o=e.loadInfo;if(o){var s=o.backgroundImage;s&&t._aniDataFirstImageList.splice(0,0,t._dir.getFullPath(s));var _=o.logoImage;_&&t._aniDataFirstImageList.splice(0,0,t._dir.getFullPath(_))}},ResourceLoader.prototype._firstPageBitmapLoadProcess=function(){var e=this,t=e._loadingPool,r=e._aniDataFirstImageList,a=e._loadOkList;r.forEach(function(n){var o=new Image;o.src=n,t.push(o),o.onload=o.onerror=function(){var s=this,_=t.indexOf(s);t.splice(_,1);var l=s.src;a.push(l)}})},ResourceLoader._getScriptList=function(e,t,r,a){var n={},o=function(v,h){h=h||0,n[h]=n[h]||[],n[h].push(v)},s=(a.script_sub_path||".")+"/",_=e.sL;if(_){if(Mugeda.previewMode)_.cardCommon&&o("/mugeda_client_utils/js/card_common.js");else{_.jquery&&o(t.getFullPath(s+"jquery-3.7.0.min.js")),_.socketio&&(o(t.getFullPath(s+"socket.io.1.9.16.min.js")),o(t.getFullPath(s+"mugeda_connection.js"))),_.box2d&&o(t.getFullPath(s+"Box2D_v2.2.1_min.js")),_.qrcode&&(o(t.getFullPath(s+"qrcode.min.js")),o(t.getFullPath(s+"jquery.qrcode.min.js"),1));var l=a.version?(a.version[0]=="_"?"":"_")+a.version:"";if(_.cardCommon){var c=a.common_path||null;o(t.getFullPath((c?"":s)+"card_common"+l+".js",c))}}var d=_.extra;if(d&&d.length)for(var f=d.length,u=0;u<f;u++){var p=d[u];p.indexOf("://")>-1?o(p):o(t.getFullPath(p))}}return n},ResourceLoader.prototype._loadScript=function(e,t){var r=[],a=0,n=this;for(var o in e)e.hasOwnProperty(o)&&(r.push(o),a+=e[o].length);n._scriptLoadCounter=a,r.sort(function(_,l){return _-l});var s=null;loadScriptOne.bind(n)(r,e,function(){s!=n._scriptLoadCounter&&n._scriptLoadProcessChangeCallback&&(s=n._scriptLoadCounter,n._scriptLoadProcessChangeCallback()),t()})};var loadScriptOne=function(e,t,r){var a=this;if(e.length){var n=e.splice(0,1)[0],o=t[n],s=o.length;s?o.forEach(function(_){var l=new ResourceEvent("beforeload");l._url=_,l._registerCallback(function(){var c=document.createElement("script");c.src=_,c.onload=c.onerror=function(){document.body.removeChild(this),s--,a._scriptLoadCounter--,s==0&&loadScriptOne.bind(a)(e,t,r)},document.body.appendChild(c)}),l._registerFailCallback(function(){s--,a._scriptLoadCounter--,s==0&&loadScriptOne.bind(a)(e,t,r)}),a._stage._dispatchEvent(l),l._chkOk()}):loadScriptOne(e,t,r)}else r()},symHashRaw,goThoughFirstPageAniDataAndFindImage=function(e){var t=this;symHashRaw={},buildAniHash.call(t,e);var r=[];return expandLayers.call(t,e.layers,r),r},buildAniHash=function(e){symHashRaw=function(t){var r={};return(t.symbols||[]).forEach(function(a){r[a.id]=a}),r}(e)},expandLayers=function(e,t){var r=this;e.forEach(function(a){a.units&&expandUnits.call(r,a.units,t)})},expandUnits=function(e,t){var r=this;e.forEach(function(a){var n=a.frameStart,o=n+a.frameCount,s=[n,o];a.objects&&expandObjects.call(r,a.objects,t,s)})},expandObjects=function(e,t,r){var a=this;e.forEach(function(n){handleObject.call(a,n,t,r)})},handleSymbol=function(e){var t=this,r=symHashRaw[e];if(r&&r.layers){var a={};return expandLayers.call(t,r.layers,a),a}},handleObject=function(e,t,r){if(e.param){var a=this;if(e.type===2005)var n=a._dir.getFullPath(e.param.imageSrc);else e.param.fillInfo&&e.param.fillInfo.fillImage&&(n=a._dir.getFullPath(e.param.fillInfo.fillImage));if(n&&(t[n]?t[n].ranges.push([r]):t[n]={ranges:[[r]],src:n}),e.type==2014&&e.items.forEach(function(l){handleObject.call(a,l,t,r)}),e.type==2021){var o=e.param.symbolId,s=handleSymbol.call(a,o);for(n in s)if(s.hasOwnProperty(n)){var _=s[n];_.ranges.forEach(function(l){l.splice(0,0,r)}),t[n]?_.ranges.forEach(function(l){t[n].ranges.push(l)}):t[n]=_}}}};mod.exportName(ResourceLoader.prototype,["loadScript",ResourceLoader.prototype._loadScript]),mod.namespace("Utils.ResourceLoader",ResourceLoader),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,a=function(){},n=function(){return r.apply(this&&!this.Hanimation&&this instanceof a&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,n.prototype=new a,n});const staticProcessBehavitors=e=>{const t=getAllBehaviors(e).filter(r=>r.event==="behavior_success");if(t.length){const r=getAllObjects(e).filter(a=>a.param.action==="behavior");t.forEach(a=>{const n=a.preBehaviorId;for(let o=0;o<r.length;o++){const s=r[o];let _=!1,l=[];const c=s.param.behavior;if(c)try{l=JSON.parse(c)}catch{}if(l.forEach(d=>{if(d.id===n){const f=d.postBehaviorIds||[];f.push(a.id),d.postBehaviorIds=f,_=!0}}),_){s.param.behavior=JSON.stringify(l);break}}})}};class test extends Object{}var Mugeda$1=Browser$1._globalObject.Mugeda=Browser$1._globalObject.Mugeda||{};Mugeda$1.test=test,delete Mugeda$1.test,Mugeda$1.script=Mugeda$1.script||[],Mugeda$1.enable3DRendering=function(e){},Mugeda$1.startAnimation=function(e,t,r,a,n,o,s,_){typeof a=="string"&&(a=[a]);var l=function(M,A){for(var O=M.length,S=0,L=0;L<O&&L<6;L++)S+=M.charCodeAt(O-1-L);return S%A};a.getFullPath=function(M,A){if(typeof M!="string"&&(console.warn("error fileName: "+M),M=""),M.indexOf("/")==0||M.indexOf("://")>-1||M.substr(0,5)==="data:")return M;if(A)return Array.isArray(A)&&(A=A[Math.floor(A.length*Math.random())]),A+M;var O=l(M,a.length);if(Browser$1._supportWebP&&c&&c.metadata){var S=Browser$1._globalObject.Mugeda.imageCompression,L=c.metadata.imageCompression,D=!1;if(L&&L.length)for(var $=0;$<L.length;$++){var R=L[$],I=R.src;if(I.indexOf(M)!==-1){if(D=!0,S)for(var P=0;P<S.length;P++){var N=S[P];if(N.src.indexOf(M)!==-1&&N.nowebp){D=!1;break}}break}}D&&(M=M.replace(/\.(jpg|png)/,".webp"))}return a[O]+M},a.getSamePath=function(M){return typeof M!="string"&&(console.warn("error fileName: "+M),M=""),M.indexOf("/")==0||M.indexOf("://")>-1?M:a[0]+M},a.toString=function(){return a[Math.floor(Math.random()*a.length)]};var c=Mugeda$1.data[e];c.zip&&(c=MugedaCompress.unzip(c),c.script&&c.script.length&&(c.script=unescape(c.script))),Object.keys(Plugin._anidataPlugin).forEach(function(M){var A=Plugin._anidataPlugin[M];A&&(c=A(c))}),Browser$1._globalObject._mrmcp=Browser$1._globalObject._mrmcp||{},!Browser$1._globalObject._mrmcp.data_server&&c.weikaServer&&(Browser$1._globalObject._mrmcp.data_server=c.weikaServer),staticProcessBehavitors(c);var d=new Stage;d._rootId=Common._RegRoot(d),d._mrmcp=s||Browser$1._globalObject._mrmcp;var f=MugedaAPIAdapt.createMugedaObject(Mugeda$1,{root:d,aniData:c});d._aniData=c,Browser$1._globalObject.Mugeda.currentAni=f._thisAni,Browser$1._globalObject.Mugeda.animations=Browser$1._globalObject.Mugeda.animations||[],Browser$1._globalObject.Mugeda.animations.push(f._thisAni),Object.keys(Plugin._commonPlugin).forEach(function(M){var A=Plugin._commonPlugin[M];if(A){var O=new A;O._init(d)}});var u=new ResourceLoader;u._dir=a,u._stage=d;var p={root:d,symbols:{},bitmapRes:{},dir:a,videoRes:{}};d._resource=p;var v=!1,h=ResourceLoader._getScriptList(c,a,t,d._mrmcp);if(t){var m=(d._mrmcp.script_sub_path||".")+"/",T=a.getFullPath(m+t);h[0]=h[0]||[],h[0].push(T),v=!0}else{var y=c.script;setTimeout(function(){if(y){var M=new Function("mugeda",y);M.call(f._thisAni,f._thisAni)}[c].concat(c.pages||[]).forEach(function(A,O){var S=A.ps;S&&(M=new Function("mugeda","pageIndex",S),M.call(f._thisAni,f._thisAni,O))})}),v=!0}f._thisAni._context=p;var E=c.loadInfo||{};E.style||(E.style="default");var g=E.style||"default";if(s.loader=="brightbar"&&g=="default")var b={backgroundColor:"white",progressBackground:"#ddd",progressColor:"#555",progressPosition:"20",style:"bar"};else b=E;if(_=_||Mugeda$1.loadProcessHandleInstance,_)w=function(){return _};else if(b.style&&Mugeda$1.loadProcessHandle&&Mugeda$1.loadProcessHandle[b.style])var w=function(){return new Mugeda$1.loadProcessHandle[b.style]({loadInfo:b,thisAni:f._thisAni,stageDom:r})};var x=f._thisAni._renderManager=new renderManager({loadingPage:w,hasScript:v});p.root._renderManager=x;var C=document.createEvent("Events");C.initEvent("mugedaReady",!1,!0),document.dispatchEvent(C),u._loadScript(h,function(){if(Mugeda$1.script.length){var M=Mugeda$1.script.splice(0,1)[0];setTimeout(function(){M.call(f._thisAni,f._thisAni)})}}),u._buildFirstPageBitmapLoadProcess(c),u._firstPageBitmapLoadProcess(),setTimeout(function(){var M=dataConverter.parseAnidata(c,{resourceLoader:u,resource:p});f._thisAni._resource=M,x._resourceLoader=u,x._mugeda=f._thisAni,f._thisAni.renderManger=x,x.mainStart(M,r)})};var creationToBeLoad="creationToBeLoad";if(Mugeda$1.css3PlayerLoaded=2,Mugeda$1[creationToBeLoad]){for(var i=0;i<Mugeda$1[creationToBeLoad].length;i++)Mugeda$1[creationToBeLoad][i].start();Mugeda$1[creationToBeLoad]=[]}var randPlus=0,guidGen=function(){var e=new Date-new Date("2012/1/1")+""+Math.random().toString().substr(2,4);return Number(e).toString(36)+""+randPlus++};Mugeda$1.guidGen=guidGen,Mugeda$1.log=function(e,t){if(typeof t!="object")var r=!!t;return Mugeda$1.logConsole||(Mugeda$1.logConsole=document.createElement("div"),Mugeda$1.logConsole.style.display="block",Mugeda$1.logConsole.style.position="fixed",Mugeda$1.logConsole.style.background="rgba(0,0,0,0.8)",Mugeda$1.logConsole.style.color="#FFF",Mugeda$1.logConsole.style.width="100%",Mugeda$1.logConsole.style.maxHeight="33%",Mugeda$1.logConsole.style.overflow="auto",Mugeda$1.logConsole.style.wordWrap="break-word",document.body.appendChild(Mugeda$1.logConsole)),t=t||{},Mugeda$1.logConsole.style.left=(t.left||0)+"px",Mugeda$1.logConsole.style.top=(t.top||0)+"px",(typeof e=="string"||e)&&(Mugeda$1.logConsole.innerHTML=r&&Mugeda$1.logConsole.innerHTML?Mugeda$1.logConsole.innerHTML+"<br />"+e:e,Mugeda$1.logConsole.scrollTop=Mugeda$1.logConsole.scrollHeight),Mugeda$1.logConsole.innerHTML},Mugeda$1.getAudioCache=function(e,t){return audioCache[t]};var audioCache={};Mugeda$1.addAudioCache=function(e,t,r){audioCache[e]=t,audioCache["name_"+r]=t},Mugeda$1.removeAudioCache=function(e,t,r){delete audioCache[e],delete audioCache["name_"+r]},Mugeda$1.stopAudio=function(e){e=e||{};var t=e.audio_name||"",r=e.stop_mode||"pause",a=audioCache["name_"+t];a&&(r=="stop"&&(a.currentTime=0),a.pause())},Mugeda$1.stopAudioAll=function(){for(var e in audioCache)audioCache.hasOwnProperty(e)&&audioCache[e].readyState>0&&(audioCache[e].pause(),audioCache[e].pausedByGlobalPause=!0);var t=Browser$1._globalObject.backgroundMusic;t&&(t.pause(),t.pausedByGlobalPause=!0)},Mugeda$1.playAudioAll=function(){var e=Browser$1._globalObject.backgroundMusic;e&&e.pausedByGlobalPause&&(e.play(),e.pausedByGlobalPause=!1)},Mugeda$1.mapFrameNameId={},Mugeda$1.enableFlexibleFrameRate=function(e){};var Toast=function(){};Toast._toastQueue=[],Toast._html_encode=function(e){var t="";return e.length==0?"":(t=e.replace(/&/g,"&gt;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/\n/g,"<br>"),t)};var getDom=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]};Toast._Type={_Toast:"toast",_Info:"info"},mod.exportName(Toast._Type,["toast",Toast._Type._Toast,"info",Toast._Type._Info]);var frameName="MugedaMessageFrame";Toast._info=function(e,t){t=t||{},t.timeout=t.timeout||t.timeout||3e3,t.type=t.type||t.type||Toast._Type._Toast,t.encode=t.encode==null?!0:t.encode;var r=document.body;if(t.type=="info"){var a=document.getElementById(frameName);a==null&&(a=getDom('<div id="'+frameName+'" style="position: fixed; top: 0; width: 100%; left: 0;z-index: 40;"></div>'),r.appendChild(a));var n=getDom('<div class="'+frameName+'_info" style="background: white;overflow: hidden; padding: 14px;'+Browser$1.prefix.css+"border-radius: 1px;"+Browser$1.prefix.css+'box-shadow: 0 0 2px #999; opacity: 0.95;margin: 4px 4px;font-size: 13px;line-height: 1.5em;color: rgba(0,0,0,0.7);">   <span>'+(t.encode?Toast._html_encode(e):e)+'</span>   <span class="MugedaClose" style="float:right;padding: 8px 0 0 8px;">关闭</span></div>');a.insertBefore(n,a.childNodes[0]),a.querySelector(".MugedaClose").addEventListener("click",function(){a.removeChild(n)})}else t.type=="toast"&&(Toast._toastQueue.push([e,t]),Toast._showNextToast())};var showing=!1;Toast._showNextToast=function(){if(!showing){var e=Toast._toastQueue;if(e.length){showing=!0;var t=e.splice(0,1)[0],r=t[1],a=t[0],n="display: "+Browser$1.prefix.css+"box;display: "+Browser$1.prefix.css+"flex;"+Browser$1.prefix.css+"box-orient: vertical;"+Browser$1.prefix.css+"flex-direction: column;"+Browser$1.prefix.css+"box-pack: center;"+Browser$1.prefix.css+"justify-content: center;"+Browser$1.prefix.css+"transition: opacity 200ms;",o=getDom('<div class="'+frameName+'_toast" style="position:fixed;width:80%;bottom:20%;left:10%;opacity:0;'+n+'">   <div style="max-width: 80%;margin:auto;background:black;opacity:0.95;color: white;padding: 4px 8px;font-size: 14px;border-radius: 12px;">'+(r.encode?Toast._html_encode(a):a)+"</div></div>"),s=document.querySelector('[data-type="stage"]');s.appendChild(o),setTimeout(function(){o.style.cssText+="opacity: 1",setTimeout(function(){o.style.cssText+="opacity: 0",setTimeout(function(){showing=!1,s.removeChild(o),Toast._showNextToast()},500)},r.timeout)},200)}}},mod.exportName(Toast,["info",Toast._info,"type",Toast._Type]),mod.namespace("Utils.Toast",Toast);var TextFieldUtils=function(){},escapeText=function(e){var t=function(n){return a[n]},r=/[&"'<>]/g,a={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\n":"<br />"};return e.replace(r,t)};TextFieldUtils.extractFontsFromHTML=function(e){const t=new Map,a=new DOMParser().parseFromString(e,"text/html");function n(_,l){const c=_.textContent.trim();c.length>0&&(t.has(l)?t.get(l).add(c):t.set(l,new Set(c)))}function o(_){var l;if(_.nodeType===Node.TEXT_NODE){const c=_.parentNode;if((l=c==null?void 0:c.tagName)==null||l.toLowerCase(),c&&c.style&&c.style.fontFamily){const d=c.style.fontFamily;n(_,d)}}else if(_.nodeType===Node.ELEMENT_NODE)for(let c of _.childNodes)o(c)}const s=a.querySelector("head style");if(s){const _=s.sheet.cssRules;for(let l of _)if(l.type===CSSRule.STYLE_RULE){const c=l.selectorText,d=l.style;if(d.fontFamily)switch(c){case"div":case"p":{const f=a.querySelector("div");n(f,d.fontFamily)}break}}}return o(a.body),Array.from(t,([_,l])=>({font:_,texts:Array.from(l).join("")}))},TextFieldUtils.transAniDataCss=function(e){var a;let t="";if(e){var r=(a=e==null?void 0:e.fillInfo)==null?void 0:a.fillColors[0];const n=r?"rgba("+r.r+","+r.g+","+r.b+","+r.a+")":"rgba(0,0,0,1)";t=`
      font-family: ${e.fontFamily};
      text-align: ${e.textAlign};
      color: ${n};
      font-size: ${e.fontSize}px;
      line-height: ${e.textLineHeight/100||1};
      ${e.fontWeight&&e.fontWeight!=="normal"?"font-weight: bold;":""}
      ${e.textDecoration&&e.textDecoration!=="none"?"text-decoration: underline;":""}
      ${e.fontStyle&&e.fontStyle!=="normal"?"font-style: italic;":""}`;const o=e.tO?e.tO||"hidden":"visible",s=o==="scroll"||o==="scrollNoBar"||o==="manualScroll"||o==="manualScrollNoBar";o!="visible"&&(t+="overflow: "+(s?"auto":o)+";")}return t},TextFieldUtils.initOuterCss=function(e){return`<style>
    div {
      ${this.transAniDataCss(e)}
    }
    p {
      margin-block-start: 0; margin-block-end: 0;
    }
  </style>`.replace(/\s+(?![^;]*;)/g,"")},TextFieldUtils.transText2Slate=function(e,t){const r=e.split(`
`);let a='<p">';for(let n=0;n<r.length;n++)a+="<span>"+escapeText(r[n])+"</span>",n<r.length-1&&(a+="<br />");return a+="</p>",a},TextFieldUtils.transSlate2Text=function(e){var t=new DOMParser,r=t.parseFromString(e,"text/html"),a=r.querySelector("p"),n=a.textContent;return n},mod.namespace("Utils.TextFieldUtils",TextFieldUtils)})();
