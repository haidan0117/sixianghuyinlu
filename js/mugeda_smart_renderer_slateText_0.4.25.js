(function(){"use strict";var g=typeof self>"u"?window:self,_=globalThis.Mugine=globalThis.Mugine||{},u={};const m=u.namespace=function(e,t){var i=_;t==null&&(t={}),e=e.split(".");var n=i,o=e.length;return e.forEach(function(r,a){n[r]==null&&(o-1===a?n[r]=t:n[r]={}),n=n[r]}),t},y=u.exportName=function(e,t){var i=t.length,n,o,r;for(r=0;r<i;r+=2)n=t[r],o=t[r+1],e[n]=o};var T={}.hasOwnProperty;const x=u.extend=function(e,t){for(var i in t)T.call(t,i)&&(e[i]=t[i]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=e.__super__=t.prototype,e};var b=function(){throw new ReferenceError};u.definePropertyReadOnly=function(e,t){var i=t.length,n={},o,r,a;for(a=0;a<i;a+=2)o=t[a],r=t[a+1],n[o]={get:r,set:b,configurable:!0};Object.defineProperties(e,n)},u.definePropertyGetSet=function(e,t){var i=t.length,n={},o,r,a,c;for(c=0;c<i;c+=3)o=t[c],r=t[c+1],a=t[c+2],n[o]={get:r,set:a,configurable:!0};Object.defineProperties(e,n)},u.debounce=function(e,t,i){var n;return function(){var o=this,r=arguments,a=function(){n=null,i||e.apply(o,r)},c=i&&!n;clearTimeout(n),n=setTimeout(a,t),c&&e.apply(o,r)}},u.getWndSize=function(){var e=document.documentElement,t=e&&e.clientHeight===0;function i(){var r=document,a=r.createElement("div");a.style.height="2500px",r.body.insertBefore(a,r.body.firstChild);var c=r.documentElement.clientHeight>2400;return r.body.removeChild(a),c}var n=window.top===window;if(typeof document.clientWidth=="number")return{width:document.clientWidth,height:document.clientHeight};if(n&&(t||i())){var o=document.body;return{width:o.clientWidth,height:o.clientHeight}}else return{width:e.clientWidth,height:e.clientHeight}};var f={};u._jsonp=function(e,t,i){if(f[e])return f[e].push(i);f[e]=[i];var n=function(a,c){f[e].forEach(function(l){l(a,c)})},o=document.createElement("script");o.src=e,window[t]=function(a){n(null,a),r()},o.onload=function(){o.parentNode&&(n(!0),r())},o.onerror=function(){n(!0),r()};var r=function(){o.parentNode.removeChild(o),delete f[e]};document.body.appendChild(o)},g.MugineRequire=u.require=function(e){var t=_;return e.split("/").forEach(function(i){if(t=t[i],!t)return console.error("module not found: "+e)}),t},m("Utils.Module",u),y(u,["require",u.require,"namespace",u.namespace,"extend",u.extend,"definePropertyReadOnly",u.definePropertyReadOnly,"definePropertyGetSet",u.definePropertyGetSet]);var C=MugineRequire("Utils/Module"),O=MugineRequire("Text/TextField"),w=MugineRequire("Utils/Plugin"),s=function(){s.__super__.constructor.apply(this,arguments);var e=this;e._richContent=null,e._isRich=!1};x(s,O);var d=s.prototype;d.parseParamToDisplayObject=function(e,t){this._richContent=t.param.richContent,s.__super__.parseParamToDisplayObject.apply(this,arguments),this._isRich=!!t.param.richContent},d._updateDisplayObjectFromTransform=function(e){s.__super__._updateDisplayObjectFromTransform.apply(this,arguments)},s._createChildClass=function(e,t){var i=function(n){var o=this;this._resource=t,i.__super__.constructor.apply(this,arguments),n&&n.addChild(o)};return C.extend(i,s),i},d._getHtmlText=function(){return this._isRich?this._richContent:s.__super__._getHtmlText.apply(this,arguments)};function R(e){const t=document.createElement("div");t.innerHTML=e;function i(r){return["p","div","li"].includes(r)}function n(r){return r.textContent.replace(/[\u200B-\u200D\uFEFF\s]/g,"")}function o(r){let a="";function c(l){if(l.nodeType===Node.TEXT_NODE)a+=l.textContent;else if(l.nodeType===Node.ELEMENT_NODE){const h=l.tagName.toLowerCase();if(h==="br")a+=`
`;else{if(i(h)&&(a&&!a.endsWith(`
`)&&(a+=`
`),!n(l))){a+=`
`;return}for(let v of l.childNodes)c(v);i(h)&&!a.endsWith(`
`)&&(a+=`
`)}}}return c(r),a.trim()}return o(t)}d._setText=function(e,t){var i=this,n=i._aniData.param.richContent,o=R(n);e!==o&&(delete i._aniData.param.richContent,i._isRich=!1),s.__super__._setText.apply(i,arguments)},m("Text.SlateText",s),w._registerDisplayObjectClass(2010,s);var E=MugineRequire("Utils/Module"),P=MugineRequire("Render/RenderObjectTextField"),N=MugineRequire("Utils/Plugin"),p=function(){p.__super__.constructor.apply(this,arguments)};E.extend(p,P),p.prototype,N._registerRenderObjectClass(2010,p)})();
